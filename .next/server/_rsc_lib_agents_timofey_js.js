"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_lib_agents_timofey_js";
exports.ids = ["_rsc_lib_agents_timofey_js"];
exports.modules = {

/***/ "(rsc)/./extractors/index.js":
/*!*****************************!*\
  !*** ./extractors/index.js ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { sanitizeSnippet } = __webpack_require__(/*! ../utils/sanitizeSnippet */ \"(rsc)/./utils/sanitizeSnippet.js\");\nconst { extractDomainFromUrl } = __webpack_require__(/*! ../utils/normalize */ \"(rsc)/./utils/normalize.js\");\nconst stripHtml = (html = \"\")=>String(html).replace(/<script[\\s\\S]*?<\\/script>/gi, \" \").replace(/<style[\\s\\S]*?<\\/style>/gi, \" \").replace(/<[^>]+>/g, \" \").replace(/\\s+/g, \" \").trim();\nconst extractTitle = (html = \"\")=>{\n    const match = String(html).match(/<title>([^<]+)<\\/title>/i);\n    return match ? match[1].trim() : \"\";\n};\nconst genericExtract = (html = \"\", url = \"\")=>{\n    const title = extractTitle(html);\n    const text = stripHtml(html);\n    const snippet = sanitizeSnippet(text.slice(0, 200));\n    return {\n        fields: {\n            title,\n            snippet,\n            domain: extractDomainFromUrl(url),\n            url\n        },\n        proof_items: snippet ? [\n            {\n                url,\n                source_type: \"generic\",\n                signal_type: \"snippet\",\n                signal_value: title || \"page\",\n                evidence_snippet: snippet\n            }\n        ] : [],\n        warnings: []\n    };\n};\nconst domainExtractors = {\n    \"yandex.ru\": genericExtract,\n    \"2gis.ru\": genericExtract,\n    \"avito.ru\": genericExtract,\n    \"wildberries.ru\": genericExtract,\n    \"ozon.ru\": genericExtract,\n    \"vk.com\": genericExtract,\n    \"t.me\": genericExtract,\n    \"telegram.me\": genericExtract\n};\nconst resolveExtractor = (url = \"\")=>{\n    const domain = extractDomainFromUrl(url);\n    const entry = Object.entries(domainExtractors).find(([key])=>domain.includes(key));\n    return entry ? entry[1] : genericExtract;\n};\nconst extractFromHtml = (html = \"\", url = \"\")=>{\n    const extractor = resolveExtractor(url);\n    return extractor(html, url);\n};\nmodule.exports = {\n    extractFromHtml,\n    genericExtract,\n    domainExtractors\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9leHRyYWN0b3JzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7QUFBQSxNQUFNLEVBQUVBLGVBQWUsRUFBRSxHQUFHQyxtQkFBT0EsQ0FBQyxrRUFBMEI7QUFDOUQsTUFBTSxFQUFFQyxvQkFBb0IsRUFBRSxHQUFHRCxtQkFBT0EsQ0FBQyxzREFBb0I7QUFFN0QsTUFBTUUsWUFBWSxDQUFDQyxPQUFPLEVBQUUsR0FDMUJDLE9BQU9ELE1BQ0pFLE9BQU8sQ0FBQywrQkFBK0IsS0FDdkNBLE9BQU8sQ0FBQyw2QkFBNkIsS0FDckNBLE9BQU8sQ0FBQyxZQUFZLEtBQ3BCQSxPQUFPLENBQUMsUUFBUSxLQUNoQkMsSUFBSTtBQUVULE1BQU1DLGVBQWUsQ0FBQ0osT0FBTyxFQUFFO0lBQzdCLE1BQU1LLFFBQVFKLE9BQU9ELE1BQU1LLEtBQUssQ0FBQztJQUNqQyxPQUFPQSxRQUFRQSxLQUFLLENBQUMsRUFBRSxDQUFDRixJQUFJLEtBQUs7QUFDbkM7QUFFQSxNQUFNRyxpQkFBaUIsQ0FBQ04sT0FBTyxFQUFFLEVBQUVPLE1BQU0sRUFBRTtJQUN6QyxNQUFNQyxRQUFRSixhQUFhSjtJQUMzQixNQUFNUyxPQUFPVixVQUFVQztJQUN2QixNQUFNVSxVQUFVZCxnQkFBZ0JhLEtBQUtFLEtBQUssQ0FBQyxHQUFHO0lBQzlDLE9BQU87UUFDTEMsUUFBUTtZQUNOSjtZQUNBRTtZQUNBRyxRQUFRZixxQkFBcUJTO1lBQzdCQTtRQUNGO1FBQ0FPLGFBQWFKLFVBQ1Q7WUFDRTtnQkFDRUg7Z0JBQ0FRLGFBQWE7Z0JBQ2JDLGFBQWE7Z0JBQ2JDLGNBQWNULFNBQVM7Z0JBQ3ZCVSxrQkFBa0JSO1lBQ3BCO1NBQ0QsR0FDRCxFQUFFO1FBQ05TLFVBQVUsRUFBRTtJQUNkO0FBQ0Y7QUFFQSxNQUFNQyxtQkFBbUI7SUFDdkIsYUFBYWQ7SUFDYixXQUFXQTtJQUNYLFlBQVlBO0lBQ1osa0JBQWtCQTtJQUNsQixXQUFXQTtJQUNYLFVBQVVBO0lBQ1YsUUFBUUE7SUFDUixlQUFlQTtBQUNqQjtBQUVBLE1BQU1lLG1CQUFtQixDQUFDZCxNQUFNLEVBQUU7SUFDaEMsTUFBTU0sU0FBU2YscUJBQXFCUztJQUNwQyxNQUFNZSxRQUFRQyxPQUFPQyxPQUFPLENBQUNKLGtCQUFrQkssSUFBSSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxHQUFLYixPQUFPYyxRQUFRLENBQUNEO0lBQy9FLE9BQU9KLFFBQVFBLEtBQUssQ0FBQyxFQUFFLEdBQUdoQjtBQUM1QjtBQUVBLE1BQU1zQixrQkFBa0IsQ0FBQzVCLE9BQU8sRUFBRSxFQUFFTyxNQUFNLEVBQUU7SUFDMUMsTUFBTXNCLFlBQVlSLGlCQUFpQmQ7SUFDbkMsT0FBT3NCLFVBQVU3QixNQUFNTztBQUN6QjtBQUVBdUIsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZIO0lBQ0F0QjtJQUNBYztBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvYWJ1emFkYS9EZXNrdG9wL2FnZW50T1MvZXh0cmFjdG9ycy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHNhbml0aXplU25pcHBldCB9ID0gcmVxdWlyZShcIi4uL3V0aWxzL3Nhbml0aXplU25pcHBldFwiKTtcbmNvbnN0IHsgZXh0cmFjdERvbWFpbkZyb21VcmwgfSA9IHJlcXVpcmUoXCIuLi91dGlscy9ub3JtYWxpemVcIik7XG5cbmNvbnN0IHN0cmlwSHRtbCA9IChodG1sID0gXCJcIikgPT5cbiAgU3RyaW5nKGh0bWwpXG4gICAgLnJlcGxhY2UoLzxzY3JpcHRbXFxzXFxTXSo/PFxcL3NjcmlwdD4vZ2ksIFwiIFwiKVxuICAgIC5yZXBsYWNlKC88c3R5bGVbXFxzXFxTXSo/PFxcL3N0eWxlPi9naSwgXCIgXCIpXG4gICAgLnJlcGxhY2UoLzxbXj5dKz4vZywgXCIgXCIpXG4gICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpXG4gICAgLnRyaW0oKTtcblxuY29uc3QgZXh0cmFjdFRpdGxlID0gKGh0bWwgPSBcIlwiKSA9PiB7XG4gIGNvbnN0IG1hdGNoID0gU3RyaW5nKGh0bWwpLm1hdGNoKC88dGl0bGU+KFtePF0rKTxcXC90aXRsZT4vaSk7XG4gIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdLnRyaW0oKSA6IFwiXCI7XG59O1xuXG5jb25zdCBnZW5lcmljRXh0cmFjdCA9IChodG1sID0gXCJcIiwgdXJsID0gXCJcIikgPT4ge1xuICBjb25zdCB0aXRsZSA9IGV4dHJhY3RUaXRsZShodG1sKTtcbiAgY29uc3QgdGV4dCA9IHN0cmlwSHRtbChodG1sKTtcbiAgY29uc3Qgc25pcHBldCA9IHNhbml0aXplU25pcHBldCh0ZXh0LnNsaWNlKDAsIDIwMCkpO1xuICByZXR1cm4ge1xuICAgIGZpZWxkczoge1xuICAgICAgdGl0bGUsXG4gICAgICBzbmlwcGV0LFxuICAgICAgZG9tYWluOiBleHRyYWN0RG9tYWluRnJvbVVybCh1cmwpLFxuICAgICAgdXJsXG4gICAgfSxcbiAgICBwcm9vZl9pdGVtczogc25pcHBldFxuICAgICAgPyBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgc291cmNlX3R5cGU6IFwiZ2VuZXJpY1wiLFxuICAgICAgICAgICAgc2lnbmFsX3R5cGU6IFwic25pcHBldFwiLFxuICAgICAgICAgICAgc2lnbmFsX3ZhbHVlOiB0aXRsZSB8fCBcInBhZ2VcIixcbiAgICAgICAgICAgIGV2aWRlbmNlX3NuaXBwZXQ6IHNuaXBwZXRcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIDogW10sXG4gICAgd2FybmluZ3M6IFtdXG4gIH07XG59O1xuXG5jb25zdCBkb21haW5FeHRyYWN0b3JzID0ge1xuICBcInlhbmRleC5ydVwiOiBnZW5lcmljRXh0cmFjdCxcbiAgXCIyZ2lzLnJ1XCI6IGdlbmVyaWNFeHRyYWN0LFxuICBcImF2aXRvLnJ1XCI6IGdlbmVyaWNFeHRyYWN0LFxuICBcIndpbGRiZXJyaWVzLnJ1XCI6IGdlbmVyaWNFeHRyYWN0LFxuICBcIm96b24ucnVcIjogZ2VuZXJpY0V4dHJhY3QsXG4gIFwidmsuY29tXCI6IGdlbmVyaWNFeHRyYWN0LFxuICBcInQubWVcIjogZ2VuZXJpY0V4dHJhY3QsXG4gIFwidGVsZWdyYW0ubWVcIjogZ2VuZXJpY0V4dHJhY3Rcbn07XG5cbmNvbnN0IHJlc29sdmVFeHRyYWN0b3IgPSAodXJsID0gXCJcIikgPT4ge1xuICBjb25zdCBkb21haW4gPSBleHRyYWN0RG9tYWluRnJvbVVybCh1cmwpO1xuICBjb25zdCBlbnRyeSA9IE9iamVjdC5lbnRyaWVzKGRvbWFpbkV4dHJhY3RvcnMpLmZpbmQoKFtrZXldKSA9PiBkb21haW4uaW5jbHVkZXMoa2V5KSk7XG4gIHJldHVybiBlbnRyeSA/IGVudHJ5WzFdIDogZ2VuZXJpY0V4dHJhY3Q7XG59O1xuXG5jb25zdCBleHRyYWN0RnJvbUh0bWwgPSAoaHRtbCA9IFwiXCIsIHVybCA9IFwiXCIpID0+IHtcbiAgY29uc3QgZXh0cmFjdG9yID0gcmVzb2x2ZUV4dHJhY3Rvcih1cmwpO1xuICByZXR1cm4gZXh0cmFjdG9yKGh0bWwsIHVybCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZXh0cmFjdEZyb21IdG1sLFxuICBnZW5lcmljRXh0cmFjdCxcbiAgZG9tYWluRXh0cmFjdG9yc1xufTtcbiJdLCJuYW1lcyI6WyJzYW5pdGl6ZVNuaXBwZXQiLCJyZXF1aXJlIiwiZXh0cmFjdERvbWFpbkZyb21VcmwiLCJzdHJpcEh0bWwiLCJodG1sIiwiU3RyaW5nIiwicmVwbGFjZSIsInRyaW0iLCJleHRyYWN0VGl0bGUiLCJtYXRjaCIsImdlbmVyaWNFeHRyYWN0IiwidXJsIiwidGl0bGUiLCJ0ZXh0Iiwic25pcHBldCIsInNsaWNlIiwiZmllbGRzIiwiZG9tYWluIiwicHJvb2ZfaXRlbXMiLCJzb3VyY2VfdHlwZSIsInNpZ25hbF90eXBlIiwic2lnbmFsX3ZhbHVlIiwiZXZpZGVuY2Vfc25pcHBldCIsIndhcm5pbmdzIiwiZG9tYWluRXh0cmFjdG9ycyIsInJlc29sdmVFeHRyYWN0b3IiLCJlbnRyeSIsIk9iamVjdCIsImVudHJpZXMiLCJmaW5kIiwia2V5IiwiaW5jbHVkZXMiLCJleHRyYWN0RnJvbUh0bWwiLCJleHRyYWN0b3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./extractors/index.js\n");

/***/ }),

/***/ "(rsc)/./lib/agents/timofey.js":
/*!*******************************!*\
  !*** ./lib/agents/timofey.js ***!
  \*******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { canonicalizeUrl } = __webpack_require__(/*! ./webClient.js */ \"(rsc)/./lib/agents/webClient.js\");\nconst { wrapAgentOutput, unwrapLegacy } = __webpack_require__(/*! ../../utils/agentEnvelope.js */ \"(rsc)/./utils/agentEnvelope.js\");\nconst { sanitizeSnippet } = __webpack_require__(/*! ../../utils/sanitizeSnippet.js */ \"(rsc)/./utils/sanitizeSnippet.js\");\nconst { applyBudget, applyBudgetMeta } = __webpack_require__(/*! ../../utils/budget.js */ \"(rsc)/./utils/budget.js\");\nconst { extractFromHtml } = __webpack_require__(/*! ../../extractors */ \"(rsc)/./extractors/index.js\");\nconst DEFAULT_AGENTOS_CONTEXT = {\n    name: \"AgentOS\",\n    one_liner: \"Маркетплейс и оркестрация ИИ-агентов для бизнеса: лидоген, поддержка, контент, аналитика, автоматизация процессов\",\n    pricing_monthly_rub: 5000,\n    no_trial: true\n};\nconst inputDefaults = {\n    mode: \"deep\",\n    has_web_access: true,\n    max_web_requests: null,\n    geo: \"Россия\",\n    focus_segments: [\n        \"sellers\",\n        \"local\",\n        \"b2b\"\n    ],\n    niche_hint: \"\",\n    competitor_types: [\n        \"ai_agency\",\n        \"chatbots\",\n        \"wb_ozon_marketing\",\n        \"call_center\",\n        \"crm_impl\"\n    ],\n    include_pricing: true,\n    include_cases: true,\n    require_proof: true,\n    recency_days: 365,\n    allow_placeholders_if_blocked: true,\n    exclude_domains: [],\n    agentos_context: {\n        ...DEFAULT_AGENTOS_CONTEXT\n    }\n};\nconst inputSchema = {\n    type: \"object\",\n    additionalProperties: false,\n    properties: {\n        mode: {\n            type: \"string\",\n            enum: [\n                \"quick\",\n                \"deep\",\n                \"continue\",\n                \"refresh\"\n            ],\n            default: \"deep\"\n        },\n        has_web_access: {\n            type: \"boolean\",\n            default: true\n        },\n        max_web_requests: {\n            type: \"number\"\n        },\n        geo: {\n            type: \"string\",\n            default: \"Россия\"\n        },\n        focus_segments: {\n            type: \"array\",\n            items: {\n                type: \"string\",\n                enum: [\n                    \"sellers\",\n                    \"local\",\n                    \"b2b\"\n                ]\n            },\n            default: [\n                \"sellers\",\n                \"local\",\n                \"b2b\"\n            ]\n        },\n        niche_hint: {\n            type: \"string\"\n        },\n        competitor_types: {\n            type: \"array\",\n            items: {\n                type: \"string\",\n                enum: [\n                    \"ai_agency\",\n                    \"chatbots\",\n                    \"wb_ozon_marketing\",\n                    \"call_center\",\n                    \"crm_impl\"\n                ]\n            },\n            default: [\n                \"ai_agency\",\n                \"chatbots\",\n                \"wb_ozon_marketing\",\n                \"call_center\",\n                \"crm_impl\"\n            ]\n        },\n        include_pricing: {\n            type: \"boolean\",\n            default: true\n        },\n        include_cases: {\n            type: \"boolean\",\n            default: true\n        },\n        require_proof: {\n            type: \"boolean\",\n            default: true\n        },\n        recency_days: {\n            type: \"number\",\n            default: 365\n        },\n        allow_placeholders_if_blocked: {\n            type: \"boolean\",\n            default: true\n        },\n        exclude_domains: {\n            type: \"array\",\n            items: {\n                type: \"string\"\n            },\n            default: []\n        },\n        agentos_context: {\n            type: \"object\"\n        }\n    },\n    required: [\n        \"mode\",\n        \"has_web_access\"\n    ],\n    default: inputDefaults\n};\nconst outputSchema = {\n    type: \"object\",\n    required: [\n        \"competitors\",\n        \"pricing_evidence\",\n        \"comparison_table\",\n        \"win_angles\",\n        \"agentos_positioning\",\n        \"offers\",\n        \"meta\"\n    ],\n    additionalProperties: false,\n    properties: {\n        competitors: {\n            type: \"array\"\n        },\n        pricing_evidence: {\n            type: \"object\"\n        },\n        comparison_table: {\n            type: \"array\"\n        },\n        win_angles: {\n            type: \"array\"\n        },\n        agentos_positioning: {\n            type: \"object\"\n        },\n        offers: {\n            type: \"object\"\n        },\n        meta: {\n            type: \"object\"\n        }\n    }\n};\nconst COMPARISON_COLUMNS = [\n    \"УТП\",\n    \"сегменты\",\n    \"оффер\",\n    \"цены\",\n    \"кейсы\",\n    \"гарантии\",\n    \"скорость\",\n    \"договор/акты\",\n    \"каналы\",\n    \"слабые места\"\n];\nconst TYPE_TO_SEGMENTS = {\n    ai_agency: \"sellers/local/b2b\",\n    chatbots: \"local/b2b\",\n    wb_ozon_marketing: \"sellers\",\n    call_center: \"local/b2b\",\n    crm_impl: \"b2b\"\n};\nconst systemPrompt = `Ты — ИИ-агент agentOS: \"Тимофей — Анализ конкурентов\".\nРоль: искать конкурентов/альтернативы в РФ и формировать сравнение, углы выигрыша и позиционирование AgentOS.\nНикаких выдумок: все утверждения только с proof_items.`;\nconst timofeyAgent = {\n    id: \"timofey-competitor-analysis-ru\",\n    displayName: \"Тимофей — Анализ конкурентов\",\n    description: \"Ищет конкурентов/альтернативы в РФ, делает сравнение и формулирует позиционирование AgentOS.\",\n    inputSchema,\n    outputSchema,\n    systemPrompt\n};\nconst wrapOutput = (legacyOutput, input)=>wrapAgentOutput({\n        agentId: timofeyAgent.id,\n        inputEcho: input,\n        mode: input.mode,\n        legacyOutput\n    });\nconst sanitizeEvidenceSnippet = (text, max = 160)=>sanitizeSnippet(text, max);\nconst resolveMaxRequests = (mode, maxRequests)=>{\n    if (typeof maxRequests === \"number\" && Number.isFinite(maxRequests) && maxRequests > 0) {\n        return Math.round(maxRequests);\n    }\n    return mode === \"quick\" ? 30 : 80;\n};\nconst normalizeInput = (input)=>{\n    const safe = typeof input === \"object\" && input !== null ? input : {};\n    const budget = safe.budget && typeof safe.budget === \"object\" ? safe.budget : null;\n    const mode = safe.mode === \"quick\" || safe.mode === \"continue\" || safe.mode === \"refresh\" ? safe.mode : \"deep\";\n    const focus_segments = Array.isArray(safe.focus_segments) ? safe.focus_segments.filter((item)=>[\n            \"sellers\",\n            \"local\",\n            \"b2b\"\n        ].includes(item)) : [\n        \"sellers\",\n        \"local\",\n        \"b2b\"\n    ];\n    const competitor_types = Array.isArray(safe.competitor_types) ? safe.competitor_types.filter((item)=>[\n            \"ai_agency\",\n            \"chatbots\",\n            \"wb_ozon_marketing\",\n            \"call_center\",\n            \"crm_impl\"\n        ].includes(item)) : [\n        \"ai_agency\",\n        \"chatbots\",\n        \"wb_ozon_marketing\",\n        \"call_center\",\n        \"crm_impl\"\n    ];\n    const agentos_context = safe.agentos_context && typeof safe.agentos_context === \"object\" ? {\n        ...DEFAULT_AGENTOS_CONTEXT,\n        ...safe.agentos_context\n    } : {\n        ...DEFAULT_AGENTOS_CONTEXT\n    };\n    const normalized = {\n        mode,\n        has_web_access: typeof safe.has_web_access === \"boolean\" ? safe.has_web_access : true,\n        max_web_requests: resolveMaxRequests(mode, safe.max_web_requests),\n        geo: typeof safe.geo === \"string\" && safe.geo.trim() ? safe.geo.trim() : \"Россия\",\n        focus_segments,\n        niche_hint: typeof safe.niche_hint === \"string\" ? safe.niche_hint.trim() : \"\",\n        competitor_types,\n        include_pricing: typeof safe.include_pricing === \"boolean\" ? safe.include_pricing : true,\n        include_cases: typeof safe.include_cases === \"boolean\" ? safe.include_cases : true,\n        require_proof: typeof safe.require_proof === \"boolean\" ? safe.require_proof : true,\n        recency_days: typeof safe.recency_days === \"number\" && Number.isFinite(safe.recency_days) ? Math.max(1, Math.round(safe.recency_days)) : 365,\n        allow_placeholders_if_blocked: typeof safe.allow_placeholders_if_blocked === \"boolean\" ? safe.allow_placeholders_if_blocked : true,\n        exclude_domains: Array.isArray(safe.exclude_domains) ? safe.exclude_domains.filter((item)=>typeof item === \"string\" && item.trim()) : [],\n        agentos_context\n    };\n    const budgetResult = applyBudget(normalized, budget, {\n        maxWebRequestsPath: [\n            \"max_web_requests\"\n        ]\n    });\n    normalized.budget = budget;\n    normalized.budget_applied = budgetResult.budget_applied;\n    normalized.budget_warnings = budgetResult.warnings;\n    return normalized;\n};\nconst SEARCH_QUERIES = {\n    ai_agency: [\n        \"AI агентство автоматизация бизнеса\",\n        \"AI ассистенты для бизнеса\"\n    ],\n    chatbots: [\n        \"чат-боты для продаж\",\n        \"чат-бот поддержка VK Telegram\"\n    ],\n    wb_ozon_marketing: [\n        \"маркетинг WB Ozon агентство\",\n        \"продвижение на Wildberries\"\n    ],\n    call_center: [\n        \"колл-центр лидоген\",\n        \"обработка заявок колл-центр\"\n    ],\n    crm_impl: [\n        \"внедрение amoCRM\",\n        \"внедрение Bitrix24\",\n        \"CRM интегратор\"\n    ]\n};\nconst SEGMENT_QUERIES = {\n    sellers: [\n        \"для селлеров\",\n        \"маркетплейс\"\n    ],\n    local: [\n        \"для локального бизнеса\",\n        \"услуги\"\n    ],\n    b2b: [\n        \"B2B\",\n        \"для бизнеса\"\n    ]\n};\nconst buildSearchPlan = (input)=>{\n    const queries = [];\n    input.competitor_types.forEach((type)=>{\n        const base = SEARCH_QUERIES[type] || [];\n        base.forEach((query)=>{\n            queries.push(query);\n            if (input.niche_hint) queries.push(`${query} ${input.niche_hint}`);\n        });\n    });\n    input.focus_segments.forEach((segment)=>{\n        (SEGMENT_QUERIES[segment] || []).forEach((hint)=>{\n            queries.push(`AI автоматизация ${hint}`);\n            if (input.niche_hint) queries.push(`${input.niche_hint} ${hint}`);\n        });\n    });\n    const deduped = [\n        ...new Set(queries.map((item)=>item.trim()).filter(Boolean))\n    ];\n    return deduped;\n};\nconst sourceTypeForUrl = (url)=>{\n    try {\n        const host = new URL(url).hostname.toLowerCase();\n        if (host.includes(\"vk.com\") || host.includes(\"t.me\")) return \"social\";\n        return \"website\";\n    } catch  {\n        return \"other\";\n    }\n};\nconst extractCompetitorName = (url, title = \"\")=>{\n    if (title) {\n        return title.split(\"|\")[0].split(\"—\")[0].trim();\n    }\n    try {\n        return new URL(url).hostname.replace(/^www\\./, \"\");\n    } catch  {\n        return url;\n    }\n};\nconst extractSignalsFromPage = (page, competitorName, pageType, proofItems)=>{\n    const text = page.text || \"\";\n    const lower = text.toLowerCase();\n    const proofs = [];\n    const pushProof = (signalType, signalValue, snippet)=>{\n        const proof = {\n            url: page.url,\n            competitor_name: competitorName,\n            source_type: sourceTypeForUrl(page.url),\n            page_type: pageType,\n            signal_type: signalType,\n            signal_value: signalValue,\n            evidence_snippet: sanitizeEvidenceSnippet(snippet || `${signalType}: ${signalValue}`)\n        };\n        const index = proofItems.length + proofs.length;\n        proofs.push({\n            ...proof,\n            _index: index\n        });\n    };\n    if (pageType === \"pricing\") {\n        const priceMatch = text.match(/(от\\s*)?(\\d{2,6})\\s*(₽|руб|руб\\.)/i);\n        if (priceMatch) {\n            const value = Number(priceMatch[2]);\n            pushProof(\"pricing_from\", value, `price_from=${value}`);\n        } else if (/по запросу|индивидуально/i.test(text)) {\n            pushProof(\"pricing_request\", \"по запросу\", \"pricing: по запросу\");\n        }\n    }\n    if (pageType === \"cases\" && /кейс|case|проект/i.test(text)) {\n        pushProof(\"case_presence\", \"cases\", \"cases: mentioned\");\n        const metric = text.match(/(ROI|рост|увеличение)\\s*\\+?(\\d{1,3})%/i);\n        if (metric) {\n            pushProof(\"case_metric\", `${metric[1]} ${metric[2]}%`, `case_metric=${metric[1]} ${metric[2]}%`);\n        }\n    }\n    if (/гарант|SLA|договор/i.test(text)) {\n        pushProof(\"guarantee_or_contract\", \"mentioned\", \"guarantee/contract mentioned\");\n    }\n    if (/запуск\\s*за\\s*\\d+|быстрый\\s*запуск/i.test(text)) {\n        const match = text.match(/запуск\\s*за\\s*(\\d+\\s*дн)/i);\n        pushProof(\"launch_speed\", match ? match[0] : \"быстрый запуск\", match ? match[0] : \"fast launch\");\n    }\n    const promiseMatch = text.match(/(увеличим|рост|повысим|привлечем|увеличение)\\s+[\\w\\s]+/i);\n    if (promiseMatch) {\n        pushProof(\"promise\", promiseMatch[0], promiseMatch[0]);\n    }\n    if (/не гарантируем|без гарантий/i.test(lower)) {\n        pushProof(\"not_promised\", \"без гарантий\", \"не гарантируем\");\n    }\n    const seoHint = /seo|поисков/i.test(lower);\n    if (seoHint) {\n        pushProof(\"channel_seo\", \"seo\", \"channel: seo\");\n    }\n    const directHint = /директ|yandex\\s*direct/i.test(lower);\n    if (directHint) {\n        pushProof(\"channel_yandex_direct\", \"yandex_direct\", \"channel: yandex direct\");\n    }\n    return proofs;\n};\nconst buildCompetitorFromSignals = (name, primaryUrl, type, geo, signals, proofRefs)=>{\n    const pricingProof = signals.find((item)=>item.signal_type.startsWith(\"pricing\"));\n    const pricing_model = {\n        model: pricingProof ? \"from\" : \"unknown\",\n        price_from_rub: pricingProof && typeof pricingProof.signal_value === \"number\" ? pricingProof.signal_value : null,\n        price_note: pricingProof && typeof pricingProof.signal_value === \"string\" ? pricingProof.signal_value : null,\n        unknown: !pricingProof\n    };\n    const casesProof = signals.find((item)=>item.signal_type === \"case_presence\");\n    const cases = {\n        has_cases: Boolean(casesProof),\n        examples_short: casesProof ? [\n            \"кейсы упомянуты\"\n        ] : [],\n        unknown: !casesProof\n    };\n    const promises = signals.filter((item)=>item.signal_type === \"promise\").map((item)=>String(item.signal_value));\n    const not_promised = signals.filter((item)=>item.signal_type === \"not_promised\").map((item)=>String(item.signal_value));\n    const launchProof = signals.find((item)=>item.signal_type === \"launch_speed\");\n    const guaranteesProof = signals.find((item)=>item.signal_type === \"guarantee_or_contract\");\n    const channels = {\n        seo: signals.some((item)=>item.signal_type === \"channel_seo\"),\n        yandex_direct_hint: signals.some((item)=>item.signal_type === \"channel_yandex_direct\"),\n        vk: primaryUrl.includes(\"vk.com\"),\n        telegram: primaryUrl.includes(\"t.me\"),\n        cold_outreach_hint: signals.some((item)=>item.signal_type === \"cold_outreach\"),\n        unknown: !signals.some((item)=>item.signal_type.startsWith(\"channel_\"))\n    };\n    return {\n        name,\n        primary_url: primaryUrl,\n        type,\n        geo,\n        pricing_model,\n        cases,\n        promises,\n        not_promised,\n        launch_speed: {\n            text: launchProof ? String(launchProof.signal_value) : null,\n            unknown: !launchProof\n        },\n        guarantees_contract: {\n            text: guaranteesProof ? String(guaranteesProof.signal_value) : null,\n            unknown: !guaranteesProof\n        },\n        channels,\n        proof_refs: proofRefs\n    };\n};\nconst uniqueRefs = (refs)=>[\n        ...new Set((Array.isArray(refs) ? refs : []).filter((item)=>Number.isInteger(item)))\n    ];\nconst pickRefsByPrefix = (signalRefMap, prefixes)=>{\n    const map = signalRefMap && typeof signalRefMap === \"object\" ? signalRefMap : {};\n    const refSet = new Set();\n    Object.entries(map).forEach(([key, refs])=>{\n        if (prefixes.some((prefix)=>key === prefix || key.startsWith(prefix))) {\n            uniqueRefs(refs).forEach((ref)=>refSet.add(ref));\n        }\n    });\n    return [\n        ...refSet\n    ].sort((a, b)=>a - b);\n};\nconst buildColumnCell = (value, proofRefs)=>{\n    const refs = uniqueRefs(proofRefs).slice(0, 5);\n    if (!refs.length) {\n        return {\n            value: \"unknown\",\n            proof_refs: []\n        };\n    }\n    return {\n        value: value || \"unknown\",\n        proof_refs: refs\n    };\n};\nconst channelsToText = (channels)=>{\n    if (!channels || typeof channels !== \"object\") return \"\";\n    const list = [];\n    if (channels.seo) list.push(\"SEO\");\n    if (channels.yandex_direct_hint) list.push(\"Yandex Direct\");\n    if (channels.vk) list.push(\"VK\");\n    if (channels.telegram) list.push(\"Telegram\");\n    if (channels.cold_outreach_hint) list.push(\"Cold outreach\");\n    return list.join(\", \");\n};\nconst detectWeakPoints = (competitor)=>{\n    const weaknesses = [];\n    if (competitor?.pricing_model?.unknown) weaknesses.push(\"цены не раскрыты\");\n    if (competitor?.cases?.unknown) weaknesses.push(\"кейсы не раскрыты\");\n    if (competitor?.launch_speed?.unknown) weaknesses.push(\"скорость не раскрыта\");\n    if (competitor?.guarantees_contract?.unknown) weaknesses.push(\"условия договора не раскрыты\");\n    return weaknesses.join(\"; \");\n};\nconst buildComparisonRow = (competitor)=>{\n    const signalRefMap = competitor?._signal_ref_map || {};\n    const fallbackRefs = uniqueRefs(competitor?.proof_refs || []);\n    const pricingRefs = pickRefsByPrefix(signalRefMap, [\n        \"pricing_\"\n    ]);\n    const caseRefs = pickRefsByPrefix(signalRefMap, [\n        \"case_\"\n    ]);\n    const guaranteeRefs = pickRefsByPrefix(signalRefMap, [\n        \"guarantee_or_contract\"\n    ]);\n    const speedRefs = pickRefsByPrefix(signalRefMap, [\n        \"launch_speed\"\n    ]);\n    const channelRefs = pickRefsByPrefix(signalRefMap, [\n        \"channel_\"\n    ]);\n    const promiseRefs = pickRefsByPrefix(signalRefMap, [\n        \"promise\"\n    ]);\n    const contractRefs = pickRefsByPrefix(signalRefMap, [\n        \"guarantee_or_contract\"\n    ]);\n    const pricingValue = competitor?.pricing_model?.unknown ? \"цены не указаны\" : competitor?.pricing_model?.price_from_rub ? `от ${competitor.pricing_model.price_from_rub} ₽` : competitor?.pricing_model?.price_note || \"по запросу\";\n    const casesValue = competitor?.cases?.unknown ? \"кейсы не указаны\" : competitor?.cases?.examples_short?.join(\"; \") || \"кейсы упомянуты\";\n    const values = {\n        \"УТП\": buildColumnCell(competitor?.promises?.[0] || competitor?.not_promised?.[0] || \"\", promiseRefs.length ? promiseRefs : fallbackRefs),\n        сегменты: buildColumnCell(TYPE_TO_SEGMENTS[competitor?.type] || \"\", fallbackRefs),\n        оффер: buildColumnCell(competitor?.promises?.slice(0, 2).join(\"; \") || competitor?.not_promised?.[0] || \"\", promiseRefs.length ? promiseRefs : fallbackRefs),\n        цены: buildColumnCell(pricingValue, pricingRefs),\n        кейсы: buildColumnCell(casesValue, caseRefs),\n        гарантии: buildColumnCell(competitor?.guarantees_contract?.text || \"гарантии не указаны\", guaranteeRefs),\n        скорость: buildColumnCell(competitor?.launch_speed?.text || \"скорость не указана\", speedRefs),\n        \"договор/акты\": buildColumnCell(competitor?.guarantees_contract?.text || \"договор/акты не указаны\", contractRefs),\n        каналы: buildColumnCell(channelsToText(competitor?.channels), channelRefs),\n        \"слабые места\": buildColumnCell(detectWeakPoints(competitor), fallbackRefs)\n    };\n    return {\n        competitor_name: competitor?.name || \"\",\n        column_order: COMPARISON_COLUMNS,\n        columns: values\n    };\n};\nconst buildPricingEvidence = (competitors)=>{\n    const items = Array.isArray(competitors) ? competitors : [];\n    const perCompetitor = items.map((competitor)=>{\n        const signalRefMap = competitor?._signal_ref_map || {};\n        const pricingRefs = pickRefsByPrefix(signalRefMap, [\n            \"pricing_\"\n        ]);\n        const checked = Array.isArray(competitor?._pricing_checked_urls) ? competitor._pricing_checked_urls : [];\n        return {\n            competitor_name: competitor?.name || \"\",\n            status: pricingRefs.length ? \"pricing_found\" : \"pricing_unknown\",\n            what_checked: checked.length ? checked : [\n                \"home\",\n                \"/pricing\",\n                \"/prices\"\n            ],\n            proof_refs: pricingRefs\n        };\n    });\n    const checkedAll = [\n        ...new Set(perCompetitor.flatMap((item)=>item.what_checked || []))\n    ];\n    const anyPricing = perCompetitor.some((item)=>item.status === \"pricing_found\");\n    return {\n        status: anyPricing ? \"pricing_found\" : \"pricing_unknown\",\n        pricing_unknown: !anyPricing,\n        what_checked: checkedAll,\n        competitors: perCompetitor\n    };\n};\nconst computeProofCoverageRatio = (comparisonTable, winAngles)=>{\n    const rows = Array.isArray(comparisonTable) ? comparisonTable : [];\n    const angles = Array.isArray(winAngles) ? winAngles : [];\n    let total = 0;\n    let covered = 0;\n    rows.forEach((row)=>{\n        const columns = row && row.columns && typeof row.columns === \"object\" ? row.columns : {};\n        COMPARISON_COLUMNS.forEach((column)=>{\n            total += 1;\n            const refs = uniqueRefs(columns[column]?.proof_refs);\n            if (refs.length > 0) covered += 1;\n        });\n    });\n    angles.forEach((angle)=>{\n        total += 1;\n        if (uniqueRefs(angle?.proof_refs).length > 0) covered += 1;\n    });\n    if (total === 0) return 0;\n    return Number((covered / total).toFixed(3));\n};\nconst evaluateProofCoverage = (ratio)=>{\n    const numeric = Number.isFinite(Number(ratio)) ? Number(ratio) : 0;\n    if (numeric < 0.4) {\n        return {\n            needsReview: true,\n            warnings: [],\n            limitations: [\n                \"low_proof_coverage\"\n            ]\n        };\n    }\n    if (numeric < 0.6) {\n        return {\n            needsReview: false,\n            warnings: [\n                \"low_proof_coverage\"\n            ],\n            limitations: []\n        };\n    }\n    return {\n        needsReview: false,\n        warnings: [],\n        limitations: []\n    };\n};\nconst summarizeTrace = (trace)=>{\n    return trace.reduce((acc, item)=>{\n        const key = `${item.domain}:${item.type}`;\n        acc[key] = (acc[key] ?? 0) + 1;\n        return acc;\n    }, {});\n};\nconst generateOutput = async (rawInput = {}, options = {})=>{\n    const input = normalizeInput(rawInput);\n    const webClient = options.webClient;\n    const lastData = unwrapLegacy(options.last_run);\n    const previousQueries = input.mode === \"continue\" && lastData && lastData.meta && lastData.meta.search_plan && Array.isArray(lastData.meta.search_plan.queries_used) ? lastData.meta.search_plan.queries_used : null;\n    const queries = previousQueries && previousQueries.length ? previousQueries : buildSearchPlan(input);\n    const search_plan = {\n        queries_used: queries\n    };\n    if (!input.has_web_access || !webClient) {\n        const emptyOffers = {\n            sellers_offer: {\n                offer_name: \"AgentOS для селлеров\",\n                target_segment: \"sellers\",\n                promise: \"Пилот с прозрачной ценой и коротким запуском.\",\n                what_you_get: [],\n                time_to_value_estimate: \"3–7 дней\",\n                onboarding_steps: [],\n                pricing: \"unknown\",\n                objections_and_answers: [],\n                risk_reversal: \"Стартуем с пилота без долгого контракта.\",\n                first_step: \"Мини-аудит и план пилота.\",\n                cta: \"Согласовать пилот\"\n            },\n            local_offer: {\n                offer_name: \"AgentOS для локального бизнеса\",\n                target_segment: \"local\",\n                promise: \"Пилот на одном канале без KPI-обещаний.\",\n                what_you_get: [],\n                time_to_value_estimate: \"3–7 дней\",\n                onboarding_steps: [],\n                pricing: \"unknown\",\n                objections_and_answers: [],\n                risk_reversal: \"Ограничиваемся пилотом и фиксируем выводы.\",\n                first_step: \"Мини-аудит потока обращений.\",\n                cta: \"Согласовать пилот\"\n            },\n            b2b_offer: {\n                offer_name: \"AgentOS для B2B\",\n                target_segment: \"b2b\",\n                promise: \"Пилот на одном этапе пресейла без долгого обязательства.\",\n                what_you_get: [],\n                time_to_value_estimate: \"3–7 дней\",\n                onboarding_steps: [],\n                pricing: \"unknown\",\n                objections_and_answers: [],\n                risk_reversal: \"Пилот без KPI-обещаний и без длинного контракта.\",\n                first_step: \"Мини-аудит текущего пресейла.\",\n                cta: \"Согласовать пилот\"\n            }\n        };\n        const legacyOutput = {\n            competitors: [],\n            pricing_evidence: {\n                status: \"pricing_unknown\",\n                pricing_unknown: true,\n                what_checked: [],\n                competitors: []\n            },\n            comparison_table: [],\n            win_angles: [\n                {\n                    what_to_say: \"Начнем с пилота и прозрачной рамки без ретейнера.\",\n                    proof_to_show: \"Публичных цен у конкурентов может не быть.\",\n                    target_segment: \"sellers\",\n                    proof_refs: []\n                },\n                {\n                    what_to_say: \"Сфокусируемся на одной боли и проверим ценность на коротком отрезке.\",\n                    proof_to_show: \"Сравнить можно после сбора публичных сигналов.\",\n                    target_segment: \"local\",\n                    proof_refs: []\n                },\n                {\n                    what_to_say: \"Для B2B безопаснее стартовать с мини-пилота и измерить процесс.\",\n                    proof_to_show: \"Нужен доступ к открытым данным по конкурентам.\",\n                    target_segment: \"b2b\",\n                    proof_refs: []\n                }\n            ],\n            agentos_positioning: {},\n            offers: emptyOffers,\n            meta: {\n                generated_at: new Date().toISOString(),\n                web_stats: {\n                    requests_made: 0,\n                    blocked_count: 0,\n                    errors_count: 0,\n                    duration_ms: 0,\n                    sources_used: {},\n                    top_errors: [],\n                    warnings: [],\n                    trace_summary: {}\n                },\n                proof_items: [],\n                limitations: [\n                    \"Нет веб-доступа для поиска конкурентов.\"\n                ],\n                assumptions: [],\n                search_plan,\n                quality_checks: {\n                    no_fabrication: true,\n                    pricing_unknown_rate: 1,\n                    cases_unknown_rate: 1,\n                    proof_coverage_ratio: 0\n                }\n            }\n        };\n        applyBudgetMeta(legacyOutput.meta, input);\n        return {\n            output: wrapOutput(legacyOutput, input),\n            effectiveInput: input\n        };\n    }\n    const excludeDomains = new Set(input.exclude_domains.map((item)=>item.toLowerCase()));\n    const seedLimit = input.mode === \"quick\" ? 30 : 60;\n    const competitorSeeds = new Map();\n    for (const query of queries){\n        const results = await webClient.search(query, \"yandex\", input.mode === \"quick\" ? 4 : 6);\n        results.forEach((item)=>{\n            const url = canonicalizeUrl(item.url);\n            try {\n                const host = new URL(url).hostname.replace(/^www\\./, \"\");\n                if (excludeDomains.has(host)) return;\n                if (!competitorSeeds.has(host) && competitorSeeds.size < seedLimit) {\n                    competitorSeeds.set(host, {\n                        url,\n                        query\n                    });\n                }\n            } catch  {\n                return;\n            }\n        });\n    }\n    const proofItems = [];\n    const competitors = [];\n    const comparison_table = [];\n    const limitations = [];\n    for (const [host, seed] of competitorSeeds.entries()){\n        const primaryUrl = seed.url;\n        const type = input.competitor_types.find((t)=>seed.query.includes(\"WB\") ? t : t) || \"ai_agency\";\n        const geo = input.geo;\n        const pagesToFetch = [\n            {\n                url: primaryUrl,\n                type: \"home\"\n            },\n            {\n                url: `${primaryUrl.replace(/\\/$/, \"\")}/pricing`,\n                type: \"pricing\"\n            },\n            {\n                url: `${primaryUrl.replace(/\\/$/, \"\")}/prices`,\n                type: \"pricing\"\n            },\n            {\n                url: `${primaryUrl.replace(/\\/$/, \"\")}/cases`,\n                type: \"cases\"\n            },\n            {\n                url: `${primaryUrl.replace(/\\/$/, \"\")}/services`,\n                type: \"services\"\n            },\n            {\n                url: `${primaryUrl.replace(/\\/$/, \"\")}/contacts`,\n                type: \"contacts\"\n            }\n        ];\n        const pagesBatch = pagesToFetch.slice(0, 4);\n        const signals = [];\n        const proofRefs = [];\n        const signalRefMap = {};\n        const pricingCheckedUrls = [];\n        let blockedCount = 0;\n        const addSignalRef = (signalType, index)=>{\n            const key = typeof signalType === \"string\" && signalType.trim() ? signalType : \"snippet\";\n            if (!Array.isArray(signalRefMap[key])) {\n                signalRefMap[key] = [];\n            }\n            signalRefMap[key].push(index);\n        };\n        for (const pageRef of pagesBatch){\n            if (pageRef.type === \"pricing\") {\n                try {\n                    pricingCheckedUrls.push(new URL(pageRef.url).pathname || pageRef.url);\n                } catch  {\n                    pricingCheckedUrls.push(pageRef.url);\n                }\n            }\n            const page = await webClient.fetchPage(pageRef.url, {\n                type: pageRef.type\n            });\n            if (\"blocked\" in page) {\n                blockedCount += 1;\n                continue;\n            }\n            const name = extractCompetitorName(page.url, page.title);\n            const genericExtract = extractFromHtml(page.html || \"\", page.url);\n            if (genericExtract && Array.isArray(genericExtract.proof_items)) {\n                genericExtract.proof_items.forEach((item)=>{\n                    const index = proofItems.length;\n                    proofItems.push({\n                        url: item.url || page.url,\n                        competitor_name: name,\n                        source_type: pageRef.type,\n                        page_type: pageRef.type,\n                        signal_type: item.signal_type || \"snippet\",\n                        signal_value: item.signal_value || item.url || \"snippet\",\n                        evidence_snippet: sanitizeEvidenceSnippet(item.evidence_snippet || \"\")\n                    });\n                    proofRefs.push(index);\n                    addSignalRef(item.signal_type || \"snippet\", index);\n                });\n            }\n            const proofs = extractSignalsFromPage(page, name, pageRef.type, proofItems);\n            proofs.forEach((proof)=>{\n                const index = proofItems.length;\n                proofItems.push({\n                    url: proof.url,\n                    competitor_name: proof.competitor_name,\n                    source_type: proof.source_type,\n                    page_type: proof.page_type,\n                    signal_type: proof.signal_type,\n                    signal_value: proof.signal_value,\n                    evidence_snippet: sanitizeEvidenceSnippet(proof.evidence_snippet)\n                });\n                proofRefs.push(index);\n                addSignalRef(proof.signal_type, index);\n                signals.push({\n                    ...proof,\n                    _index: index\n                });\n            });\n        }\n        if (blockedCount >= pagesBatch.length && !input.allow_placeholders_if_blocked) {\n            limitations.push(`Источник недоступен: ${primaryUrl}`);\n            continue;\n        }\n        const competitorName = extractCompetitorName(primaryUrl, \"\");\n        const competitor = buildCompetitorFromSignals(competitorName, primaryUrl, type, geo, signals, [\n            ...new Set(proofRefs)\n        ]);\n        competitor._signal_ref_map = signalRefMap;\n        competitor._pricing_checked_urls = pricingCheckedUrls;\n        if (input.require_proof) {\n            if (competitor.pricing_model.unknown) competitor.pricing_model.unknown = true;\n            if (competitor.cases.unknown) competitor.cases.unknown = true;\n        }\n        competitors.push(competitor);\n        comparison_table.push(buildComparisonRow(competitor));\n    }\n    const pricingUnknownRate = competitors.length === 0 ? 1 : competitors.filter((item)=>item.pricing_model.unknown).length / competitors.length;\n    const casesUnknownRate = competitors.length === 0 ? 1 : competitors.filter((item)=>item.cases.unknown).length / competitors.length;\n    const pricing_evidence = buildPricingEvidence(competitors);\n    const firstRow = comparison_table[0] || {\n        columns: {}\n    };\n    const pricingGapRefs = uniqueRefs(firstRow.columns?.[\"цены\"]?.proof_refs || []);\n    const speedRefs = uniqueRefs(firstRow.columns?.[\"скорость\"]?.proof_refs || []);\n    const weakRefs = uniqueRefs(firstRow.columns?.[\"слабые места\"]?.proof_refs || []);\n    const fallbackRefs = proofItems.length ? [\n        0\n    ] : [];\n    const win_angles = [\n        {\n            what_to_say: \"Начнем с мини-аудита и прозрачного пилота без ретейнера, чтобы вы увидели ценность за 3–7 дней.\",\n            proof_to_show: \"Покажите, где у конкурентов цены не раскрыты или только «по запросу».\",\n            target_segment: \"sellers\",\n            proof_refs: pricingGapRefs.length ? pricingGapRefs : fallbackRefs\n        },\n        {\n            what_to_say: \"Закроем рутину заявок и ответов как продукт, а не как ручную услугу команды подрядчика.\",\n            proof_to_show: \"Покажите разрыв: обещания есть, но SLA/гарантии и договорные рамки описаны слабо.\",\n            target_segment: \"local\",\n            proof_refs: weakRefs.length ? weakRefs : fallbackRefs\n        },\n        {\n            what_to_say: \"Для B2B выгоднее стартовать с пилота на одном процессе и масштабировать после проверки сигнала.\",\n            proof_to_show: \"Покажите, что скорость запуска и кейсы у части рынка не подтверждены публично.\",\n            target_segment: \"b2b\",\n            proof_refs: speedRefs.length ? speedRefs : fallbackRefs\n        }\n    ];\n    const agentos_positioning = {\n        differentiators: [\n            \"Продуктовый подход вместо агентских часов\",\n            \"Быстрый запуск за 3–7 дней\",\n            \"Единый стек агентов под лидоген/поддержку/контент\"\n        ],\n        anti_bullshit_lines: [\n            \"Мы не обещаем KPI без данных\",\n            \"Не агентство и не фриланс — продукт с прозрачной ценой\",\n            \"Сначала пилот, затем масштабирование\"\n        ],\n        ready_phrases: [\n            \"AgentOS — оркестратор агентов под ключевые процессы бизнеса.\",\n            \"Запуск первого агента за 3–7 дней.\",\n            \"Прозрачная цена 5000 ₽/мес без скрытых ставок.\",\n            \"Фокус на скорости ответа и качестве контента.\",\n            \"Не обещаем KPI без данных — сначала диагностика.\",\n            \"Можно подключить WB/Ozon, сайт и мессенджеры в один поток.\",\n            \"Автоматизируем рутину: лиды, поддержка, отчеты.\",\n            \"Пилот → измерение → масштабирование.\",\n            \"Работаем в РФ, с учетом локальных каналов.\",\n            \"Агенты можно настраивать под отраслевые сценарии.\"\n        ],\n        battlecard: [\n            {\n                question: \"У нас уже агентство\",\n                answer: \"AgentOS закрывает рутину дешевле и быстрее, агентство не нужно на постоянке.\"\n            },\n            {\n                question: \"Нам нужен колл‑центр\",\n                answer: \"Часть обращений можно закрыть агентами, люди остаются для сложных кейсов.\"\n            },\n            {\n                question: \"Мы боимся обещаний\",\n                answer: \"Мы не обещаем KPI без данных — сначала пилот и метрики.\"\n            },\n            {\n                question: \"Сложно внедрять\",\n                answer: \"Стартуем с одного процесса, 3–7 дней на запуск.\"\n            },\n            {\n                question: \"Нужны кейсы\",\n                answer: \"Показываем быстрый пилот на ваших данных.\"\n            },\n            {\n                question: \"Дорого\",\n                answer: \"Базовый план 5000 ₽/мес, дальше масштабирование.\"\n            }\n        ]\n    };\n    const offers = {\n        sellers_offer: {\n            offer_name: \"AgentOS для селлеров\",\n            target_segment: \"sellers\",\n            promise: \"Ускоряем ответы и обновление карточек без обещаний KPI\",\n            what_you_get: [\n                \"Автоответы на отзывы\",\n                \"Контент для карточек\",\n                \"Мониторинг вопросов\"\n            ],\n            time_to_value_estimate: \"3–7 дней\",\n            onboarding_steps: [\n                \"Бриф\",\n                \"Доступ к кабинету\",\n                \"Пилот\"\n            ],\n            pricing: \"5000 ₽/мес базовый план\",\n            objections_and_answers: [\n                \"У нас есть менеджер → агент ускорит рутину\",\n                \"Дорого → базовый план 5000 ₽/мес\",\n                \"Сложно → начнем с 1 категории\"\n            ],\n            risk_reversal: \"Если пилот не заходит, фиксируем выводы и останавливаем без долгого контракта.\",\n            first_step: \"Мини-аудит карточек и отзывов + пилот на 1 категории (3–7 дней).\",\n            cta: \"Запустить пилот на 1 категории\"\n        },\n        local_offer: {\n            offer_name: \"AgentOS для локального бизнеса\",\n            target_segment: \"local\",\n            promise: \"Автоматизируем заявки и отзывы без обещаний KPI\",\n            what_you_get: [\n                \"Ответы на отзывы\",\n                \"Квалификация лидов\",\n                \"Напоминания\"\n            ],\n            time_to_value_estimate: \"3–5 дней\",\n            onboarding_steps: [\n                \"Бриф\",\n                \"Подключение каналов\",\n                \"Пилот\"\n            ],\n            pricing: \"5000 ₽/мес базовый план\",\n            objections_and_answers: [\n                \"Есть администратор → снимем рутину\",\n                \"Нет времени → запуск за неделю\",\n                \"Сомневаемся → пилот\"\n            ],\n            risk_reversal: \"Стартуем с одного канала и прекращаем после пилота, если формат не подходит.\",\n            first_step: \"Мини-аудит воронки записи/обращений и тест на одном канале (3–5 дней).\",\n            cta: \"Запустить пилот на 1 канале\"\n        },\n        b2b_offer: {\n            offer_name: \"AgentOS для B2B\",\n            target_segment: \"b2b\",\n            promise: \"Ускоряем пресейл и обработку лидов без обещаний KPI\",\n            what_you_get: [\n                \"Квалификация лидов\",\n                \"Черновики КП\",\n                \"Follow‑ups\"\n            ],\n            time_to_value_estimate: \"5–7 дней\",\n            onboarding_steps: [\n                \"Бриф\",\n                \"Интеграция CRM\",\n                \"Пилот\"\n            ],\n            pricing: \"5000 ₽/мес базовый план\",\n            objections_and_answers: [\n                \"Длинный цикл → ускорим пресейл\",\n                \"Нужна точность → пилот\",\n                \"Сложно → начнем с 1 процесса\"\n            ],\n            risk_reversal: \"Пилот на одном пресейл-процессе без обещаний KPI и без долгих обязательств.\",\n            first_step: \"Мини-аудит пресейла + пилот на 1 этапе (квалификация или follow-up).\",\n            cta: \"Запустить пилот на 1 сегменте лидов\"\n        }\n    };\n    const proof_coverage_ratio = computeProofCoverageRatio(comparison_table, win_angles);\n    const proofCoverageStatus = evaluateProofCoverage(proof_coverage_ratio);\n    const warnings = [\n        ...proofCoverageStatus.warnings\n    ];\n    const needsReview = proofCoverageStatus.needsReview;\n    proofCoverageStatus.limitations.forEach((item)=>limitations.push(item));\n    const stats = webClient.getStats();\n    const trace = webClient.getTrace();\n    const publicCompetitors = competitors.map((item)=>{\n        const next = {\n            ...item\n        };\n        delete next._signal_ref_map;\n        delete next._pricing_checked_urls;\n        return next;\n    });\n    const output = {\n        competitors: publicCompetitors,\n        pricing_evidence,\n        comparison_table,\n        win_angles,\n        agentos_positioning,\n        offers,\n        meta: {\n            generated_at: new Date().toISOString(),\n            web_stats: {\n                requests_made: stats.requests_made,\n                blocked_count: stats.blocked_count,\n                errors_count: stats.errors_count,\n                duration_ms: stats.duration_ms,\n                sources_used: {\n                    yandex: trace.filter((item)=>item.domain.includes(\"yandex\")).length,\n                    wb: trace.filter((item)=>item.domain.includes(\"wildberries\")).length,\n                    ozon: trace.filter((item)=>item.domain.includes(\"ozon\")).length,\n                    vk: trace.filter((item)=>item.domain.includes(\"vk.com\")).length,\n                    tg: trace.filter((item)=>item.domain.includes(\"t.me\")).length,\n                    websites: trace.filter((item)=>!item.domain.includes(\"yandex\") && !item.domain.includes(\"wildberries\") && !item.domain.includes(\"ozon\") && !item.domain.includes(\"vk.com\") && !item.domain.includes(\"t.me\")).length\n                },\n                top_errors: stats.top_errors || [],\n                warnings: stats.warnings || [],\n                trace_summary: summarizeTrace(trace)\n            },\n            proof_items: proofItems,\n            needsReview,\n            warnings,\n            limitations,\n            assumptions: [],\n            search_plan,\n            quality_checks: {\n                no_fabrication: proofItems.length > 0,\n                pricing_unknown_rate: pricingUnknownRate,\n                cases_unknown_rate: casesUnknownRate,\n                proof_coverage_ratio\n            }\n        }\n    };\n    applyBudgetMeta(output.meta, input);\n    const envelope = wrapOutput(output, input);\n    if (input.mode === \"refresh\" && options.last_run) {\n        const prev = unwrapLegacy(options.last_run);\n        const prevCompetitors = Array.isArray(prev.competitors) ? prev.competitors : [];\n        const currentCompetitors = Array.isArray(output.competitors) ? output.competitors : [];\n        const key = (item)=>`${item.primary_url || item.name || \"\"}`.toLowerCase();\n        const prevKeys = new Set(prevCompetitors.map(key));\n        const currentKeys = new Set(currentCompetitors.map(key));\n        const diff = {\n            added: [\n                ...currentKeys\n            ].filter((k)=>!prevKeys.has(k)),\n            removed: [\n                ...prevKeys\n            ].filter((k)=>!currentKeys.has(k))\n        };\n        if (envelope.meta && envelope.meta.handoff && envelope.meta.handoff.entities) {\n            envelope.meta.handoff.entities.diff = diff;\n        }\n    }\n    return {\n        output: envelope,\n        effectiveInput: input\n    };\n};\nconst generateTimofeyOutput = async (input = {}, options = {})=>{\n    const result = await generateOutput(input, options);\n    return result.output;\n};\nconst validateTimofeyOutput = (payload)=>{\n    const errors = [];\n    const legacy = unwrapLegacy(payload);\n    if (!legacy || typeof legacy !== \"object\") {\n        return {\n            valid: false,\n            errors: [\n                \"Output must be an object.\"\n            ]\n        };\n    }\n    payload = legacy;\n    if (!payload.pricing_evidence || typeof payload.pricing_evidence !== \"object\") {\n        errors.push(\"pricing_evidence is required.\");\n    } else {\n        const status = payload.pricing_evidence.status;\n        if (![\n            \"pricing_found\",\n            \"pricing_unknown\"\n        ].includes(status)) {\n            errors.push(\"pricing_evidence.status must be pricing_found|pricing_unknown.\");\n        }\n        if (!Array.isArray(payload.pricing_evidence.what_checked)) {\n            errors.push(\"pricing_evidence.what_checked must be an array.\");\n        }\n    }\n    if (!Array.isArray(payload.comparison_table)) {\n        errors.push(\"comparison_table must be an array.\");\n    } else {\n        payload.comparison_table.forEach((row, rowIndex)=>{\n            if (!row || typeof row !== \"object\") {\n                errors.push(`comparison_table[${rowIndex}] must be an object.`);\n                return;\n            }\n            if (!row.columns || typeof row.columns !== \"object\") {\n                errors.push(`comparison_table[${rowIndex}].columns is required.`);\n                return;\n            }\n            if (!Array.isArray(row.column_order) || row.column_order.length !== COMPARISON_COLUMNS.length || row.column_order.some((item, idx)=>item !== COMPARISON_COLUMNS[idx])) {\n                errors.push(`comparison_table[${rowIndex}].column_order must match fixed columns.`);\n            }\n            COMPARISON_COLUMNS.forEach((column)=>{\n                const cell = row.columns[column];\n                if (!cell || typeof cell !== \"object\") {\n                    errors.push(`comparison_table[${rowIndex}].columns.${column} is required.`);\n                    return;\n                }\n                if (!Array.isArray(cell.proof_refs)) {\n                    errors.push(`comparison_table[${rowIndex}].columns.${column}.proof_refs must be array.`);\n                }\n                if (cell.value !== \"unknown\" && (!Array.isArray(cell.proof_refs) || cell.proof_refs.length === 0)) {\n                    errors.push(`comparison_table[${rowIndex}].columns.${column} must have proof_refs for non-unknown values.`);\n                }\n            });\n        });\n    }\n    if (!Array.isArray(payload.win_angles) || payload.win_angles.length !== 3) {\n        errors.push(\"win_angles must be exactly 3 items.\");\n    } else {\n        payload.win_angles.forEach((angle, index)=>{\n            if (!angle || typeof angle !== \"object\") {\n                errors.push(`win_angles[${index}] must be object.`);\n                return;\n            }\n            if (!angle.what_to_say || typeof angle.what_to_say !== \"string\") {\n                errors.push(`win_angles[${index}].what_to_say is required.`);\n            }\n            if (!angle.proof_to_show || typeof angle.proof_to_show !== \"string\") {\n                errors.push(`win_angles[${index}].proof_to_show is required.`);\n            }\n            if (!angle.target_segment || typeof angle.target_segment !== \"string\") {\n                errors.push(`win_angles[${index}].target_segment is required.`);\n            }\n            if (!Array.isArray(angle.proof_refs)) {\n                errors.push(`win_angles[${index}].proof_refs must be array.`);\n            }\n        });\n    }\n    if (!payload.offers || !payload.offers.sellers_offer || !payload.offers.local_offer || !payload.offers.b2b_offer) {\n        errors.push(\"offers must include sellers_offer/local_offer/b2b_offer.\");\n    } else {\n        [\n            \"sellers_offer\",\n            \"local_offer\",\n            \"b2b_offer\"\n        ].forEach((offerKey)=>{\n            const offer = payload.offers[offerKey];\n            if (!offer || typeof offer !== \"object\") return;\n            if (!offer.risk_reversal || typeof offer.risk_reversal !== \"string\") {\n                errors.push(`offers.${offerKey}.risk_reversal is required.`);\n            }\n            if (!offer.first_step || typeof offer.first_step !== \"string\") {\n                errors.push(`offers.${offerKey}.first_step is required.`);\n            }\n        });\n    }\n    if (payload.meta && Array.isArray(payload.meta.proof_items)) {\n        payload.meta.proof_items.forEach((item, index)=>{\n            if (item.evidence_snippet && item.evidence_snippet.length > 160) {\n                errors.push(`proof_items[${index}] evidence_snippet too long`);\n            }\n            if (item.evidence_snippet && /<[^>]+>/.test(item.evidence_snippet)) {\n                errors.push(`proof_items[${index}] evidence_snippet contains html`);\n            }\n        });\n    }\n    if (!payload.meta?.quality_checks || typeof payload.meta.quality_checks.proof_coverage_ratio !== \"number\") {\n        errors.push(\"meta.quality_checks.proof_coverage_ratio is required.\");\n    } else {\n        const ratio = payload.meta.quality_checks.proof_coverage_ratio;\n        if (ratio < 0 || ratio > 1) {\n            errors.push(\"meta.quality_checks.proof_coverage_ratio must be 0..1.\");\n        }\n    }\n    return {\n        valid: errors.length === 0,\n        errors\n    };\n};\nmodule.exports = {\n    DEFAULT_AGENTOS_CONTEXT,\n    inputDefaults,\n    inputSchema,\n    outputSchema,\n    systemPrompt,\n    timofeyAgent,\n    normalizeInput,\n    computeProofCoverageRatio,\n    evaluateProofCoverage,\n    generateOutput,\n    generateTimofeyOutput,\n    validateTimofeyOutput\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aEIsTUFBTXNEO1lBQ3RDLElBQUl0RCxLQUFLcUQsZ0JBQWdCLElBQUlyRCxLQUFLcUQsZ0JBQWdCLENBQUNFLE1BQU0sR0FBRyxLQUFLO2dCQUMvRGdPLE9BQU9wUSxJQUFJLENBQUMsQ0FBQyxZQUFZLEVBQUVtQyxNQUFNLDJCQUEyQixDQUFDO1lBQy9EO1lBQ0EsSUFBSXRELEtBQUtxRCxnQkFBZ0IsSUFBSSxVQUFVTyxJQUFJLENBQUM1RCxLQUFLcUQsZ0JBQWdCLEdBQUc7Z0JBQ2xFa08sT0FBT3BRLElBQUksQ0FBQyxDQUFDLFlBQVksRUFBRW1DLE1BQU0sZ0NBQWdDLENBQUM7WUFDcEU7UUFDRjtJQUNGO0lBQ0EsSUFDRSxDQUFDZ08sUUFBUXZULElBQUksRUFBRXNQLGtCQUNmLE9BQU9pRSxRQUFRdlQsSUFBSSxDQUFDc1AsY0FBYyxDQUFDSSxvQkFBb0IsS0FBSyxVQUM1RDtRQUNBOEQsT0FBT3BRLElBQUksQ0FBQztJQUNkLE9BQU87UUFDTCxNQUFNa0osUUFBUWlILFFBQVF2VCxJQUFJLENBQUNzUCxjQUFjLENBQUNJLG9CQUFvQjtRQUM5RCxJQUFJcEQsUUFBUSxLQUFLQSxRQUFRLEdBQUc7WUFDMUJrSCxPQUFPcFEsSUFBSSxDQUFDO1FBQ2Q7SUFDRjtJQUNBLE9BQU87UUFBRXNRLE9BQU9GLE9BQU9oTyxNQUFNLEtBQUs7UUFBR2dPO0lBQU87QUFDOUM7QUFFQVEsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZwVztJQUNBSztJQUNBZTtJQUNBUTtJQUNBZTtJQUNBQztJQUNBa0I7SUFDQStKO0lBQ0FXO0lBQ0FVO0lBQ0FxRztJQUNBRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvYWJ1emFkYS9EZXNrdG9wL2FnZW50T1MvbGliL2FnZW50cy90aW1vZmV5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgY2Fub25pY2FsaXplVXJsIH0gPSByZXF1aXJlKFwiLi93ZWJDbGllbnQuanNcIik7XG5jb25zdCB7IHdyYXBBZ2VudE91dHB1dCwgdW53cmFwTGVnYWN5IH0gPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvYWdlbnRFbnZlbG9wZS5qc1wiKTtcbmNvbnN0IHsgc2FuaXRpemVTbmlwcGV0IH0gPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvc2FuaXRpemVTbmlwcGV0LmpzXCIpO1xuY29uc3QgeyBhcHBseUJ1ZGdldCwgYXBwbHlCdWRnZXRNZXRhIH0gPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvYnVkZ2V0LmpzXCIpO1xuY29uc3QgeyBleHRyYWN0RnJvbUh0bWwgfSA9IHJlcXVpcmUoXCIuLi8uLi9leHRyYWN0b3JzXCIpO1xuXG5jb25zdCBERUZBVUxUX0FHRU5UT1NfQ09OVEVYVCA9IHtcbiAgbmFtZTogXCJBZ2VudE9TXCIsXG4gIG9uZV9saW5lcjpcbiAgICBcItCc0LDRgNC60LXRgtC/0LvQtdC50YEg0Lgg0L7RgNC60LXRgdGC0YDQsNGG0LjRjyDQmNCYLdCw0LPQtdC90YLQvtCyINC00LvRjyDQsdC40LfQvdC10YHQsDog0LvQuNC00L7Qs9C10L0sINC/0L7QtNC00LXRgNC20LrQsCwg0LrQvtC90YLQtdC90YIsINCw0L3QsNC70LjRgtC40LrQsCwg0LDQstGC0L7QvNCw0YLQuNC30LDRhtC40Y8g0L/RgNC+0YbQtdGB0YHQvtCyXCIsXG4gIHByaWNpbmdfbW9udGhseV9ydWI6IDUwMDAsXG4gIG5vX3RyaWFsOiB0cnVlXG59O1xuXG5jb25zdCBpbnB1dERlZmF1bHRzID0ge1xuICBtb2RlOiBcImRlZXBcIixcbiAgaGFzX3dlYl9hY2Nlc3M6IHRydWUsXG4gIG1heF93ZWJfcmVxdWVzdHM6IG51bGwsXG4gIGdlbzogXCLQoNC+0YHRgdC40Y9cIixcbiAgZm9jdXNfc2VnbWVudHM6IFtcInNlbGxlcnNcIiwgXCJsb2NhbFwiLCBcImIyYlwiXSxcbiAgbmljaGVfaGludDogXCJcIixcbiAgY29tcGV0aXRvcl90eXBlczogW1xuICAgIFwiYWlfYWdlbmN5XCIsXG4gICAgXCJjaGF0Ym90c1wiLFxuICAgIFwid2Jfb3pvbl9tYXJrZXRpbmdcIixcbiAgICBcImNhbGxfY2VudGVyXCIsXG4gICAgXCJjcm1faW1wbFwiXG4gIF0sXG4gIGluY2x1ZGVfcHJpY2luZzogdHJ1ZSxcbiAgaW5jbHVkZV9jYXNlczogdHJ1ZSxcbiAgcmVxdWlyZV9wcm9vZjogdHJ1ZSxcbiAgcmVjZW5jeV9kYXlzOiAzNjUsXG4gIGFsbG93X3BsYWNlaG9sZGVyc19pZl9ibG9ja2VkOiB0cnVlLFxuICBleGNsdWRlX2RvbWFpbnM6IFtdLFxuICBhZ2VudG9zX2NvbnRleHQ6IHsgLi4uREVGQVVMVF9BR0VOVE9TX0NPTlRFWFQgfVxufTtcblxuY29uc3QgaW5wdXRTY2hlbWEgPSB7XG4gIHR5cGU6IFwib2JqZWN0XCIsXG4gIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgcHJvcGVydGllczoge1xuICAgIG1vZGU6IHsgdHlwZTogXCJzdHJpbmdcIiwgZW51bTogW1wicXVpY2tcIiwgXCJkZWVwXCIsIFwiY29udGludWVcIiwgXCJyZWZyZXNoXCJdLCBkZWZhdWx0OiBcImRlZXBcIiB9LFxuICAgIGhhc193ZWJfYWNjZXNzOiB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlIH0sXG4gICAgbWF4X3dlYl9yZXF1ZXN0czogeyB0eXBlOiBcIm51bWJlclwiIH0sXG4gICAgZ2VvOiB7IHR5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6IFwi0KDQvtGB0YHQuNGPXCIgfSxcbiAgICBmb2N1c19zZWdtZW50czoge1xuICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgaXRlbXM6IHsgdHlwZTogXCJzdHJpbmdcIiwgZW51bTogW1wic2VsbGVyc1wiLCBcImxvY2FsXCIsIFwiYjJiXCJdIH0sXG4gICAgICBkZWZhdWx0OiBbXCJzZWxsZXJzXCIsIFwibG9jYWxcIiwgXCJiMmJcIl1cbiAgICB9LFxuICAgIG5pY2hlX2hpbnQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuICAgIGNvbXBldGl0b3JfdHlwZXM6IHtcbiAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgIGl0ZW1zOiB7XG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGVudW06IFtcImFpX2FnZW5jeVwiLCBcImNoYXRib3RzXCIsIFwid2Jfb3pvbl9tYXJrZXRpbmdcIiwgXCJjYWxsX2NlbnRlclwiLCBcImNybV9pbXBsXCJdXG4gICAgICB9LFxuICAgICAgZGVmYXVsdDogW1xuICAgICAgICBcImFpX2FnZW5jeVwiLFxuICAgICAgICBcImNoYXRib3RzXCIsXG4gICAgICAgIFwid2Jfb3pvbl9tYXJrZXRpbmdcIixcbiAgICAgICAgXCJjYWxsX2NlbnRlclwiLFxuICAgICAgICBcImNybV9pbXBsXCJcbiAgICAgIF1cbiAgICB9LFxuICAgIGluY2x1ZGVfcHJpY2luZzogeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogdHJ1ZSB9LFxuICAgIGluY2x1ZGVfY2FzZXM6IHsgdHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IHRydWUgfSxcbiAgICByZXF1aXJlX3Byb29mOiB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlIH0sXG4gICAgcmVjZW5jeV9kYXlzOiB7IHR5cGU6IFwibnVtYmVyXCIsIGRlZmF1bHQ6IDM2NSB9LFxuICAgIGFsbG93X3BsYWNlaG9sZGVyc19pZl9ibG9ja2VkOiB7IHR5cGU6IFwiYm9vbGVhblwiLCBkZWZhdWx0OiB0cnVlIH0sXG4gICAgZXhjbHVkZV9kb21haW5zOiB7IHR5cGU6IFwiYXJyYXlcIiwgaXRlbXM6IHsgdHlwZTogXCJzdHJpbmdcIiB9LCBkZWZhdWx0OiBbXSB9LFxuICAgIGFnZW50b3NfY29udGV4dDogeyB0eXBlOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgcmVxdWlyZWQ6IFtcIm1vZGVcIiwgXCJoYXNfd2ViX2FjY2Vzc1wiXSxcbiAgZGVmYXVsdDogaW5wdXREZWZhdWx0c1xufTtcblxuY29uc3Qgb3V0cHV0U2NoZW1hID0ge1xuICB0eXBlOiBcIm9iamVjdFwiLFxuICByZXF1aXJlZDogW1xuICAgIFwiY29tcGV0aXRvcnNcIixcbiAgICBcInByaWNpbmdfZXZpZGVuY2VcIixcbiAgICBcImNvbXBhcmlzb25fdGFibGVcIixcbiAgICBcIndpbl9hbmdsZXNcIixcbiAgICBcImFnZW50b3NfcG9zaXRpb25pbmdcIixcbiAgICBcIm9mZmVyc1wiLFxuICAgIFwibWV0YVwiXG4gIF0sXG4gIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgcHJvcGVydGllczoge1xuICAgIGNvbXBldGl0b3JzOiB7IHR5cGU6IFwiYXJyYXlcIiB9LFxuICAgIHByaWNpbmdfZXZpZGVuY2U6IHsgdHlwZTogXCJvYmplY3RcIiB9LFxuICAgIGNvbXBhcmlzb25fdGFibGU6IHsgdHlwZTogXCJhcnJheVwiIH0sXG4gICAgd2luX2FuZ2xlczogeyB0eXBlOiBcImFycmF5XCIgfSxcbiAgICBhZ2VudG9zX3Bvc2l0aW9uaW5nOiB7IHR5cGU6IFwib2JqZWN0XCIgfSxcbiAgICBvZmZlcnM6IHsgdHlwZTogXCJvYmplY3RcIiB9LFxuICAgIG1ldGE6IHsgdHlwZTogXCJvYmplY3RcIiB9XG4gIH1cbn07XG5cbmNvbnN0IENPTVBBUklTT05fQ09MVU1OUyA9IFtcbiAgXCLQo9Ci0J9cIixcbiAgXCLRgdC10LPQvNC10L3RgtGLXCIsXG4gIFwi0L7RhNGE0LXRgFwiLFxuICBcItGG0LXQvdGLXCIsXG4gIFwi0LrQtdC50YHRi1wiLFxuICBcItCz0LDRgNCw0L3RgtC40LhcIixcbiAgXCLRgdC60L7RgNC+0YHRgtGMXCIsXG4gIFwi0LTQvtCz0L7QstC+0YAv0LDQutGC0YtcIixcbiAgXCLQutCw0L3QsNC70YtcIixcbiAgXCLRgdC70LDQsdGL0LUg0LzQtdGB0YLQsFwiXG5dO1xuXG5jb25zdCBUWVBFX1RPX1NFR01FTlRTID0ge1xuICBhaV9hZ2VuY3k6IFwic2VsbGVycy9sb2NhbC9iMmJcIixcbiAgY2hhdGJvdHM6IFwibG9jYWwvYjJiXCIsXG4gIHdiX296b25fbWFya2V0aW5nOiBcInNlbGxlcnNcIixcbiAgY2FsbF9jZW50ZXI6IFwibG9jYWwvYjJiXCIsXG4gIGNybV9pbXBsOiBcImIyYlwiXG59O1xuXG5jb25zdCBzeXN0ZW1Qcm9tcHQgPSBg0KLRiyDigJQg0JjQmC3QsNCz0LXQvdGCIGFnZW50T1M6IFwi0KLQuNC80L7RhNC10Lkg4oCUINCQ0L3QsNC70LjQtyDQutC+0L3QutGD0YDQtdC90YLQvtCyXCIuXG7QoNC+0LvRjDog0LjRgdC60LDRgtGMINC60L7QvdC60YPRgNC10L3RgtC+0LIv0LDQu9GM0YLQtdGA0L3QsNGC0LjQstGLINCyINCg0KQg0Lgg0YTQvtGA0LzQuNGA0L7QstCw0YLRjCDRgdGA0LDQstC90LXQvdC40LUsINGD0LPQu9GLINCy0YvQuNCz0YDRi9GI0LAg0Lgg0L/QvtC30LjRhtC40L7QvdC40YDQvtCy0LDQvdC40LUgQWdlbnRPUy5cbtCd0LjQutCw0LrQuNGFINCy0YvQtNGD0LzQvtC6OiDQstGB0LUg0YPRgtCy0LXRgNC20LTQtdC90LjRjyDRgtC+0LvRjNC60L4g0YEgcHJvb2ZfaXRlbXMuYDtcblxuY29uc3QgdGltb2ZleUFnZW50ID0ge1xuICBpZDogXCJ0aW1vZmV5LWNvbXBldGl0b3ItYW5hbHlzaXMtcnVcIixcbiAgZGlzcGxheU5hbWU6IFwi0KLQuNC80L7RhNC10Lkg4oCUINCQ0L3QsNC70LjQtyDQutC+0L3QutGD0YDQtdC90YLQvtCyXCIsXG4gIGRlc2NyaXB0aW9uOlxuICAgIFwi0JjRidC10YIg0LrQvtC90LrRg9GA0LXQvdGC0L7Qsi/QsNC70YzRgtC10YDQvdCw0YLQuNCy0Ysg0LIg0KDQpCwg0LTQtdC70LDQtdGCINGB0YDQsNCy0L3QtdC90LjQtSDQuCDRhNC+0YDQvNGD0LvQuNGA0YPQtdGCINC/0L7Qt9C40YbQuNC+0L3QuNGA0L7QstCw0L3QuNC1IEFnZW50T1MuXCIsXG4gIGlucHV0U2NoZW1hLFxuICBvdXRwdXRTY2hlbWEsXG4gIHN5c3RlbVByb21wdFxufTtcblxuY29uc3Qgd3JhcE91dHB1dCA9IChsZWdhY3lPdXRwdXQsIGlucHV0KSA9PlxuICB3cmFwQWdlbnRPdXRwdXQoe1xuICAgIGFnZW50SWQ6IHRpbW9mZXlBZ2VudC5pZCxcbiAgICBpbnB1dEVjaG86IGlucHV0LFxuICAgIG1vZGU6IGlucHV0Lm1vZGUsXG4gICAgbGVnYWN5T3V0cHV0XG4gIH0pO1xuXG5jb25zdCBzYW5pdGl6ZUV2aWRlbmNlU25pcHBldCA9ICh0ZXh0LCBtYXggPSAxNjApID0+IHNhbml0aXplU25pcHBldCh0ZXh0LCBtYXgpO1xuXG5jb25zdCByZXNvbHZlTWF4UmVxdWVzdHMgPSAobW9kZSwgbWF4UmVxdWVzdHMpID0+IHtcbiAgaWYgKHR5cGVvZiBtYXhSZXF1ZXN0cyA9PT0gXCJudW1iZXJcIiAmJiBOdW1iZXIuaXNGaW5pdGUobWF4UmVxdWVzdHMpICYmIG1heFJlcXVlc3RzID4gMCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1heFJlcXVlc3RzKTtcbiAgfVxuICByZXR1cm4gbW9kZSA9PT0gXCJxdWlja1wiID8gMzAgOiA4MDtcbn07XG5cbmNvbnN0IG5vcm1hbGl6ZUlucHV0ID0gKGlucHV0KSA9PiB7XG4gIGNvbnN0IHNhZmUgPSB0eXBlb2YgaW5wdXQgPT09IFwib2JqZWN0XCIgJiYgaW5wdXQgIT09IG51bGwgPyBpbnB1dCA6IHt9O1xuICBjb25zdCBidWRnZXQgPSBzYWZlLmJ1ZGdldCAmJiB0eXBlb2Ygc2FmZS5idWRnZXQgPT09IFwib2JqZWN0XCIgPyBzYWZlLmJ1ZGdldCA6IG51bGw7XG4gIGNvbnN0IG1vZGUgPVxuICAgIHNhZmUubW9kZSA9PT0gXCJxdWlja1wiIHx8IHNhZmUubW9kZSA9PT0gXCJjb250aW51ZVwiIHx8IHNhZmUubW9kZSA9PT0gXCJyZWZyZXNoXCJcbiAgICAgID8gc2FmZS5tb2RlXG4gICAgICA6IFwiZGVlcFwiO1xuICBjb25zdCBmb2N1c19zZWdtZW50cyA9IEFycmF5LmlzQXJyYXkoc2FmZS5mb2N1c19zZWdtZW50cylcbiAgICA/IHNhZmUuZm9jdXNfc2VnbWVudHMuZmlsdGVyKChpdGVtKSA9PiBbXCJzZWxsZXJzXCIsIFwibG9jYWxcIiwgXCJiMmJcIl0uaW5jbHVkZXMoaXRlbSkpXG4gICAgOiBbXCJzZWxsZXJzXCIsIFwibG9jYWxcIiwgXCJiMmJcIl07XG4gIGNvbnN0IGNvbXBldGl0b3JfdHlwZXMgPSBBcnJheS5pc0FycmF5KHNhZmUuY29tcGV0aXRvcl90eXBlcylcbiAgICA/IHNhZmUuY29tcGV0aXRvcl90eXBlcy5maWx0ZXIoKGl0ZW0pID0+XG4gICAgICAgIFtcImFpX2FnZW5jeVwiLCBcImNoYXRib3RzXCIsIFwid2Jfb3pvbl9tYXJrZXRpbmdcIiwgXCJjYWxsX2NlbnRlclwiLCBcImNybV9pbXBsXCJdLmluY2x1ZGVzKGl0ZW0pXG4gICAgICApXG4gICAgOiBbXCJhaV9hZ2VuY3lcIiwgXCJjaGF0Ym90c1wiLCBcIndiX296b25fbWFya2V0aW5nXCIsIFwiY2FsbF9jZW50ZXJcIiwgXCJjcm1faW1wbFwiXTtcbiAgY29uc3QgYWdlbnRvc19jb250ZXh0ID1cbiAgICBzYWZlLmFnZW50b3NfY29udGV4dCAmJiB0eXBlb2Ygc2FmZS5hZ2VudG9zX2NvbnRleHQgPT09IFwib2JqZWN0XCJcbiAgICAgID8geyAuLi5ERUZBVUxUX0FHRU5UT1NfQ09OVEVYVCwgLi4uc2FmZS5hZ2VudG9zX2NvbnRleHQgfVxuICAgICAgOiB7IC4uLkRFRkFVTFRfQUdFTlRPU19DT05URVhUIH07XG5cbiAgY29uc3Qgbm9ybWFsaXplZCA9IHtcbiAgICBtb2RlLFxuICAgIGhhc193ZWJfYWNjZXNzOiB0eXBlb2Ygc2FmZS5oYXNfd2ViX2FjY2VzcyA9PT0gXCJib29sZWFuXCIgPyBzYWZlLmhhc193ZWJfYWNjZXNzIDogdHJ1ZSxcbiAgICBtYXhfd2ViX3JlcXVlc3RzOiByZXNvbHZlTWF4UmVxdWVzdHMobW9kZSwgc2FmZS5tYXhfd2ViX3JlcXVlc3RzKSxcbiAgICBnZW86IHR5cGVvZiBzYWZlLmdlbyA9PT0gXCJzdHJpbmdcIiAmJiBzYWZlLmdlby50cmltKCkgPyBzYWZlLmdlby50cmltKCkgOiBcItCg0L7RgdGB0LjRj1wiLFxuICAgIGZvY3VzX3NlZ21lbnRzLFxuICAgIG5pY2hlX2hpbnQ6IHR5cGVvZiBzYWZlLm5pY2hlX2hpbnQgPT09IFwic3RyaW5nXCIgPyBzYWZlLm5pY2hlX2hpbnQudHJpbSgpIDogXCJcIixcbiAgICBjb21wZXRpdG9yX3R5cGVzLFxuICAgIGluY2x1ZGVfcHJpY2luZzogdHlwZW9mIHNhZmUuaW5jbHVkZV9wcmljaW5nID09PSBcImJvb2xlYW5cIiA/IHNhZmUuaW5jbHVkZV9wcmljaW5nIDogdHJ1ZSxcbiAgICBpbmNsdWRlX2Nhc2VzOiB0eXBlb2Ygc2FmZS5pbmNsdWRlX2Nhc2VzID09PSBcImJvb2xlYW5cIiA/IHNhZmUuaW5jbHVkZV9jYXNlcyA6IHRydWUsXG4gICAgcmVxdWlyZV9wcm9vZjogdHlwZW9mIHNhZmUucmVxdWlyZV9wcm9vZiA9PT0gXCJib29sZWFuXCIgPyBzYWZlLnJlcXVpcmVfcHJvb2YgOiB0cnVlLFxuICAgIHJlY2VuY3lfZGF5czpcbiAgICAgIHR5cGVvZiBzYWZlLnJlY2VuY3lfZGF5cyA9PT0gXCJudW1iZXJcIiAmJiBOdW1iZXIuaXNGaW5pdGUoc2FmZS5yZWNlbmN5X2RheXMpXG4gICAgICAgID8gTWF0aC5tYXgoMSwgTWF0aC5yb3VuZChzYWZlLnJlY2VuY3lfZGF5cykpXG4gICAgICAgIDogMzY1LFxuICAgIGFsbG93X3BsYWNlaG9sZGVyc19pZl9ibG9ja2VkOlxuICAgICAgdHlwZW9mIHNhZmUuYWxsb3dfcGxhY2Vob2xkZXJzX2lmX2Jsb2NrZWQgPT09IFwiYm9vbGVhblwiXG4gICAgICAgID8gc2FmZS5hbGxvd19wbGFjZWhvbGRlcnNfaWZfYmxvY2tlZFxuICAgICAgICA6IHRydWUsXG4gICAgZXhjbHVkZV9kb21haW5zOiBBcnJheS5pc0FycmF5KHNhZmUuZXhjbHVkZV9kb21haW5zKVxuICAgICAgPyBzYWZlLmV4Y2x1ZGVfZG9tYWlucy5maWx0ZXIoKGl0ZW0pID0+IHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiICYmIGl0ZW0udHJpbSgpKVxuICAgICAgOiBbXSxcbiAgICBhZ2VudG9zX2NvbnRleHRcbiAgfTtcblxuICBjb25zdCBidWRnZXRSZXN1bHQgPSBhcHBseUJ1ZGdldChub3JtYWxpemVkLCBidWRnZXQsIHtcbiAgICBtYXhXZWJSZXF1ZXN0c1BhdGg6IFtcIm1heF93ZWJfcmVxdWVzdHNcIl1cbiAgfSk7XG4gIG5vcm1hbGl6ZWQuYnVkZ2V0ID0gYnVkZ2V0O1xuICBub3JtYWxpemVkLmJ1ZGdldF9hcHBsaWVkID0gYnVkZ2V0UmVzdWx0LmJ1ZGdldF9hcHBsaWVkO1xuICBub3JtYWxpemVkLmJ1ZGdldF93YXJuaW5ncyA9IGJ1ZGdldFJlc3VsdC53YXJuaW5ncztcbiAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59O1xuXG5jb25zdCBTRUFSQ0hfUVVFUklFUyA9IHtcbiAgYWlfYWdlbmN5OiBbXCJBSSDQsNCz0LXQvdGC0YHRgtCy0L4g0LDQstGC0L7QvNCw0YLQuNC30LDRhtC40Y8g0LHQuNC30L3QtdGB0LBcIiwgXCJBSSDQsNGB0YHQuNGB0YLQtdC90YLRiyDQtNC70Y8g0LHQuNC30L3QtdGB0LBcIl0sXG4gIGNoYXRib3RzOiBbXCLRh9Cw0YIt0LHQvtGC0Ysg0LTQu9GPINC/0YDQvtC00LDQtlwiLCBcItGH0LDRgi3QsdC+0YIg0L/QvtC00LTQtdGA0LbQutCwIFZLIFRlbGVncmFtXCJdLFxuICB3Yl9vem9uX21hcmtldGluZzogW1wi0LzQsNGA0LrQtdGC0LjQvdCzIFdCIE96b24g0LDQs9C10L3RgtGB0YLQstC+XCIsIFwi0L/RgNC+0LTQstC40LbQtdC90LjQtSDQvdCwIFdpbGRiZXJyaWVzXCJdLFxuICBjYWxsX2NlbnRlcjogW1wi0LrQvtC70Lst0YbQtdC90YLRgCDQu9C40LTQvtCz0LXQvVwiLCBcItC+0LHRgNCw0LHQvtGC0LrQsCDQt9Cw0Y/QstC+0Log0LrQvtC70Lst0YbQtdC90YLRgFwiXSxcbiAgY3JtX2ltcGw6IFtcItCy0L3QtdC00YDQtdC90LjQtSBhbW9DUk1cIiwgXCLQstC90LXQtNGA0LXQvdC40LUgQml0cml4MjRcIiwgXCJDUk0g0LjQvdGC0LXQs9GA0LDRgtC+0YBcIl1cbn07XG5cbmNvbnN0IFNFR01FTlRfUVVFUklFUyA9IHtcbiAgc2VsbGVyczogW1wi0LTQu9GPINGB0LXQu9C70LXRgNC+0LJcIiwgXCLQvNCw0YDQutC10YLQv9C70LXQudGBXCJdLFxuICBsb2NhbDogW1wi0LTQu9GPINC70L7QutCw0LvRjNC90L7Qs9C+INCx0LjQt9C90LXRgdCwXCIsIFwi0YPRgdC70YPQs9C4XCJdLFxuICBiMmI6IFtcIkIyQlwiLCBcItC00LvRjyDQsdC40LfQvdC10YHQsFwiXVxufTtcblxuY29uc3QgYnVpbGRTZWFyY2hQbGFuID0gKGlucHV0KSA9PiB7XG4gIGNvbnN0IHF1ZXJpZXMgPSBbXTtcbiAgaW5wdXQuY29tcGV0aXRvcl90eXBlcy5mb3JFYWNoKCh0eXBlKSA9PiB7XG4gICAgY29uc3QgYmFzZSA9IFNFQVJDSF9RVUVSSUVTW3R5cGVdIHx8IFtdO1xuICAgIGJhc2UuZm9yRWFjaCgocXVlcnkpID0+IHtcbiAgICAgIHF1ZXJpZXMucHVzaChxdWVyeSk7XG4gICAgICBpZiAoaW5wdXQubmljaGVfaGludCkgcXVlcmllcy5wdXNoKGAke3F1ZXJ5fSAke2lucHV0Lm5pY2hlX2hpbnR9YCk7XG4gICAgfSk7XG4gIH0pO1xuICBpbnB1dC5mb2N1c19zZWdtZW50cy5mb3JFYWNoKChzZWdtZW50KSA9PiB7XG4gICAgKFNFR01FTlRfUVVFUklFU1tzZWdtZW50XSB8fCBbXSkuZm9yRWFjaCgoaGludCkgPT4ge1xuICAgICAgcXVlcmllcy5wdXNoKGBBSSDQsNCy0YLQvtC80LDRgtC40LfQsNGG0LjRjyAke2hpbnR9YCk7XG4gICAgICBpZiAoaW5wdXQubmljaGVfaGludCkgcXVlcmllcy5wdXNoKGAke2lucHV0Lm5pY2hlX2hpbnR9ICR7aGludH1gKTtcbiAgICB9KTtcbiAgfSk7XG4gIGNvbnN0IGRlZHVwZWQgPSBbLi4ubmV3IFNldChxdWVyaWVzLm1hcCgoaXRlbSkgPT4gaXRlbS50cmltKCkpLmZpbHRlcihCb29sZWFuKSldO1xuICByZXR1cm4gZGVkdXBlZDtcbn07XG5cbmNvbnN0IHNvdXJjZVR5cGVGb3JVcmwgPSAodXJsKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgaG9zdCA9IG5ldyBVUkwodXJsKS5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChob3N0LmluY2x1ZGVzKFwidmsuY29tXCIpIHx8IGhvc3QuaW5jbHVkZXMoXCJ0Lm1lXCIpKSByZXR1cm4gXCJzb2NpYWxcIjtcbiAgICByZXR1cm4gXCJ3ZWJzaXRlXCI7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBcIm90aGVyXCI7XG4gIH1cbn07XG5cbmNvbnN0IGV4dHJhY3RDb21wZXRpdG9yTmFtZSA9ICh1cmwsIHRpdGxlID0gXCJcIikgPT4ge1xuICBpZiAodGl0bGUpIHtcbiAgICByZXR1cm4gdGl0bGUuc3BsaXQoXCJ8XCIpWzBdLnNwbGl0KFwi4oCUXCIpWzBdLnRyaW0oKTtcbiAgfVxuICB0cnkge1xuICAgIHJldHVybiBuZXcgVVJMKHVybCkuaG9zdG5hbWUucmVwbGFjZSgvXnd3d1xcLi8sIFwiXCIpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG59O1xuXG5jb25zdCBleHRyYWN0U2lnbmFsc0Zyb21QYWdlID0gKHBhZ2UsIGNvbXBldGl0b3JOYW1lLCBwYWdlVHlwZSwgcHJvb2ZJdGVtcykgPT4ge1xuICBjb25zdCB0ZXh0ID0gcGFnZS50ZXh0IHx8IFwiXCI7XG4gIGNvbnN0IGxvd2VyID0gdGV4dC50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBwcm9vZnMgPSBbXTtcblxuICBjb25zdCBwdXNoUHJvb2YgPSAoc2lnbmFsVHlwZSwgc2lnbmFsVmFsdWUsIHNuaXBwZXQpID0+IHtcbiAgICBjb25zdCBwcm9vZiA9IHtcbiAgICAgIHVybDogcGFnZS51cmwsXG4gICAgICBjb21wZXRpdG9yX25hbWU6IGNvbXBldGl0b3JOYW1lLFxuICAgICAgc291cmNlX3R5cGU6IHNvdXJjZVR5cGVGb3JVcmwocGFnZS51cmwpLFxuICAgICAgcGFnZV90eXBlOiBwYWdlVHlwZSxcbiAgICAgIHNpZ25hbF90eXBlOiBzaWduYWxUeXBlLFxuICAgICAgc2lnbmFsX3ZhbHVlOiBzaWduYWxWYWx1ZSxcbiAgICAgIGV2aWRlbmNlX3NuaXBwZXQ6IHNhbml0aXplRXZpZGVuY2VTbmlwcGV0KHNuaXBwZXQgfHwgYCR7c2lnbmFsVHlwZX06ICR7c2lnbmFsVmFsdWV9YClcbiAgICB9O1xuICAgIGNvbnN0IGluZGV4ID0gcHJvb2ZJdGVtcy5sZW5ndGggKyBwcm9vZnMubGVuZ3RoO1xuICAgIHByb29mcy5wdXNoKHsgLi4ucHJvb2YsIF9pbmRleDogaW5kZXggfSk7XG4gIH07XG5cbiAgaWYgKHBhZ2VUeXBlID09PSBcInByaWNpbmdcIikge1xuICAgIGNvbnN0IHByaWNlTWF0Y2ggPSB0ZXh0Lm1hdGNoKC8o0L7RglxccyopPyhcXGR7Miw2fSlcXHMqKOKCvXzRgNGD0LF80YDRg9CxXFwuKS9pKTtcbiAgICBpZiAocHJpY2VNYXRjaCkge1xuICAgICAgY29uc3QgdmFsdWUgPSBOdW1iZXIocHJpY2VNYXRjaFsyXSk7XG4gICAgICBwdXNoUHJvb2YoXCJwcmljaW5nX2Zyb21cIiwgdmFsdWUsIGBwcmljZV9mcm9tPSR7dmFsdWV9YCk7XG4gICAgfSBlbHNlIGlmICgv0L/QviDQt9Cw0L/RgNC+0YHRg3zQuNC90LTQuNCy0LjQtNGD0LDQu9GM0L3Qvi9pLnRlc3QodGV4dCkpIHtcbiAgICAgIHB1c2hQcm9vZihcInByaWNpbmdfcmVxdWVzdFwiLCBcItC/0L4g0LfQsNC/0YDQvtGB0YNcIiwgXCJwcmljaW5nOiDQv9C+INC30LDQv9GA0L7RgdGDXCIpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChwYWdlVHlwZSA9PT0gXCJjYXNlc1wiICYmIC/QutC10LnRgXxjYXNlfNC/0YDQvtC10LrRgi9pLnRlc3QodGV4dCkpIHtcbiAgICBwdXNoUHJvb2YoXCJjYXNlX3ByZXNlbmNlXCIsIFwiY2FzZXNcIiwgXCJjYXNlczogbWVudGlvbmVkXCIpO1xuICAgIGNvbnN0IG1ldHJpYyA9IHRleHQubWF0Y2goLyhST0l80YDQvtGB0YJ80YPQstC10LvQuNGH0LXQvdC40LUpXFxzKlxcKz8oXFxkezEsM30pJS9pKTtcbiAgICBpZiAobWV0cmljKSB7XG4gICAgICBwdXNoUHJvb2YoXCJjYXNlX21ldHJpY1wiLCBgJHttZXRyaWNbMV19ICR7bWV0cmljWzJdfSVgLCBgY2FzZV9tZXRyaWM9JHttZXRyaWNbMV19ICR7bWV0cmljWzJdfSVgKTtcbiAgICB9XG4gIH1cblxuICBpZiAoL9Cz0LDRgNCw0L3RgnxTTEF80LTQvtCz0L7QstC+0YAvaS50ZXN0KHRleHQpKSB7XG4gICAgcHVzaFByb29mKFwiZ3VhcmFudGVlX29yX2NvbnRyYWN0XCIsIFwibWVudGlvbmVkXCIsIFwiZ3VhcmFudGVlL2NvbnRyYWN0IG1lbnRpb25lZFwiKTtcbiAgfVxuXG4gIGlmICgv0LfQsNC/0YPRgdC6XFxzKtC30LBcXHMqXFxkK3zQsdGL0YHRgtGA0YvQuVxccyrQt9Cw0L/Rg9GB0LovaS50ZXN0KHRleHQpKSB7XG4gICAgY29uc3QgbWF0Y2ggPSB0ZXh0Lm1hdGNoKC/Qt9Cw0L/Rg9GB0LpcXHMq0LfQsFxccyooXFxkK1xccyrQtNC9KS9pKTtcbiAgICBwdXNoUHJvb2YoXCJsYXVuY2hfc3BlZWRcIiwgbWF0Y2ggPyBtYXRjaFswXSA6IFwi0LHRi9GB0YLRgNGL0Lkg0LfQsNC/0YPRgdC6XCIsIG1hdGNoID8gbWF0Y2hbMF0gOiBcImZhc3QgbGF1bmNoXCIpO1xuICB9XG5cbiAgY29uc3QgcHJvbWlzZU1hdGNoID0gdGV4dC5tYXRjaCgvKNGD0LLQtdC70LjRh9C40Lx80YDQvtGB0YJ80L/QvtCy0YvRgdC40Lx80L/RgNC40LLQu9C10YfQtdC8fNGD0LLQtdC70LjRh9C10L3QuNC1KVxccytbXFx3XFxzXSsvaSk7XG4gIGlmIChwcm9taXNlTWF0Y2gpIHtcbiAgICBwdXNoUHJvb2YoXCJwcm9taXNlXCIsIHByb21pc2VNYXRjaFswXSwgcHJvbWlzZU1hdGNoWzBdKTtcbiAgfVxuXG4gIGlmICgv0L3QtSDQs9Cw0YDQsNC90YLQuNGA0YPQtdC8fNCx0LXQtyDQs9Cw0YDQsNC90YLQuNC5L2kudGVzdChsb3dlcikpIHtcbiAgICBwdXNoUHJvb2YoXCJub3RfcHJvbWlzZWRcIiwgXCLQsdC10Lcg0LPQsNGA0LDQvdGC0LjQuVwiLCBcItC90LUg0LPQsNGA0LDQvdGC0LjRgNGD0LXQvFwiKTtcbiAgfVxuXG4gIGNvbnN0IHNlb0hpbnQgPSAvc2VvfNC/0L7QuNGB0LrQvtCyL2kudGVzdChsb3dlcik7XG4gIGlmIChzZW9IaW50KSB7XG4gICAgcHVzaFByb29mKFwiY2hhbm5lbF9zZW9cIiwgXCJzZW9cIiwgXCJjaGFubmVsOiBzZW9cIik7XG4gIH1cblxuICBjb25zdCBkaXJlY3RIaW50ID0gL9C00LjRgNC10LrRgnx5YW5kZXhcXHMqZGlyZWN0L2kudGVzdChsb3dlcik7XG4gIGlmIChkaXJlY3RIaW50KSB7XG4gICAgcHVzaFByb29mKFwiY2hhbm5lbF95YW5kZXhfZGlyZWN0XCIsIFwieWFuZGV4X2RpcmVjdFwiLCBcImNoYW5uZWw6IHlhbmRleCBkaXJlY3RcIik7XG4gIH1cblxuICByZXR1cm4gcHJvb2ZzO1xufTtcblxuY29uc3QgYnVpbGRDb21wZXRpdG9yRnJvbVNpZ25hbHMgPSAobmFtZSwgcHJpbWFyeVVybCwgdHlwZSwgZ2VvLCBzaWduYWxzLCBwcm9vZlJlZnMpID0+IHtcbiAgY29uc3QgcHJpY2luZ1Byb29mID0gc2lnbmFscy5maW5kKChpdGVtKSA9PiBpdGVtLnNpZ25hbF90eXBlLnN0YXJ0c1dpdGgoXCJwcmljaW5nXCIpKTtcbiAgY29uc3QgcHJpY2luZ19tb2RlbCA9IHtcbiAgICBtb2RlbDogcHJpY2luZ1Byb29mID8gXCJmcm9tXCIgOiBcInVua25vd25cIixcbiAgICBwcmljZV9mcm9tX3J1YjogcHJpY2luZ1Byb29mICYmIHR5cGVvZiBwcmljaW5nUHJvb2Yuc2lnbmFsX3ZhbHVlID09PSBcIm51bWJlclwiID8gcHJpY2luZ1Byb29mLnNpZ25hbF92YWx1ZSA6IG51bGwsXG4gICAgcHJpY2Vfbm90ZTogcHJpY2luZ1Byb29mICYmIHR5cGVvZiBwcmljaW5nUHJvb2Yuc2lnbmFsX3ZhbHVlID09PSBcInN0cmluZ1wiID8gcHJpY2luZ1Byb29mLnNpZ25hbF92YWx1ZSA6IG51bGwsXG4gICAgdW5rbm93bjogIXByaWNpbmdQcm9vZlxuICB9O1xuXG4gIGNvbnN0IGNhc2VzUHJvb2YgPSBzaWduYWxzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uc2lnbmFsX3R5cGUgPT09IFwiY2FzZV9wcmVzZW5jZVwiKTtcbiAgY29uc3QgY2FzZXMgPSB7XG4gICAgaGFzX2Nhc2VzOiBCb29sZWFuKGNhc2VzUHJvb2YpLFxuICAgIGV4YW1wbGVzX3Nob3J0OiBjYXNlc1Byb29mID8gW1wi0LrQtdC50YHRiyDRg9C/0L7QvNGP0L3Rg9GC0YtcIl0gOiBbXSxcbiAgICB1bmtub3duOiAhY2FzZXNQcm9vZlxuICB9O1xuXG4gIGNvbnN0IHByb21pc2VzID0gc2lnbmFsc1xuICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uc2lnbmFsX3R5cGUgPT09IFwicHJvbWlzZVwiKVxuICAgIC5tYXAoKGl0ZW0pID0+IFN0cmluZyhpdGVtLnNpZ25hbF92YWx1ZSkpO1xuICBjb25zdCBub3RfcHJvbWlzZWQgPSBzaWduYWxzXG4gICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5zaWduYWxfdHlwZSA9PT0gXCJub3RfcHJvbWlzZWRcIilcbiAgICAubWFwKChpdGVtKSA9PiBTdHJpbmcoaXRlbS5zaWduYWxfdmFsdWUpKTtcblxuICBjb25zdCBsYXVuY2hQcm9vZiA9IHNpZ25hbHMuZmluZCgoaXRlbSkgPT4gaXRlbS5zaWduYWxfdHlwZSA9PT0gXCJsYXVuY2hfc3BlZWRcIik7XG4gIGNvbnN0IGd1YXJhbnRlZXNQcm9vZiA9IHNpZ25hbHMuZmluZCgoaXRlbSkgPT4gaXRlbS5zaWduYWxfdHlwZSA9PT0gXCJndWFyYW50ZWVfb3JfY29udHJhY3RcIik7XG5cbiAgY29uc3QgY2hhbm5lbHMgPSB7XG4gICAgc2VvOiBzaWduYWxzLnNvbWUoKGl0ZW0pID0+IGl0ZW0uc2lnbmFsX3R5cGUgPT09IFwiY2hhbm5lbF9zZW9cIiksXG4gICAgeWFuZGV4X2RpcmVjdF9oaW50OiBzaWduYWxzLnNvbWUoKGl0ZW0pID0+IGl0ZW0uc2lnbmFsX3R5cGUgPT09IFwiY2hhbm5lbF95YW5kZXhfZGlyZWN0XCIpLFxuICAgIHZrOiBwcmltYXJ5VXJsLmluY2x1ZGVzKFwidmsuY29tXCIpLFxuICAgIHRlbGVncmFtOiBwcmltYXJ5VXJsLmluY2x1ZGVzKFwidC5tZVwiKSxcbiAgICBjb2xkX291dHJlYWNoX2hpbnQ6IHNpZ25hbHMuc29tZSgoaXRlbSkgPT4gaXRlbS5zaWduYWxfdHlwZSA9PT0gXCJjb2xkX291dHJlYWNoXCIpLFxuICAgIHVua25vd246ICFzaWduYWxzLnNvbWUoKGl0ZW0pID0+IGl0ZW0uc2lnbmFsX3R5cGUuc3RhcnRzV2l0aChcImNoYW5uZWxfXCIpKVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgbmFtZSxcbiAgICBwcmltYXJ5X3VybDogcHJpbWFyeVVybCxcbiAgICB0eXBlLFxuICAgIGdlbyxcbiAgICBwcmljaW5nX21vZGVsLFxuICAgIGNhc2VzLFxuICAgIHByb21pc2VzLFxuICAgIG5vdF9wcm9taXNlZCxcbiAgICBsYXVuY2hfc3BlZWQ6IHtcbiAgICAgIHRleHQ6IGxhdW5jaFByb29mID8gU3RyaW5nKGxhdW5jaFByb29mLnNpZ25hbF92YWx1ZSkgOiBudWxsLFxuICAgICAgdW5rbm93bjogIWxhdW5jaFByb29mXG4gICAgfSxcbiAgICBndWFyYW50ZWVzX2NvbnRyYWN0OiB7XG4gICAgICB0ZXh0OiBndWFyYW50ZWVzUHJvb2YgPyBTdHJpbmcoZ3VhcmFudGVlc1Byb29mLnNpZ25hbF92YWx1ZSkgOiBudWxsLFxuICAgICAgdW5rbm93bjogIWd1YXJhbnRlZXNQcm9vZlxuICAgIH0sXG4gICAgY2hhbm5lbHMsXG4gICAgcHJvb2ZfcmVmczogcHJvb2ZSZWZzXG4gIH07XG59O1xuXG5jb25zdCB1bmlxdWVSZWZzID0gKHJlZnMpID0+XG4gIFsuLi5uZXcgU2V0KChBcnJheS5pc0FycmF5KHJlZnMpID8gcmVmcyA6IFtdKS5maWx0ZXIoKGl0ZW0pID0+IE51bWJlci5pc0ludGVnZXIoaXRlbSkpKV07XG5cbmNvbnN0IHBpY2tSZWZzQnlQcmVmaXggPSAoc2lnbmFsUmVmTWFwLCBwcmVmaXhlcykgPT4ge1xuICBjb25zdCBtYXAgPSBzaWduYWxSZWZNYXAgJiYgdHlwZW9mIHNpZ25hbFJlZk1hcCA9PT0gXCJvYmplY3RcIiA/IHNpZ25hbFJlZk1hcCA6IHt9O1xuICBjb25zdCByZWZTZXQgPSBuZXcgU2V0KCk7XG4gIE9iamVjdC5lbnRyaWVzKG1hcCkuZm9yRWFjaCgoW2tleSwgcmVmc10pID0+IHtcbiAgICBpZiAocHJlZml4ZXMuc29tZSgocHJlZml4KSA9PiBrZXkgPT09IHByZWZpeCB8fCBrZXkuc3RhcnRzV2l0aChwcmVmaXgpKSkge1xuICAgICAgdW5pcXVlUmVmcyhyZWZzKS5mb3JFYWNoKChyZWYpID0+IHJlZlNldC5hZGQocmVmKSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIFsuLi5yZWZTZXRdLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbn07XG5cbmNvbnN0IGJ1aWxkQ29sdW1uQ2VsbCA9ICh2YWx1ZSwgcHJvb2ZSZWZzKSA9PiB7XG4gIGNvbnN0IHJlZnMgPSB1bmlxdWVSZWZzKHByb29mUmVmcykuc2xpY2UoMCwgNSk7XG4gIGlmICghcmVmcy5sZW5ndGgpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogXCJ1bmtub3duXCIsIHByb29mX3JlZnM6IFtdIH07XG4gIH1cbiAgcmV0dXJuIHsgdmFsdWU6IHZhbHVlIHx8IFwidW5rbm93blwiLCBwcm9vZl9yZWZzOiByZWZzIH07XG59O1xuXG5jb25zdCBjaGFubmVsc1RvVGV4dCA9IChjaGFubmVscykgPT4ge1xuICBpZiAoIWNoYW5uZWxzIHx8IHR5cGVvZiBjaGFubmVscyAhPT0gXCJvYmplY3RcIikgcmV0dXJuIFwiXCI7XG4gIGNvbnN0IGxpc3QgPSBbXTtcbiAgaWYgKGNoYW5uZWxzLnNlbykgbGlzdC5wdXNoKFwiU0VPXCIpO1xuICBpZiAoY2hhbm5lbHMueWFuZGV4X2RpcmVjdF9oaW50KSBsaXN0LnB1c2goXCJZYW5kZXggRGlyZWN0XCIpO1xuICBpZiAoY2hhbm5lbHMudmspIGxpc3QucHVzaChcIlZLXCIpO1xuICBpZiAoY2hhbm5lbHMudGVsZWdyYW0pIGxpc3QucHVzaChcIlRlbGVncmFtXCIpO1xuICBpZiAoY2hhbm5lbHMuY29sZF9vdXRyZWFjaF9oaW50KSBsaXN0LnB1c2goXCJDb2xkIG91dHJlYWNoXCIpO1xuICByZXR1cm4gbGlzdC5qb2luKFwiLCBcIik7XG59O1xuXG5jb25zdCBkZXRlY3RXZWFrUG9pbnRzID0gKGNvbXBldGl0b3IpID0+IHtcbiAgY29uc3Qgd2Vha25lc3NlcyA9IFtdO1xuICBpZiAoY29tcGV0aXRvcj8ucHJpY2luZ19tb2RlbD8udW5rbm93bikgd2Vha25lc3Nlcy5wdXNoKFwi0YbQtdC90Ysg0L3QtSDRgNCw0YHQutGA0YvRgtGLXCIpO1xuICBpZiAoY29tcGV0aXRvcj8uY2FzZXM/LnVua25vd24pIHdlYWtuZXNzZXMucHVzaChcItC60LXQudGB0Ysg0L3QtSDRgNCw0YHQutGA0YvRgtGLXCIpO1xuICBpZiAoY29tcGV0aXRvcj8ubGF1bmNoX3NwZWVkPy51bmtub3duKSB3ZWFrbmVzc2VzLnB1c2goXCLRgdC60L7RgNC+0YHRgtGMINC90LUg0YDQsNGB0LrRgNGL0YLQsFwiKTtcbiAgaWYgKGNvbXBldGl0b3I/Lmd1YXJhbnRlZXNfY29udHJhY3Q/LnVua25vd24pIHdlYWtuZXNzZXMucHVzaChcItGD0YHQu9C+0LLQuNGPINC00L7Qs9C+0LLQvtGA0LAg0L3QtSDRgNCw0YHQutGA0YvRgtGLXCIpO1xuICByZXR1cm4gd2Vha25lc3Nlcy5qb2luKFwiOyBcIik7XG59O1xuXG5jb25zdCBidWlsZENvbXBhcmlzb25Sb3cgPSAoY29tcGV0aXRvcikgPT4ge1xuICBjb25zdCBzaWduYWxSZWZNYXAgPSBjb21wZXRpdG9yPy5fc2lnbmFsX3JlZl9tYXAgfHwge307XG4gIGNvbnN0IGZhbGxiYWNrUmVmcyA9IHVuaXF1ZVJlZnMoY29tcGV0aXRvcj8ucHJvb2ZfcmVmcyB8fCBbXSk7XG5cbiAgY29uc3QgcHJpY2luZ1JlZnMgPSBwaWNrUmVmc0J5UHJlZml4KHNpZ25hbFJlZk1hcCwgW1wicHJpY2luZ19cIl0pO1xuICBjb25zdCBjYXNlUmVmcyA9IHBpY2tSZWZzQnlQcmVmaXgoc2lnbmFsUmVmTWFwLCBbXCJjYXNlX1wiXSk7XG4gIGNvbnN0IGd1YXJhbnRlZVJlZnMgPSBwaWNrUmVmc0J5UHJlZml4KHNpZ25hbFJlZk1hcCwgW1wiZ3VhcmFudGVlX29yX2NvbnRyYWN0XCJdKTtcbiAgY29uc3Qgc3BlZWRSZWZzID0gcGlja1JlZnNCeVByZWZpeChzaWduYWxSZWZNYXAsIFtcImxhdW5jaF9zcGVlZFwiXSk7XG4gIGNvbnN0IGNoYW5uZWxSZWZzID0gcGlja1JlZnNCeVByZWZpeChzaWduYWxSZWZNYXAsIFtcImNoYW5uZWxfXCJdKTtcbiAgY29uc3QgcHJvbWlzZVJlZnMgPSBwaWNrUmVmc0J5UHJlZml4KHNpZ25hbFJlZk1hcCwgW1wicHJvbWlzZVwiXSk7XG4gIGNvbnN0IGNvbnRyYWN0UmVmcyA9IHBpY2tSZWZzQnlQcmVmaXgoc2lnbmFsUmVmTWFwLCBbXCJndWFyYW50ZWVfb3JfY29udHJhY3RcIl0pO1xuXG4gIGNvbnN0IHByaWNpbmdWYWx1ZSA9IGNvbXBldGl0b3I/LnByaWNpbmdfbW9kZWw/LnVua25vd25cbiAgICA/IFwi0YbQtdC90Ysg0L3QtSDRg9C60LDQt9Cw0L3Ri1wiXG4gICAgOiBjb21wZXRpdG9yPy5wcmljaW5nX21vZGVsPy5wcmljZV9mcm9tX3J1YlxuICAgICAgPyBg0L7RgiAke2NvbXBldGl0b3IucHJpY2luZ19tb2RlbC5wcmljZV9mcm9tX3J1Yn0g4oK9YFxuICAgICAgOiBjb21wZXRpdG9yPy5wcmljaW5nX21vZGVsPy5wcmljZV9ub3RlIHx8IFwi0L/QviDQt9Cw0L/RgNC+0YHRg1wiO1xuICBjb25zdCBjYXNlc1ZhbHVlID0gY29tcGV0aXRvcj8uY2FzZXM/LnVua25vd25cbiAgICA/IFwi0LrQtdC50YHRiyDQvdC1INGD0LrQsNC30LDQvdGLXCJcbiAgICA6IGNvbXBldGl0b3I/LmNhc2VzPy5leGFtcGxlc19zaG9ydD8uam9pbihcIjsgXCIpIHx8IFwi0LrQtdC50YHRiyDRg9C/0L7QvNGP0L3Rg9GC0YtcIjtcblxuICBjb25zdCB2YWx1ZXMgPSB7XG4gICAgXCLQo9Ci0J9cIjogYnVpbGRDb2x1bW5DZWxsKFxuICAgICAgY29tcGV0aXRvcj8ucHJvbWlzZXM/LlswXSB8fCBjb21wZXRpdG9yPy5ub3RfcHJvbWlzZWQ/LlswXSB8fCBcIlwiLFxuICAgICAgcHJvbWlzZVJlZnMubGVuZ3RoID8gcHJvbWlzZVJlZnMgOiBmYWxsYmFja1JlZnNcbiAgICApLFxuICAgINGB0LXQs9C80LXQvdGC0Ys6IGJ1aWxkQ29sdW1uQ2VsbChUWVBFX1RPX1NFR01FTlRTW2NvbXBldGl0b3I/LnR5cGVdIHx8IFwiXCIsIGZhbGxiYWNrUmVmcyksXG4gICAg0L7RhNGE0LXRgDogYnVpbGRDb2x1bW5DZWxsKFxuICAgICAgY29tcGV0aXRvcj8ucHJvbWlzZXM/LnNsaWNlKDAsIDIpLmpvaW4oXCI7IFwiKSB8fCBjb21wZXRpdG9yPy5ub3RfcHJvbWlzZWQ/LlswXSB8fCBcIlwiLFxuICAgICAgcHJvbWlzZVJlZnMubGVuZ3RoID8gcHJvbWlzZVJlZnMgOiBmYWxsYmFja1JlZnNcbiAgICApLFxuICAgINGG0LXQvdGLOiBidWlsZENvbHVtbkNlbGwocHJpY2luZ1ZhbHVlLCBwcmljaW5nUmVmcyksXG4gICAg0LrQtdC50YHRizogYnVpbGRDb2x1bW5DZWxsKGNhc2VzVmFsdWUsIGNhc2VSZWZzKSxcbiAgICDQs9Cw0YDQsNC90YLQuNC4OiBidWlsZENvbHVtbkNlbGwoXG4gICAgICBjb21wZXRpdG9yPy5ndWFyYW50ZWVzX2NvbnRyYWN0Py50ZXh0IHx8IFwi0LPQsNGA0LDQvdGC0LjQuCDQvdC1INGD0LrQsNC30LDQvdGLXCIsXG4gICAgICBndWFyYW50ZWVSZWZzXG4gICAgKSxcbiAgICDRgdC60L7RgNC+0YHRgtGMOiBidWlsZENvbHVtbkNlbGwoXG4gICAgICBjb21wZXRpdG9yPy5sYXVuY2hfc3BlZWQ/LnRleHQgfHwgXCLRgdC60L7RgNC+0YHRgtGMINC90LUg0YPQutCw0LfQsNC90LBcIixcbiAgICAgIHNwZWVkUmVmc1xuICAgICksXG4gICAgXCLQtNC+0LPQvtCy0L7RgC/QsNC60YLRi1wiOiBidWlsZENvbHVtbkNlbGwoXG4gICAgICBjb21wZXRpdG9yPy5ndWFyYW50ZWVzX2NvbnRyYWN0Py50ZXh0IHx8IFwi0LTQvtCz0L7QstC+0YAv0LDQutGC0Ysg0L3QtSDRg9C60LDQt9Cw0L3Ri1wiLFxuICAgICAgY29udHJhY3RSZWZzXG4gICAgKSxcbiAgICDQutCw0L3QsNC70Ys6IGJ1aWxkQ29sdW1uQ2VsbChjaGFubmVsc1RvVGV4dChjb21wZXRpdG9yPy5jaGFubmVscyksIGNoYW5uZWxSZWZzKSxcbiAgICBcItGB0LvQsNCx0YvQtSDQvNC10YHRgtCwXCI6IGJ1aWxkQ29sdW1uQ2VsbChkZXRlY3RXZWFrUG9pbnRzKGNvbXBldGl0b3IpLCBmYWxsYmFja1JlZnMpXG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBjb21wZXRpdG9yX25hbWU6IGNvbXBldGl0b3I/Lm5hbWUgfHwgXCJcIixcbiAgICBjb2x1bW5fb3JkZXI6IENPTVBBUklTT05fQ09MVU1OUyxcbiAgICBjb2x1bW5zOiB2YWx1ZXNcbiAgfTtcbn07XG5cbmNvbnN0IGJ1aWxkUHJpY2luZ0V2aWRlbmNlID0gKGNvbXBldGl0b3JzKSA9PiB7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShjb21wZXRpdG9ycykgPyBjb21wZXRpdG9ycyA6IFtdO1xuICBjb25zdCBwZXJDb21wZXRpdG9yID0gaXRlbXMubWFwKChjb21wZXRpdG9yKSA9PiB7XG4gICAgY29uc3Qgc2lnbmFsUmVmTWFwID0gY29tcGV0aXRvcj8uX3NpZ25hbF9yZWZfbWFwIHx8IHt9O1xuICAgIGNvbnN0IHByaWNpbmdSZWZzID0gcGlja1JlZnNCeVByZWZpeChzaWduYWxSZWZNYXAsIFtcInByaWNpbmdfXCJdKTtcbiAgICBjb25zdCBjaGVja2VkID0gQXJyYXkuaXNBcnJheShjb21wZXRpdG9yPy5fcHJpY2luZ19jaGVja2VkX3VybHMpXG4gICAgICA/IGNvbXBldGl0b3IuX3ByaWNpbmdfY2hlY2tlZF91cmxzXG4gICAgICA6IFtdO1xuICAgIHJldHVybiB7XG4gICAgICBjb21wZXRpdG9yX25hbWU6IGNvbXBldGl0b3I/Lm5hbWUgfHwgXCJcIixcbiAgICAgIHN0YXR1czogcHJpY2luZ1JlZnMubGVuZ3RoID8gXCJwcmljaW5nX2ZvdW5kXCIgOiBcInByaWNpbmdfdW5rbm93blwiLFxuICAgICAgd2hhdF9jaGVja2VkOiBjaGVja2VkLmxlbmd0aCA/IGNoZWNrZWQgOiBbXCJob21lXCIsIFwiL3ByaWNpbmdcIiwgXCIvcHJpY2VzXCJdLFxuICAgICAgcHJvb2ZfcmVmczogcHJpY2luZ1JlZnNcbiAgICB9O1xuICB9KTtcblxuICBjb25zdCBjaGVja2VkQWxsID0gWy4uLm5ldyBTZXQocGVyQ29tcGV0aXRvci5mbGF0TWFwKChpdGVtKSA9PiBpdGVtLndoYXRfY2hlY2tlZCB8fCBbXSkpXTtcbiAgY29uc3QgYW55UHJpY2luZyA9IHBlckNvbXBldGl0b3Iuc29tZSgoaXRlbSkgPT4gaXRlbS5zdGF0dXMgPT09IFwicHJpY2luZ19mb3VuZFwiKTtcblxuICByZXR1cm4ge1xuICAgIHN0YXR1czogYW55UHJpY2luZyA/IFwicHJpY2luZ19mb3VuZFwiIDogXCJwcmljaW5nX3Vua25vd25cIixcbiAgICBwcmljaW5nX3Vua25vd246ICFhbnlQcmljaW5nLFxuICAgIHdoYXRfY2hlY2tlZDogY2hlY2tlZEFsbCxcbiAgICBjb21wZXRpdG9yczogcGVyQ29tcGV0aXRvclxuICB9O1xufTtcblxuY29uc3QgY29tcHV0ZVByb29mQ292ZXJhZ2VSYXRpbyA9IChjb21wYXJpc29uVGFibGUsIHdpbkFuZ2xlcykgPT4ge1xuICBjb25zdCByb3dzID0gQXJyYXkuaXNBcnJheShjb21wYXJpc29uVGFibGUpID8gY29tcGFyaXNvblRhYmxlIDogW107XG4gIGNvbnN0IGFuZ2xlcyA9IEFycmF5LmlzQXJyYXkod2luQW5nbGVzKSA/IHdpbkFuZ2xlcyA6IFtdO1xuICBsZXQgdG90YWwgPSAwO1xuICBsZXQgY292ZXJlZCA9IDA7XG5cbiAgcm93cy5mb3JFYWNoKChyb3cpID0+IHtcbiAgICBjb25zdCBjb2x1bW5zID0gcm93ICYmIHJvdy5jb2x1bW5zICYmIHR5cGVvZiByb3cuY29sdW1ucyA9PT0gXCJvYmplY3RcIiA/IHJvdy5jb2x1bW5zIDoge307XG4gICAgQ09NUEFSSVNPTl9DT0xVTU5TLmZvckVhY2goKGNvbHVtbikgPT4ge1xuICAgICAgdG90YWwgKz0gMTtcbiAgICAgIGNvbnN0IHJlZnMgPSB1bmlxdWVSZWZzKGNvbHVtbnNbY29sdW1uXT8ucHJvb2ZfcmVmcyk7XG4gICAgICBpZiAocmVmcy5sZW5ndGggPiAwKSBjb3ZlcmVkICs9IDE7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGFuZ2xlcy5mb3JFYWNoKChhbmdsZSkgPT4ge1xuICAgIHRvdGFsICs9IDE7XG4gICAgaWYgKHVuaXF1ZVJlZnMoYW5nbGU/LnByb29mX3JlZnMpLmxlbmd0aCA+IDApIGNvdmVyZWQgKz0gMTtcbiAgfSk7XG5cbiAgaWYgKHRvdGFsID09PSAwKSByZXR1cm4gMDtcbiAgcmV0dXJuIE51bWJlcigoY292ZXJlZCAvIHRvdGFsKS50b0ZpeGVkKDMpKTtcbn07XG5cbmNvbnN0IGV2YWx1YXRlUHJvb2ZDb3ZlcmFnZSA9IChyYXRpbykgPT4ge1xuICBjb25zdCBudW1lcmljID0gTnVtYmVyLmlzRmluaXRlKE51bWJlcihyYXRpbykpID8gTnVtYmVyKHJhdGlvKSA6IDA7XG4gIGlmIChudW1lcmljIDwgMC40KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5lZWRzUmV2aWV3OiB0cnVlLFxuICAgICAgd2FybmluZ3M6IFtdLFxuICAgICAgbGltaXRhdGlvbnM6IFtcImxvd19wcm9vZl9jb3ZlcmFnZVwiXVxuICAgIH07XG4gIH1cbiAgaWYgKG51bWVyaWMgPCAwLjYpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmVlZHNSZXZpZXc6IGZhbHNlLFxuICAgICAgd2FybmluZ3M6IFtcImxvd19wcm9vZl9jb3ZlcmFnZVwiXSxcbiAgICAgIGxpbWl0YXRpb25zOiBbXVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBuZWVkc1JldmlldzogZmFsc2UsXG4gICAgd2FybmluZ3M6IFtdLFxuICAgIGxpbWl0YXRpb25zOiBbXVxuICB9O1xufTtcblxuY29uc3Qgc3VtbWFyaXplVHJhY2UgPSAodHJhY2UpID0+IHtcbiAgcmV0dXJuIHRyYWNlLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiB7XG4gICAgY29uc3Qga2V5ID0gYCR7aXRlbS5kb21haW59OiR7aXRlbS50eXBlfWA7XG4gICAgYWNjW2tleV0gPSAoYWNjW2tleV0gPz8gMCkgKyAxO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbn07XG5cbmNvbnN0IGdlbmVyYXRlT3V0cHV0ID0gYXN5bmMgKHJhd0lucHV0ID0ge30sIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCBpbnB1dCA9IG5vcm1hbGl6ZUlucHV0KHJhd0lucHV0KTtcbiAgY29uc3Qgd2ViQ2xpZW50ID0gb3B0aW9ucy53ZWJDbGllbnQ7XG5cbiAgY29uc3QgbGFzdERhdGEgPSB1bndyYXBMZWdhY3kob3B0aW9ucy5sYXN0X3J1bik7XG4gIGNvbnN0IHByZXZpb3VzUXVlcmllcyA9XG4gICAgaW5wdXQubW9kZSA9PT0gXCJjb250aW51ZVwiICYmXG4gICAgbGFzdERhdGEgJiZcbiAgICBsYXN0RGF0YS5tZXRhICYmXG4gICAgbGFzdERhdGEubWV0YS5zZWFyY2hfcGxhbiAmJlxuICAgIEFycmF5LmlzQXJyYXkobGFzdERhdGEubWV0YS5zZWFyY2hfcGxhbi5xdWVyaWVzX3VzZWQpXG4gICAgICA/IGxhc3REYXRhLm1ldGEuc2VhcmNoX3BsYW4ucXVlcmllc191c2VkXG4gICAgICA6IG51bGw7XG4gIGNvbnN0IHF1ZXJpZXMgPSBwcmV2aW91c1F1ZXJpZXMgJiYgcHJldmlvdXNRdWVyaWVzLmxlbmd0aCA/IHByZXZpb3VzUXVlcmllcyA6IGJ1aWxkU2VhcmNoUGxhbihpbnB1dCk7XG4gIGNvbnN0IHNlYXJjaF9wbGFuID0geyBxdWVyaWVzX3VzZWQ6IHF1ZXJpZXMgfTtcblxuICBpZiAoIWlucHV0Lmhhc193ZWJfYWNjZXNzIHx8ICF3ZWJDbGllbnQpIHtcbiAgICBjb25zdCBlbXB0eU9mZmVycyA9IHtcbiAgICAgIHNlbGxlcnNfb2ZmZXI6IHtcbiAgICAgICAgb2ZmZXJfbmFtZTogXCJBZ2VudE9TINC00LvRjyDRgdC10LvQu9C10YDQvtCyXCIsXG4gICAgICAgIHRhcmdldF9zZWdtZW50OiBcInNlbGxlcnNcIixcbiAgICAgICAgcHJvbWlzZTogXCLQn9C40LvQvtGCINGBINC/0YDQvtC30YDQsNGH0L3QvtC5INGG0LXQvdC+0Lkg0Lgg0LrQvtGA0L7RgtC60LjQvCDQt9Cw0L/Rg9GB0LrQvtC8LlwiLFxuICAgICAgICB3aGF0X3lvdV9nZXQ6IFtdLFxuICAgICAgICB0aW1lX3RvX3ZhbHVlX2VzdGltYXRlOiBcIjPigJM3INC00L3QtdC5XCIsXG4gICAgICAgIG9uYm9hcmRpbmdfc3RlcHM6IFtdLFxuICAgICAgICBwcmljaW5nOiBcInVua25vd25cIixcbiAgICAgICAgb2JqZWN0aW9uc19hbmRfYW5zd2VyczogW10sXG4gICAgICAgIHJpc2tfcmV2ZXJzYWw6IFwi0KHRgtCw0YDRgtGD0LXQvCDRgSDQv9C40LvQvtGC0LAg0LHQtdC3INC00L7Qu9Cz0L7Qs9C+INC60L7QvdGC0YDQsNC60YLQsC5cIixcbiAgICAgICAgZmlyc3Rfc3RlcDogXCLQnNC40L3QuC3QsNGD0LTQuNGCINC4INC/0LvQsNC9INC/0LjQu9C+0YLQsC5cIixcbiAgICAgICAgY3RhOiBcItCh0L7Qs9C70LDRgdC+0LLQsNGC0Ywg0L/QuNC70L7RglwiXG4gICAgICB9LFxuICAgICAgbG9jYWxfb2ZmZXI6IHtcbiAgICAgICAgb2ZmZXJfbmFtZTogXCJBZ2VudE9TINC00LvRjyDQu9C+0LrQsNC70YzQvdC+0LPQviDQsdC40LfQvdC10YHQsFwiLFxuICAgICAgICB0YXJnZXRfc2VnbWVudDogXCJsb2NhbFwiLFxuICAgICAgICBwcm9taXNlOiBcItCf0LjQu9C+0YIg0L3QsCDQvtC00L3QvtC8INC60LDQvdCw0LvQtSDQsdC10LcgS1BJLdC+0LHQtdGJ0LDQvdC40LkuXCIsXG4gICAgICAgIHdoYXRfeW91X2dldDogW10sXG4gICAgICAgIHRpbWVfdG9fdmFsdWVfZXN0aW1hdGU6IFwiM+KAkzcg0LTQvdC10LlcIixcbiAgICAgICAgb25ib2FyZGluZ19zdGVwczogW10sXG4gICAgICAgIHByaWNpbmc6IFwidW5rbm93blwiLFxuICAgICAgICBvYmplY3Rpb25zX2FuZF9hbnN3ZXJzOiBbXSxcbiAgICAgICAgcmlza19yZXZlcnNhbDogXCLQntCz0YDQsNC90LjRh9C40LLQsNC10LzRgdGPINC/0LjQu9C+0YLQvtC8INC4INGE0LjQutGB0LjRgNGD0LXQvCDQstGL0LLQvtC00YsuXCIsXG4gICAgICAgIGZpcnN0X3N0ZXA6IFwi0JzQuNC90Lgt0LDRg9C00LjRgiDQv9C+0YLQvtC60LAg0L7QsdGA0LDRidC10L3QuNC5LlwiLFxuICAgICAgICBjdGE6IFwi0KHQvtCz0LvQsNGB0L7QstCw0YLRjCDQv9C40LvQvtGCXCJcbiAgICAgIH0sXG4gICAgICBiMmJfb2ZmZXI6IHtcbiAgICAgICAgb2ZmZXJfbmFtZTogXCJBZ2VudE9TINC00LvRjyBCMkJcIixcbiAgICAgICAgdGFyZ2V0X3NlZ21lbnQ6IFwiYjJiXCIsXG4gICAgICAgIHByb21pc2U6IFwi0J/QuNC70L7RgiDQvdCwINC+0LTQvdC+0Lwg0Y3RgtCw0L/QtSDQv9GA0LXRgdC10LnQu9CwINCx0LXQtyDQtNC+0LvQs9C+0LPQviDQvtCx0Y/Qt9Cw0YLQtdC70YzRgdGC0LLQsC5cIixcbiAgICAgICAgd2hhdF95b3VfZ2V0OiBbXSxcbiAgICAgICAgdGltZV90b192YWx1ZV9lc3RpbWF0ZTogXCIz4oCTNyDQtNC90LXQuVwiLFxuICAgICAgICBvbmJvYXJkaW5nX3N0ZXBzOiBbXSxcbiAgICAgICAgcHJpY2luZzogXCJ1bmtub3duXCIsXG4gICAgICAgIG9iamVjdGlvbnNfYW5kX2Fuc3dlcnM6IFtdLFxuICAgICAgICByaXNrX3JldmVyc2FsOiBcItCf0LjQu9C+0YIg0LHQtdC3IEtQSS3QvtCx0LXRidCw0L3QuNC5INC4INCx0LXQtyDQtNC70LjQvdC90L7Qs9C+INC60L7QvdGC0YDQsNC60YLQsC5cIixcbiAgICAgICAgZmlyc3Rfc3RlcDogXCLQnNC40L3QuC3QsNGD0LTQuNGCINGC0LXQutGD0YnQtdCz0L4g0L/RgNC10YHQtdC50LvQsC5cIixcbiAgICAgICAgY3RhOiBcItCh0L7Qs9C70LDRgdC+0LLQsNGC0Ywg0L/QuNC70L7RglwiXG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGxlZ2FjeU91dHB1dCA9IHtcbiAgICAgIGNvbXBldGl0b3JzOiBbXSxcbiAgICAgIHByaWNpbmdfZXZpZGVuY2U6IHtcbiAgICAgICAgc3RhdHVzOiBcInByaWNpbmdfdW5rbm93blwiLFxuICAgICAgICBwcmljaW5nX3Vua25vd246IHRydWUsXG4gICAgICAgIHdoYXRfY2hlY2tlZDogW10sXG4gICAgICAgIGNvbXBldGl0b3JzOiBbXVxuICAgICAgfSxcbiAgICAgIGNvbXBhcmlzb25fdGFibGU6IFtdLFxuICAgICAgd2luX2FuZ2xlczogW1xuICAgICAgICB7XG4gICAgICAgICAgd2hhdF90b19zYXk6IFwi0J3QsNGH0L3QtdC8INGBINC/0LjQu9C+0YLQsCDQuCDQv9GA0L7Qt9GA0LDRh9C90L7QuSDRgNCw0LzQutC4INCx0LXQtyDRgNC10YLQtdC50L3QtdGA0LAuXCIsXG4gICAgICAgICAgcHJvb2ZfdG9fc2hvdzogXCLQn9GD0LHQu9C40YfQvdGL0YUg0YbQtdC9INGDINC60L7QvdC60YPRgNC10L3RgtC+0LIg0LzQvtC20LXRgiDQvdC1INCx0YvRgtGMLlwiLFxuICAgICAgICAgIHRhcmdldF9zZWdtZW50OiBcInNlbGxlcnNcIixcbiAgICAgICAgICBwcm9vZl9yZWZzOiBbXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgd2hhdF90b19zYXk6IFwi0KHRhNC+0LrRg9GB0LjRgNGD0LXQvNGB0Y8g0L3QsCDQvtC00L3QvtC5INCx0L7Qu9C4INC4INC/0YDQvtCy0LXRgNC40Lwg0YbQtdC90L3QvtGB0YLRjCDQvdCwINC60L7RgNC+0YLQutC+0Lwg0L7RgtGA0LXQt9C60LUuXCIsXG4gICAgICAgICAgcHJvb2ZfdG9fc2hvdzogXCLQodGA0LDQstC90LjRgtGMINC80L7QttC90L4g0L/QvtGB0LvQtSDRgdCx0L7RgNCwINC/0YPQsdC70LjRh9C90YvRhSDRgdC40LPQvdCw0LvQvtCyLlwiLFxuICAgICAgICAgIHRhcmdldF9zZWdtZW50OiBcImxvY2FsXCIsXG4gICAgICAgICAgcHJvb2ZfcmVmczogW11cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHdoYXRfdG9fc2F5OiBcItCU0LvRjyBCMkIg0LHQtdC30L7Qv9Cw0YHQvdC10LUg0YHRgtCw0YDRgtC+0LLQsNGC0Ywg0YEg0LzQuNC90Lgt0L/QuNC70L7RgtCwINC4INC40LfQvNC10YDQuNGC0Ywg0L/RgNC+0YbQtdGB0YEuXCIsXG4gICAgICAgICAgcHJvb2ZfdG9fc2hvdzogXCLQndGD0LbQtdC9INC00L7RgdGC0YPQvyDQuiDQvtGC0LrRgNGL0YLRi9C8INC00LDQvdC90YvQvCDQv9C+INC60L7QvdC60YPRgNC10L3RgtCw0LwuXCIsXG4gICAgICAgICAgdGFyZ2V0X3NlZ21lbnQ6IFwiYjJiXCIsXG4gICAgICAgICAgcHJvb2ZfcmVmczogW11cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGFnZW50b3NfcG9zaXRpb25pbmc6IHt9LFxuICAgICAgb2ZmZXJzOiBlbXB0eU9mZmVycyxcbiAgICAgIG1ldGE6IHtcbiAgICAgICAgZ2VuZXJhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHdlYl9zdGF0czoge1xuICAgICAgICAgIHJlcXVlc3RzX21hZGU6IDAsXG4gICAgICAgICAgYmxvY2tlZF9jb3VudDogMCxcbiAgICAgICAgICBlcnJvcnNfY291bnQ6IDAsXG4gICAgICAgICAgZHVyYXRpb25fbXM6IDAsXG4gICAgICAgICAgc291cmNlc191c2VkOiB7fSxcbiAgICAgICAgICB0b3BfZXJyb3JzOiBbXSxcbiAgICAgICAgICB3YXJuaW5nczogW10sXG4gICAgICAgICAgdHJhY2Vfc3VtbWFyeToge31cbiAgICAgICAgfSxcbiAgICAgICAgcHJvb2ZfaXRlbXM6IFtdLFxuICAgICAgICBsaW1pdGF0aW9uczogW1wi0J3QtdGCINCy0LXQsS3QtNC+0YHRgtGD0L/QsCDQtNC70Y8g0L/QvtC40YHQutCwINC60L7QvdC60YPRgNC10L3RgtC+0LIuXCJdLFxuICAgICAgICBhc3N1bXB0aW9uczogW10sXG4gICAgICAgIHNlYXJjaF9wbGFuLFxuICAgICAgICBxdWFsaXR5X2NoZWNrczoge1xuICAgICAgICAgIG5vX2ZhYnJpY2F0aW9uOiB0cnVlLFxuICAgICAgICAgIHByaWNpbmdfdW5rbm93bl9yYXRlOiAxLFxuICAgICAgICAgIGNhc2VzX3Vua25vd25fcmF0ZTogMSxcbiAgICAgICAgICBwcm9vZl9jb3ZlcmFnZV9yYXRpbzogMFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBhcHBseUJ1ZGdldE1ldGEobGVnYWN5T3V0cHV0Lm1ldGEsIGlucHV0KTtcbiAgICByZXR1cm4geyBvdXRwdXQ6IHdyYXBPdXRwdXQobGVnYWN5T3V0cHV0LCBpbnB1dCksIGVmZmVjdGl2ZUlucHV0OiBpbnB1dCB9O1xuICB9XG5cbiAgY29uc3QgZXhjbHVkZURvbWFpbnMgPSBuZXcgU2V0KGlucHV0LmV4Y2x1ZGVfZG9tYWlucy5tYXAoKGl0ZW0pID0+IGl0ZW0udG9Mb3dlckNhc2UoKSkpO1xuICBjb25zdCBzZWVkTGltaXQgPSBpbnB1dC5tb2RlID09PSBcInF1aWNrXCIgPyAzMCA6IDYwO1xuICBjb25zdCBjb21wZXRpdG9yU2VlZHMgPSBuZXcgTWFwKCk7XG5cbiAgZm9yIChjb25zdCBxdWVyeSBvZiBxdWVyaWVzKSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHdlYkNsaWVudC5zZWFyY2gocXVlcnksIFwieWFuZGV4XCIsIGlucHV0Lm1vZGUgPT09IFwicXVpY2tcIiA/IDQgOiA2KTtcbiAgICByZXN1bHRzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IHVybCA9IGNhbm9uaWNhbGl6ZVVybChpdGVtLnVybCk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBob3N0ID0gbmV3IFVSTCh1cmwpLmhvc3RuYW1lLnJlcGxhY2UoL153d3dcXC4vLCBcIlwiKTtcbiAgICAgICAgaWYgKGV4Y2x1ZGVEb21haW5zLmhhcyhob3N0KSkgcmV0dXJuO1xuICAgICAgICBpZiAoIWNvbXBldGl0b3JTZWVkcy5oYXMoaG9zdCkgJiYgY29tcGV0aXRvclNlZWRzLnNpemUgPCBzZWVkTGltaXQpIHtcbiAgICAgICAgICBjb21wZXRpdG9yU2VlZHMuc2V0KGhvc3QsIHsgdXJsLCBxdWVyeSB9KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHByb29mSXRlbXMgPSBbXTtcbiAgY29uc3QgY29tcGV0aXRvcnMgPSBbXTtcbiAgY29uc3QgY29tcGFyaXNvbl90YWJsZSA9IFtdO1xuICBjb25zdCBsaW1pdGF0aW9ucyA9IFtdO1xuXG4gIGZvciAoY29uc3QgW2hvc3QsIHNlZWRdIG9mIGNvbXBldGl0b3JTZWVkcy5lbnRyaWVzKCkpIHtcbiAgICBjb25zdCBwcmltYXJ5VXJsID0gc2VlZC51cmw7XG4gICAgY29uc3QgdHlwZSA9IGlucHV0LmNvbXBldGl0b3JfdHlwZXMuZmluZCgodCkgPT4gc2VlZC5xdWVyeS5pbmNsdWRlcyhcIldCXCIpID8gdCA6IHQpIHx8IFwiYWlfYWdlbmN5XCI7XG4gICAgY29uc3QgZ2VvID0gaW5wdXQuZ2VvO1xuXG4gICAgY29uc3QgcGFnZXNUb0ZldGNoID0gW1xuICAgICAgeyB1cmw6IHByaW1hcnlVcmwsIHR5cGU6IFwiaG9tZVwiIH0sXG4gICAgICB7IHVybDogYCR7cHJpbWFyeVVybC5yZXBsYWNlKC9cXC8kLywgXCJcIil9L3ByaWNpbmdgLCB0eXBlOiBcInByaWNpbmdcIiB9LFxuICAgICAgeyB1cmw6IGAke3ByaW1hcnlVcmwucmVwbGFjZSgvXFwvJC8sIFwiXCIpfS9wcmljZXNgLCB0eXBlOiBcInByaWNpbmdcIiB9LFxuICAgICAgeyB1cmw6IGAke3ByaW1hcnlVcmwucmVwbGFjZSgvXFwvJC8sIFwiXCIpfS9jYXNlc2AsIHR5cGU6IFwiY2FzZXNcIiB9LFxuICAgICAgeyB1cmw6IGAke3ByaW1hcnlVcmwucmVwbGFjZSgvXFwvJC8sIFwiXCIpfS9zZXJ2aWNlc2AsIHR5cGU6IFwic2VydmljZXNcIiB9LFxuICAgICAgeyB1cmw6IGAke3ByaW1hcnlVcmwucmVwbGFjZSgvXFwvJC8sIFwiXCIpfS9jb250YWN0c2AsIHR5cGU6IFwiY29udGFjdHNcIiB9XG4gICAgXTtcbiAgICBjb25zdCBwYWdlc0JhdGNoID0gcGFnZXNUb0ZldGNoLnNsaWNlKDAsIDQpO1xuXG4gICAgY29uc3Qgc2lnbmFscyA9IFtdO1xuICAgIGNvbnN0IHByb29mUmVmcyA9IFtdO1xuICAgIGNvbnN0IHNpZ25hbFJlZk1hcCA9IHt9O1xuICAgIGNvbnN0IHByaWNpbmdDaGVja2VkVXJscyA9IFtdO1xuICAgIGxldCBibG9ja2VkQ291bnQgPSAwO1xuXG4gICAgY29uc3QgYWRkU2lnbmFsUmVmID0gKHNpZ25hbFR5cGUsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBrZXkgPSB0eXBlb2Ygc2lnbmFsVHlwZSA9PT0gXCJzdHJpbmdcIiAmJiBzaWduYWxUeXBlLnRyaW0oKSA/IHNpZ25hbFR5cGUgOiBcInNuaXBwZXRcIjtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShzaWduYWxSZWZNYXBba2V5XSkpIHtcbiAgICAgICAgc2lnbmFsUmVmTWFwW2tleV0gPSBbXTtcbiAgICAgIH1cbiAgICAgIHNpZ25hbFJlZk1hcFtrZXldLnB1c2goaW5kZXgpO1xuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IHBhZ2VSZWYgb2YgcGFnZXNCYXRjaCkge1xuICAgICAgaWYgKHBhZ2VSZWYudHlwZSA9PT0gXCJwcmljaW5nXCIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBwcmljaW5nQ2hlY2tlZFVybHMucHVzaChuZXcgVVJMKHBhZ2VSZWYudXJsKS5wYXRobmFtZSB8fCBwYWdlUmVmLnVybCk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIHByaWNpbmdDaGVja2VkVXJscy5wdXNoKHBhZ2VSZWYudXJsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgcGFnZSA9IGF3YWl0IHdlYkNsaWVudC5mZXRjaFBhZ2UocGFnZVJlZi51cmwsIHsgdHlwZTogcGFnZVJlZi50eXBlIH0pO1xuICAgICAgaWYgKFwiYmxvY2tlZFwiIGluIHBhZ2UpIHtcbiAgICAgICAgYmxvY2tlZENvdW50ICs9IDE7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgbmFtZSA9IGV4dHJhY3RDb21wZXRpdG9yTmFtZShwYWdlLnVybCwgcGFnZS50aXRsZSk7XG4gICAgICBjb25zdCBnZW5lcmljRXh0cmFjdCA9IGV4dHJhY3RGcm9tSHRtbChwYWdlLmh0bWwgfHwgXCJcIiwgcGFnZS51cmwpO1xuICAgICAgaWYgKGdlbmVyaWNFeHRyYWN0ICYmIEFycmF5LmlzQXJyYXkoZ2VuZXJpY0V4dHJhY3QucHJvb2ZfaXRlbXMpKSB7XG4gICAgICAgIGdlbmVyaWNFeHRyYWN0LnByb29mX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHByb29mSXRlbXMubGVuZ3RoO1xuICAgICAgICAgIHByb29mSXRlbXMucHVzaCh7XG4gICAgICAgICAgICB1cmw6IGl0ZW0udXJsIHx8IHBhZ2UudXJsLFxuICAgICAgICAgICAgY29tcGV0aXRvcl9uYW1lOiBuYW1lLFxuICAgICAgICAgICAgc291cmNlX3R5cGU6IHBhZ2VSZWYudHlwZSxcbiAgICAgICAgICAgIHBhZ2VfdHlwZTogcGFnZVJlZi50eXBlLFxuICAgICAgICAgICAgc2lnbmFsX3R5cGU6IGl0ZW0uc2lnbmFsX3R5cGUgfHwgXCJzbmlwcGV0XCIsXG4gICAgICAgICAgICBzaWduYWxfdmFsdWU6IGl0ZW0uc2lnbmFsX3ZhbHVlIHx8IGl0ZW0udXJsIHx8IFwic25pcHBldFwiLFxuICAgICAgICAgICAgZXZpZGVuY2Vfc25pcHBldDogc2FuaXRpemVFdmlkZW5jZVNuaXBwZXQoaXRlbS5ldmlkZW5jZV9zbmlwcGV0IHx8IFwiXCIpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcHJvb2ZSZWZzLnB1c2goaW5kZXgpO1xuICAgICAgICAgIGFkZFNpZ25hbFJlZihpdGVtLnNpZ25hbF90eXBlIHx8IFwic25pcHBldFwiLCBpbmRleCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgcHJvb2ZzID0gZXh0cmFjdFNpZ25hbHNGcm9tUGFnZShwYWdlLCBuYW1lLCBwYWdlUmVmLnR5cGUsIHByb29mSXRlbXMpO1xuICAgICAgcHJvb2ZzLmZvckVhY2goKHByb29mKSA9PiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcHJvb2ZJdGVtcy5sZW5ndGg7XG4gICAgICAgIHByb29mSXRlbXMucHVzaCh7XG4gICAgICAgICAgdXJsOiBwcm9vZi51cmwsXG4gICAgICAgICAgY29tcGV0aXRvcl9uYW1lOiBwcm9vZi5jb21wZXRpdG9yX25hbWUsXG4gICAgICAgICAgc291cmNlX3R5cGU6IHByb29mLnNvdXJjZV90eXBlLFxuICAgICAgICAgIHBhZ2VfdHlwZTogcHJvb2YucGFnZV90eXBlLFxuICAgICAgICAgIHNpZ25hbF90eXBlOiBwcm9vZi5zaWduYWxfdHlwZSxcbiAgICAgICAgICBzaWduYWxfdmFsdWU6IHByb29mLnNpZ25hbF92YWx1ZSxcbiAgICAgICAgICBldmlkZW5jZV9zbmlwcGV0OiBzYW5pdGl6ZUV2aWRlbmNlU25pcHBldChwcm9vZi5ldmlkZW5jZV9zbmlwcGV0KVxuICAgICAgICB9KTtcbiAgICAgICAgcHJvb2ZSZWZzLnB1c2goaW5kZXgpO1xuICAgICAgICBhZGRTaWduYWxSZWYocHJvb2Yuc2lnbmFsX3R5cGUsIGluZGV4KTtcbiAgICAgICAgc2lnbmFscy5wdXNoKHsgLi4ucHJvb2YsIF9pbmRleDogaW5kZXggfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoYmxvY2tlZENvdW50ID49IHBhZ2VzQmF0Y2gubGVuZ3RoICYmICFpbnB1dC5hbGxvd19wbGFjZWhvbGRlcnNfaWZfYmxvY2tlZCkge1xuICAgICAgbGltaXRhdGlvbnMucHVzaChg0JjRgdGC0L7Rh9C90LjQuiDQvdC10LTQvtGB0YLRg9C/0LXQvTogJHtwcmltYXJ5VXJsfWApO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3QgY29tcGV0aXRvck5hbWUgPSBleHRyYWN0Q29tcGV0aXRvck5hbWUocHJpbWFyeVVybCwgXCJcIik7XG4gICAgY29uc3QgY29tcGV0aXRvciA9IGJ1aWxkQ29tcGV0aXRvckZyb21TaWduYWxzKFxuICAgICAgY29tcGV0aXRvck5hbWUsXG4gICAgICBwcmltYXJ5VXJsLFxuICAgICAgdHlwZSxcbiAgICAgIGdlbyxcbiAgICAgIHNpZ25hbHMsXG4gICAgICBbLi4ubmV3IFNldChwcm9vZlJlZnMpXVxuICAgICk7XG4gICAgY29tcGV0aXRvci5fc2lnbmFsX3JlZl9tYXAgPSBzaWduYWxSZWZNYXA7XG4gICAgY29tcGV0aXRvci5fcHJpY2luZ19jaGVja2VkX3VybHMgPSBwcmljaW5nQ2hlY2tlZFVybHM7XG5cbiAgICBpZiAoaW5wdXQucmVxdWlyZV9wcm9vZikge1xuICAgICAgaWYgKGNvbXBldGl0b3IucHJpY2luZ19tb2RlbC51bmtub3duKSBjb21wZXRpdG9yLnByaWNpbmdfbW9kZWwudW5rbm93biA9IHRydWU7XG4gICAgICBpZiAoY29tcGV0aXRvci5jYXNlcy51bmtub3duKSBjb21wZXRpdG9yLmNhc2VzLnVua25vd24gPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbXBldGl0b3JzLnB1c2goY29tcGV0aXRvcik7XG4gICAgY29tcGFyaXNvbl90YWJsZS5wdXNoKGJ1aWxkQ29tcGFyaXNvblJvdyhjb21wZXRpdG9yKSk7XG4gIH1cblxuICBjb25zdCBwcmljaW5nVW5rbm93blJhdGUgPVxuICAgIGNvbXBldGl0b3JzLmxlbmd0aCA9PT0gMFxuICAgICAgPyAxXG4gICAgICA6IGNvbXBldGl0b3JzLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5wcmljaW5nX21vZGVsLnVua25vd24pLmxlbmd0aCAvIGNvbXBldGl0b3JzLmxlbmd0aDtcbiAgY29uc3QgY2FzZXNVbmtub3duUmF0ZSA9XG4gICAgY29tcGV0aXRvcnMubGVuZ3RoID09PSAwXG4gICAgICA/IDFcbiAgICAgIDogY29tcGV0aXRvcnMuZmlsdGVyKChpdGVtKSA9PiBpdGVtLmNhc2VzLnVua25vd24pLmxlbmd0aCAvIGNvbXBldGl0b3JzLmxlbmd0aDtcblxuICBjb25zdCBwcmljaW5nX2V2aWRlbmNlID0gYnVpbGRQcmljaW5nRXZpZGVuY2UoY29tcGV0aXRvcnMpO1xuXG4gIGNvbnN0IGZpcnN0Um93ID0gY29tcGFyaXNvbl90YWJsZVswXSB8fCB7IGNvbHVtbnM6IHt9IH07XG4gIGNvbnN0IHByaWNpbmdHYXBSZWZzID0gdW5pcXVlUmVmcyhmaXJzdFJvdy5jb2x1bW5zPy5bXCLRhtC10L3Ri1wiXT8ucHJvb2ZfcmVmcyB8fCBbXSk7XG4gIGNvbnN0IHNwZWVkUmVmcyA9IHVuaXF1ZVJlZnMoZmlyc3RSb3cuY29sdW1ucz8uW1wi0YHQutC+0YDQvtGB0YLRjFwiXT8ucHJvb2ZfcmVmcyB8fCBbXSk7XG4gIGNvbnN0IHdlYWtSZWZzID0gdW5pcXVlUmVmcyhmaXJzdFJvdy5jb2x1bW5zPy5bXCLRgdC70LDQsdGL0LUg0LzQtdGB0YLQsFwiXT8ucHJvb2ZfcmVmcyB8fCBbXSk7XG4gIGNvbnN0IGZhbGxiYWNrUmVmcyA9IHByb29mSXRlbXMubGVuZ3RoID8gWzBdIDogW107XG5cbiAgY29uc3Qgd2luX2FuZ2xlcyA9IFtcbiAgICB7XG4gICAgICB3aGF0X3RvX3NheTpcbiAgICAgICAgXCLQndCw0YfQvdC10Lwg0YEg0LzQuNC90Lgt0LDRg9C00LjRgtCwINC4INC/0YDQvtC30YDQsNGH0L3QvtCz0L4g0L/QuNC70L7RgtCwINCx0LXQtyDRgNC10YLQtdC50L3QtdGA0LAsINGH0YLQvtCx0Ysg0LLRiyDRg9Cy0LjQtNC10LvQuCDRhtC10L3QvdC+0YHRgtGMINC30LAgM+KAkzcg0LTQvdC10LkuXCIsXG4gICAgICBwcm9vZl90b19zaG93OiBcItCf0L7QutCw0LbQuNGC0LUsINCz0LTQtSDRgyDQutC+0L3QutGD0YDQtdC90YLQvtCyINGG0LXQvdGLINC90LUg0YDQsNGB0LrRgNGL0YLRiyDQuNC70Lgg0YLQvtC70YzQutC+IMKr0L/QviDQt9Cw0L/RgNC+0YHRg8K7LlwiLFxuICAgICAgdGFyZ2V0X3NlZ21lbnQ6IFwic2VsbGVyc1wiLFxuICAgICAgcHJvb2ZfcmVmczogcHJpY2luZ0dhcFJlZnMubGVuZ3RoID8gcHJpY2luZ0dhcFJlZnMgOiBmYWxsYmFja1JlZnNcbiAgICB9LFxuICAgIHtcbiAgICAgIHdoYXRfdG9fc2F5OlxuICAgICAgICBcItCX0LDQutGA0L7QtdC8INGA0YPRgtC40L3RgyDQt9Cw0Y/QstC+0Log0Lgg0L7RgtCy0LXRgtC+0LIg0LrQsNC6INC/0YDQvtC00YPQutGCLCDQsCDQvdC1INC60LDQuiDRgNGD0YfQvdGD0Y4g0YPRgdC70YPQs9GDINC60L7QvNCw0L3QtNGLINC/0L7QtNGA0Y/QtNGH0LjQutCwLlwiLFxuICAgICAgcHJvb2ZfdG9fc2hvdzogXCLQn9C+0LrQsNC20LjRgtC1INGA0LDQt9GA0YvQsjog0L7QsdC10YnQsNC90LjRjyDQtdGB0YLRjCwg0L3QviBTTEEv0LPQsNGA0LDQvdGC0LjQuCDQuCDQtNC+0LPQvtCy0L7RgNC90YvQtSDRgNCw0LzQutC4INC+0L/QuNGB0LDQvdGLINGB0LvQsNCx0L4uXCIsXG4gICAgICB0YXJnZXRfc2VnbWVudDogXCJsb2NhbFwiLFxuICAgICAgcHJvb2ZfcmVmczogd2Vha1JlZnMubGVuZ3RoID8gd2Vha1JlZnMgOiBmYWxsYmFja1JlZnNcbiAgICB9LFxuICAgIHtcbiAgICAgIHdoYXRfdG9fc2F5OlxuICAgICAgICBcItCU0LvRjyBCMkIg0LLRi9Cz0L7QtNC90LXQtSDRgdGC0LDRgNGC0L7QstCw0YLRjCDRgSDQv9C40LvQvtGC0LAg0L3QsCDQvtC00L3QvtC8INC/0YDQvtGG0LXRgdGB0LUg0Lgg0LzQsNGB0YjRgtCw0LHQuNGA0L7QstCw0YLRjCDQv9C+0YHQu9C1INC/0YDQvtCy0LXRgNC60Lgg0YHQuNCz0L3QsNC70LAuXCIsXG4gICAgICBwcm9vZl90b19zaG93OiBcItCf0L7QutCw0LbQuNGC0LUsINGH0YLQviDRgdC60L7RgNC+0YHRgtGMINC30LDQv9GD0YHQutCwINC4INC60LXQudGB0Ysg0YMg0YfQsNGB0YLQuCDRgNGL0L3QutCwINC90LUg0L/QvtC00YLQstC10YDQttC00LXQvdGLINC/0YPQsdC70LjRh9C90L4uXCIsXG4gICAgICB0YXJnZXRfc2VnbWVudDogXCJiMmJcIixcbiAgICAgIHByb29mX3JlZnM6IHNwZWVkUmVmcy5sZW5ndGggPyBzcGVlZFJlZnMgOiBmYWxsYmFja1JlZnNcbiAgICB9XG4gIF07XG5cbiAgY29uc3QgYWdlbnRvc19wb3NpdGlvbmluZyA9IHtcbiAgICBkaWZmZXJlbnRpYXRvcnM6IFtcbiAgICAgIFwi0J/RgNC+0LTRg9C60YLQvtCy0YvQuSDQv9C+0LTRhdC+0LQg0LLQvNC10YHRgtC+INCw0LPQtdC90YLRgdC60LjRhSDRh9Cw0YHQvtCyXCIsXG4gICAgICBcItCR0YvRgdGC0YDRi9C5INC30LDQv9GD0YHQuiDQt9CwIDPigJM3INC00L3QtdC5XCIsXG4gICAgICBcItCV0LTQuNC90YvQuSDRgdGC0LXQuiDQsNCz0LXQvdGC0L7QsiDQv9C+0LQg0LvQuNC00L7Qs9C10L0v0L/QvtC00LTQtdGA0LbQutGDL9C60L7QvdGC0LXQvdGCXCJcbiAgICBdLFxuICAgIGFudGlfYnVsbHNoaXRfbGluZXM6IFtcbiAgICAgIFwi0JzRiyDQvdC1INC+0LHQtdGJ0LDQtdC8IEtQSSDQsdC10Lcg0LTQsNC90L3Ri9GFXCIsXG4gICAgICBcItCd0LUg0LDQs9C10L3RgtGB0YLQstC+INC4INC90LUg0YTRgNC40LvQsNC90YEg4oCUINC/0YDQvtC00YPQutGCINGBINC/0YDQvtC30YDQsNGH0L3QvtC5INGG0LXQvdC+0LlcIixcbiAgICAgIFwi0KHQvdCw0YfQsNC70LAg0L/QuNC70L7Rgiwg0LfQsNGC0LXQvCDQvNCw0YHRiNGC0LDQsdC40YDQvtCy0LDQvdC40LVcIlxuICAgIF0sXG4gICAgcmVhZHlfcGhyYXNlczogW1xuICAgICAgXCJBZ2VudE9TIOKAlCDQvtGA0LrQtdGB0YLRgNCw0YLQvtGAINCw0LPQtdC90YLQvtCyINC/0L7QtCDQutC70Y7Rh9C10LLRi9C1INC/0YDQvtGG0LXRgdGB0Ysg0LHQuNC30L3QtdGB0LAuXCIsXG4gICAgICBcItCX0LDQv9GD0YHQuiDQv9C10YDQstC+0LPQviDQsNCz0LXQvdGC0LAg0LfQsCAz4oCTNyDQtNC90LXQuS5cIixcbiAgICAgIFwi0J/RgNC+0LfRgNCw0YfQvdCw0Y8g0YbQtdC90LAgNTAwMCDigr0v0LzQtdGBINCx0LXQtyDRgdC60YDRi9GC0YvRhSDRgdGC0LDQstC+0LouXCIsXG4gICAgICBcItCk0L7QutGD0YEg0L3QsCDRgdC60L7RgNC+0YHRgtC4INC+0YLQstC10YLQsCDQuCDQutCw0YfQtdGB0YLQstC1INC60L7QvdGC0LXQvdGC0LAuXCIsXG4gICAgICBcItCd0LUg0L7QsdC10YnQsNC10LwgS1BJINCx0LXQtyDQtNCw0L3QvdGL0YUg4oCUINGB0L3QsNGH0LDQu9CwINC00LjQsNCz0L3QvtGB0YLQuNC60LAuXCIsXG4gICAgICBcItCc0L7QttC90L4g0L/QvtC00LrQu9GO0YfQuNGC0YwgV0IvT3pvbiwg0YHQsNC50YIg0Lgg0LzQtdGB0YHQtdC90LTQttC10YDRiyDQsiDQvtC00LjQvSDQv9C+0YLQvtC6LlwiLFxuICAgICAgXCLQkNCy0YLQvtC80LDRgtC40LfQuNGA0YPQtdC8INGA0YPRgtC40L3Rgzog0LvQuNC00YssINC/0L7QtNC00LXRgNC20LrQsCwg0L7RgtGH0LXRgtGLLlwiLFxuICAgICAgXCLQn9C40LvQvtGCIOKGkiDQuNC30LzQtdGA0LXQvdC40LUg4oaSINC80LDRgdGI0YLQsNCx0LjRgNC+0LLQsNC90LjQtS5cIixcbiAgICAgIFwi0KDQsNCx0L7RgtCw0LXQvCDQsiDQoNCkLCDRgSDRg9GH0LXRgtC+0Lwg0LvQvtC60LDQu9GM0L3Ri9GFINC60LDQvdCw0LvQvtCyLlwiLFxuICAgICAgXCLQkNCz0LXQvdGC0Ysg0LzQvtC20L3QviDQvdCw0YHRgtGA0LDQuNCy0LDRgtGMINC/0L7QtCDQvtGC0YDQsNGB0LvQtdCy0YvQtSDRgdGG0LXQvdCw0YDQuNC4LlwiXG4gICAgXSxcbiAgICBiYXR0bGVjYXJkOiBbXG4gICAgICB7IHF1ZXN0aW9uOiBcItCjINC90LDRgSDRg9C20LUg0LDQs9C10L3RgtGB0YLQstC+XCIsIGFuc3dlcjogXCJBZ2VudE9TINC30LDQutGA0YvQstCw0LXRgiDRgNGD0YLQuNC90YMg0LTQtdGI0LXQstC70LUg0Lgg0LHRi9GB0YLRgNC10LUsINCw0LPQtdC90YLRgdGC0LLQviDQvdC1INC90YPQttC90L4g0L3QsCDQv9C+0YHRgtC+0Y/QvdC60LUuXCIgfSxcbiAgICAgIHsgcXVlc3Rpb246IFwi0J3QsNC8INC90YPQttC10L0g0LrQvtC70LvigJHRhtC10L3RgtGAXCIsIGFuc3dlcjogXCLQp9Cw0YHRgtGMINC+0LHRgNCw0YnQtdC90LjQuSDQvNC+0LbQvdC+INC30LDQutGA0YvRgtGMINCw0LPQtdC90YLQsNC80LgsINC70Y7QtNC4INC+0YHRgtCw0Y7RgtGB0Y8g0LTQu9GPINGB0LvQvtC20L3Ri9GFINC60LXQudGB0L7Qsi5cIiB9LFxuICAgICAgeyBxdWVzdGlvbjogXCLQnNGLINCx0L7QuNC80YHRjyDQvtCx0LXRidCw0L3QuNC5XCIsIGFuc3dlcjogXCLQnNGLINC90LUg0L7QsdC10YnQsNC10LwgS1BJINCx0LXQtyDQtNCw0L3QvdGL0YUg4oCUINGB0L3QsNGH0LDQu9CwINC/0LjQu9C+0YIg0Lgg0LzQtdGC0YDQuNC60LguXCIgfSxcbiAgICAgIHsgcXVlc3Rpb246IFwi0KHQu9C+0LbQvdC+INCy0L3QtdC00YDRj9GC0YxcIiwgYW5zd2VyOiBcItCh0YLQsNGA0YLRg9C10Lwg0YEg0L7QtNC90L7Qs9C+INC/0YDQvtGG0LXRgdGB0LAsIDPigJM3INC00L3QtdC5INC90LAg0LfQsNC/0YPRgdC6LlwiIH0sXG4gICAgICB7IHF1ZXN0aW9uOiBcItCd0YPQttC90Ysg0LrQtdC50YHRi1wiLCBhbnN3ZXI6IFwi0J/QvtC60LDQt9GL0LLQsNC10Lwg0LHRi9GB0YLRgNGL0Lkg0L/QuNC70L7RgiDQvdCwINCy0LDRiNC40YUg0LTQsNC90L3Ri9GFLlwiIH0sXG4gICAgICB7IHF1ZXN0aW9uOiBcItCU0L7RgNC+0LPQvlwiLCBhbnN3ZXI6IFwi0JHQsNC30L7QstGL0Lkg0L/Qu9Cw0L0gNTAwMCDigr0v0LzQtdGBLCDQtNCw0LvRjNGI0LUg0LzQsNGB0YjRgtCw0LHQuNGA0L7QstCw0L3QuNC1LlwiIH1cbiAgICBdXG4gIH07XG5cbiAgY29uc3Qgb2ZmZXJzID0ge1xuICAgIHNlbGxlcnNfb2ZmZXI6IHtcbiAgICAgIG9mZmVyX25hbWU6IFwiQWdlbnRPUyDQtNC70Y8g0YHQtdC70LvQtdGA0L7QslwiLFxuICAgICAgdGFyZ2V0X3NlZ21lbnQ6IFwic2VsbGVyc1wiLFxuICAgICAgcHJvbWlzZTogXCLQo9GB0LrQvtGA0Y/QtdC8INC+0YLQstC10YLRiyDQuCDQvtCx0L3QvtCy0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQtdC6INCx0LXQtyDQvtCx0LXRidCw0L3QuNC5IEtQSVwiLFxuICAgICAgd2hhdF95b3VfZ2V0OiBbXG4gICAgICAgIFwi0JDQstGC0L7QvtGC0LLQtdGC0Ysg0L3QsCDQvtGC0LfRi9Cy0YtcIixcbiAgICAgICAgXCLQmtC+0L3RgtC10L3RgiDQtNC70Y8g0LrQsNGA0YLQvtGH0LXQulwiLFxuICAgICAgICBcItCc0L7QvdC40YLQvtGA0LjQvdCzINCy0L7Qv9GA0L7RgdC+0LJcIlxuICAgICAgXSxcbiAgICAgIHRpbWVfdG9fdmFsdWVfZXN0aW1hdGU6IFwiM+KAkzcg0LTQvdC10LlcIixcbiAgICAgIG9uYm9hcmRpbmdfc3RlcHM6IFtcItCR0YDQuNGEXCIsIFwi0JTQvtGB0YLRg9C/INC6INC60LDQsdC40L3QtdGC0YNcIiwgXCLQn9C40LvQvtGCXCJdLFxuICAgICAgcHJpY2luZzogXCI1MDAwIOKCvS/QvNC10YEg0LHQsNC30L7QstGL0Lkg0L/Qu9Cw0L1cIixcbiAgICAgIG9iamVjdGlvbnNfYW5kX2Fuc3dlcnM6IFtcbiAgICAgICAgXCLQoyDQvdCw0YEg0LXRgdGC0Ywg0LzQtdC90LXQtNC20LXRgCDihpIg0LDQs9C10L3RgiDRg9GB0LrQvtGA0LjRgiDRgNGD0YLQuNC90YNcIixcbiAgICAgICAgXCLQlNC+0YDQvtCz0L4g4oaSINCx0LDQt9C+0LLRi9C5INC/0LvQsNC9IDUwMDAg4oK9L9C80LXRgVwiLFxuICAgICAgICBcItCh0LvQvtC20L3QviDihpIg0L3QsNGH0L3QtdC8INGBIDEg0LrQsNGC0LXQs9C+0YDQuNC4XCJcbiAgICAgIF0sXG4gICAgICByaXNrX3JldmVyc2FsOiBcItCV0YHQu9C4INC/0LjQu9C+0YIg0L3QtSDQt9Cw0YXQvtC00LjRgiwg0YTQuNC60YHQuNGA0YPQtdC8INCy0YvQstC+0LTRiyDQuCDQvtGB0YLQsNC90LDQstC70LjQstCw0LXQvCDQsdC10Lcg0LTQvtC70LPQvtCz0L4g0LrQvtC90YLRgNCw0LrRgtCwLlwiLFxuICAgICAgZmlyc3Rfc3RlcDogXCLQnNC40L3QuC3QsNGD0LTQuNGCINC60LDRgNGC0L7Rh9C10Log0Lgg0L7RgtC30YvQstC+0LIgKyDQv9C40LvQvtGCINC90LAgMSDQutCw0YLQtdCz0L7RgNC40LggKDPigJM3INC00L3QtdC5KS5cIixcbiAgICAgIGN0YTogXCLQl9Cw0L/Rg9GB0YLQuNGC0Ywg0L/QuNC70L7RgiDQvdCwIDEg0LrQsNGC0LXQs9C+0YDQuNC4XCJcbiAgICB9LFxuICAgIGxvY2FsX29mZmVyOiB7XG4gICAgICBvZmZlcl9uYW1lOiBcIkFnZW50T1Mg0LTQu9GPINC70L7QutCw0LvRjNC90L7Qs9C+INCx0LjQt9C90LXRgdCwXCIsXG4gICAgICB0YXJnZXRfc2VnbWVudDogXCJsb2NhbFwiLFxuICAgICAgcHJvbWlzZTogXCLQkNCy0YLQvtC80LDRgtC40LfQuNGA0YPQtdC8INC30LDRj9Cy0LrQuCDQuCDQvtGC0LfRi9Cy0Ysg0LHQtdC3INC+0LHQtdGJ0LDQvdC40LkgS1BJXCIsXG4gICAgICB3aGF0X3lvdV9nZXQ6IFtcbiAgICAgICAgXCLQntGC0LLQtdGC0Ysg0L3QsCDQvtGC0LfRi9Cy0YtcIixcbiAgICAgICAgXCLQmtCy0LDQu9C40YTQuNC60LDRhtC40Y8g0LvQuNC00L7QslwiLFxuICAgICAgICBcItCd0LDQv9C+0LzQuNC90LDQvdC40Y9cIlxuICAgICAgXSxcbiAgICAgIHRpbWVfdG9fdmFsdWVfZXN0aW1hdGU6IFwiM+KAkzUg0LTQvdC10LlcIixcbiAgICAgIG9uYm9hcmRpbmdfc3RlcHM6IFtcItCR0YDQuNGEXCIsIFwi0J/QvtC00LrQu9GO0YfQtdC90LjQtSDQutCw0L3QsNC70L7QslwiLCBcItCf0LjQu9C+0YJcIl0sXG4gICAgICBwcmljaW5nOiBcIjUwMDAg4oK9L9C80LXRgSDQsdCw0LfQvtCy0YvQuSDQv9C70LDQvVwiLFxuICAgICAgb2JqZWN0aW9uc19hbmRfYW5zd2VyczogW1xuICAgICAgICBcItCV0YHRgtGMINCw0LTQvNC40L3QuNGB0YLRgNCw0YLQvtGAIOKGkiDRgdC90LjQvNC10Lwg0YDRg9GC0LjQvdGDXCIsXG4gICAgICAgIFwi0J3QtdGCINCy0YDQtdC80LXQvdC4IOKGkiDQt9Cw0L/Rg9GB0Log0LfQsCDQvdC10LTQtdC70Y5cIixcbiAgICAgICAgXCLQodC+0LzQvdC10LLQsNC10LzRgdGPIOKGkiDQv9C40LvQvtGCXCJcbiAgICAgIF0sXG4gICAgICByaXNrX3JldmVyc2FsOiBcItCh0YLQsNGA0YLRg9C10Lwg0YEg0L7QtNC90L7Qs9C+INC60LDQvdCw0LvQsCDQuCDQv9GA0LXQutGA0LDRidCw0LXQvCDQv9C+0YHQu9C1INC/0LjQu9C+0YLQsCwg0LXRgdC70Lgg0YTQvtGA0LzQsNGCINC90LUg0L/QvtC00YXQvtC00LjRgi5cIixcbiAgICAgIGZpcnN0X3N0ZXA6IFwi0JzQuNC90Lgt0LDRg9C00LjRgiDQstC+0YDQvtC90LrQuCDQt9Cw0L/QuNGB0Lgv0L7QsdGA0LDRidC10L3QuNC5INC4INGC0LXRgdGCINC90LAg0L7QtNC90L7QvCDQutCw0L3QsNC70LUgKDPigJM1INC00L3QtdC5KS5cIixcbiAgICAgIGN0YTogXCLQl9Cw0L/Rg9GB0YLQuNGC0Ywg0L/QuNC70L7RgiDQvdCwIDEg0LrQsNC90LDQu9C1XCJcbiAgICB9LFxuICAgIGIyYl9vZmZlcjoge1xuICAgICAgb2ZmZXJfbmFtZTogXCJBZ2VudE9TINC00LvRjyBCMkJcIixcbiAgICAgIHRhcmdldF9zZWdtZW50OiBcImIyYlwiLFxuICAgICAgcHJvbWlzZTogXCLQo9GB0LrQvtGA0Y/QtdC8INC/0YDQtdGB0LXQudC7INC4INC+0LHRgNCw0LHQvtGC0LrRgyDQu9C40LTQvtCyINCx0LXQtyDQvtCx0LXRidCw0L3QuNC5IEtQSVwiLFxuICAgICAgd2hhdF95b3VfZ2V0OiBbXG4gICAgICAgIFwi0JrQstCw0LvQuNGE0LjQutCw0YbQuNGPINC70LjQtNC+0LJcIixcbiAgICAgICAgXCLQp9C10YDQvdC+0LLQuNC60Lgg0JrQn1wiLFxuICAgICAgICBcIkZvbGxvd+KAkXVwc1wiXG4gICAgICBdLFxuICAgICAgdGltZV90b192YWx1ZV9lc3RpbWF0ZTogXCI14oCTNyDQtNC90LXQuVwiLFxuICAgICAgb25ib2FyZGluZ19zdGVwczogW1wi0JHRgNC40YRcIiwgXCLQmNC90YLQtdCz0YDQsNGG0LjRjyBDUk1cIiwgXCLQn9C40LvQvtGCXCJdLFxuICAgICAgcHJpY2luZzogXCI1MDAwIOKCvS/QvNC10YEg0LHQsNC30L7QstGL0Lkg0L/Qu9Cw0L1cIixcbiAgICAgIG9iamVjdGlvbnNfYW5kX2Fuc3dlcnM6IFtcbiAgICAgICAgXCLQlNC70LjQvdC90YvQuSDRhtC40LrQuyDihpIg0YPRgdC60L7RgNC40Lwg0L/RgNC10YHQtdC50LtcIixcbiAgICAgICAgXCLQndGD0LbQvdCwINGC0L7Rh9C90L7RgdGC0Ywg4oaSINC/0LjQu9C+0YJcIixcbiAgICAgICAgXCLQodC70L7QttC90L4g4oaSINC90LDRh9C90LXQvCDRgSAxINC/0YDQvtGG0LXRgdGB0LBcIlxuICAgICAgXSxcbiAgICAgIHJpc2tfcmV2ZXJzYWw6IFwi0J/QuNC70L7RgiDQvdCwINC+0LTQvdC+0Lwg0L/RgNC10YHQtdC50Lst0L/RgNC+0YbQtdGB0YHQtSDQsdC10Lcg0L7QsdC10YnQsNC90LjQuSBLUEkg0Lgg0LHQtdC3INC00L7Qu9Cz0LjRhSDQvtCx0Y/Qt9Cw0YLQtdC70YzRgdGC0LIuXCIsXG4gICAgICBmaXJzdF9zdGVwOiBcItCc0LjQvdC4LdCw0YPQtNC40YIg0L/RgNC10YHQtdC50LvQsCArINC/0LjQu9C+0YIg0L3QsCAxINGN0YLQsNC/0LUgKNC60LLQsNC70LjRhNC40LrQsNGG0LjRjyDQuNC70LggZm9sbG93LXVwKS5cIixcbiAgICAgIGN0YTogXCLQl9Cw0L/Rg9GB0YLQuNGC0Ywg0L/QuNC70L7RgiDQvdCwIDEg0YHQtdCz0LzQtdC90YLQtSDQu9C40LTQvtCyXCJcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcHJvb2ZfY292ZXJhZ2VfcmF0aW8gPSBjb21wdXRlUHJvb2ZDb3ZlcmFnZVJhdGlvKGNvbXBhcmlzb25fdGFibGUsIHdpbl9hbmdsZXMpO1xuICBjb25zdCBwcm9vZkNvdmVyYWdlU3RhdHVzID0gZXZhbHVhdGVQcm9vZkNvdmVyYWdlKHByb29mX2NvdmVyYWdlX3JhdGlvKTtcbiAgY29uc3Qgd2FybmluZ3MgPSBbLi4ucHJvb2ZDb3ZlcmFnZVN0YXR1cy53YXJuaW5nc107XG4gIGNvbnN0IG5lZWRzUmV2aWV3ID0gcHJvb2ZDb3ZlcmFnZVN0YXR1cy5uZWVkc1JldmlldztcbiAgcHJvb2ZDb3ZlcmFnZVN0YXR1cy5saW1pdGF0aW9ucy5mb3JFYWNoKChpdGVtKSA9PiBsaW1pdGF0aW9ucy5wdXNoKGl0ZW0pKTtcblxuICBjb25zdCBzdGF0cyA9IHdlYkNsaWVudC5nZXRTdGF0cygpO1xuICBjb25zdCB0cmFjZSA9IHdlYkNsaWVudC5nZXRUcmFjZSgpO1xuICBjb25zdCBwdWJsaWNDb21wZXRpdG9ycyA9IGNvbXBldGl0b3JzLm1hcCgoaXRlbSkgPT4ge1xuICAgIGNvbnN0IG5leHQgPSB7IC4uLml0ZW0gfTtcbiAgICBkZWxldGUgbmV4dC5fc2lnbmFsX3JlZl9tYXA7XG4gICAgZGVsZXRlIG5leHQuX3ByaWNpbmdfY2hlY2tlZF91cmxzO1xuICAgIHJldHVybiBuZXh0O1xuICB9KTtcblxuICBjb25zdCBvdXRwdXQgPSB7XG4gICAgY29tcGV0aXRvcnM6IHB1YmxpY0NvbXBldGl0b3JzLFxuICAgIHByaWNpbmdfZXZpZGVuY2UsXG4gICAgY29tcGFyaXNvbl90YWJsZSxcbiAgICB3aW5fYW5nbGVzLFxuICAgIGFnZW50b3NfcG9zaXRpb25pbmcsXG4gICAgb2ZmZXJzLFxuICAgIG1ldGE6IHtcbiAgICAgIGdlbmVyYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgd2ViX3N0YXRzOiB7XG4gICAgICAgIHJlcXVlc3RzX21hZGU6IHN0YXRzLnJlcXVlc3RzX21hZGUsXG4gICAgICAgIGJsb2NrZWRfY291bnQ6IHN0YXRzLmJsb2NrZWRfY291bnQsXG4gICAgICAgIGVycm9yc19jb3VudDogc3RhdHMuZXJyb3JzX2NvdW50LFxuICAgICAgICBkdXJhdGlvbl9tczogc3RhdHMuZHVyYXRpb25fbXMsXG4gICAgICAgIHNvdXJjZXNfdXNlZDoge1xuICAgICAgICAgIHlhbmRleDogdHJhY2UuZmlsdGVyKChpdGVtKSA9PiBpdGVtLmRvbWFpbi5pbmNsdWRlcyhcInlhbmRleFwiKSkubGVuZ3RoLFxuICAgICAgICAgIHdiOiB0cmFjZS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uZG9tYWluLmluY2x1ZGVzKFwid2lsZGJlcnJpZXNcIikpLmxlbmd0aCxcbiAgICAgICAgICBvem9uOiB0cmFjZS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uZG9tYWluLmluY2x1ZGVzKFwib3pvblwiKSkubGVuZ3RoLFxuICAgICAgICAgIHZrOiB0cmFjZS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uZG9tYWluLmluY2x1ZGVzKFwidmsuY29tXCIpKS5sZW5ndGgsXG4gICAgICAgICAgdGc6IHRyYWNlLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5kb21haW4uaW5jbHVkZXMoXCJ0Lm1lXCIpKS5sZW5ndGgsXG4gICAgICAgICAgd2Vic2l0ZXM6IHRyYWNlLmZpbHRlcihcbiAgICAgICAgICAgIChpdGVtKSA9PlxuICAgICAgICAgICAgICAhaXRlbS5kb21haW4uaW5jbHVkZXMoXCJ5YW5kZXhcIikgJiZcbiAgICAgICAgICAgICAgIWl0ZW0uZG9tYWluLmluY2x1ZGVzKFwid2lsZGJlcnJpZXNcIikgJiZcbiAgICAgICAgICAgICAgIWl0ZW0uZG9tYWluLmluY2x1ZGVzKFwib3pvblwiKSAmJlxuICAgICAgICAgICAgICAhaXRlbS5kb21haW4uaW5jbHVkZXMoXCJ2ay5jb21cIikgJiZcbiAgICAgICAgICAgICAgIWl0ZW0uZG9tYWluLmluY2x1ZGVzKFwidC5tZVwiKVxuICAgICAgICAgICkubGVuZ3RoXG4gICAgICAgIH0sXG4gICAgICAgIHRvcF9lcnJvcnM6IHN0YXRzLnRvcF9lcnJvcnMgfHwgW10sXG4gICAgICAgIHdhcm5pbmdzOiBzdGF0cy53YXJuaW5ncyB8fCBbXSxcbiAgICAgICAgdHJhY2Vfc3VtbWFyeTogc3VtbWFyaXplVHJhY2UodHJhY2UpXG4gICAgICB9LFxuICAgICAgcHJvb2ZfaXRlbXM6IHByb29mSXRlbXMsXG4gICAgICBuZWVkc1JldmlldyxcbiAgICAgIHdhcm5pbmdzLFxuICAgICAgbGltaXRhdGlvbnMsXG4gICAgICBhc3N1bXB0aW9uczogW10sXG4gICAgICBzZWFyY2hfcGxhbixcbiAgICAgIHF1YWxpdHlfY2hlY2tzOiB7XG4gICAgICAgIG5vX2ZhYnJpY2F0aW9uOiBwcm9vZkl0ZW1zLmxlbmd0aCA+IDAsXG4gICAgICAgIHByaWNpbmdfdW5rbm93bl9yYXRlOiBwcmljaW5nVW5rbm93blJhdGUsXG4gICAgICAgIGNhc2VzX3Vua25vd25fcmF0ZTogY2FzZXNVbmtub3duUmF0ZSxcbiAgICAgICAgcHJvb2ZfY292ZXJhZ2VfcmF0aW9cbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGFwcGx5QnVkZ2V0TWV0YShvdXRwdXQubWV0YSwgaW5wdXQpO1xuXG4gIGNvbnN0IGVudmVsb3BlID0gd3JhcE91dHB1dChvdXRwdXQsIGlucHV0KTtcbiAgaWYgKGlucHV0Lm1vZGUgPT09IFwicmVmcmVzaFwiICYmIG9wdGlvbnMubGFzdF9ydW4pIHtcbiAgICBjb25zdCBwcmV2ID0gdW53cmFwTGVnYWN5KG9wdGlvbnMubGFzdF9ydW4pO1xuICAgIGNvbnN0IHByZXZDb21wZXRpdG9ycyA9IEFycmF5LmlzQXJyYXkocHJldi5jb21wZXRpdG9ycykgPyBwcmV2LmNvbXBldGl0b3JzIDogW107XG4gICAgY29uc3QgY3VycmVudENvbXBldGl0b3JzID0gQXJyYXkuaXNBcnJheShvdXRwdXQuY29tcGV0aXRvcnMpID8gb3V0cHV0LmNvbXBldGl0b3JzIDogW107XG4gICAgY29uc3Qga2V5ID0gKGl0ZW0pID0+IGAke2l0ZW0ucHJpbWFyeV91cmwgfHwgaXRlbS5uYW1lIHx8IFwiXCJ9YC50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHByZXZLZXlzID0gbmV3IFNldChwcmV2Q29tcGV0aXRvcnMubWFwKGtleSkpO1xuICAgIGNvbnN0IGN1cnJlbnRLZXlzID0gbmV3IFNldChjdXJyZW50Q29tcGV0aXRvcnMubWFwKGtleSkpO1xuICAgIGNvbnN0IGRpZmYgPSB7XG4gICAgICBhZGRlZDogWy4uLmN1cnJlbnRLZXlzXS5maWx0ZXIoKGspID0+ICFwcmV2S2V5cy5oYXMoaykpLFxuICAgICAgcmVtb3ZlZDogWy4uLnByZXZLZXlzXS5maWx0ZXIoKGspID0+ICFjdXJyZW50S2V5cy5oYXMoaykpXG4gICAgfTtcbiAgICBpZiAoZW52ZWxvcGUubWV0YSAmJiBlbnZlbG9wZS5tZXRhLmhhbmRvZmYgJiYgZW52ZWxvcGUubWV0YS5oYW5kb2ZmLmVudGl0aWVzKSB7XG4gICAgICBlbnZlbG9wZS5tZXRhLmhhbmRvZmYuZW50aXRpZXMuZGlmZiA9IGRpZmY7XG4gICAgfVxuICB9XG4gIHJldHVybiB7IG91dHB1dDogZW52ZWxvcGUsIGVmZmVjdGl2ZUlucHV0OiBpbnB1dCB9O1xufTtcblxuY29uc3QgZ2VuZXJhdGVUaW1vZmV5T3V0cHV0ID0gYXN5bmMgKGlucHV0ID0ge30sIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZW5lcmF0ZU91dHB1dChpbnB1dCwgb3B0aW9ucyk7XG4gIHJldHVybiByZXN1bHQub3V0cHV0O1xufTtcblxuY29uc3QgdmFsaWRhdGVUaW1vZmV5T3V0cHV0ID0gKHBheWxvYWQpID0+IHtcbiAgY29uc3QgZXJyb3JzID0gW107XG4gIGNvbnN0IGxlZ2FjeSA9IHVud3JhcExlZ2FjeShwYXlsb2FkKTtcbiAgaWYgKCFsZWdhY3kgfHwgdHlwZW9mIGxlZ2FjeSAhPT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3JzOiBbXCJPdXRwdXQgbXVzdCBiZSBhbiBvYmplY3QuXCJdIH07XG4gIH1cbiAgcGF5bG9hZCA9IGxlZ2FjeTtcbiAgaWYgKCFwYXlsb2FkLnByaWNpbmdfZXZpZGVuY2UgfHwgdHlwZW9mIHBheWxvYWQucHJpY2luZ19ldmlkZW5jZSAhPT0gXCJvYmplY3RcIikge1xuICAgIGVycm9ycy5wdXNoKFwicHJpY2luZ19ldmlkZW5jZSBpcyByZXF1aXJlZC5cIik7XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgc3RhdHVzID0gcGF5bG9hZC5wcmljaW5nX2V2aWRlbmNlLnN0YXR1cztcbiAgICBpZiAoIVtcInByaWNpbmdfZm91bmRcIiwgXCJwcmljaW5nX3Vua25vd25cIl0uaW5jbHVkZXMoc3RhdHVzKSkge1xuICAgICAgZXJyb3JzLnB1c2goXCJwcmljaW5nX2V2aWRlbmNlLnN0YXR1cyBtdXN0IGJlIHByaWNpbmdfZm91bmR8cHJpY2luZ191bmtub3duLlwiKTtcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHBheWxvYWQucHJpY2luZ19ldmlkZW5jZS53aGF0X2NoZWNrZWQpKSB7XG4gICAgICBlcnJvcnMucHVzaChcInByaWNpbmdfZXZpZGVuY2Uud2hhdF9jaGVja2VkIG11c3QgYmUgYW4gYXJyYXkuXCIpO1xuICAgIH1cbiAgfVxuXG4gIGlmICghQXJyYXkuaXNBcnJheShwYXlsb2FkLmNvbXBhcmlzb25fdGFibGUpKSB7XG4gICAgZXJyb3JzLnB1c2goXCJjb21wYXJpc29uX3RhYmxlIG11c3QgYmUgYW4gYXJyYXkuXCIpO1xuICB9IGVsc2Uge1xuICAgIHBheWxvYWQuY29tcGFyaXNvbl90YWJsZS5mb3JFYWNoKChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICBpZiAoIXJvdyB8fCB0eXBlb2Ygcm93ICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBjb21wYXJpc29uX3RhYmxlWyR7cm93SW5kZXh9XSBtdXN0IGJlIGFuIG9iamVjdC5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCFyb3cuY29sdW1ucyB8fCB0eXBlb2Ygcm93LmNvbHVtbnMgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goYGNvbXBhcmlzb25fdGFibGVbJHtyb3dJbmRleH1dLmNvbHVtbnMgaXMgcmVxdWlyZWQuYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgIUFycmF5LmlzQXJyYXkocm93LmNvbHVtbl9vcmRlcikgfHxcbiAgICAgICAgcm93LmNvbHVtbl9vcmRlci5sZW5ndGggIT09IENPTVBBUklTT05fQ09MVU1OUy5sZW5ndGggfHxcbiAgICAgICAgcm93LmNvbHVtbl9vcmRlci5zb21lKChpdGVtLCBpZHgpID0+IGl0ZW0gIT09IENPTVBBUklTT05fQ09MVU1OU1tpZHhdKVxuICAgICAgKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBjb21wYXJpc29uX3RhYmxlWyR7cm93SW5kZXh9XS5jb2x1bW5fb3JkZXIgbXVzdCBtYXRjaCBmaXhlZCBjb2x1bW5zLmApO1xuICAgICAgfVxuICAgICAgQ09NUEFSSVNPTl9DT0xVTU5TLmZvckVhY2goKGNvbHVtbikgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gcm93LmNvbHVtbnNbY29sdW1uXTtcbiAgICAgICAgaWYgKCFjZWxsIHx8IHR5cGVvZiBjZWxsICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgZXJyb3JzLnB1c2goYGNvbXBhcmlzb25fdGFibGVbJHtyb3dJbmRleH1dLmNvbHVtbnMuJHtjb2x1bW59IGlzIHJlcXVpcmVkLmApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY2VsbC5wcm9vZl9yZWZzKSkge1xuICAgICAgICAgIGVycm9ycy5wdXNoKGBjb21wYXJpc29uX3RhYmxlWyR7cm93SW5kZXh9XS5jb2x1bW5zLiR7Y29sdW1ufS5wcm9vZl9yZWZzIG11c3QgYmUgYXJyYXkuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNlbGwudmFsdWUgIT09IFwidW5rbm93blwiICYmICghQXJyYXkuaXNBcnJheShjZWxsLnByb29mX3JlZnMpIHx8IGNlbGwucHJvb2ZfcmVmcy5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgZXJyb3JzLnB1c2goXG4gICAgICAgICAgICBgY29tcGFyaXNvbl90YWJsZVske3Jvd0luZGV4fV0uY29sdW1ucy4ke2NvbHVtbn0gbXVzdCBoYXZlIHByb29mX3JlZnMgZm9yIG5vbi11bmtub3duIHZhbHVlcy5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAoIUFycmF5LmlzQXJyYXkocGF5bG9hZC53aW5fYW5nbGVzKSB8fCBwYXlsb2FkLndpbl9hbmdsZXMubGVuZ3RoICE9PSAzKSB7XG4gICAgZXJyb3JzLnB1c2goXCJ3aW5fYW5nbGVzIG11c3QgYmUgZXhhY3RseSAzIGl0ZW1zLlwiKTtcbiAgfSBlbHNlIHtcbiAgICBwYXlsb2FkLndpbl9hbmdsZXMuZm9yRWFjaCgoYW5nbGUsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoIWFuZ2xlIHx8IHR5cGVvZiBhbmdsZSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICBlcnJvcnMucHVzaChgd2luX2FuZ2xlc1ske2luZGV4fV0gbXVzdCBiZSBvYmplY3QuYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghYW5nbGUud2hhdF90b19zYXkgfHwgdHlwZW9mIGFuZ2xlLndoYXRfdG9fc2F5ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGB3aW5fYW5nbGVzWyR7aW5kZXh9XS53aGF0X3RvX3NheSBpcyByZXF1aXJlZC5gKTtcbiAgICAgIH1cbiAgICAgIGlmICghYW5nbGUucHJvb2ZfdG9fc2hvdyB8fCB0eXBlb2YgYW5nbGUucHJvb2ZfdG9fc2hvdyAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBlcnJvcnMucHVzaChgd2luX2FuZ2xlc1ske2luZGV4fV0ucHJvb2ZfdG9fc2hvdyBpcyByZXF1aXJlZC5gKTtcbiAgICAgIH1cbiAgICAgIGlmICghYW5nbGUudGFyZ2V0X3NlZ21lbnQgfHwgdHlwZW9mIGFuZ2xlLnRhcmdldF9zZWdtZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGB3aW5fYW5nbGVzWyR7aW5kZXh9XS50YXJnZXRfc2VnbWVudCBpcyByZXF1aXJlZC5gKTtcbiAgICAgIH1cbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShhbmdsZS5wcm9vZl9yZWZzKSkge1xuICAgICAgICBlcnJvcnMucHVzaChgd2luX2FuZ2xlc1ske2luZGV4fV0ucHJvb2ZfcmVmcyBtdXN0IGJlIGFycmF5LmApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGlmICghcGF5bG9hZC5vZmZlcnMgfHwgIXBheWxvYWQub2ZmZXJzLnNlbGxlcnNfb2ZmZXIgfHwgIXBheWxvYWQub2ZmZXJzLmxvY2FsX29mZmVyIHx8ICFwYXlsb2FkLm9mZmVycy5iMmJfb2ZmZXIpIHtcbiAgICBlcnJvcnMucHVzaChcIm9mZmVycyBtdXN0IGluY2x1ZGUgc2VsbGVyc19vZmZlci9sb2NhbF9vZmZlci9iMmJfb2ZmZXIuXCIpO1xuICB9IGVsc2Uge1xuICAgIFtcInNlbGxlcnNfb2ZmZXJcIiwgXCJsb2NhbF9vZmZlclwiLCBcImIyYl9vZmZlclwiXS5mb3JFYWNoKChvZmZlcktleSkgPT4ge1xuICAgICAgY29uc3Qgb2ZmZXIgPSBwYXlsb2FkLm9mZmVyc1tvZmZlcktleV07XG4gICAgICBpZiAoIW9mZmVyIHx8IHR5cGVvZiBvZmZlciAhPT0gXCJvYmplY3RcIikgcmV0dXJuO1xuICAgICAgaWYgKCFvZmZlci5yaXNrX3JldmVyc2FsIHx8IHR5cGVvZiBvZmZlci5yaXNrX3JldmVyc2FsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBvZmZlcnMuJHtvZmZlcktleX0ucmlza19yZXZlcnNhbCBpcyByZXF1aXJlZC5gKTtcbiAgICAgIH1cbiAgICAgIGlmICghb2ZmZXIuZmlyc3Rfc3RlcCB8fCB0eXBlb2Ygb2ZmZXIuZmlyc3Rfc3RlcCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBlcnJvcnMucHVzaChgb2ZmZXJzLiR7b2ZmZXJLZXl9LmZpcnN0X3N0ZXAgaXMgcmVxdWlyZWQuYCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgaWYgKHBheWxvYWQubWV0YSAmJiBBcnJheS5pc0FycmF5KHBheWxvYWQubWV0YS5wcm9vZl9pdGVtcykpIHtcbiAgICBwYXlsb2FkLm1ldGEucHJvb2ZfaXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChpdGVtLmV2aWRlbmNlX3NuaXBwZXQgJiYgaXRlbS5ldmlkZW5jZV9zbmlwcGV0Lmxlbmd0aCA+IDE2MCkge1xuICAgICAgICBlcnJvcnMucHVzaChgcHJvb2ZfaXRlbXNbJHtpbmRleH1dIGV2aWRlbmNlX3NuaXBwZXQgdG9vIGxvbmdgKTtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtLmV2aWRlbmNlX3NuaXBwZXQgJiYgLzxbXj5dKz4vLnRlc3QoaXRlbS5ldmlkZW5jZV9zbmlwcGV0KSkge1xuICAgICAgICBlcnJvcnMucHVzaChgcHJvb2ZfaXRlbXNbJHtpbmRleH1dIGV2aWRlbmNlX3NuaXBwZXQgY29udGFpbnMgaHRtbGApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGlmIChcbiAgICAhcGF5bG9hZC5tZXRhPy5xdWFsaXR5X2NoZWNrcyB8fFxuICAgIHR5cGVvZiBwYXlsb2FkLm1ldGEucXVhbGl0eV9jaGVja3MucHJvb2ZfY292ZXJhZ2VfcmF0aW8gIT09IFwibnVtYmVyXCJcbiAgKSB7XG4gICAgZXJyb3JzLnB1c2goXCJtZXRhLnF1YWxpdHlfY2hlY2tzLnByb29mX2NvdmVyYWdlX3JhdGlvIGlzIHJlcXVpcmVkLlwiKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCByYXRpbyA9IHBheWxvYWQubWV0YS5xdWFsaXR5X2NoZWNrcy5wcm9vZl9jb3ZlcmFnZV9yYXRpbztcbiAgICBpZiAocmF0aW8gPCAwIHx8IHJhdGlvID4gMSkge1xuICAgICAgZXJyb3JzLnB1c2goXCJtZXRhLnF1YWxpdHlfY2hlY2tzLnByb29mX2NvdmVyYWdlX3JhdGlvIG11c3QgYmUgMC4uMS5cIik7XG4gICAgfVxuICB9XG4gIHJldHVybiB7IHZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLCBlcnJvcnMgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBERUZBVUxUX0FHRU5UT1NfQ09OVEVYVCxcbiAgaW5wdXREZWZhdWx0cyxcbiAgaW5wdXRTY2hlbWEsXG4gIG91dHB1dFNjaGVtYSxcbiAgc3lzdGVtUHJvbXB0LFxuICB0aW1vZmV5QWdlbnQsXG4gIG5vcm1hbGl6ZUlucHV0LFxuICBjb21wdXRlUHJvb2ZDb3ZlcmFnZVJhdGlvLFxuICBldmFsdWF0ZVByb29mQ292ZXJhZ2UsXG4gIGdlbmVyYXRlT3V0cHV0LFxuICBnZW5lcmF0ZVRpbW9mZXlPdXRwdXQsXG4gIHZhbGlkYXRlVGltb2ZleU91dHB1dFxufTtcbiJdLCJuYW1lcyI6WyJjYW5vbmljYWxpemVVcmwiLCJyZXF1aXJlIiwid3JhcEFnZW50T3V0cHV0IiwidW53cmFwTGVnYWN5Iiwic2FuaXRpemVTbmlwcGV0IiwiYXBwbHlCdWRnZXQiLCJhcHBseUJ1ZGdldE1ldGEiLCJleHRyYWN0RnJvbUh0bWwiLCJERUZBVUxUX0FHRU5UT1NfQ09OVEVYVCIsIm5hbWUiLCJvbmVfbGluZXIiLCJwcmljaW5nX21vbnRobHlfcnViIiwibm9fdHJpYWwiLCJpbnB1dERlZmF1bHRzIiwibW9kZSIsImhhc193ZWJfYWNjZXNzIiwibWF4X3dlYl9yZXF1ZXN0cyIsImdlbyIsImZvY3VzX3NlZ21lbnRzIiwibmljaGVfaGludCIsImNvbXBldGl0b3JfdHlwZXMiLCJpbmNsdWRlX3ByaWNpbmciLCJpbmNsdWRlX2Nhc2VzIiwicmVxdWlyZV9wcm9vZiIsInJlY2VuY3lfZGF5cyIsImFsbG93X3BsYWNlaG9sZGVyc19pZl9ibG9ja2VkIiwiZXhjbHVkZV9kb21haW5zIiwiYWdlbnRvc19jb250ZXh0IiwiaW5wdXRTY2hlbWEiLCJ0eXBlIiwiYWRkaXRpb25hbFByb3BlcnRpZXMiLCJwcm9wZXJ0aWVzIiwiZW51bSIsImRlZmF1bHQiLCJpdGVtcyIsInJlcXVpcmVkIiwib3V0cHV0U2NoZW1hIiwiY29tcGV0aXRvcnMiLCJwcmljaW5nX2V2aWRlbmNlIiwiY29tcGFyaXNvbl90YWJsZSIsIndpbl9hbmdsZXMiLCJhZ2VudG9zX3Bvc2l0aW9uaW5nIiwib2ZmZXJzIiwibWV0YSIsIkNPTVBBUklTT05fQ09MVU1OUyIsIlRZUEVfVE9fU0VHTUVOVFMiLCJhaV9hZ2VuY3kiLCJjaGF0Ym90cyIsIndiX296b25fbWFya2V0aW5nIiwiY2FsbF9jZW50ZXIiLCJjcm1faW1wbCIsInN5c3RlbVByb21wdCIsInRpbW9mZXlBZ2VudCIsImlkIiwiZGlzcGxheU5hbWUiLCJkZXNjcmlwdGlvbiIsIndyYXBPdXRwdXQiLCJsZWdhY3lPdXRwdXQiLCJpbnB1dCIsImFnZW50SWQiLCJpbnB1dEVjaG8iLCJzYW5pdGl6ZUV2aWRlbmNlU25pcHBldCIsInRleHQiLCJtYXgiLCJyZXNvbHZlTWF4UmVxdWVzdHMiLCJtYXhSZXF1ZXN0cyIsIk51bWJlciIsImlzRmluaXRlIiwiTWF0aCIsInJvdW5kIiwibm9ybWFsaXplSW5wdXQiLCJzYWZlIiwiYnVkZ2V0IiwiQXJyYXkiLCJpc0FycmF5IiwiZmlsdGVyIiwiaXRlbSIsImluY2x1ZGVzIiwibm9ybWFsaXplZCIsInRyaW0iLCJidWRnZXRSZXN1bHQiLCJtYXhXZWJSZXF1ZXN0c1BhdGgiLCJidWRnZXRfYXBwbGllZCIsImJ1ZGdldF93YXJuaW5ncyIsIndhcm5pbmdzIiwiU0VBUkNIX1FVRVJJRVMiLCJTRUdNRU5UX1FVRVJJRVMiLCJzZWxsZXJzIiwibG9jYWwiLCJiMmIiLCJidWlsZFNlYXJjaFBsYW4iLCJxdWVyaWVzIiwiZm9yRWFjaCIsImJhc2UiLCJxdWVyeSIsInB1c2giLCJzZWdtZW50IiwiaGludCIsImRlZHVwZWQiLCJTZXQiLCJtYXAiLCJCb29sZWFuIiwic291cmNlVHlwZUZvclVybCIsInVybCIsImhvc3QiLCJVUkwiLCJob3N0bmFtZSIsInRvTG93ZXJDYXNlIiwiZXh0cmFjdENvbXBldGl0b3JOYW1lIiwidGl0bGUiLCJzcGxpdCIsInJlcGxhY2UiLCJleHRyYWN0U2lnbmFsc0Zyb21QYWdlIiwicGFnZSIsImNvbXBldGl0b3JOYW1lIiwicGFnZVR5cGUiLCJwcm9vZkl0ZW1zIiwibG93ZXIiLCJwcm9vZnMiLCJwdXNoUHJvb2YiLCJzaWduYWxUeXBlIiwic2lnbmFsVmFsdWUiLCJzbmlwcGV0IiwicHJvb2YiLCJjb21wZXRpdG9yX25hbWUiLCJzb3VyY2VfdHlwZSIsInBhZ2VfdHlwZSIsInNpZ25hbF90eXBlIiwic2lnbmFsX3ZhbHVlIiwiZXZpZGVuY2Vfc25pcHBldCIsImluZGV4IiwibGVuZ3RoIiwiX2luZGV4IiwicHJpY2VNYXRjaCIsIm1hdGNoIiwidmFsdWUiLCJ0ZXN0IiwibWV0cmljIiwicHJvbWlzZU1hdGNoIiwic2VvSGludCIsImRpcmVjdEhpbnQiLCJidWlsZENvbXBldGl0b3JGcm9tU2lnbmFscyIsInByaW1hcnlVcmwiLCJzaWduYWxzIiwicHJvb2ZSZWZzIiwicHJpY2luZ1Byb29mIiwiZmluZCIsInN0YXJ0c1dpdGgiLCJwcmljaW5nX21vZGVsIiwibW9kZWwiLCJwcmljZV9mcm9tX3J1YiIsInByaWNlX25vdGUiLCJ1bmtub3duIiwiY2FzZXNQcm9vZiIsImNhc2VzIiwiaGFzX2Nhc2VzIiwiZXhhbXBsZXNfc2hvcnQiLCJwcm9taXNlcyIsIlN0cmluZyIsIm5vdF9wcm9taXNlZCIsImxhdW5jaFByb29mIiwiZ3VhcmFudGVlc1Byb29mIiwiY2hhbm5lbHMiLCJzZW8iLCJzb21lIiwieWFuZGV4X2RpcmVjdF9oaW50IiwidmsiLCJ0ZWxlZ3JhbSIsImNvbGRfb3V0cmVhY2hfaGludCIsInByaW1hcnlfdXJsIiwibGF1bmNoX3NwZWVkIiwiZ3VhcmFudGVlc19jb250cmFjdCIsInByb29mX3JlZnMiLCJ1bmlxdWVSZWZzIiwicmVmcyIsImlzSW50ZWdlciIsInBpY2tSZWZzQnlQcmVmaXgiLCJzaWduYWxSZWZNYXAiLCJwcmVmaXhlcyIsInJlZlNldCIsIk9iamVjdCIsImVudHJpZXMiLCJrZXkiLCJwcmVmaXgiLCJyZWYiLCJhZGQiLCJzb3J0IiwiYSIsImIiLCJidWlsZENvbHVtbkNlbGwiLCJzbGljZSIsImNoYW5uZWxzVG9UZXh0IiwibGlzdCIsImpvaW4iLCJkZXRlY3RXZWFrUG9pbnRzIiwiY29tcGV0aXRvciIsIndlYWtuZXNzZXMiLCJidWlsZENvbXBhcmlzb25Sb3ciLCJfc2lnbmFsX3JlZl9tYXAiLCJmYWxsYmFja1JlZnMiLCJwcmljaW5nUmVmcyIsImNhc2VSZWZzIiwiZ3VhcmFudGVlUmVmcyIsInNwZWVkUmVmcyIsImNoYW5uZWxSZWZzIiwicHJvbWlzZVJlZnMiLCJjb250cmFjdFJlZnMiLCJwcmljaW5nVmFsdWUiLCJjYXNlc1ZhbHVlIiwidmFsdWVzIiwi0YHQtdCz0LzQtdC90YLRiyIsItC+0YTRhNC10YAiLCLRhtC10L3RiyIsItC60LXQudGB0YsiLCLQs9Cw0YDQsNC90YLQuNC4Iiwi0YHQutC+0YDQvtGB0YLRjCIsItC60LDQvdCw0LvRiyIsImNvbHVtbl9vcmRlciIsImNvbHVtbnMiLCJidWlsZFByaWNpbmdFdmlkZW5jZSIsInBlckNvbXBldGl0b3IiLCJjaGVja2VkIiwiX3ByaWNpbmdfY2hlY2tlZF91cmxzIiwic3RhdHVzIiwid2hhdF9jaGVja2VkIiwiY2hlY2tlZEFsbCIsImZsYXRNYXAiLCJhbnlQcmljaW5nIiwicHJpY2luZ191bmtub3duIiwiY29tcHV0ZVByb29mQ292ZXJhZ2VSYXRpbyIsImNvbXBhcmlzb25UYWJsZSIsIndpbkFuZ2xlcyIsInJvd3MiLCJhbmdsZXMiLCJ0b3RhbCIsImNvdmVyZWQiLCJyb3ciLCJjb2x1bW4iLCJhbmdsZSIsInRvRml4ZWQiLCJldmFsdWF0ZVByb29mQ292ZXJhZ2UiLCJyYXRpbyIsIm51bWVyaWMiLCJuZWVkc1JldmlldyIsImxpbWl0YXRpb25zIiwic3VtbWFyaXplVHJhY2UiLCJ0cmFjZSIsInJlZHVjZSIsImFjYyIsImRvbWFpbiIsImdlbmVyYXRlT3V0cHV0IiwicmF3SW5wdXQiLCJvcHRpb25zIiwid2ViQ2xpZW50IiwibGFzdERhdGEiLCJsYXN0X3J1biIsInByZXZpb3VzUXVlcmllcyIsInNlYXJjaF9wbGFuIiwicXVlcmllc191c2VkIiwiZW1wdHlPZmZlcnMiLCJzZWxsZXJzX29mZmVyIiwib2ZmZXJfbmFtZSIsInRhcmdldF9zZWdtZW50IiwicHJvbWlzZSIsIndoYXRfeW91X2dldCIsInRpbWVfdG9fdmFsdWVfZXN0aW1hdGUiLCJvbmJvYXJkaW5nX3N0ZXBzIiwicHJpY2luZyIsIm9iamVjdGlvbnNfYW5kX2Fuc3dlcnMiLCJyaXNrX3JldmVyc2FsIiwiZmlyc3Rfc3RlcCIsImN0YSIsImxvY2FsX29mZmVyIiwiYjJiX29mZmVyIiwid2hhdF90b19zYXkiLCJwcm9vZl90b19zaG93IiwiZ2VuZXJhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwid2ViX3N0YXRzIiwicmVxdWVzdHNfbWFkZSIsImJsb2NrZWRfY291bnQiLCJlcnJvcnNfY291bnQiLCJkdXJhdGlvbl9tcyIsInNvdXJjZXNfdXNlZCIsInRvcF9lcnJvcnMiLCJ0cmFjZV9zdW1tYXJ5IiwicHJvb2ZfaXRlbXMiLCJhc3N1bXB0aW9ucyIsInF1YWxpdHlfY2hlY2tzIiwibm9fZmFicmljYXRpb24iLCJwcmljaW5nX3Vua25vd25fcmF0ZSIsImNhc2VzX3Vua25vd25fcmF0ZSIsInByb29mX2NvdmVyYWdlX3JhdGlvIiwib3V0cHV0IiwiZWZmZWN0aXZlSW5wdXQiLCJleGNsdWRlRG9tYWlucyIsInNlZWRMaW1pdCIsImNvbXBldGl0b3JTZWVkcyIsIk1hcCIsInJlc3VsdHMiLCJzZWFyY2giLCJoYXMiLCJzaXplIiwic2V0Iiwic2VlZCIsInQiLCJwYWdlc1RvRmV0Y2giLCJwYWdlc0JhdGNoIiwicHJpY2luZ0NoZWNrZWRVcmxzIiwiYmxvY2tlZENvdW50IiwiYWRkU2lnbmFsUmVmIiwicGFnZVJlZiIsInBhdGhuYW1lIiwiZmV0Y2hQYWdlIiwiZ2VuZXJpY0V4dHJhY3QiLCJodG1sIiwicHJpY2luZ1Vua25vd25SYXRlIiwiY2FzZXNVbmtub3duUmF0ZSIsImZpcnN0Um93IiwicHJpY2luZ0dhcFJlZnMiLCJ3ZWFrUmVmcyIsImRpZmZlcmVudGlhdG9ycyIsImFudGlfYnVsbHNoaXRfbGluZXMiLCJyZWFkeV9waHJhc2VzIiwiYmF0dGxlY2FyZCIsInF1ZXN0aW9uIiwiYW5zd2VyIiwicHJvb2ZDb3ZlcmFnZVN0YXR1cyIsInN0YXRzIiwiZ2V0U3RhdHMiLCJnZXRUcmFjZSIsInB1YmxpY0NvbXBldGl0b3JzIiwibmV4dCIsInlhbmRleCIsIndiIiwib3pvbiIsInRnIiwid2Vic2l0ZXMiLCJlbnZlbG9wZSIsInByZXYiLCJwcmV2Q29tcGV0aXRvcnMiLCJjdXJyZW50Q29tcGV0aXRvcnMiLCJwcmV2S2V5cyIsImN1cnJlbnRLZXlzIiwiZGlmZiIsImFkZGVkIiwiayIsInJlbW92ZWQiLCJoYW5kb2ZmIiwiZW50aXRpZXMiLCJnZW5lcmF0ZVRpbW9mZXlPdXRwdXQiLCJyZXN1bHQiLCJ2YWxpZGF0ZVRpbW9mZXlPdXRwdXQiLCJwYXlsb2FkIiwiZXJyb3JzIiwibGVnYWN5IiwidmFsaWQiLCJyb3dJbmRleCIsImlkeCIsImNlbGwiLCJvZmZlcktleSIsIm9mZmVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/agents/timofey.js\n");

/***/ }),

/***/ "(rsc)/./lib/agents/webClient.js":
/*!*********************************!*\
  !*** ./lib/agents/webClient.js ***!
  \*********************************/
/***/ ((module) => {

eval("\nconst sleep = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\nconst USER_AGENTS = [\n    \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36\",\n    \"Mozilla/5.0 (Macintosh; Intel Mac OS X 13_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36\",\n    \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",\n    \"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:122.0) Gecko/20100101 Firefox/122.0\",\n    \"Mozilla/5.0 (Macintosh; Intel Mac OS X 14_1; rv:121.0) Gecko/20100101 Firefox/121.0\",\n    \"Mozilla/5.0 (iPhone; CPU iPhone OS 17_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.1 Mobile/15E148 Safari/604.1\"\n];\nconst DEFAULT_HEADERS = {\n    Accept: \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\",\n    \"Accept-Language\": \"ru-RU,ru;q=0.9,en;q=0.8\",\n    \"Cache-Control\": \"no-cache\",\n    Pragma: \"no-cache\"\n};\nconst stripHtml = (html)=>{\n    return html.replace(/<script[\\s\\S]*?<\\/script>/gi, \" \").replace(/<style[\\s\\S]*?<\\/style>/gi, \" \").replace(/<noscript[\\s\\S]*?<\\/noscript>/gi, \" \").replace(/<[^>]+>/g, \" \").replace(/&nbsp;/gi, \" \").replace(/&amp;/gi, \"&\").replace(/\\s+/g, \" \").trim();\n};\nconst extractTitle = (html)=>{\n    const match = html.match(/<title[^>]*>([^<]+)<\\/title>/i);\n    return match ? match[1].trim() : \"\";\n};\nconst extractLinks = (html)=>{\n    const links = [];\n    const regex = /href\\s*=\\s*[\"']([^\"']+)[\"']/gi;\n    let match = null;\n    while(match = regex.exec(html)){\n        const href = match[1];\n        if (href.startsWith(\"http\")) {\n            links.push(href);\n        }\n    }\n    return links;\n};\nconst decodeYandexRedirect = (url)=>{\n    try {\n        const parsed = new URL(url);\n        const target = parsed.searchParams.get(\"url\");\n        return target ? decodeURIComponent(target) : url;\n    } catch  {\n        return url;\n    }\n};\nconst extractRobotsRules = (content)=>{\n    const lines = content.split(\"\\n\").map((line)=>line.trim());\n    let apply = false;\n    const disallow = [];\n    for (const line of lines){\n        if (!line || line.startsWith(\"#\")) continue;\n        const [rawKey, rawValue] = line.split(\":\");\n        if (!rawKey || rawValue === undefined) continue;\n        const key = rawKey.trim().toLowerCase();\n        const value = rawValue.trim();\n        if (key === \"user-agent\") {\n            apply = value === \"*\";\n        } else if (apply && key === \"disallow\") {\n            disallow.push(value);\n        }\n    }\n    return disallow;\n};\nconst canonicalizeUrl = (url)=>{\n    try {\n        const parsed = new URL(url);\n        parsed.protocol = \"https:\";\n        const paramsToRemove = [];\n        parsed.searchParams.forEach((_, key)=>{\n            const lower = key.toLowerCase();\n            if (lower.startsWith(\"utm_\") || [\n                \"gclid\",\n                \"yclid\",\n                \"fbclid\",\n                \"ref\",\n                \"from\"\n            ].includes(lower)) {\n                paramsToRemove.push(key);\n            }\n        });\n        paramsToRemove.forEach((key)=>parsed.searchParams.delete(key));\n        let hostname = parsed.hostname.toLowerCase().replace(/^www\\./, \"\");\n        parsed.hostname = hostname;\n        if (hostname === \"t.me\" || hostname === \"telegram.me\") {\n            let path = parsed.pathname.replace(/\\/+$/, \"\");\n            if (path.startsWith(\"/s/\")) path = path.slice(2);\n            parsed.pathname = path || \"/\";\n            parsed.search = \"\";\n            return `https://t.me${parsed.pathname}`;\n        }\n        if (hostname === \"vk.com\") {\n            const parts = parsed.pathname.split(\"/\").filter(Boolean);\n            parsed.pathname = parts.length ? `/${parts[0]}` : \"/\";\n            parsed.search = \"\";\n            return parsed.toString().replace(/\\/$/, \"\");\n        }\n        parsed.pathname = parsed.pathname.replace(/\\/+$/, \"\") || \"/\";\n        parsed.hash = \"\";\n        return parsed.toString();\n    } catch  {\n        return url;\n    }\n};\nconst getDomain = (url)=>{\n    try {\n        return new URL(url).hostname.replace(/^www\\\\./, \"\").toLowerCase();\n    } catch  {\n        return \"\";\n    }\n};\nclass WebClient {\n    constructor(options){\n        this.maxRequests = options.maxRequests;\n        this.minDelayMs = options.minDelayMs ?? 600;\n        this.userAgents = options.userAgents ?? USER_AGENTS;\n        this.timeoutMs = options.timeoutMs ?? 15000;\n        this.searchTimeoutMs = options.searchTimeoutMs ?? 12000;\n        this.lastRequestAt = 0;\n        this.startTime = Date.now();\n        this.stats = {\n            requests_made: 0,\n            blocked_count: 0,\n            errors_count: 0,\n            duration_ms: 0,\n            top_errors: [],\n            warnings: []\n        };\n        this.robotsCache = new Map();\n        this.domainFailures = new Map();\n        this.domainCooldown = new Map();\n        this.consecutiveRateLimit = 0;\n        this.lowTrafficMode = false;\n        this.trace = [];\n        this.errorCounts = new Map();\n    }\n    getStats() {\n        return {\n            ...this.stats,\n            duration_ms: Date.now() - this.startTime\n        };\n    }\n    getTrace() {\n        return [\n            ...this.trace\n        ];\n    }\n    recordWarning(message) {\n        if (!this.stats.warnings.includes(message)) {\n            this.stats.warnings.push(message);\n        }\n    }\n    recordError(domain, code) {\n        if (!domain) return;\n        const key = `${domain}:${code || \"ERR\"}`;\n        const next = (this.errorCounts.get(key) ?? 0) + 1;\n        this.errorCounts.set(key, next);\n        const entries = Array.from(this.errorCounts.entries()).map(([entryKey, count])=>{\n            const [entryDomain, entryCode] = entryKey.split(\":\");\n            return {\n                domain: entryDomain,\n                code: entryCode,\n                count\n            };\n        }).sort((a, b)=>b.count - a.count).slice(0, 5);\n        this.stats.top_errors = entries;\n    }\n    async throttle() {\n        const delay = this.lowTrafficMode ? Math.max(this.minDelayMs, 2000) : this.minDelayMs;\n        const diff = Date.now() - this.lastRequestAt;\n        if (diff < delay) {\n            await sleep(delay - diff);\n        }\n        this.lastRequestAt = Date.now();\n    }\n    async fetchWithLimit(url, options = {}) {\n        if (this.stats.requests_made >= this.maxRequests) {\n            throw new Error(\"WEB_REQUEST_LIMIT\");\n        }\n        await this.throttle();\n        this.stats.requests_made += 1;\n        const userAgent = this.userAgents[Math.floor(Math.random() * this.userAgents.length)];\n        const headers = {\n            ...DEFAULT_HEADERS,\n            ...options.headers || {},\n            \"User-Agent\": userAgent\n        };\n        const domain = getDomain(url);\n        let attempt = 0;\n        let lastError = null;\n        while(attempt < 3){\n            const controller = new AbortController();\n            const timeoutMs = options.timeoutMs ?? this.timeoutMs;\n            const timeout = setTimeout(()=>controller.abort(), timeoutMs);\n            try {\n                const response = await fetch(url, {\n                    cache: \"no-store\",\n                    headers,\n                    signal: controller.signal\n                });\n                const text = await response.text();\n                clearTimeout(timeout);\n                if ([\n                    429,\n                    503,\n                    520,\n                    522\n                ].includes(response.status)) {\n                    this.consecutiveRateLimit += 1;\n                    this.recordError(domain, response.status);\n                    if (this.consecutiveRateLimit >= 2 && !this.lowTrafficMode) {\n                        this.lowTrafficMode = true;\n                        this.recordWarning(\"rate-limited, switched to low-traffic mode\");\n                        this.maxRequests = Math.max(10, Math.floor(this.maxRequests * 0.8));\n                    }\n                    const delay = Math.min(8000, 400 * 2 ** attempt);\n                    const jitter = delay * (0.5 + Math.random());\n                    await sleep(jitter);\n                    attempt += 1;\n                    continue;\n                }\n                this.consecutiveRateLimit = 0;\n                return {\n                    ok: response.ok,\n                    status: response.status,\n                    text\n                };\n            } catch (error) {\n                clearTimeout(timeout);\n                lastError = error;\n                this.stats.errors_count += 1;\n                this.recordError(domain, \"FETCH\");\n                const delay = Math.min(8000, 400 * 2 ** attempt);\n                const jitter = delay * (0.5 + Math.random());\n                await sleep(jitter);\n                attempt += 1;\n            }\n        }\n        if (lastError) throw lastError;\n        throw new Error(\"FETCH_FAILED\");\n    }\n    async canFetch(url) {\n        try {\n            const parsed = new URL(url);\n            const domain = parsed.origin;\n            if (!this.robotsCache.has(domain)) {\n                try {\n                    const robotsUrl = `${domain}/robots.txt`;\n                    const response = await this.fetchWithLimit(robotsUrl);\n                    if (!response.ok) {\n                        this.robotsCache.set(domain, []);\n                    } else {\n                        const disallow = extractRobotsRules(response.text);\n                        this.robotsCache.set(domain, disallow);\n                    }\n                } catch  {\n                    this.robotsCache.set(domain, []);\n                }\n            }\n            const rules = this.robotsCache.get(domain) ?? [];\n            const path = parsed.pathname;\n            if (rules.includes(\"/\")) {\n                return false;\n            }\n            return !rules.some((rule)=>rule && path.startsWith(rule));\n        } catch  {\n            return false;\n        }\n    }\n    async fetchPage(url, options = {}) {\n        const canonicalUrl = canonicalizeUrl(url);\n        const domain = getDomain(canonicalUrl);\n        const cooldownUntil = this.domainCooldown.get(domain);\n        if (cooldownUntil && cooldownUntil > Date.now()) {\n            this.stats.blocked_count += 1;\n            this.stats.errors_count += 1;\n            this.recordError(domain, \"COOLDOWN\");\n            return {\n                blocked: true,\n                url: canonicalUrl\n            };\n        }\n        const allowed = await this.canFetch(canonicalUrl);\n        if (!allowed) {\n            this.stats.blocked_count += 1;\n            this.stats.errors_count += 1;\n            this.recordError(domain, \"ROBOTS\");\n            return {\n                blocked: true,\n                url: canonicalUrl\n            };\n        }\n        this.trace.push({\n            domain,\n            type: options.type || \"page\"\n        });\n        let response;\n        try {\n            response = await this.fetchWithLimit(canonicalUrl, {\n                timeoutMs: options.timeoutMs\n            });\n        } catch (error) {\n            const failures = (this.domainFailures.get(domain) ?? 0) + 1;\n            this.domainFailures.set(domain, failures);\n            if (failures >= 5) {\n                this.domainCooldown.set(domain, Date.now() + 10 * 60 * 1000);\n                this.recordWarning(`circuit-breaker:${domain}`);\n            }\n            this.stats.errors_count += 1;\n            this.recordError(domain, \"FETCH\");\n            return {\n                blocked: true,\n                url: canonicalUrl\n            };\n        }\n        if (!response.ok) {\n            this.stats.errors_count += 1;\n            this.recordError(domain, response.status);\n            const failures = (this.domainFailures.get(domain) ?? 0) + 1;\n            this.domainFailures.set(domain, failures);\n            if (failures >= 5) {\n                this.domainCooldown.set(domain, Date.now() + 10 * 60 * 1000);\n                this.recordWarning(`circuit-breaker:${domain}`);\n            }\n            return {\n                blocked: true,\n                url: canonicalUrl\n            };\n        }\n        this.domainFailures.set(domain, 0);\n        const html = response.text;\n        const title = extractTitle(html);\n        const text = stripHtml(html);\n        return {\n            url: canonicalUrl,\n            title,\n            html,\n            text\n        };\n    }\n    async search(query, engine = \"yandex\", limit = 5) {\n        const searchUrl = engine === \"yandex\" ? `https://yandex.ru/search/?text=${encodeURIComponent(query)}` : `https://duckduckgo.com/html/?q=${encodeURIComponent(query)}`;\n        const page = await this.fetchPage(searchUrl, {\n            timeoutMs: this.searchTimeoutMs,\n            type: \"search\"\n        });\n        if (\"blocked\" in page) {\n            return [];\n        }\n        const links = extractLinks(page.html).map((link)=>link.includes(\"yandex\") ? decodeYandexRedirect(link) : link).filter((link)=>link.startsWith(\"http\"));\n        const results = [];\n        const seen = new Set();\n        for (const link of links){\n            if (results.length >= limit) break;\n            try {\n                const url = new URL(link);\n                if (url.hostname.includes(\"yandex\") || url.hostname.includes(\"duckduckgo\")) {\n                    continue;\n                }\n            } catch  {\n                continue;\n            }\n            if (seen.has(link)) continue;\n            seen.add(link);\n            results.push({\n                url: canonicalizeUrl(link),\n                title: page.title,\n                snippet: query,\n                query,\n                engine,\n                source_url: searchUrl\n            });\n        }\n        return results;\n    }\n}\nmodule.exports = {\n    WebClient,\n    canonicalizeUrl\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUyxDQUFDVyxXQUFXO1lBQzNDdEYsV0FBVyxJQUFJLENBQUNDLGVBQWU7WUFDL0IrRSxNQUFNO1FBQ1I7UUFDQSxJQUFJLGFBQWFRLE1BQU07WUFDckIsT0FBTyxFQUFFO1FBQ1g7UUFFQSxNQUFNN0ksUUFBUUQsYUFBYThJLEtBQUtuSixJQUFJLEVBQ2pDd0IsR0FBRyxDQUFDLENBQUM0SCxPQUFVQSxLQUFLNUcsUUFBUSxDQUFDLFlBQVk1QixxQkFBcUJ3SSxRQUFRQSxNQUN0RXBHLE1BQU0sQ0FBQyxDQUFDb0csT0FBU0EsS0FBSzFJLFVBQVUsQ0FBQztRQUVwQyxNQUFNMkksVUFBVSxFQUFFO1FBQ2xCLE1BQU1DLE9BQU8sSUFBSUM7UUFFakIsS0FBSyxNQUFNSCxRQUFROUksTUFBTztZQUN4QixJQUFJK0ksUUFBUW5HLE1BQU0sSUFBSThGLE9BQU87WUFDN0IsSUFBSTtnQkFDRixNQUFNbkksTUFBTSxJQUFJRSxJQUFJcUk7Z0JBQ3BCLElBQUl2SSxJQUFJNkIsUUFBUSxDQUFDRixRQUFRLENBQUMsYUFBYTNCLElBQUk2QixRQUFRLENBQUNGLFFBQVEsQ0FBQyxlQUFlO29CQUMxRTtnQkFDRjtZQUNGLEVBQUUsT0FBTTtnQkFDTjtZQUNGO1lBQ0EsSUFBSThHLEtBQUtyQixHQUFHLENBQUNtQixPQUFPO1lBQ3BCRSxLQUFLRSxHQUFHLENBQUNKO1lBQ1RDLFFBQVExSSxJQUFJLENBQUM7Z0JBQ1hFLEtBQUtxQixnQkFBZ0JrSDtnQkFDckJQLE9BQU9NLEtBQUtOLEtBQUs7Z0JBQ2pCWSxTQUFTWDtnQkFDVEE7Z0JBQ0FDO2dCQUNBVyxZQUFZVDtZQUNkO1FBQ0Y7UUFFQSxPQUFPSTtJQUNUO0FBQ0Y7QUFFQU0sT0FBT0MsT0FBTyxHQUFHO0lBQ2Z0RztJQUNBcEI7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2FidXphZGEvRGVza3RvcC9hZ2VudE9TL2xpYi9hZ2VudHMvd2ViQ2xpZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNsZWVwID0gKG1zKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuXG5jb25zdCBVU0VSX0FHRU5UUyA9IFtcbiAgXCJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIyLjAuMC4wIFNhZmFyaS81MzcuMzZcIixcbiAgXCJNb3ppbGxhLzUuMCAoTWFjaW50b3NoOyBJbnRlbCBNYWMgT1MgWCAxM181KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzZcIixcbiAgXCJNb3ppbGxhLzUuMCAoWDExOyBMaW51eCB4ODZfNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjAuMC4wLjAgU2FmYXJpLzUzNy4zNlwiLFxuICBcIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQ7IHJ2OjEyMi4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzEyMi4wXCIsXG4gIFwiTW96aWxsYS81LjAgKE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTRfMTsgcnY6MTIxLjApIEdlY2tvLzIwMTAwMTAxIEZpcmVmb3gvMTIxLjBcIixcbiAgXCJNb3ppbGxhLzUuMCAoaVBob25lOyBDUFUgaVBob25lIE9TIDE3XzEgbGlrZSBNYWMgT1MgWCkgQXBwbGVXZWJLaXQvNjA1LjEuMTUgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzE3LjEgTW9iaWxlLzE1RTE0OCBTYWZhcmkvNjA0LjFcIlxuXTtcblxuY29uc3QgREVGQVVMVF9IRUFERVJTID0ge1xuICBBY2NlcHQ6IFwidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksKi8qO3E9MC44XCIsXG4gIFwiQWNjZXB0LUxhbmd1YWdlXCI6IFwicnUtUlUscnU7cT0wLjksZW47cT0wLjhcIixcbiAgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tY2FjaGVcIixcbiAgUHJhZ21hOiBcIm5vLWNhY2hlXCJcbn07XG5cbmNvbnN0IHN0cmlwSHRtbCA9IChodG1sKSA9PiB7XG4gIHJldHVybiBodG1sXG4gICAgLnJlcGxhY2UoLzxzY3JpcHRbXFxzXFxTXSo/PFxcL3NjcmlwdD4vZ2ksIFwiIFwiKVxuICAgIC5yZXBsYWNlKC88c3R5bGVbXFxzXFxTXSo/PFxcL3N0eWxlPi9naSwgXCIgXCIpXG4gICAgLnJlcGxhY2UoLzxub3NjcmlwdFtcXHNcXFNdKj88XFwvbm9zY3JpcHQ+L2dpLCBcIiBcIilcbiAgICAucmVwbGFjZSgvPFtePl0rPi9nLCBcIiBcIilcbiAgICAucmVwbGFjZSgvJm5ic3A7L2dpLCBcIiBcIilcbiAgICAucmVwbGFjZSgvJmFtcDsvZ2ksIFwiJlwiKVxuICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxuICAgIC50cmltKCk7XG59O1xuXG5jb25zdCBleHRyYWN0VGl0bGUgPSAoaHRtbCkgPT4ge1xuICBjb25zdCBtYXRjaCA9IGh0bWwubWF0Y2goLzx0aXRsZVtePl0qPihbXjxdKyk8XFwvdGl0bGU+L2kpO1xuICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXS50cmltKCkgOiBcIlwiO1xufTtcblxuY29uc3QgZXh0cmFjdExpbmtzID0gKGh0bWwpID0+IHtcbiAgY29uc3QgbGlua3MgPSBbXTtcbiAgY29uc3QgcmVnZXggPSAvaHJlZlxccyo9XFxzKltcIiddKFteXCInXSspW1wiJ10vZ2k7XG4gIGxldCBtYXRjaCA9IG51bGw7XG4gIHdoaWxlICgobWF0Y2ggPSByZWdleC5leGVjKGh0bWwpKSkge1xuICAgIGNvbnN0IGhyZWYgPSBtYXRjaFsxXTtcbiAgICBpZiAoaHJlZi5zdGFydHNXaXRoKFwiaHR0cFwiKSkge1xuICAgICAgbGlua3MucHVzaChocmVmKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGxpbmtzO1xufTtcblxuY29uc3QgZGVjb2RlWWFuZGV4UmVkaXJlY3QgPSAodXJsKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGFyc2VkID0gbmV3IFVSTCh1cmwpO1xuICAgIGNvbnN0IHRhcmdldCA9IHBhcnNlZC5zZWFyY2hQYXJhbXMuZ2V0KFwidXJsXCIpO1xuICAgIHJldHVybiB0YXJnZXQgPyBkZWNvZGVVUklDb21wb25lbnQodGFyZ2V0KSA6IHVybDtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxufTtcblxuY29uc3QgZXh0cmFjdFJvYm90c1J1bGVzID0gKGNvbnRlbnQpID0+IHtcbiAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KFwiXFxuXCIpLm1hcCgobGluZSkgPT4gbGluZS50cmltKCkpO1xuICBsZXQgYXBwbHkgPSBmYWxzZTtcbiAgY29uc3QgZGlzYWxsb3cgPSBbXTtcbiAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgaWYgKCFsaW5lIHx8IGxpbmUuc3RhcnRzV2l0aChcIiNcIikpIGNvbnRpbnVlO1xuICAgIGNvbnN0IFtyYXdLZXksIHJhd1ZhbHVlXSA9IGxpbmUuc3BsaXQoXCI6XCIpO1xuICAgIGlmICghcmF3S2V5IHx8IHJhd1ZhbHVlID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xuICAgIGNvbnN0IGtleSA9IHJhd0tleS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCB2YWx1ZSA9IHJhd1ZhbHVlLnRyaW0oKTtcbiAgICBpZiAoa2V5ID09PSBcInVzZXItYWdlbnRcIikge1xuICAgICAgYXBwbHkgPSB2YWx1ZSA9PT0gXCIqXCI7XG4gICAgfSBlbHNlIGlmIChhcHBseSAmJiBrZXkgPT09IFwiZGlzYWxsb3dcIikge1xuICAgICAgZGlzYWxsb3cucHVzaCh2YWx1ZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBkaXNhbGxvdztcbn07XG5cbmNvbnN0IGNhbm9uaWNhbGl6ZVVybCA9ICh1cmwpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYXJzZWQgPSBuZXcgVVJMKHVybCk7XG4gICAgcGFyc2VkLnByb3RvY29sID0gXCJodHRwczpcIjtcbiAgICBjb25zdCBwYXJhbXNUb1JlbW92ZSA9IFtdO1xuICAgIHBhcnNlZC5zZWFyY2hQYXJhbXMuZm9yRWFjaCgoXywga2V5KSA9PiB7XG4gICAgICBjb25zdCBsb3dlciA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKFxuICAgICAgICBsb3dlci5zdGFydHNXaXRoKFwidXRtX1wiKSB8fFxuICAgICAgICBbXCJnY2xpZFwiLCBcInljbGlkXCIsIFwiZmJjbGlkXCIsIFwicmVmXCIsIFwiZnJvbVwiXS5pbmNsdWRlcyhsb3dlcilcbiAgICAgICkge1xuICAgICAgICBwYXJhbXNUb1JlbW92ZS5wdXNoKGtleSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcGFyYW1zVG9SZW1vdmUuZm9yRWFjaCgoa2V5KSA9PiBwYXJzZWQuc2VhcmNoUGFyYW1zLmRlbGV0ZShrZXkpKTtcblxuICAgIGxldCBob3N0bmFtZSA9IHBhcnNlZC5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL153d3dcXC4vLCBcIlwiKTtcbiAgICBwYXJzZWQuaG9zdG5hbWUgPSBob3N0bmFtZTtcblxuICAgIGlmIChob3N0bmFtZSA9PT0gXCJ0Lm1lXCIgfHwgaG9zdG5hbWUgPT09IFwidGVsZWdyYW0ubWVcIikge1xuICAgICAgbGV0IHBhdGggPSBwYXJzZWQucGF0aG5hbWUucmVwbGFjZSgvXFwvKyQvLCBcIlwiKTtcbiAgICAgIGlmIChwYXRoLnN0YXJ0c1dpdGgoXCIvcy9cIikpIHBhdGggPSBwYXRoLnNsaWNlKDIpO1xuICAgICAgcGFyc2VkLnBhdGhuYW1lID0gcGF0aCB8fCBcIi9cIjtcbiAgICAgIHBhcnNlZC5zZWFyY2ggPSBcIlwiO1xuICAgICAgcmV0dXJuIGBodHRwczovL3QubWUke3BhcnNlZC5wYXRobmFtZX1gO1xuICAgIH1cblxuICAgIGlmIChob3N0bmFtZSA9PT0gXCJ2ay5jb21cIikge1xuICAgICAgY29uc3QgcGFydHMgPSBwYXJzZWQucGF0aG5hbWUuc3BsaXQoXCIvXCIpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgIHBhcnNlZC5wYXRobmFtZSA9IHBhcnRzLmxlbmd0aCA/IGAvJHtwYXJ0c1swXX1gIDogXCIvXCI7XG4gICAgICBwYXJzZWQuc2VhcmNoID0gXCJcIjtcbiAgICAgIHJldHVybiBwYXJzZWQudG9TdHJpbmcoKS5yZXBsYWNlKC9cXC8kLywgXCJcIik7XG4gICAgfVxuXG4gICAgcGFyc2VkLnBhdGhuYW1lID0gcGFyc2VkLnBhdGhuYW1lLnJlcGxhY2UoL1xcLyskLywgXCJcIikgfHwgXCIvXCI7XG4gICAgcGFyc2VkLmhhc2ggPSBcIlwiO1xuICAgIHJldHVybiBwYXJzZWQudG9TdHJpbmcoKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxufTtcblxuY29uc3QgZ2V0RG9tYWluID0gKHVybCkgPT4ge1xuICB0cnkge1xuICAgIHJldHVybiBuZXcgVVJMKHVybCkuaG9zdG5hbWUucmVwbGFjZSgvXnd3d1xcXFwuLywgXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbn07XG5cbmNsYXNzIFdlYkNsaWVudCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLm1heFJlcXVlc3RzID0gb3B0aW9ucy5tYXhSZXF1ZXN0cztcbiAgICB0aGlzLm1pbkRlbGF5TXMgPSBvcHRpb25zLm1pbkRlbGF5TXMgPz8gNjAwO1xuICAgIHRoaXMudXNlckFnZW50cyA9IG9wdGlvbnMudXNlckFnZW50cyA/PyBVU0VSX0FHRU5UUztcbiAgICB0aGlzLnRpbWVvdXRNcyA9IG9wdGlvbnMudGltZW91dE1zID8/IDE1MDAwO1xuICAgIHRoaXMuc2VhcmNoVGltZW91dE1zID0gb3B0aW9ucy5zZWFyY2hUaW1lb3V0TXMgPz8gMTIwMDA7XG4gICAgdGhpcy5sYXN0UmVxdWVzdEF0ID0gMDtcbiAgICB0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgdGhpcy5zdGF0cyA9IHtcbiAgICAgIHJlcXVlc3RzX21hZGU6IDAsXG4gICAgICBibG9ja2VkX2NvdW50OiAwLFxuICAgICAgZXJyb3JzX2NvdW50OiAwLFxuICAgICAgZHVyYXRpb25fbXM6IDAsXG4gICAgICB0b3BfZXJyb3JzOiBbXSxcbiAgICAgIHdhcm5pbmdzOiBbXVxuICAgIH07XG4gICAgdGhpcy5yb2JvdHNDYWNoZSA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmRvbWFpbkZhaWx1cmVzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZG9tYWluQ29vbGRvd24gPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5jb25zZWN1dGl2ZVJhdGVMaW1pdCA9IDA7XG4gICAgdGhpcy5sb3dUcmFmZmljTW9kZSA9IGZhbHNlO1xuICAgIHRoaXMudHJhY2UgPSBbXTtcbiAgICB0aGlzLmVycm9yQ291bnRzID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgZ2V0U3RhdHMoKSB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5zdGF0cywgZHVyYXRpb25fbXM6IERhdGUubm93KCkgLSB0aGlzLnN0YXJ0VGltZSB9O1xuICB9XG5cbiAgZ2V0VHJhY2UoKSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLnRyYWNlXTtcbiAgfVxuXG4gIHJlY29yZFdhcm5pbmcobWVzc2FnZSkge1xuICAgIGlmICghdGhpcy5zdGF0cy53YXJuaW5ncy5pbmNsdWRlcyhtZXNzYWdlKSkge1xuICAgICAgdGhpcy5zdGF0cy53YXJuaW5ncy5wdXNoKG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIHJlY29yZEVycm9yKGRvbWFpbiwgY29kZSkge1xuICAgIGlmICghZG9tYWluKSByZXR1cm47XG4gICAgY29uc3Qga2V5ID0gYCR7ZG9tYWlufToke2NvZGUgfHwgXCJFUlJcIn1gO1xuICAgIGNvbnN0IG5leHQgPSAodGhpcy5lcnJvckNvdW50cy5nZXQoa2V5KSA/PyAwKSArIDE7XG4gICAgdGhpcy5lcnJvckNvdW50cy5zZXQoa2V5LCBuZXh0KTtcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuZnJvbSh0aGlzLmVycm9yQ291bnRzLmVudHJpZXMoKSlcbiAgICAgIC5tYXAoKFtlbnRyeUtleSwgY291bnRdKSA9PiB7XG4gICAgICAgIGNvbnN0IFtlbnRyeURvbWFpbiwgZW50cnlDb2RlXSA9IGVudHJ5S2V5LnNwbGl0KFwiOlwiKTtcbiAgICAgICAgcmV0dXJuIHsgZG9tYWluOiBlbnRyeURvbWFpbiwgY29kZTogZW50cnlDb2RlLCBjb3VudCB9O1xuICAgICAgfSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudClcbiAgICAgIC5zbGljZSgwLCA1KTtcbiAgICB0aGlzLnN0YXRzLnRvcF9lcnJvcnMgPSBlbnRyaWVzO1xuICB9XG5cbiAgYXN5bmMgdGhyb3R0bGUoKSB7XG4gICAgY29uc3QgZGVsYXkgPSB0aGlzLmxvd1RyYWZmaWNNb2RlID8gTWF0aC5tYXgodGhpcy5taW5EZWxheU1zLCAyMDAwKSA6IHRoaXMubWluRGVsYXlNcztcbiAgICBjb25zdCBkaWZmID0gRGF0ZS5ub3coKSAtIHRoaXMubGFzdFJlcXVlc3RBdDtcbiAgICBpZiAoZGlmZiA8IGRlbGF5KSB7XG4gICAgICBhd2FpdCBzbGVlcChkZWxheSAtIGRpZmYpO1xuICAgIH1cbiAgICB0aGlzLmxhc3RSZXF1ZXN0QXQgPSBEYXRlLm5vdygpO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hXaXRoTGltaXQodXJsLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAodGhpcy5zdGF0cy5yZXF1ZXN0c19tYWRlID49IHRoaXMubWF4UmVxdWVzdHMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIldFQl9SRVFVRVNUX0xJTUlUXCIpO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLnRocm90dGxlKCk7XG4gICAgdGhpcy5zdGF0cy5yZXF1ZXN0c19tYWRlICs9IDE7XG4gICAgY29uc3QgdXNlckFnZW50ID1cbiAgICAgIHRoaXMudXNlckFnZW50c1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLnVzZXJBZ2VudHMubGVuZ3RoKV07XG4gICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgIC4uLkRFRkFVTFRfSEVBREVSUyxcbiAgICAgIC4uLihvcHRpb25zLmhlYWRlcnMgfHwge30pLFxuICAgICAgXCJVc2VyLUFnZW50XCI6IHVzZXJBZ2VudFxuICAgIH07XG4gICAgY29uc3QgZG9tYWluID0gZ2V0RG9tYWluKHVybCk7XG5cbiAgICBsZXQgYXR0ZW1wdCA9IDA7XG4gICAgbGV0IGxhc3RFcnJvciA9IG51bGw7XG5cbiAgICB3aGlsZSAoYXR0ZW1wdCA8IDMpIHtcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICBjb25zdCB0aW1lb3V0TXMgPSBvcHRpb25zLnRpbWVvdXRNcyA/PyB0aGlzLnRpbWVvdXRNcztcbiAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgdGltZW91dE1zKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgICAgY2FjaGU6IFwibm8tc3RvcmVcIixcbiAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblxuICAgICAgICBpZiAoWzQyOSwgNTAzLCA1MjAsIDUyMl0uaW5jbHVkZXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgICAgICAgIHRoaXMuY29uc2VjdXRpdmVSYXRlTGltaXQgKz0gMTtcbiAgICAgICAgICB0aGlzLnJlY29yZEVycm9yKGRvbWFpbiwgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICBpZiAodGhpcy5jb25zZWN1dGl2ZVJhdGVMaW1pdCA+PSAyICYmICF0aGlzLmxvd1RyYWZmaWNNb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmxvd1RyYWZmaWNNb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVjb3JkV2FybmluZyhcInJhdGUtbGltaXRlZCwgc3dpdGNoZWQgdG8gbG93LXRyYWZmaWMgbW9kZVwiKTtcbiAgICAgICAgICAgIHRoaXMubWF4UmVxdWVzdHMgPSBNYXRoLm1heCgxMCwgTWF0aC5mbG9vcih0aGlzLm1heFJlcXVlc3RzICogMC44KSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5taW4oODAwMCwgNDAwICogMiAqKiBhdHRlbXB0KTtcbiAgICAgICAgICBjb25zdCBqaXR0ZXIgPSBkZWxheSAqICgwLjUgKyBNYXRoLnJhbmRvbSgpKTtcbiAgICAgICAgICBhd2FpdCBzbGVlcChqaXR0ZXIpO1xuICAgICAgICAgIGF0dGVtcHQgKz0gMTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29uc2VjdXRpdmVSYXRlTGltaXQgPSAwO1xuICAgICAgICByZXR1cm4geyBvazogcmVzcG9uc2Uub2ssIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLCB0ZXh0IH07XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIGxhc3RFcnJvciA9IGVycm9yO1xuICAgICAgICB0aGlzLnN0YXRzLmVycm9yc19jb3VudCArPSAxO1xuICAgICAgICB0aGlzLnJlY29yZEVycm9yKGRvbWFpbiwgXCJGRVRDSFwiKTtcbiAgICAgICAgY29uc3QgZGVsYXkgPSBNYXRoLm1pbig4MDAwLCA0MDAgKiAyICoqIGF0dGVtcHQpO1xuICAgICAgICBjb25zdCBqaXR0ZXIgPSBkZWxheSAqICgwLjUgKyBNYXRoLnJhbmRvbSgpKTtcbiAgICAgICAgYXdhaXQgc2xlZXAoaml0dGVyKTtcbiAgICAgICAgYXR0ZW1wdCArPSAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChsYXN0RXJyb3IpIHRocm93IGxhc3RFcnJvcjtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGRVRDSF9GQUlMRURcIik7XG4gIH1cblxuICBhc3luYyBjYW5GZXRjaCh1cmwpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkID0gbmV3IFVSTCh1cmwpO1xuICAgICAgY29uc3QgZG9tYWluID0gcGFyc2VkLm9yaWdpbjtcbiAgICAgIGlmICghdGhpcy5yb2JvdHNDYWNoZS5oYXMoZG9tYWluKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJvYm90c1VybCA9IGAke2RvbWFpbn0vcm9ib3RzLnR4dGA7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZldGNoV2l0aExpbWl0KHJvYm90c1VybCk7XG4gICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgdGhpcy5yb2JvdHNDYWNoZS5zZXQoZG9tYWluLCBbXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGRpc2FsbG93ID0gZXh0cmFjdFJvYm90c1J1bGVzKHJlc3BvbnNlLnRleHQpO1xuICAgICAgICAgICAgdGhpcy5yb2JvdHNDYWNoZS5zZXQoZG9tYWluLCBkaXNhbGxvdyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICB0aGlzLnJvYm90c0NhY2hlLnNldChkb21haW4sIFtdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBydWxlcyA9IHRoaXMucm9ib3RzQ2FjaGUuZ2V0KGRvbWFpbikgPz8gW107XG4gICAgICBjb25zdCBwYXRoID0gcGFyc2VkLnBhdGhuYW1lO1xuICAgICAgaWYgKHJ1bGVzLmluY2x1ZGVzKFwiL1wiKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gIXJ1bGVzLnNvbWUoKHJ1bGUpID0+IHJ1bGUgJiYgcGF0aC5zdGFydHNXaXRoKHJ1bGUpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmZXRjaFBhZ2UodXJsLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjYW5vbmljYWxVcmwgPSBjYW5vbmljYWxpemVVcmwodXJsKTtcbiAgICBjb25zdCBkb21haW4gPSBnZXREb21haW4oY2Fub25pY2FsVXJsKTtcbiAgICBjb25zdCBjb29sZG93blVudGlsID0gdGhpcy5kb21haW5Db29sZG93bi5nZXQoZG9tYWluKTtcbiAgICBpZiAoY29vbGRvd25VbnRpbCAmJiBjb29sZG93blVudGlsID4gRGF0ZS5ub3coKSkge1xuICAgICAgdGhpcy5zdGF0cy5ibG9ja2VkX2NvdW50ICs9IDE7XG4gICAgICB0aGlzLnN0YXRzLmVycm9yc19jb3VudCArPSAxO1xuICAgICAgdGhpcy5yZWNvcmRFcnJvcihkb21haW4sIFwiQ09PTERPV05cIik7XG4gICAgICByZXR1cm4geyBibG9ja2VkOiB0cnVlLCB1cmw6IGNhbm9uaWNhbFVybCB9O1xuICAgIH1cblxuICAgIGNvbnN0IGFsbG93ZWQgPSBhd2FpdCB0aGlzLmNhbkZldGNoKGNhbm9uaWNhbFVybCk7XG4gICAgaWYgKCFhbGxvd2VkKSB7XG4gICAgICB0aGlzLnN0YXRzLmJsb2NrZWRfY291bnQgKz0gMTtcbiAgICAgIHRoaXMuc3RhdHMuZXJyb3JzX2NvdW50ICs9IDE7XG4gICAgICB0aGlzLnJlY29yZEVycm9yKGRvbWFpbiwgXCJST0JPVFNcIik7XG4gICAgICByZXR1cm4geyBibG9ja2VkOiB0cnVlLCB1cmw6IGNhbm9uaWNhbFVybCB9O1xuICAgIH1cbiAgICB0aGlzLnRyYWNlLnB1c2goeyBkb21haW4sIHR5cGU6IG9wdGlvbnMudHlwZSB8fCBcInBhZ2VcIiB9KTtcbiAgICBsZXQgcmVzcG9uc2U7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaFdpdGhMaW1pdChjYW5vbmljYWxVcmwsIHtcbiAgICAgICAgdGltZW91dE1zOiBvcHRpb25zLnRpbWVvdXRNc1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGZhaWx1cmVzID0gKHRoaXMuZG9tYWluRmFpbHVyZXMuZ2V0KGRvbWFpbikgPz8gMCkgKyAxO1xuICAgICAgdGhpcy5kb21haW5GYWlsdXJlcy5zZXQoZG9tYWluLCBmYWlsdXJlcyk7XG4gICAgICBpZiAoZmFpbHVyZXMgPj0gNSkge1xuICAgICAgICB0aGlzLmRvbWFpbkNvb2xkb3duLnNldChkb21haW4sIERhdGUubm93KCkgKyAxMCAqIDYwICogMTAwMCk7XG4gICAgICAgIHRoaXMucmVjb3JkV2FybmluZyhgY2lyY3VpdC1icmVha2VyOiR7ZG9tYWlufWApO1xuICAgICAgfVxuICAgICAgdGhpcy5zdGF0cy5lcnJvcnNfY291bnQgKz0gMTtcbiAgICAgIHRoaXMucmVjb3JkRXJyb3IoZG9tYWluLCBcIkZFVENIXCIpO1xuICAgICAgcmV0dXJuIHsgYmxvY2tlZDogdHJ1ZSwgdXJsOiBjYW5vbmljYWxVcmwgfTtcbiAgICB9XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhpcy5zdGF0cy5lcnJvcnNfY291bnQgKz0gMTtcbiAgICAgIHRoaXMucmVjb3JkRXJyb3IoZG9tYWluLCByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgY29uc3QgZmFpbHVyZXMgPSAodGhpcy5kb21haW5GYWlsdXJlcy5nZXQoZG9tYWluKSA/PyAwKSArIDE7XG4gICAgICB0aGlzLmRvbWFpbkZhaWx1cmVzLnNldChkb21haW4sIGZhaWx1cmVzKTtcbiAgICAgIGlmIChmYWlsdXJlcyA+PSA1KSB7XG4gICAgICAgIHRoaXMuZG9tYWluQ29vbGRvd24uc2V0KGRvbWFpbiwgRGF0ZS5ub3coKSArIDEwICogNjAgKiAxMDAwKTtcbiAgICAgICAgdGhpcy5yZWNvcmRXYXJuaW5nKGBjaXJjdWl0LWJyZWFrZXI6JHtkb21haW59YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4geyBibG9ja2VkOiB0cnVlLCB1cmw6IGNhbm9uaWNhbFVybCB9O1xuICAgIH1cbiAgICB0aGlzLmRvbWFpbkZhaWx1cmVzLnNldChkb21haW4sIDApO1xuICAgIGNvbnN0IGh0bWwgPSByZXNwb25zZS50ZXh0O1xuICAgIGNvbnN0IHRpdGxlID0gZXh0cmFjdFRpdGxlKGh0bWwpO1xuICAgIGNvbnN0IHRleHQgPSBzdHJpcEh0bWwoaHRtbCk7XG4gICAgcmV0dXJuIHsgdXJsOiBjYW5vbmljYWxVcmwsIHRpdGxlLCBodG1sLCB0ZXh0IH07XG4gIH1cblxuICBhc3luYyBzZWFyY2gocXVlcnksIGVuZ2luZSA9IFwieWFuZGV4XCIsIGxpbWl0ID0gNSkge1xuICAgIGNvbnN0IHNlYXJjaFVybCA9XG4gICAgICBlbmdpbmUgPT09IFwieWFuZGV4XCJcbiAgICAgICAgPyBgaHR0cHM6Ly95YW5kZXgucnUvc2VhcmNoLz90ZXh0PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KX1gXG4gICAgICAgIDogYGh0dHBzOi8vZHVja2R1Y2tnby5jb20vaHRtbC8/cT0ke2VuY29kZVVSSUNvbXBvbmVudChxdWVyeSl9YDtcblxuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzLmZldGNoUGFnZShzZWFyY2hVcmwsIHtcbiAgICAgIHRpbWVvdXRNczogdGhpcy5zZWFyY2hUaW1lb3V0TXMsXG4gICAgICB0eXBlOiBcInNlYXJjaFwiXG4gICAgfSk7XG4gICAgaWYgKFwiYmxvY2tlZFwiIGluIHBhZ2UpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5rcyA9IGV4dHJhY3RMaW5rcyhwYWdlLmh0bWwpXG4gICAgICAubWFwKChsaW5rKSA9PiAobGluay5pbmNsdWRlcyhcInlhbmRleFwiKSA/IGRlY29kZVlhbmRleFJlZGlyZWN0KGxpbmspIDogbGluaykpXG4gICAgICAuZmlsdGVyKChsaW5rKSA9PiBsaW5rLnN0YXJ0c1dpdGgoXCJodHRwXCIpKTtcblxuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICBjb25zdCBzZWVuID0gbmV3IFNldCgpO1xuXG4gICAgZm9yIChjb25zdCBsaW5rIG9mIGxpbmtzKSB7XG4gICAgICBpZiAocmVzdWx0cy5sZW5ndGggPj0gbGltaXQpIGJyZWFrO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChsaW5rKTtcbiAgICAgICAgaWYgKHVybC5ob3N0bmFtZS5pbmNsdWRlcyhcInlhbmRleFwiKSB8fCB1cmwuaG9zdG5hbWUuaW5jbHVkZXMoXCJkdWNrZHVja2dvXCIpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzZWVuLmhhcyhsaW5rKSkgY29udGludWU7XG4gICAgICBzZWVuLmFkZChsaW5rKTtcbiAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgIHVybDogY2Fub25pY2FsaXplVXJsKGxpbmspLFxuICAgICAgICB0aXRsZTogcGFnZS50aXRsZSxcbiAgICAgICAgc25pcHBldDogcXVlcnksXG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBlbmdpbmUsXG4gICAgICAgIHNvdXJjZV91cmw6IHNlYXJjaFVybFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFdlYkNsaWVudCxcbiAgY2Fub25pY2FsaXplVXJsXG59O1xuIl0sIm5hbWVzIjpbInNsZWVwIiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJVU0VSX0FHRU5UUyIsIkRFRkFVTFRfSEVBREVSUyIsIkFjY2VwdCIsIlByYWdtYSIsInN0cmlwSHRtbCIsImh0bWwiLCJyZXBsYWNlIiwidHJpbSIsImV4dHJhY3RUaXRsZSIsIm1hdGNoIiwiZXh0cmFjdExpbmtzIiwibGlua3MiLCJyZWdleCIsImV4ZWMiLCJocmVmIiwic3RhcnRzV2l0aCIsInB1c2giLCJkZWNvZGVZYW5kZXhSZWRpcmVjdCIsInVybCIsInBhcnNlZCIsIlVSTCIsInRhcmdldCIsInNlYXJjaFBhcmFtcyIsImdldCIsImRlY29kZVVSSUNvbXBvbmVudCIsImV4dHJhY3RSb2JvdHNSdWxlcyIsImNvbnRlbnQiLCJsaW5lcyIsInNwbGl0IiwibWFwIiwibGluZSIsImFwcGx5IiwiZGlzYWxsb3ciLCJyYXdLZXkiLCJyYXdWYWx1ZSIsInVuZGVmaW5lZCIsImtleSIsInRvTG93ZXJDYXNlIiwidmFsdWUiLCJjYW5vbmljYWxpemVVcmwiLCJwcm90b2NvbCIsInBhcmFtc1RvUmVtb3ZlIiwiZm9yRWFjaCIsIl8iLCJsb3dlciIsImluY2x1ZGVzIiwiZGVsZXRlIiwiaG9zdG5hbWUiLCJwYXRoIiwicGF0aG5hbWUiLCJzbGljZSIsInNlYXJjaCIsInBhcnRzIiwiZmlsdGVyIiwiQm9vbGVhbiIsImxlbmd0aCIsInRvU3RyaW5nIiwiaGFzaCIsImdldERvbWFpbiIsIldlYkNsaWVudCIsIm9wdGlvbnMiLCJtYXhSZXF1ZXN0cyIsIm1pbkRlbGF5TXMiLCJ1c2VyQWdlbnRzIiwidGltZW91dE1zIiwic2VhcmNoVGltZW91dE1zIiwibGFzdFJlcXVlc3RBdCIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJzdGF0cyIsInJlcXVlc3RzX21hZGUiLCJibG9ja2VkX2NvdW50IiwiZXJyb3JzX2NvdW50IiwiZHVyYXRpb25fbXMiLCJ0b3BfZXJyb3JzIiwid2FybmluZ3MiLCJyb2JvdHNDYWNoZSIsIk1hcCIsImRvbWFpbkZhaWx1cmVzIiwiZG9tYWluQ29vbGRvd24iLCJjb25zZWN1dGl2ZVJhdGVMaW1pdCIsImxvd1RyYWZmaWNNb2RlIiwidHJhY2UiLCJlcnJvckNvdW50cyIsImdldFN0YXRzIiwiZ2V0VHJhY2UiLCJyZWNvcmRXYXJuaW5nIiwibWVzc2FnZSIsInJlY29yZEVycm9yIiwiZG9tYWluIiwiY29kZSIsIm5leHQiLCJzZXQiLCJlbnRyaWVzIiwiQXJyYXkiLCJmcm9tIiwiZW50cnlLZXkiLCJjb3VudCIsImVudHJ5RG9tYWluIiwiZW50cnlDb2RlIiwic29ydCIsImEiLCJiIiwidGhyb3R0bGUiLCJkZWxheSIsIk1hdGgiLCJtYXgiLCJkaWZmIiwiZmV0Y2hXaXRoTGltaXQiLCJFcnJvciIsInVzZXJBZ2VudCIsImZsb29yIiwicmFuZG9tIiwiaGVhZGVycyIsImF0dGVtcHQiLCJsYXN0RXJyb3IiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwidGltZW91dCIsImFib3J0IiwicmVzcG9uc2UiLCJmZXRjaCIsImNhY2hlIiwic2lnbmFsIiwidGV4dCIsImNsZWFyVGltZW91dCIsInN0YXR1cyIsIm1pbiIsImppdHRlciIsIm9rIiwiZXJyb3IiLCJjYW5GZXRjaCIsIm9yaWdpbiIsImhhcyIsInJvYm90c1VybCIsInJ1bGVzIiwic29tZSIsInJ1bGUiLCJmZXRjaFBhZ2UiLCJjYW5vbmljYWxVcmwiLCJjb29sZG93blVudGlsIiwiYmxvY2tlZCIsImFsbG93ZWQiLCJ0eXBlIiwiZmFpbHVyZXMiLCJ0aXRsZSIsInF1ZXJ5IiwiZW5naW5lIiwibGltaXQiLCJzZWFyY2hVcmwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJwYWdlIiwibGluayIsInJlc3VsdHMiLCJzZWVuIiwiU2V0IiwiYWRkIiwic25pcHBldCIsInNvdXJjZV91cmwiLCJtb2R1bGUiLCJleHBvcnRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/agents/webClient.js\n");

/***/ }),

/***/ "(rsc)/./lib/llm/provider.js":
/*!*****************************!*\
  !*** ./lib/llm/provider.js ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst fs = __webpack_require__(/*! node:fs */ \"node:fs\");\nconst path = __webpack_require__(/*! node:path */ \"node:path\");\nconst DEFAULT_PROVIDER = \"fake\";\nconst normalizeProviderName = (value)=>{\n    const normalized = String(value || \"\").trim().toLowerCase();\n    return normalized === \"real\" ? \"real\" : \"fake\";\n};\nconst getConfiguredProviderName = ()=>normalizeProviderName(process.env.LLM_PROVIDER || DEFAULT_PROVIDER);\nconst hasRealProviderCredentials = ()=>Boolean(String(process.env.OPENAI_API_KEY || \"\").trim());\nconst AGENT_ID_ALIASES = {\n    platon: \"platon-prospect-research-ru\",\n    anatoly: \"anatoly-account-research-ru\",\n    maxim: \"maxim-local-leads-ru\"\n};\nconst canonicalAgentId = (agentId)=>{\n    if (!agentId) return \"\";\n    const normalized = String(agentId).trim();\n    return AGENT_ID_ALIASES[normalized] || normalized;\n};\nconst resolveFixtureOutputPath = (agentId, fixturesRoot)=>{\n    const canonical = canonicalAgentId(agentId);\n    if (!canonical) return \"\";\n    const root = fixturesRoot || path.join(process.cwd(), \"fixtures\", \"agents\");\n    return path.join(root, canonical, \"output.json\");\n};\nconst hasFixtureForAgent = (agentId, fixturesRoot)=>{\n    const outputPath = resolveFixtureOutputPath(agentId, fixturesRoot);\n    return Boolean(outputPath && fs.existsSync(outputPath));\n};\nconst stripVolatile = (value)=>{\n    if (!value || typeof value !== \"object\") return value;\n    if (Array.isArray(value)) return value.map((item)=>stripVolatile(item));\n    const next = {};\n    Object.entries(value).forEach(([key, val])=>{\n        if (key === \"generated_at\") {\n            next[key] = \"1970-01-01T00:00:00.000Z\";\n            return;\n        }\n        if (key === \"run_id\" || key === \"trace_id\") {\n            next[key] = \"stub-run\";\n            return;\n        }\n        if (key === \"duration_ms\") {\n            next[key] = 0;\n            return;\n        }\n        next[key] = stripVolatile(val);\n    });\n    return next;\n};\nconst cloneJson = (value)=>{\n    try {\n        return JSON.parse(JSON.stringify(value));\n    } catch  {\n        return value;\n    }\n};\nconst pickSchemaNode = (schema)=>{\n    if (!schema || typeof schema !== \"object\") return {};\n    if (Array.isArray(schema.oneOf) && schema.oneOf.length) return schema.oneOf[0] || {};\n    if (Array.isArray(schema.anyOf) && schema.anyOf.length) return schema.anyOf[0] || {};\n    if (Array.isArray(schema.allOf) && schema.allOf.length) {\n        return schema.allOf.reduce((acc, item)=>({\n                ...acc,\n                ...item\n            }), {});\n    }\n    return schema;\n};\nconst schemaType = (schema)=>{\n    const node = pickSchemaNode(schema);\n    if (!node || typeof node !== \"object\") return \"object\";\n    if (node.const !== undefined) return typeof node.const;\n    if (node.default !== undefined) return typeof node.default;\n    if (Array.isArray(node.enum) && node.enum.length) return typeof node.enum[0];\n    if (Array.isArray(node.type)) return node.type[0] || \"object\";\n    return node.type || \"object\";\n};\nconst valueForFormat = (format)=>{\n    if (format === \"date-time\") return \"1970-01-01T00:00:00.000Z\";\n    if (format === \"date\") return \"1970-01-01\";\n    if (format === \"email\") return \"stub@example.com\";\n    if (format === \"uri\" || format === \"url\") return \"https://example.com\";\n    return \"stub\";\n};\nconst buildFromSchema = (schema, keyHint = \"\")=>{\n    const node = pickSchemaNode(schema);\n    if (!node || typeof node !== \"object\") return {};\n    if (Object.prototype.hasOwnProperty.call(node, \"const\")) return cloneJson(node.const);\n    if (Object.prototype.hasOwnProperty.call(node, \"default\")) return cloneJson(node.default);\n    if (Array.isArray(node.enum) && node.enum.length) return cloneJson(node.enum[0]);\n    const type = schemaType(node);\n    if (type === \"string\") {\n        if (node.format) return valueForFormat(node.format);\n        if (keyHint.toLowerCase().includes(\"email\")) return \"stub@example.com\";\n        if (keyHint.toLowerCase().includes(\"url\") || keyHint.toLowerCase().includes(\"link\")) {\n            return \"https://example.com\";\n        }\n        return \"stub\";\n    }\n    if (type === \"number\" || type === \"integer\") {\n        if (Number.isFinite(node.minimum)) return Number(node.minimum);\n        return 0;\n    }\n    if (type === \"boolean\") return false;\n    if (type === \"array\") {\n        const itemSchema = node.items || {};\n        return [\n            buildFromSchema(itemSchema, keyHint ? `${keyHint}_item` : \"item\")\n        ];\n    }\n    if (type === \"object\") {\n        const properties = node.properties && typeof node.properties === \"object\" ? node.properties : {};\n        const required = Array.isArray(node.required) ? node.required : [];\n        const keys = new Set([\n            ...required,\n            ...Object.keys(properties)\n        ]);\n        const result = {};\n        if (keys.size === 0) {\n            return keyHint === \"meta\" ? {\n                generated_at: \"1970-01-01T00:00:00.000Z\"\n            } : {};\n        }\n        keys.forEach((key)=>{\n            const childSchema = properties[key] || {};\n            result[key] = buildFromSchema(childSchema, key);\n        });\n        return result;\n    }\n    return {};\n};\nclass FakeLLMProvider {\n    constructor(options = {}){\n        this.name = \"fake\";\n        this.fixturesRoot = options.fixturesRoot || path.join(process.cwd(), \"fixtures\", \"agents\");\n    }\n    loadFixtureData(agentId) {\n        const outputPath = resolveFixtureOutputPath(agentId, this.fixturesRoot);\n        if (!outputPath || !fs.existsSync(outputPath)) return null;\n        try {\n            const parsed = JSON.parse(fs.readFileSync(outputPath, \"utf8\"));\n            const legacyData = parsed && parsed.data ? parsed.data : parsed;\n            return stripVolatile(cloneJson(legacyData));\n        } catch  {\n            return null;\n        }\n    }\n    async generateJson({ schema, meta } = {}) {\n        const agentId = meta && typeof meta === \"object\" ? meta.agent_id || meta.agentId : \"\";\n        const fixtureData = agentId ? this.loadFixtureData(agentId) : null;\n        if (fixtureData) {\n            return fixtureData;\n        }\n        return buildFromSchema(schema || {}, \"root\");\n    }\n}\nconst sanitizeSchemaName = (value)=>{\n    const normalized = String(value || \"agent_output\").replace(/[^a-zA-Z0-9_]/g, \"_\").replace(/_+/g, \"_\").replace(/^_+|_+$/g, \"\");\n    return normalized || \"agent_output\";\n};\nconst stripCodeFences = (value)=>String(value || \"\").replace(/```json/gi, \"```\").replace(/^```/, \"\").replace(/```$/, \"\").trim();\nconst parseJsonString = (value)=>{\n    if (typeof value !== \"string\") return null;\n    const direct = value.trim();\n    if (!direct) return null;\n    try {\n        return JSON.parse(direct);\n    } catch  {\n    // continue\n    }\n    const stripped = stripCodeFences(direct);\n    if (!stripped) return null;\n    try {\n        return JSON.parse(stripped);\n    } catch  {\n        return null;\n    }\n};\nconst extractErrorMessage = (payload)=>{\n    if (!payload || typeof payload !== \"object\") return \"\";\n    if (payload.error && typeof payload.error === \"object\") {\n        const message = payload.error.message || payload.error.code;\n        if (message) return String(message);\n    }\n    return \"\";\n};\nconst getNumericOption = (value, fallback)=>{\n    const numeric = Number(value);\n    return Number.isFinite(numeric) ? numeric : fallback;\n};\nclass RealLLMProvider {\n    constructor(options = {}){\n        this.name = \"real\";\n        this.apiKey = options.apiKey || process.env.OPENAI_API_KEY || \"\";\n        this.baseUrl = String(options.baseUrl || process.env.OPENAI_BASE_URL || \"https://api.openai.com/v1\").replace(/\\/+$/, \"\");\n        this.model = options.model || process.env.OPENAI_MODEL || \"gpt-5-mini\";\n        this.timeoutMs = getNumericOption(options.timeoutMs || process.env.OPENAI_TIMEOUT_MS, 45000);\n        this.fetchImpl = options.fetch || globalThis.fetch;\n    }\n    async requestChatCompletions(payload) {\n        if (typeof this.fetchImpl !== \"function\") {\n            throw new Error(\"Global fetch is not available for RealLLMProvider.\");\n        }\n        const controller = new AbortController();\n        const timeout = setTimeout(()=>controller.abort(), this.timeoutMs);\n        let response;\n        try {\n            response = await this.fetchImpl(`${this.baseUrl}/chat/completions`, {\n                method: \"POST\",\n                headers: {\n                    \"content-type\": \"application/json\",\n                    authorization: `Bearer ${this.apiKey}`\n                },\n                body: JSON.stringify(payload),\n                signal: controller.signal\n            });\n        } catch (error) {\n            const message = error && typeof error === \"object\" && error.name === \"AbortError\" ? `OpenAI request timed out after ${this.timeoutMs}ms` : `OpenAI request failed: ${error instanceof Error ? error.message : \"unknown error\"}`;\n            throw new Error(message);\n        } finally{\n            clearTimeout(timeout);\n        }\n        const text = await response.text();\n        const parsed = parseJsonString(text) || {};\n        if (!response.ok) {\n            const apiMessage = extractErrorMessage(parsed);\n            const reason = apiMessage || text.slice(0, 300) || `HTTP ${response.status}`;\n            const error = new Error(`OpenAI request failed (${response.status}): ${reason}`);\n            error.status = response.status;\n            throw error;\n        }\n        return parsed;\n    }\n    extractMessageText(payload) {\n        const content = payload?.choices?.[0]?.message?.content;\n        if (typeof content === \"string\") return content;\n        if (Array.isArray(content)) {\n            return content.map((part)=>{\n                if (!part || typeof part !== \"object\") return \"\";\n                if (typeof part.text === \"string\") return part.text;\n                if (part.text && typeof part.text === \"object\" && typeof part.text.value === \"string\") {\n                    return part.text.value;\n                }\n                if (typeof part.content === \"string\") return part.content;\n                return \"\";\n            }).join(\"\").trim();\n        }\n        return \"\";\n    }\n    buildMessages(system, prompt, schema) {\n        const baseSystem = typeof system === \"string\" && system.trim() ? system.trim() : \"You are a strict JSON assistant.\";\n        const schemaHint = schema && typeof schema === \"object\" && Object.keys(schema).length ? `Return only JSON that matches this schema:\\n${JSON.stringify(schema)}` : \"Return only valid JSON.\";\n        const userPrompt = typeof prompt === \"string\" && prompt.trim() ? prompt.trim() : \"{}\";\n        return [\n            {\n                role: \"system\",\n                content: `${baseSystem}\\n\\n${schemaHint}`\n            },\n            {\n                role: \"user\",\n                content: userPrompt\n            }\n        ];\n    }\n    async generateJson({ system, prompt, schema, temperature, maxTokens, meta } = {}) {\n        if (!this.apiKey) {\n            throw new Error(\"OPENAI_API_KEY is required when LLM_PROVIDER=real.\");\n        }\n        const requestedModel = meta && typeof meta === \"object\" && typeof meta.model === \"string\" ? meta.model.trim() : \"\";\n        const model = requestedModel || this.model;\n        const messages = this.buildMessages(system, prompt, schema);\n        const cappedTemperature = Math.min(Math.max(getNumericOption(temperature, 0.2), 0), 1.5);\n        const tokenLimit = Math.max(200, Math.min(6000, getNumericOption(maxTokens, 1800)));\n        const hasSchema = Boolean(schema && typeof schema === \"object\" && Object.keys(schema).length);\n        const schemaName = sanitizeSchemaName(meta && typeof meta === \"object\" ? meta.agent_id || meta.agentId || \"agent_output\" : \"agent_output\");\n        const withSchemaPayload = {\n            model,\n            messages,\n            temperature: cappedTemperature,\n            max_tokens: tokenLimit,\n            response_format: hasSchema ? {\n                type: \"json_schema\",\n                json_schema: {\n                    name: schemaName,\n                    strict: true,\n                    schema\n                }\n            } : {\n                type: \"json_object\"\n            }\n        };\n        let firstResult;\n        try {\n            firstResult = await this.requestChatCompletions(withSchemaPayload);\n        } catch (error) {\n            // Some models/endpoints may reject json_schema; fallback to plain json_object.\n            const fallbackPayload = {\n                model,\n                messages,\n                temperature: cappedTemperature,\n                max_tokens: tokenLimit,\n                response_format: {\n                    type: \"json_object\"\n                }\n            };\n            firstResult = await this.requestChatCompletions(fallbackPayload);\n        }\n        const text = this.extractMessageText(firstResult);\n        const parsed = parseJsonString(text);\n        if (parsed && typeof parsed === \"object\") {\n            return parsed;\n        }\n        throw new Error(\"OpenAI returned non-JSON output for generateJson().\");\n    }\n}\nconst createLLMProvider = ({ provider, fixturesRoot } = {})=>{\n    const mode = normalizeProviderName(provider || getConfiguredProviderName());\n    if (mode === \"real\") return new RealLLMProvider();\n    return new FakeLLMProvider({\n        fixturesRoot\n    });\n};\nlet singleton = null;\nconst getLLMProvider = (options = {})=>{\n    if (options.forceNew) return createLLMProvider(options);\n    if (!singleton) singleton = createLLMProvider(options);\n    return singleton;\n};\nconst isFakeLLMProvider = (provider)=>{\n    const name = provider && typeof provider === \"object\" ? provider.name : \"\";\n    return normalizeProviderName(name) === \"fake\";\n};\nmodule.exports = {\n    FakeLLMProvider,\n    RealLLMProvider,\n    buildFromSchema,\n    canonicalAgentId,\n    createLLMProvider,\n    getConfiguredProviderName,\n    getLLMProvider,\n    hasRealProviderCredentials,\n    hasFixtureForAgent,\n    isFakeLLMProvider,\n    resolveFixtureOutputPath,\n    stripVolatile\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TDtJQUN6QixNQUFNckYsT0FBT3FGLFlBQVksT0FBT0EsYUFBYSxXQUFXQSxTQUFTckYsSUFBSSxHQUFHO0lBQ3hFLE9BQU9qRixzQkFBc0JpRixVQUFVO0FBQ3pDO0FBRUEyRixPQUFPQyxPQUFPLEdBQUc7SUFDZjlGO0lBQ0EwQjtJQUNBN0M7SUFDQTNDO0lBQ0FvSjtJQUNBL0o7SUFDQW1LO0lBQ0EvSjtJQUNBZTtJQUNBa0o7SUFDQXhKO0lBQ0FTO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hYnV6YWRhL0Rlc2t0b3AvYWdlbnRPUy9saWIvbGxtL3Byb3ZpZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZShcIm5vZGU6ZnNcIik7XG5jb25zdCBwYXRoID0gcmVxdWlyZShcIm5vZGU6cGF0aFwiKTtcblxuY29uc3QgREVGQVVMVF9QUk9WSURFUiA9IFwiZmFrZVwiO1xuXG5jb25zdCBub3JtYWxpemVQcm92aWRlck5hbWUgPSAodmFsdWUpID0+IHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IFN0cmluZyh2YWx1ZSB8fCBcIlwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIG5vcm1hbGl6ZWQgPT09IFwicmVhbFwiID8gXCJyZWFsXCIgOiBcImZha2VcIjtcbn07XG5cbmNvbnN0IGdldENvbmZpZ3VyZWRQcm92aWRlck5hbWUgPSAoKSA9PiBub3JtYWxpemVQcm92aWRlck5hbWUocHJvY2Vzcy5lbnYuTExNX1BST1ZJREVSIHx8IERFRkFVTFRfUFJPVklERVIpO1xuY29uc3QgaGFzUmVhbFByb3ZpZGVyQ3JlZGVudGlhbHMgPSAoKSA9PlxuICBCb29sZWFuKFN0cmluZyhwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSB8fCBcIlwiKS50cmltKCkpO1xuXG5jb25zdCBBR0VOVF9JRF9BTElBU0VTID0ge1xuICBwbGF0b246IFwicGxhdG9uLXByb3NwZWN0LXJlc2VhcmNoLXJ1XCIsXG4gIGFuYXRvbHk6IFwiYW5hdG9seS1hY2NvdW50LXJlc2VhcmNoLXJ1XCIsXG4gIG1heGltOiBcIm1heGltLWxvY2FsLWxlYWRzLXJ1XCJcbn07XG5cbmNvbnN0IGNhbm9uaWNhbEFnZW50SWQgPSAoYWdlbnRJZCkgPT4ge1xuICBpZiAoIWFnZW50SWQpIHJldHVybiBcIlwiO1xuICBjb25zdCBub3JtYWxpemVkID0gU3RyaW5nKGFnZW50SWQpLnRyaW0oKTtcbiAgcmV0dXJuIEFHRU5UX0lEX0FMSUFTRVNbbm9ybWFsaXplZF0gfHwgbm9ybWFsaXplZDtcbn07XG5cbmNvbnN0IHJlc29sdmVGaXh0dXJlT3V0cHV0UGF0aCA9IChhZ2VudElkLCBmaXh0dXJlc1Jvb3QpID0+IHtcbiAgY29uc3QgY2Fub25pY2FsID0gY2Fub25pY2FsQWdlbnRJZChhZ2VudElkKTtcbiAgaWYgKCFjYW5vbmljYWwpIHJldHVybiBcIlwiO1xuICBjb25zdCByb290ID0gZml4dHVyZXNSb290IHx8IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBcImZpeHR1cmVzXCIsIFwiYWdlbnRzXCIpO1xuICByZXR1cm4gcGF0aC5qb2luKHJvb3QsIGNhbm9uaWNhbCwgXCJvdXRwdXQuanNvblwiKTtcbn07XG5cbmNvbnN0IGhhc0ZpeHR1cmVGb3JBZ2VudCA9IChhZ2VudElkLCBmaXh0dXJlc1Jvb3QpID0+IHtcbiAgY29uc3Qgb3V0cHV0UGF0aCA9IHJlc29sdmVGaXh0dXJlT3V0cHV0UGF0aChhZ2VudElkLCBmaXh0dXJlc1Jvb3QpO1xuICByZXR1cm4gQm9vbGVhbihvdXRwdXRQYXRoICYmIGZzLmV4aXN0c1N5bmMob3V0cHV0UGF0aCkpO1xufTtcblxuY29uc3Qgc3RyaXBWb2xhdGlsZSA9ICh2YWx1ZSkgPT4ge1xuICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHZhbHVlO1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHJldHVybiB2YWx1ZS5tYXAoKGl0ZW0pID0+IHN0cmlwVm9sYXRpbGUoaXRlbSkpO1xuXG4gIGNvbnN0IG5leHQgPSB7fTtcbiAgT2JqZWN0LmVudHJpZXModmFsdWUpLmZvckVhY2goKFtrZXksIHZhbF0pID0+IHtcbiAgICBpZiAoa2V5ID09PSBcImdlbmVyYXRlZF9hdFwiKSB7XG4gICAgICBuZXh0W2tleV0gPSBcIjE5NzAtMDEtMDFUMDA6MDA6MDAuMDAwWlwiO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoa2V5ID09PSBcInJ1bl9pZFwiIHx8IGtleSA9PT0gXCJ0cmFjZV9pZFwiKSB7XG4gICAgICBuZXh0W2tleV0gPSBcInN0dWItcnVuXCI7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChrZXkgPT09IFwiZHVyYXRpb25fbXNcIikge1xuICAgICAgbmV4dFtrZXldID0gMDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbmV4dFtrZXldID0gc3RyaXBWb2xhdGlsZSh2YWwpO1xuICB9KTtcbiAgcmV0dXJuIG5leHQ7XG59O1xuXG5jb25zdCBjbG9uZUpzb24gPSAodmFsdWUpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn07XG5cbmNvbnN0IHBpY2tTY2hlbWFOb2RlID0gKHNjaGVtYSkgPT4ge1xuICBpZiAoIXNjaGVtYSB8fCB0eXBlb2Ygc2NoZW1hICE9PSBcIm9iamVjdFwiKSByZXR1cm4ge307XG4gIGlmIChBcnJheS5pc0FycmF5KHNjaGVtYS5vbmVPZikgJiYgc2NoZW1hLm9uZU9mLmxlbmd0aCkgcmV0dXJuIHNjaGVtYS5vbmVPZlswXSB8fCB7fTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoc2NoZW1hLmFueU9mKSAmJiBzY2hlbWEuYW55T2YubGVuZ3RoKSByZXR1cm4gc2NoZW1hLmFueU9mWzBdIHx8IHt9O1xuICBpZiAoQXJyYXkuaXNBcnJheShzY2hlbWEuYWxsT2YpICYmIHNjaGVtYS5hbGxPZi5sZW5ndGgpIHtcbiAgICByZXR1cm4gc2NoZW1hLmFsbE9mLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiAoeyAuLi5hY2MsIC4uLml0ZW0gfSksIHt9KTtcbiAgfVxuICByZXR1cm4gc2NoZW1hO1xufTtcblxuY29uc3Qgc2NoZW1hVHlwZSA9IChzY2hlbWEpID0+IHtcbiAgY29uc3Qgbm9kZSA9IHBpY2tTY2hlbWFOb2RlKHNjaGVtYSk7XG4gIGlmICghbm9kZSB8fCB0eXBlb2Ygbm9kZSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIFwib2JqZWN0XCI7XG4gIGlmIChub2RlLmNvbnN0ICE9PSB1bmRlZmluZWQpIHJldHVybiB0eXBlb2Ygbm9kZS5jb25zdDtcbiAgaWYgKG5vZGUuZGVmYXVsdCAhPT0gdW5kZWZpbmVkKSByZXR1cm4gdHlwZW9mIG5vZGUuZGVmYXVsdDtcbiAgaWYgKEFycmF5LmlzQXJyYXkobm9kZS5lbnVtKSAmJiBub2RlLmVudW0ubGVuZ3RoKSByZXR1cm4gdHlwZW9mIG5vZGUuZW51bVswXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkobm9kZS50eXBlKSkgcmV0dXJuIG5vZGUudHlwZVswXSB8fCBcIm9iamVjdFwiO1xuICByZXR1cm4gbm9kZS50eXBlIHx8IFwib2JqZWN0XCI7XG59O1xuXG5jb25zdCB2YWx1ZUZvckZvcm1hdCA9IChmb3JtYXQpID0+IHtcbiAgaWYgKGZvcm1hdCA9PT0gXCJkYXRlLXRpbWVcIikgcmV0dXJuIFwiMTk3MC0wMS0wMVQwMDowMDowMC4wMDBaXCI7XG4gIGlmIChmb3JtYXQgPT09IFwiZGF0ZVwiKSByZXR1cm4gXCIxOTcwLTAxLTAxXCI7XG4gIGlmIChmb3JtYXQgPT09IFwiZW1haWxcIikgcmV0dXJuIFwic3R1YkBleGFtcGxlLmNvbVwiO1xuICBpZiAoZm9ybWF0ID09PSBcInVyaVwiIHx8IGZvcm1hdCA9PT0gXCJ1cmxcIikgcmV0dXJuIFwiaHR0cHM6Ly9leGFtcGxlLmNvbVwiO1xuICByZXR1cm4gXCJzdHViXCI7XG59O1xuXG5jb25zdCBidWlsZEZyb21TY2hlbWEgPSAoc2NoZW1hLCBrZXlIaW50ID0gXCJcIikgPT4ge1xuICBjb25zdCBub2RlID0gcGlja1NjaGVtYU5vZGUoc2NoZW1hKTtcbiAgaWYgKCFub2RlIHx8IHR5cGVvZiBub2RlICE9PSBcIm9iamVjdFwiKSByZXR1cm4ge307XG5cbiAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChub2RlLCBcImNvbnN0XCIpKSByZXR1cm4gY2xvbmVKc29uKG5vZGUuY29uc3QpO1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG5vZGUsIFwiZGVmYXVsdFwiKSkgcmV0dXJuIGNsb25lSnNvbihub2RlLmRlZmF1bHQpO1xuICBpZiAoQXJyYXkuaXNBcnJheShub2RlLmVudW0pICYmIG5vZGUuZW51bS5sZW5ndGgpIHJldHVybiBjbG9uZUpzb24obm9kZS5lbnVtWzBdKTtcblxuICBjb25zdCB0eXBlID0gc2NoZW1hVHlwZShub2RlKTtcblxuICBpZiAodHlwZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGlmIChub2RlLmZvcm1hdCkgcmV0dXJuIHZhbHVlRm9yRm9ybWF0KG5vZGUuZm9ybWF0KTtcbiAgICBpZiAoa2V5SGludC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiZW1haWxcIikpIHJldHVybiBcInN0dWJAZXhhbXBsZS5jb21cIjtcbiAgICBpZiAoa2V5SGludC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwidXJsXCIpIHx8IGtleUhpbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImxpbmtcIikpIHtcbiAgICAgIHJldHVybiBcImh0dHBzOi8vZXhhbXBsZS5jb21cIjtcbiAgICB9XG4gICAgcmV0dXJuIFwic3R1YlwiO1xuICB9XG5cbiAgaWYgKHR5cGUgPT09IFwibnVtYmVyXCIgfHwgdHlwZSA9PT0gXCJpbnRlZ2VyXCIpIHtcbiAgICBpZiAoTnVtYmVyLmlzRmluaXRlKG5vZGUubWluaW11bSkpIHJldHVybiBOdW1iZXIobm9kZS5taW5pbXVtKTtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGlmICh0eXBlID09PSBcImJvb2xlYW5cIikgcmV0dXJuIGZhbHNlO1xuXG4gIGlmICh0eXBlID09PSBcImFycmF5XCIpIHtcbiAgICBjb25zdCBpdGVtU2NoZW1hID0gbm9kZS5pdGVtcyB8fCB7fTtcbiAgICByZXR1cm4gW2J1aWxkRnJvbVNjaGVtYShpdGVtU2NoZW1hLCBrZXlIaW50ID8gYCR7a2V5SGludH1faXRlbWAgOiBcIml0ZW1cIildO1xuICB9XG5cbiAgaWYgKHR5cGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gbm9kZS5wcm9wZXJ0aWVzICYmIHR5cGVvZiBub2RlLnByb3BlcnRpZXMgPT09IFwib2JqZWN0XCIgPyBub2RlLnByb3BlcnRpZXMgOiB7fTtcbiAgICBjb25zdCByZXF1aXJlZCA9IEFycmF5LmlzQXJyYXkobm9kZS5yZXF1aXJlZCkgPyBub2RlLnJlcXVpcmVkIDogW107XG4gICAgY29uc3Qga2V5cyA9IG5ldyBTZXQoWy4uLnJlcXVpcmVkLCAuLi5PYmplY3Qua2V5cyhwcm9wZXJ0aWVzKV0pO1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuXG4gICAgaWYgKGtleXMuc2l6ZSA9PT0gMCkge1xuICAgICAgcmV0dXJuIGtleUhpbnQgPT09IFwibWV0YVwiID8geyBnZW5lcmF0ZWRfYXQ6IFwiMTk3MC0wMS0wMVQwMDowMDowMC4wMDBaXCIgfSA6IHt9O1xuICAgIH1cblxuICAgIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCBjaGlsZFNjaGVtYSA9IHByb3BlcnRpZXNba2V5XSB8fCB7fTtcbiAgICAgIHJlc3VsdFtrZXldID0gYnVpbGRGcm9tU2NoZW1hKGNoaWxkU2NoZW1hLCBrZXkpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHJldHVybiB7fTtcbn07XG5cbmNsYXNzIEZha2VMTE1Qcm92aWRlciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMubmFtZSA9IFwiZmFrZVwiO1xuICAgIHRoaXMuZml4dHVyZXNSb290ID0gb3B0aW9ucy5maXh0dXJlc1Jvb3QgfHwgcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIFwiZml4dHVyZXNcIiwgXCJhZ2VudHNcIik7XG4gIH1cblxuICBsb2FkRml4dHVyZURhdGEoYWdlbnRJZCkge1xuICAgIGNvbnN0IG91dHB1dFBhdGggPSByZXNvbHZlRml4dHVyZU91dHB1dFBhdGgoYWdlbnRJZCwgdGhpcy5maXh0dXJlc1Jvb3QpO1xuICAgIGlmICghb3V0cHV0UGF0aCB8fCAhZnMuZXhpc3RzU3luYyhvdXRwdXRQYXRoKSkgcmV0dXJuIG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKG91dHB1dFBhdGgsIFwidXRmOFwiKSk7XG4gICAgICBjb25zdCBsZWdhY3lEYXRhID0gcGFyc2VkICYmIHBhcnNlZC5kYXRhID8gcGFyc2VkLmRhdGEgOiBwYXJzZWQ7XG4gICAgICByZXR1cm4gc3RyaXBWb2xhdGlsZShjbG9uZUpzb24obGVnYWN5RGF0YSkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2VuZXJhdGVKc29uKHsgc2NoZW1hLCBtZXRhIH0gPSB7fSkge1xuICAgIGNvbnN0IGFnZW50SWQgPSBtZXRhICYmIHR5cGVvZiBtZXRhID09PSBcIm9iamVjdFwiID8gbWV0YS5hZ2VudF9pZCB8fCBtZXRhLmFnZW50SWQgOiBcIlwiO1xuICAgIGNvbnN0IGZpeHR1cmVEYXRhID0gYWdlbnRJZCA/IHRoaXMubG9hZEZpeHR1cmVEYXRhKGFnZW50SWQpIDogbnVsbDtcbiAgICBpZiAoZml4dHVyZURhdGEpIHtcbiAgICAgIHJldHVybiBmaXh0dXJlRGF0YTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVpbGRGcm9tU2NoZW1hKHNjaGVtYSB8fCB7fSwgXCJyb290XCIpO1xuICB9XG59XG5cbmNvbnN0IHNhbml0aXplU2NoZW1hTmFtZSA9ICh2YWx1ZSkgPT4ge1xuICBjb25zdCBub3JtYWxpemVkID0gU3RyaW5nKHZhbHVlIHx8IFwiYWdlbnRfb3V0cHV0XCIpXG4gICAgLnJlcGxhY2UoL1teYS16QS1aMC05X10vZywgXCJfXCIpXG4gICAgLnJlcGxhY2UoL18rL2csIFwiX1wiKVxuICAgIC5yZXBsYWNlKC9eXyt8XyskL2csIFwiXCIpO1xuICByZXR1cm4gbm9ybWFsaXplZCB8fCBcImFnZW50X291dHB1dFwiO1xufTtcblxuY29uc3Qgc3RyaXBDb2RlRmVuY2VzID0gKHZhbHVlKSA9PlxuICBTdHJpbmcodmFsdWUgfHwgXCJcIilcbiAgICAucmVwbGFjZSgvYGBganNvbi9naSwgXCJgYGBcIilcbiAgICAucmVwbGFjZSgvXmBgYC8sIFwiXCIpXG4gICAgLnJlcGxhY2UoL2BgYCQvLCBcIlwiKVxuICAgIC50cmltKCk7XG5cbmNvbnN0IHBhcnNlSnNvblN0cmluZyA9ICh2YWx1ZSkgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgZGlyZWN0ID0gdmFsdWUudHJpbSgpO1xuICBpZiAoIWRpcmVjdCkgcmV0dXJuIG51bGw7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZGlyZWN0KTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gY29udGludWVcbiAgfVxuICBjb25zdCBzdHJpcHBlZCA9IHN0cmlwQ29kZUZlbmNlcyhkaXJlY3QpO1xuICBpZiAoIXN0cmlwcGVkKSByZXR1cm4gbnVsbDtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShzdHJpcHBlZCk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG5jb25zdCBleHRyYWN0RXJyb3JNZXNzYWdlID0gKHBheWxvYWQpID0+IHtcbiAgaWYgKCFwYXlsb2FkIHx8IHR5cGVvZiBwYXlsb2FkICE9PSBcIm9iamVjdFwiKSByZXR1cm4gXCJcIjtcbiAgaWYgKHBheWxvYWQuZXJyb3IgJiYgdHlwZW9mIHBheWxvYWQuZXJyb3IgPT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gcGF5bG9hZC5lcnJvci5tZXNzYWdlIHx8IHBheWxvYWQuZXJyb3IuY29kZTtcbiAgICBpZiAobWVzc2FnZSkgcmV0dXJuIFN0cmluZyhtZXNzYWdlKTtcbiAgfVxuICByZXR1cm4gXCJcIjtcbn07XG5cbmNvbnN0IGdldE51bWVyaWNPcHRpb24gPSAodmFsdWUsIGZhbGxiYWNrKSA9PiB7XG4gIGNvbnN0IG51bWVyaWMgPSBOdW1iZXIodmFsdWUpO1xuICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG51bWVyaWMpID8gbnVtZXJpYyA6IGZhbGxiYWNrO1xufTtcblxuY2xhc3MgUmVhbExMTVByb3ZpZGVyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5uYW1lID0gXCJyZWFsXCI7XG4gICAgdGhpcy5hcGlLZXkgPSBvcHRpb25zLmFwaUtleSB8fCBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSB8fCBcIlwiO1xuICAgIHRoaXMuYmFzZVVybCA9IFN0cmluZyhcbiAgICAgIG9wdGlvbnMuYmFzZVVybCB8fCBwcm9jZXNzLmVudi5PUEVOQUlfQkFTRV9VUkwgfHwgXCJodHRwczovL2FwaS5vcGVuYWkuY29tL3YxXCJcbiAgICApLnJlcGxhY2UoL1xcLyskLywgXCJcIik7XG4gICAgdGhpcy5tb2RlbCA9IG9wdGlvbnMubW9kZWwgfHwgcHJvY2Vzcy5lbnYuT1BFTkFJX01PREVMIHx8IFwiZ3B0LTUtbWluaVwiO1xuICAgIHRoaXMudGltZW91dE1zID0gZ2V0TnVtZXJpY09wdGlvbihvcHRpb25zLnRpbWVvdXRNcyB8fCBwcm9jZXNzLmVudi5PUEVOQUlfVElNRU9VVF9NUywgNDUwMDApO1xuICAgIHRoaXMuZmV0Y2hJbXBsID0gb3B0aW9ucy5mZXRjaCB8fCBnbG9iYWxUaGlzLmZldGNoO1xuICB9XG5cbiAgYXN5bmMgcmVxdWVzdENoYXRDb21wbGV0aW9ucyhwYXlsb2FkKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmZldGNoSW1wbCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHbG9iYWwgZmV0Y2ggaXMgbm90IGF2YWlsYWJsZSBmb3IgUmVhbExMTVByb3ZpZGVyLlwiKTtcbiAgICB9XG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIHRoaXMudGltZW91dE1zKTtcbiAgICBsZXQgcmVzcG9uc2U7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaEltcGwoYCR7dGhpcy5iYXNlVXJsfS9jaGF0L2NvbXBsZXRpb25zYCwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYXBpS2V5fWBcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmIGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiXG4gICAgICAgICAgPyBgT3BlbkFJIHJlcXVlc3QgdGltZWQgb3V0IGFmdGVyICR7dGhpcy50aW1lb3V0TXN9bXNgXG4gICAgICAgICAgOiBgT3BlbkFJIHJlcXVlc3QgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJ1bmtub3duIGVycm9yXCJ9YDtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIH1cblxuICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VKc29uU3RyaW5nKHRleHQpIHx8IHt9O1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGFwaU1lc3NhZ2UgPSBleHRyYWN0RXJyb3JNZXNzYWdlKHBhcnNlZCk7XG4gICAgICBjb25zdCByZWFzb24gPSBhcGlNZXNzYWdlIHx8IHRleHQuc2xpY2UoMCwgMzAwKSB8fCBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c31gO1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYE9wZW5BSSByZXF1ZXN0IGZhaWxlZCAoJHtyZXNwb25zZS5zdGF0dXN9KTogJHtyZWFzb259YCk7XG4gICAgICBlcnJvci5zdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZDtcbiAgfVxuXG4gIGV4dHJhY3RNZXNzYWdlVGV4dChwYXlsb2FkKSB7XG4gICAgY29uc3QgY29udGVudCA9IHBheWxvYWQ/LmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudDtcbiAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHJldHVybiBjb250ZW50O1xuICAgIGlmIChBcnJheS5pc0FycmF5KGNvbnRlbnQpKSB7XG4gICAgICByZXR1cm4gY29udGVudFxuICAgICAgICAubWFwKChwYXJ0KSA9PiB7XG4gICAgICAgICAgaWYgKCFwYXJ0IHx8IHR5cGVvZiBwYXJ0ICE9PSBcIm9iamVjdFwiKSByZXR1cm4gXCJcIjtcbiAgICAgICAgICBpZiAodHlwZW9mIHBhcnQudGV4dCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHBhcnQudGV4dDtcbiAgICAgICAgICBpZiAocGFydC50ZXh0ICYmIHR5cGVvZiBwYXJ0LnRleHQgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHBhcnQudGV4dC52YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnQudGV4dC52YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiBwYXJ0LmNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHJldHVybiBwYXJ0LmNvbnRlbnQ7XG4gICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKFwiXCIpXG4gICAgICAgIC50cmltKCk7XG4gICAgfVxuICAgIHJldHVybiBcIlwiO1xuICB9XG5cbiAgYnVpbGRNZXNzYWdlcyhzeXN0ZW0sIHByb21wdCwgc2NoZW1hKSB7XG4gICAgY29uc3QgYmFzZVN5c3RlbSA9XG4gICAgICB0eXBlb2Ygc3lzdGVtID09PSBcInN0cmluZ1wiICYmIHN5c3RlbS50cmltKClcbiAgICAgICAgPyBzeXN0ZW0udHJpbSgpXG4gICAgICAgIDogXCJZb3UgYXJlIGEgc3RyaWN0IEpTT04gYXNzaXN0YW50LlwiO1xuICAgIGNvbnN0IHNjaGVtYUhpbnQgPVxuICAgICAgc2NoZW1hICYmIHR5cGVvZiBzY2hlbWEgPT09IFwib2JqZWN0XCIgJiYgT2JqZWN0LmtleXMoc2NoZW1hKS5sZW5ndGhcbiAgICAgICAgPyBgUmV0dXJuIG9ubHkgSlNPTiB0aGF0IG1hdGNoZXMgdGhpcyBzY2hlbWE6XFxuJHtKU09OLnN0cmluZ2lmeShzY2hlbWEpfWBcbiAgICAgICAgOiBcIlJldHVybiBvbmx5IHZhbGlkIEpTT04uXCI7XG4gICAgY29uc3QgdXNlclByb21wdCA9IHR5cGVvZiBwcm9tcHQgPT09IFwic3RyaW5nXCIgJiYgcHJvbXB0LnRyaW0oKSA/IHByb21wdC50cmltKCkgOiBcInt9XCI7XG4gICAgcmV0dXJuIFtcbiAgICAgIHsgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudDogYCR7YmFzZVN5c3RlbX1cXG5cXG4ke3NjaGVtYUhpbnR9YCB9LFxuICAgICAgeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogdXNlclByb21wdCB9XG4gICAgXTtcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlSnNvbih7IHN5c3RlbSwgcHJvbXB0LCBzY2hlbWEsIHRlbXBlcmF0dXJlLCBtYXhUb2tlbnMsIG1ldGEgfSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmFwaUtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT1BFTkFJX0FQSV9LRVkgaXMgcmVxdWlyZWQgd2hlbiBMTE1fUFJPVklERVI9cmVhbC5cIik7XG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdGVkTW9kZWwgPVxuICAgICAgbWV0YSAmJiB0eXBlb2YgbWV0YSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbWV0YS5tb2RlbCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICA/IG1ldGEubW9kZWwudHJpbSgpXG4gICAgICAgIDogXCJcIjtcbiAgICBjb25zdCBtb2RlbCA9IHJlcXVlc3RlZE1vZGVsIHx8IHRoaXMubW9kZWw7XG4gICAgY29uc3QgbWVzc2FnZXMgPSB0aGlzLmJ1aWxkTWVzc2FnZXMoc3lzdGVtLCBwcm9tcHQsIHNjaGVtYSk7XG4gICAgY29uc3QgY2FwcGVkVGVtcGVyYXR1cmUgPSBNYXRoLm1pbihNYXRoLm1heChnZXROdW1lcmljT3B0aW9uKHRlbXBlcmF0dXJlLCAwLjIpLCAwKSwgMS41KTtcbiAgICBjb25zdCB0b2tlbkxpbWl0ID0gTWF0aC5tYXgoMjAwLCBNYXRoLm1pbig2MDAwLCBnZXROdW1lcmljT3B0aW9uKG1heFRva2VucywgMTgwMCkpKTtcbiAgICBjb25zdCBoYXNTY2hlbWEgPSBCb29sZWFuKHNjaGVtYSAmJiB0eXBlb2Ygc2NoZW1hID09PSBcIm9iamVjdFwiICYmIE9iamVjdC5rZXlzKHNjaGVtYSkubGVuZ3RoKTtcbiAgICBjb25zdCBzY2hlbWFOYW1lID0gc2FuaXRpemVTY2hlbWFOYW1lKFxuICAgICAgbWV0YSAmJiB0eXBlb2YgbWV0YSA9PT0gXCJvYmplY3RcIiA/IG1ldGEuYWdlbnRfaWQgfHwgbWV0YS5hZ2VudElkIHx8IFwiYWdlbnRfb3V0cHV0XCIgOiBcImFnZW50X291dHB1dFwiXG4gICAgKTtcblxuICAgIGNvbnN0IHdpdGhTY2hlbWFQYXlsb2FkID0ge1xuICAgICAgbW9kZWwsXG4gICAgICBtZXNzYWdlcyxcbiAgICAgIHRlbXBlcmF0dXJlOiBjYXBwZWRUZW1wZXJhdHVyZSxcbiAgICAgIG1heF90b2tlbnM6IHRva2VuTGltaXQsXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IGhhc1NjaGVtYVxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHR5cGU6IFwianNvbl9zY2hlbWFcIixcbiAgICAgICAgICAgIGpzb25fc2NoZW1hOiB7IG5hbWU6IHNjaGVtYU5hbWUsIHN0cmljdDogdHJ1ZSwgc2NoZW1hIH1cbiAgICAgICAgICB9XG4gICAgICAgIDogeyB0eXBlOiBcImpzb25fb2JqZWN0XCIgfVxuICAgIH07XG5cbiAgICBsZXQgZmlyc3RSZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgIGZpcnN0UmVzdWx0ID0gYXdhaXQgdGhpcy5yZXF1ZXN0Q2hhdENvbXBsZXRpb25zKHdpdGhTY2hlbWFQYXlsb2FkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gU29tZSBtb2RlbHMvZW5kcG9pbnRzIG1heSByZWplY3QganNvbl9zY2hlbWE7IGZhbGxiYWNrIHRvIHBsYWluIGpzb25fb2JqZWN0LlxuICAgICAgY29uc3QgZmFsbGJhY2tQYXlsb2FkID0ge1xuICAgICAgICBtb2RlbCxcbiAgICAgICAgbWVzc2FnZXMsXG4gICAgICAgIHRlbXBlcmF0dXJlOiBjYXBwZWRUZW1wZXJhdHVyZSxcbiAgICAgICAgbWF4X3Rva2VuczogdG9rZW5MaW1pdCxcbiAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6IFwianNvbl9vYmplY3RcIiB9XG4gICAgICB9O1xuICAgICAgZmlyc3RSZXN1bHQgPSBhd2FpdCB0aGlzLnJlcXVlc3RDaGF0Q29tcGxldGlvbnMoZmFsbGJhY2tQYXlsb2FkKTtcbiAgICB9XG5cbiAgICBjb25zdCB0ZXh0ID0gdGhpcy5leHRyYWN0TWVzc2FnZVRleHQoZmlyc3RSZXN1bHQpO1xuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlSnNvblN0cmluZyh0ZXh0KTtcbiAgICBpZiAocGFyc2VkICYmIHR5cGVvZiBwYXJzZWQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiT3BlbkFJIHJldHVybmVkIG5vbi1KU09OIG91dHB1dCBmb3IgZ2VuZXJhdGVKc29uKCkuXCIpO1xuICB9XG59XG5cbmNvbnN0IGNyZWF0ZUxMTVByb3ZpZGVyID0gKHsgcHJvdmlkZXIsIGZpeHR1cmVzUm9vdCB9ID0ge30pID0+IHtcbiAgY29uc3QgbW9kZSA9IG5vcm1hbGl6ZVByb3ZpZGVyTmFtZShwcm92aWRlciB8fCBnZXRDb25maWd1cmVkUHJvdmlkZXJOYW1lKCkpO1xuICBpZiAobW9kZSA9PT0gXCJyZWFsXCIpIHJldHVybiBuZXcgUmVhbExMTVByb3ZpZGVyKCk7XG4gIHJldHVybiBuZXcgRmFrZUxMTVByb3ZpZGVyKHsgZml4dHVyZXNSb290IH0pO1xufTtcblxubGV0IHNpbmdsZXRvbiA9IG51bGw7XG5cbmNvbnN0IGdldExMTVByb3ZpZGVyID0gKG9wdGlvbnMgPSB7fSkgPT4ge1xuICBpZiAob3B0aW9ucy5mb3JjZU5ldykgcmV0dXJuIGNyZWF0ZUxMTVByb3ZpZGVyKG9wdGlvbnMpO1xuICBpZiAoIXNpbmdsZXRvbikgc2luZ2xldG9uID0gY3JlYXRlTExNUHJvdmlkZXIob3B0aW9ucyk7XG4gIHJldHVybiBzaW5nbGV0b247XG59O1xuXG5jb25zdCBpc0Zha2VMTE1Qcm92aWRlciA9IChwcm92aWRlcikgPT4ge1xuICBjb25zdCBuYW1lID0gcHJvdmlkZXIgJiYgdHlwZW9mIHByb3ZpZGVyID09PSBcIm9iamVjdFwiID8gcHJvdmlkZXIubmFtZSA6IFwiXCI7XG4gIHJldHVybiBub3JtYWxpemVQcm92aWRlck5hbWUobmFtZSkgPT09IFwiZmFrZVwiO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEZha2VMTE1Qcm92aWRlcixcbiAgUmVhbExMTVByb3ZpZGVyLFxuICBidWlsZEZyb21TY2hlbWEsXG4gIGNhbm9uaWNhbEFnZW50SWQsXG4gIGNyZWF0ZUxMTVByb3ZpZGVyLFxuICBnZXRDb25maWd1cmVkUHJvdmlkZXJOYW1lLFxuICBnZXRMTE1Qcm92aWRlcixcbiAgaGFzUmVhbFByb3ZpZGVyQ3JlZGVudGlhbHMsXG4gIGhhc0ZpeHR1cmVGb3JBZ2VudCxcbiAgaXNGYWtlTExNUHJvdmlkZXIsXG4gIHJlc29sdmVGaXh0dXJlT3V0cHV0UGF0aCxcbiAgc3RyaXBWb2xhdGlsZVxufTtcbiJdLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwYXRoIiwiREVGQVVMVF9QUk9WSURFUiIsIm5vcm1hbGl6ZVByb3ZpZGVyTmFtZSIsInZhbHVlIiwibm9ybWFsaXplZCIsIlN0cmluZyIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsImdldENvbmZpZ3VyZWRQcm92aWRlck5hbWUiLCJwcm9jZXNzIiwiZW52IiwiTExNX1BST1ZJREVSIiwiaGFzUmVhbFByb3ZpZGVyQ3JlZGVudGlhbHMiLCJCb29sZWFuIiwiT1BFTkFJX0FQSV9LRVkiLCJBR0VOVF9JRF9BTElBU0VTIiwicGxhdG9uIiwiYW5hdG9seSIsIm1heGltIiwiY2Fub25pY2FsQWdlbnRJZCIsImFnZW50SWQiLCJyZXNvbHZlRml4dHVyZU91dHB1dFBhdGgiLCJmaXh0dXJlc1Jvb3QiLCJjYW5vbmljYWwiLCJyb290Iiwiam9pbiIsImN3ZCIsImhhc0ZpeHR1cmVGb3JBZ2VudCIsIm91dHB1dFBhdGgiLCJleGlzdHNTeW5jIiwic3RyaXBWb2xhdGlsZSIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsIml0ZW0iLCJuZXh0IiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWwiLCJjbG9uZUpzb24iLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJwaWNrU2NoZW1hTm9kZSIsInNjaGVtYSIsIm9uZU9mIiwibGVuZ3RoIiwiYW55T2YiLCJhbGxPZiIsInJlZHVjZSIsImFjYyIsInNjaGVtYVR5cGUiLCJub2RlIiwiY29uc3QiLCJ1bmRlZmluZWQiLCJkZWZhdWx0IiwiZW51bSIsInR5cGUiLCJ2YWx1ZUZvckZvcm1hdCIsImZvcm1hdCIsImJ1aWxkRnJvbVNjaGVtYSIsImtleUhpbnQiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbmNsdWRlcyIsIk51bWJlciIsImlzRmluaXRlIiwibWluaW11bSIsIml0ZW1TY2hlbWEiLCJpdGVtcyIsInByb3BlcnRpZXMiLCJyZXF1aXJlZCIsImtleXMiLCJTZXQiLCJyZXN1bHQiLCJzaXplIiwiZ2VuZXJhdGVkX2F0IiwiY2hpbGRTY2hlbWEiLCJGYWtlTExNUHJvdmlkZXIiLCJvcHRpb25zIiwibmFtZSIsImxvYWRGaXh0dXJlRGF0YSIsInBhcnNlZCIsInJlYWRGaWxlU3luYyIsImxlZ2FjeURhdGEiLCJkYXRhIiwiZ2VuZXJhdGVKc29uIiwibWV0YSIsImFnZW50X2lkIiwiZml4dHVyZURhdGEiLCJzYW5pdGl6ZVNjaGVtYU5hbWUiLCJyZXBsYWNlIiwic3RyaXBDb2RlRmVuY2VzIiwicGFyc2VKc29uU3RyaW5nIiwiZGlyZWN0Iiwic3RyaXBwZWQiLCJleHRyYWN0RXJyb3JNZXNzYWdlIiwicGF5bG9hZCIsImVycm9yIiwibWVzc2FnZSIsImNvZGUiLCJnZXROdW1lcmljT3B0aW9uIiwiZmFsbGJhY2siLCJudW1lcmljIiwiUmVhbExMTVByb3ZpZGVyIiwiYXBpS2V5IiwiYmFzZVVybCIsIk9QRU5BSV9CQVNFX1VSTCIsIm1vZGVsIiwiT1BFTkFJX01PREVMIiwidGltZW91dE1zIiwiT1BFTkFJX1RJTUVPVVRfTVMiLCJmZXRjaEltcGwiLCJmZXRjaCIsImdsb2JhbFRoaXMiLCJyZXF1ZXN0Q2hhdENvbXBsZXRpb25zIiwiRXJyb3IiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwidGltZW91dCIsInNldFRpbWVvdXQiLCJhYm9ydCIsInJlc3BvbnNlIiwibWV0aG9kIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJib2R5Iiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0IiwidGV4dCIsIm9rIiwiYXBpTWVzc2FnZSIsInJlYXNvbiIsInNsaWNlIiwic3RhdHVzIiwiZXh0cmFjdE1lc3NhZ2VUZXh0IiwiY29udGVudCIsImNob2ljZXMiLCJwYXJ0IiwiYnVpbGRNZXNzYWdlcyIsInN5c3RlbSIsInByb21wdCIsImJhc2VTeXN0ZW0iLCJzY2hlbWFIaW50IiwidXNlclByb21wdCIsInJvbGUiLCJ0ZW1wZXJhdHVyZSIsIm1heFRva2VucyIsInJlcXVlc3RlZE1vZGVsIiwibWVzc2FnZXMiLCJjYXBwZWRUZW1wZXJhdHVyZSIsIk1hdGgiLCJtaW4iLCJtYXgiLCJ0b2tlbkxpbWl0IiwiaGFzU2NoZW1hIiwic2NoZW1hTmFtZSIsIndpdGhTY2hlbWFQYXlsb2FkIiwibWF4X3Rva2VucyIsInJlc3BvbnNlX2Zvcm1hdCIsImpzb25fc2NoZW1hIiwic3RyaWN0IiwiZmlyc3RSZXN1bHQiLCJmYWxsYmFja1BheWxvYWQiLCJjcmVhdGVMTE1Qcm92aWRlciIsInByb3ZpZGVyIiwibW9kZSIsInNpbmdsZXRvbiIsImdldExMTVByb3ZpZGVyIiwiZm9yY2VOZXciLCJpc0Zha2VMTE1Qcm92aWRlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/llm/provider.js\n");

/***/ }),

/***/ "(rsc)/./utils/agentEnvelope.js":
/*!********************************!*\
  !*** ./utils/agentEnvelope.js ***!
  \********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { randomUUID } = __webpack_require__(/*! crypto */ \"crypto\");\nconst { getAgentSchema } = __webpack_require__(/*! ./agentSchemas */ \"(rsc)/./utils/agentSchemas.js\");\nconst { validateAgentResponse } = __webpack_require__(/*! ./validateAgentResponse */ \"(rsc)/./utils/validateAgentResponse.js\");\nconst { buildHandoff } = __webpack_require__(/*! ./handoff */ \"(rsc)/./utils/handoff.js\");\nconst { getConfiguredProviderName, hasRealProviderCredentials } = __webpack_require__(/*! ../lib/llm/provider.js */ \"(rsc)/./lib/llm/provider.js\");\nconst makeRunId = ()=>{\n    if (typeof randomUUID === \"function\") {\n        return randomUUID();\n    }\n    const rand = Math.random().toString(36).slice(2, 8);\n    return `run_${Date.now()}_${rand}`;\n};\nconst deriveQualityChecks = (legacyMeta = {})=>{\n    const legacy = legacyMeta && legacyMeta.quality_checks ? legacyMeta.quality_checks : {};\n    const providerName = getConfiguredProviderName();\n    const withinLimits = typeof legacy.within_max_words === \"boolean\" ? legacy.within_max_words : typeof legacy.within_limits === \"boolean\" ? legacy.within_limits : true;\n    const noFabrication = typeof legacy.no_fabrication === \"boolean\" ? legacy.no_fabrication : typeof legacy.no_gray_scraping === \"boolean\" ? legacy.no_gray_scraping : true;\n    const dedupeOk = typeof legacy.dedupe_ok === \"boolean\" ? legacy.dedupe_ok : true;\n    const groundingOk = typeof legacy.grounded_claims_ok === \"boolean\" ? legacy.grounded_claims_ok : typeof legacy.grounding_ok === \"boolean\" ? legacy.grounding_ok : true;\n    const llmConnectedByEnv = providerName === \"real\" && hasRealProviderCredentials();\n    return {\n        no_fabrication: noFabrication,\n        within_limits: withinLimits,\n        dedupe_ok: dedupeOk,\n        grounding_ok: groundingOk,\n        llm_connected: typeof legacy.llm_connected === \"boolean\" ? legacy.llm_connected : llmConnectedByEnv,\n        schema_valid: true\n    };\n};\nconst unwrapLegacy = (payload)=>{\n    if (payload && payload.data && payload.meta) return payload.data;\n    return payload;\n};\nconst sanitizeInputEcho = (input)=>{\n    if (!input || typeof input !== \"object\") return input;\n    const clone = Array.isArray(input) ? [\n        ...input\n    ] : {\n        ...input\n    };\n    if (Array.isArray(clone)) return clone;\n    Object.keys(clone).forEach((key)=>{\n        if (key.startsWith(\"__\")) {\n            delete clone[key];\n        }\n    });\n    return clone;\n};\nconst wrapAgentOutput = ({ agentId, inputEcho, mode, legacyOutput, webStatsOverride, traceId })=>{\n    const data = legacyOutput || {};\n    const legacyMeta = data && data.meta ? data.meta : {};\n    const schema = getAgentSchema(agentId);\n    const validation = validateAgentResponse(data, schema);\n    const qualityChecks = deriveQualityChecks(legacyMeta);\n    qualityChecks.schema_valid = validation.ok;\n    const limitations = Array.isArray(legacyMeta.limitations) ? legacyMeta.limitations : [];\n    const assumptions = Array.isArray(legacyMeta.assumptions) ? legacyMeta.assumptions : [];\n    const warnings = Array.isArray(legacyMeta.warnings) ? legacyMeta.warnings : [];\n    const budgetApplied = legacyMeta && typeof legacyMeta.budget_applied === \"object\" ? legacyMeta.budget_applied : null;\n    const knowledgeUsed = legacyMeta && legacyMeta.knowledge_used || inputEcho && inputEcho.__knowledge_used || {\n        workspace_items: 0,\n        agent_items: 0,\n        top_ids: []\n    };\n    const web_stats = webStatsOverride || (legacyMeta && legacyMeta.web_stats ? legacyMeta.web_stats : null);\n    const handoff = buildHandoff(agentId, data);\n    const envelopeMeta = {\n        agent_id: agentId,\n        generated_at: new Date().toISOString(),\n        run_id: makeRunId(),\n        mode: mode || \"\",\n        input_echo: sanitizeInputEcho(inputEcho) || {},\n        quality_checks: qualityChecks,\n        limitations,\n        assumptions,\n        handoff,\n        web_stats,\n        knowledge_used: knowledgeUsed\n    };\n    if (warnings.length) {\n        envelopeMeta.warnings = warnings;\n    }\n    if (budgetApplied) {\n        envelopeMeta.budget_applied = budgetApplied;\n    }\n    const hasWebStats = web_stats && typeof web_stats === \"object\";\n    const trace_id = traceId || (hasWebStats ? envelopeMeta.run_id : undefined);\n    if (trace_id) {\n        envelopeMeta.trace_id = trace_id;\n    }\n    return {\n        data,\n        meta: envelopeMeta,\n        validation\n    };\n};\nmodule.exports = {\n    wrapAgentOutput,\n    unwrapLegacy\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUEsSUFBSUgsU0FBU2lCLE1BQU0sRUFBRTtRQUNuQk4sYUFBYVgsUUFBUSxHQUFHQTtJQUMxQjtJQUNBLElBQUlDLGVBQWU7UUFDakJVLGFBQWFULGNBQWMsR0FBR0Q7SUFDaEM7SUFFQSxNQUFNaUIsY0FBY1QsYUFBYSxPQUFPQSxjQUFjO0lBQ3RELE1BQU1VLFdBQVcxQixXQUFZeUIsQ0FBQUEsY0FBY1AsYUFBYUksTUFBTSxHQUFHSyxTQUFRO0lBQ3pFLElBQUlELFVBQVU7UUFDWlIsYUFBYVEsUUFBUSxHQUFHQTtJQUMxQjtJQUVBLE9BQU87UUFBRTVDO1FBQU1DLE1BQU1tQztRQUFjaEI7SUFBVztBQUNoRDtBQUVBMEIsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZuQztJQUNBZDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvYWJ1emFkYS9EZXNrdG9wL2FnZW50T1MvdXRpbHMvYWdlbnRFbnZlbG9wZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHJhbmRvbVVVSUQgfSA9IHJlcXVpcmUoXCJjcnlwdG9cIik7XG5jb25zdCB7IGdldEFnZW50U2NoZW1hIH0gPSByZXF1aXJlKFwiLi9hZ2VudFNjaGVtYXNcIik7XG5jb25zdCB7IHZhbGlkYXRlQWdlbnRSZXNwb25zZSB9ID0gcmVxdWlyZShcIi4vdmFsaWRhdGVBZ2VudFJlc3BvbnNlXCIpO1xuY29uc3QgeyBidWlsZEhhbmRvZmYgfSA9IHJlcXVpcmUoXCIuL2hhbmRvZmZcIik7XG5jb25zdCB7XG4gIGdldENvbmZpZ3VyZWRQcm92aWRlck5hbWUsXG4gIGhhc1JlYWxQcm92aWRlckNyZWRlbnRpYWxzXG59ID0gcmVxdWlyZShcIi4uL2xpYi9sbG0vcHJvdmlkZXIuanNcIik7XG5cbmNvbnN0IG1ha2VSdW5JZCA9ICgpID0+IHtcbiAgaWYgKHR5cGVvZiByYW5kb21VVUlEID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gcmFuZG9tVVVJRCgpO1xuICB9XG4gIGNvbnN0IHJhbmQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLCA4KTtcbiAgcmV0dXJuIGBydW5fJHtEYXRlLm5vdygpfV8ke3JhbmR9YDtcbn07XG5cbmNvbnN0IGRlcml2ZVF1YWxpdHlDaGVja3MgPSAobGVnYWN5TWV0YSA9IHt9KSA9PiB7XG4gIGNvbnN0IGxlZ2FjeSA9IGxlZ2FjeU1ldGEgJiYgbGVnYWN5TWV0YS5xdWFsaXR5X2NoZWNrcyA/IGxlZ2FjeU1ldGEucXVhbGl0eV9jaGVja3MgOiB7fTtcbiAgY29uc3QgcHJvdmlkZXJOYW1lID0gZ2V0Q29uZmlndXJlZFByb3ZpZGVyTmFtZSgpO1xuICBjb25zdCB3aXRoaW5MaW1pdHMgPVxuICAgIHR5cGVvZiBsZWdhY3kud2l0aGluX21heF93b3JkcyA9PT0gXCJib29sZWFuXCJcbiAgICAgID8gbGVnYWN5LndpdGhpbl9tYXhfd29yZHNcbiAgICAgIDogdHlwZW9mIGxlZ2FjeS53aXRoaW5fbGltaXRzID09PSBcImJvb2xlYW5cIlxuICAgICAgICA/IGxlZ2FjeS53aXRoaW5fbGltaXRzXG4gICAgICAgIDogdHJ1ZTtcbiAgY29uc3Qgbm9GYWJyaWNhdGlvbiA9XG4gICAgdHlwZW9mIGxlZ2FjeS5ub19mYWJyaWNhdGlvbiA9PT0gXCJib29sZWFuXCJcbiAgICAgID8gbGVnYWN5Lm5vX2ZhYnJpY2F0aW9uXG4gICAgICA6IHR5cGVvZiBsZWdhY3kubm9fZ3JheV9zY3JhcGluZyA9PT0gXCJib29sZWFuXCJcbiAgICAgICAgPyBsZWdhY3kubm9fZ3JheV9zY3JhcGluZ1xuICAgICAgICA6IHRydWU7XG4gIGNvbnN0IGRlZHVwZU9rID0gdHlwZW9mIGxlZ2FjeS5kZWR1cGVfb2sgPT09IFwiYm9vbGVhblwiID8gbGVnYWN5LmRlZHVwZV9vayA6IHRydWU7XG4gIGNvbnN0IGdyb3VuZGluZ09rID1cbiAgICB0eXBlb2YgbGVnYWN5Lmdyb3VuZGVkX2NsYWltc19vayA9PT0gXCJib29sZWFuXCJcbiAgICAgID8gbGVnYWN5Lmdyb3VuZGVkX2NsYWltc19va1xuICAgICAgOiB0eXBlb2YgbGVnYWN5Lmdyb3VuZGluZ19vayA9PT0gXCJib29sZWFuXCJcbiAgICAgICAgPyBsZWdhY3kuZ3JvdW5kaW5nX29rXG4gICAgICAgIDogdHJ1ZTtcbiAgY29uc3QgbGxtQ29ubmVjdGVkQnlFbnYgPSBwcm92aWRlck5hbWUgPT09IFwicmVhbFwiICYmIGhhc1JlYWxQcm92aWRlckNyZWRlbnRpYWxzKCk7XG4gIHJldHVybiB7XG4gICAgbm9fZmFicmljYXRpb246IG5vRmFicmljYXRpb24sXG4gICAgd2l0aGluX2xpbWl0czogd2l0aGluTGltaXRzLFxuICAgIGRlZHVwZV9vazogZGVkdXBlT2ssXG4gICAgZ3JvdW5kaW5nX29rOiBncm91bmRpbmdPayxcbiAgICBsbG1fY29ubmVjdGVkOlxuICAgICAgdHlwZW9mIGxlZ2FjeS5sbG1fY29ubmVjdGVkID09PSBcImJvb2xlYW5cIlxuICAgICAgICA/IGxlZ2FjeS5sbG1fY29ubmVjdGVkXG4gICAgICAgIDogbGxtQ29ubmVjdGVkQnlFbnYsXG4gICAgc2NoZW1hX3ZhbGlkOiB0cnVlXG4gIH07XG59O1xuXG5jb25zdCB1bndyYXBMZWdhY3kgPSAocGF5bG9hZCkgPT4ge1xuICBpZiAocGF5bG9hZCAmJiBwYXlsb2FkLmRhdGEgJiYgcGF5bG9hZC5tZXRhKSByZXR1cm4gcGF5bG9hZC5kYXRhO1xuICByZXR1cm4gcGF5bG9hZDtcbn07XG5cbmNvbnN0IHNhbml0aXplSW5wdXRFY2hvID0gKGlucHV0KSA9PiB7XG4gIGlmICghaW5wdXQgfHwgdHlwZW9mIGlucHV0ICE9PSBcIm9iamVjdFwiKSByZXR1cm4gaW5wdXQ7XG4gIGNvbnN0IGNsb25lID0gQXJyYXkuaXNBcnJheShpbnB1dCkgPyBbLi4uaW5wdXRdIDogeyAuLi5pbnB1dCB9O1xuICBpZiAoQXJyYXkuaXNBcnJheShjbG9uZSkpIHJldHVybiBjbG9uZTtcbiAgT2JqZWN0LmtleXMoY2xvbmUpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmIChrZXkuc3RhcnRzV2l0aChcIl9fXCIpKSB7XG4gICAgICBkZWxldGUgY2xvbmVba2V5XTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gY2xvbmU7XG59O1xuXG5jb25zdCB3cmFwQWdlbnRPdXRwdXQgPSAoe1xuICBhZ2VudElkLFxuICBpbnB1dEVjaG8sXG4gIG1vZGUsXG4gIGxlZ2FjeU91dHB1dCxcbiAgd2ViU3RhdHNPdmVycmlkZSxcbiAgdHJhY2VJZFxufSkgPT4ge1xuICBjb25zdCBkYXRhID0gbGVnYWN5T3V0cHV0IHx8IHt9O1xuICBjb25zdCBsZWdhY3lNZXRhID0gZGF0YSAmJiBkYXRhLm1ldGEgPyBkYXRhLm1ldGEgOiB7fTtcbiAgY29uc3Qgc2NoZW1hID0gZ2V0QWdlbnRTY2hlbWEoYWdlbnRJZCk7XG4gIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZUFnZW50UmVzcG9uc2UoZGF0YSwgc2NoZW1hKTtcblxuICBjb25zdCBxdWFsaXR5Q2hlY2tzID0gZGVyaXZlUXVhbGl0eUNoZWNrcyhsZWdhY3lNZXRhKTtcbiAgcXVhbGl0eUNoZWNrcy5zY2hlbWFfdmFsaWQgPSB2YWxpZGF0aW9uLm9rO1xuXG4gIGNvbnN0IGxpbWl0YXRpb25zID0gQXJyYXkuaXNBcnJheShsZWdhY3lNZXRhLmxpbWl0YXRpb25zKSA/IGxlZ2FjeU1ldGEubGltaXRhdGlvbnMgOiBbXTtcbiAgY29uc3QgYXNzdW1wdGlvbnMgPSBBcnJheS5pc0FycmF5KGxlZ2FjeU1ldGEuYXNzdW1wdGlvbnMpID8gbGVnYWN5TWV0YS5hc3N1bXB0aW9ucyA6IFtdO1xuICBjb25zdCB3YXJuaW5ncyA9IEFycmF5LmlzQXJyYXkobGVnYWN5TWV0YS53YXJuaW5ncykgPyBsZWdhY3lNZXRhLndhcm5pbmdzIDogW107XG4gIGNvbnN0IGJ1ZGdldEFwcGxpZWQgPVxuICAgIGxlZ2FjeU1ldGEgJiYgdHlwZW9mIGxlZ2FjeU1ldGEuYnVkZ2V0X2FwcGxpZWQgPT09IFwib2JqZWN0XCJcbiAgICAgID8gbGVnYWN5TWV0YS5idWRnZXRfYXBwbGllZFxuICAgICAgOiBudWxsO1xuICBjb25zdCBrbm93bGVkZ2VVc2VkID1cbiAgICAobGVnYWN5TWV0YSAmJiBsZWdhY3lNZXRhLmtub3dsZWRnZV91c2VkKSB8fFxuICAgIChpbnB1dEVjaG8gJiYgaW5wdXRFY2hvLl9fa25vd2xlZGdlX3VzZWQpIHx8XG4gICAgeyB3b3Jrc3BhY2VfaXRlbXM6IDAsIGFnZW50X2l0ZW1zOiAwLCB0b3BfaWRzOiBbXSB9O1xuXG4gIGNvbnN0IHdlYl9zdGF0cyA9XG4gICAgd2ViU3RhdHNPdmVycmlkZSB8fCAobGVnYWN5TWV0YSAmJiBsZWdhY3lNZXRhLndlYl9zdGF0cyA/IGxlZ2FjeU1ldGEud2ViX3N0YXRzIDogbnVsbCk7XG5cbiAgY29uc3QgaGFuZG9mZiA9IGJ1aWxkSGFuZG9mZihhZ2VudElkLCBkYXRhKTtcblxuICBjb25zdCBlbnZlbG9wZU1ldGEgPSB7XG4gICAgYWdlbnRfaWQ6IGFnZW50SWQsXG4gICAgZ2VuZXJhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgcnVuX2lkOiBtYWtlUnVuSWQoKSxcbiAgICBtb2RlOiBtb2RlIHx8IFwiXCIsXG4gICAgaW5wdXRfZWNobzogc2FuaXRpemVJbnB1dEVjaG8oaW5wdXRFY2hvKSB8fCB7fSxcbiAgICBxdWFsaXR5X2NoZWNrczogcXVhbGl0eUNoZWNrcyxcbiAgICBsaW1pdGF0aW9ucyxcbiAgICBhc3N1bXB0aW9ucyxcbiAgICBoYW5kb2ZmLFxuICAgIHdlYl9zdGF0cyxcbiAgICBrbm93bGVkZ2VfdXNlZDoga25vd2xlZGdlVXNlZFxuICB9O1xuXG4gIGlmICh3YXJuaW5ncy5sZW5ndGgpIHtcbiAgICBlbnZlbG9wZU1ldGEud2FybmluZ3MgPSB3YXJuaW5ncztcbiAgfVxuICBpZiAoYnVkZ2V0QXBwbGllZCkge1xuICAgIGVudmVsb3BlTWV0YS5idWRnZXRfYXBwbGllZCA9IGJ1ZGdldEFwcGxpZWQ7XG4gIH1cblxuICBjb25zdCBoYXNXZWJTdGF0cyA9IHdlYl9zdGF0cyAmJiB0eXBlb2Ygd2ViX3N0YXRzID09PSBcIm9iamVjdFwiO1xuICBjb25zdCB0cmFjZV9pZCA9IHRyYWNlSWQgfHwgKGhhc1dlYlN0YXRzID8gZW52ZWxvcGVNZXRhLnJ1bl9pZCA6IHVuZGVmaW5lZCk7XG4gIGlmICh0cmFjZV9pZCkge1xuICAgIGVudmVsb3BlTWV0YS50cmFjZV9pZCA9IHRyYWNlX2lkO1xuICB9XG5cbiAgcmV0dXJuIHsgZGF0YSwgbWV0YTogZW52ZWxvcGVNZXRhLCB2YWxpZGF0aW9uIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgd3JhcEFnZW50T3V0cHV0LFxuICB1bndyYXBMZWdhY3lcbn07XG4iXSwibmFtZXMiOlsicmFuZG9tVVVJRCIsInJlcXVpcmUiLCJnZXRBZ2VudFNjaGVtYSIsInZhbGlkYXRlQWdlbnRSZXNwb25zZSIsImJ1aWxkSGFuZG9mZiIsImdldENvbmZpZ3VyZWRQcm92aWRlck5hbWUiLCJoYXNSZWFsUHJvdmlkZXJDcmVkZW50aWFscyIsIm1ha2VSdW5JZCIsInJhbmQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzbGljZSIsIkRhdGUiLCJub3ciLCJkZXJpdmVRdWFsaXR5Q2hlY2tzIiwibGVnYWN5TWV0YSIsImxlZ2FjeSIsInF1YWxpdHlfY2hlY2tzIiwicHJvdmlkZXJOYW1lIiwid2l0aGluTGltaXRzIiwid2l0aGluX21heF93b3JkcyIsIndpdGhpbl9saW1pdHMiLCJub0ZhYnJpY2F0aW9uIiwibm9fZmFicmljYXRpb24iLCJub19ncmF5X3NjcmFwaW5nIiwiZGVkdXBlT2siLCJkZWR1cGVfb2siLCJncm91bmRpbmdPayIsImdyb3VuZGVkX2NsYWltc19vayIsImdyb3VuZGluZ19vayIsImxsbUNvbm5lY3RlZEJ5RW52IiwibGxtX2Nvbm5lY3RlZCIsInNjaGVtYV92YWxpZCIsInVud3JhcExlZ2FjeSIsInBheWxvYWQiLCJkYXRhIiwibWV0YSIsInNhbml0aXplSW5wdXRFY2hvIiwiaW5wdXQiLCJjbG9uZSIsIkFycmF5IiwiaXNBcnJheSIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5Iiwic3RhcnRzV2l0aCIsIndyYXBBZ2VudE91dHB1dCIsImFnZW50SWQiLCJpbnB1dEVjaG8iLCJtb2RlIiwibGVnYWN5T3V0cHV0Iiwid2ViU3RhdHNPdmVycmlkZSIsInRyYWNlSWQiLCJzY2hlbWEiLCJ2YWxpZGF0aW9uIiwicXVhbGl0eUNoZWNrcyIsIm9rIiwibGltaXRhdGlvbnMiLCJhc3N1bXB0aW9ucyIsIndhcm5pbmdzIiwiYnVkZ2V0QXBwbGllZCIsImJ1ZGdldF9hcHBsaWVkIiwia25vd2xlZGdlVXNlZCIsImtub3dsZWRnZV91c2VkIiwiX19rbm93bGVkZ2VfdXNlZCIsIndvcmtzcGFjZV9pdGVtcyIsImFnZW50X2l0ZW1zIiwidG9wX2lkcyIsIndlYl9zdGF0cyIsImhhbmRvZmYiLCJlbnZlbG9wZU1ldGEiLCJhZ2VudF9pZCIsImdlbmVyYXRlZF9hdCIsInRvSVNPU3RyaW5nIiwicnVuX2lkIiwiaW5wdXRfZWNobyIsImxlbmd0aCIsImhhc1dlYlN0YXRzIiwidHJhY2VfaWQiLCJ1bmRlZmluZWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./utils/agentEnvelope.js\n");

/***/ }),

/***/ "(rsc)/./utils/agentSchemas.js":
/*!*******************************!*\
  !*** ./utils/agentSchemas.js ***!
  \*******************************/
/***/ ((module) => {

eval("\nconst platonSchema = {\n    required: {\n        segments: \"array\",\n        company_candidates: \"array\",\n        meta: \"object\"\n    }\n};\nconst agentSchemas = {\n    \"platon-prospect-research-ru\": platonSchema,\n    platon: platonSchema,\n    \"anatoly-account-research-ru\": {\n        required: {\n            account_card: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"timofey-competitor-analysis-ru\": {\n        required: {\n            competitors: \"array\",\n            comparison_table: \"array\",\n            win_angles: \"array\",\n            agentos_positioning: \"object\",\n            offers: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"maxim-local-leads-ru\": {\n        required: {\n            leads: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"fedor-b2b-leads-ru\": {\n        required: {\n            leads: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"artem-hot-leads-ru\": {\n        required: {\n            hot_leads: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"leonid-outreach-dm-ru\": {\n        required: {\n            dm_pack: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"emelyan-cold-email-ru\": {\n        required: {\n            email_sequences: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"boris-bdr-operator-ru\": {\n        required: {\n            bdr_table: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"pavel-reels-analysis-ru\": {\n        required: {\n            analysis: \"object\",\n            script_skeleton: \"object\",\n            improvements: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"trofim-shorts-analogs-ru\": {\n        required: {\n            formats: \"array\",\n            recommendations: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"irina-content-ideation-ru\": {\n        required: {\n            pillars: \"array\",\n            topics: \"array\",\n            cta_bank: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"hariton-viral-hooks-ru\": {\n        required: {\n            hooks: \"array\",\n            posts: \"array\",\n            scripts: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"kostya-image-generation-ru\": {\n        required: {\n            concepts: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"seva-content-repurposing-ru\": {\n        required: {\n            pack: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"mitya-workflow-diagram-ru\": {\n        required: {\n            diagram: \"object\",\n            landing_text: \"object\",\n            deck_script: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"board-ceo-ru\": {\n        required: {\n            review: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"board-cto-ru\": {\n        required: {\n            review: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"board-cfo-ru\": {\n        required: {\n            review: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"board-chair-ru\": {\n        required: {\n            review: \"object\",\n            meta: \"object\"\n        }\n    }\n};\nconst getAgentSchema = (agentId)=>agentSchemas[agentId] || null;\nmodule.exports = {\n    agentSchemas,\n    getAgentSchema\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi91dGlscy9hZ2VudFNjaGVtYXMuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLGVBQWU7SUFDbkJDLFVBQVU7UUFBRUMsVUFBVTtRQUFTQyxvQkFBb0I7UUFBU0MsTUFBTTtJQUFTO0FBQzdFO0FBRUEsTUFBTUMsZUFBZTtJQUNuQiwrQkFBK0JMO0lBQy9CTSxRQUFRTjtJQUNSLCtCQUErQjtRQUM3QkMsVUFBVTtZQUFFTSxjQUFjO1lBQVVILE1BQU07UUFBUztJQUNyRDtJQUNBLGtDQUFrQztRQUNoQ0gsVUFBVTtZQUNSTyxhQUFhO1lBQ2JDLGtCQUFrQjtZQUNsQkMsWUFBWTtZQUNaQyxxQkFBcUI7WUFDckJDLFFBQVE7WUFDUlIsTUFBTTtRQUNSO0lBQ0Y7SUFDQSx3QkFBd0I7UUFDdEJILFVBQVU7WUFBRVksT0FBTztZQUFTVCxNQUFNO1FBQVM7SUFDN0M7SUFDQSxzQkFBc0I7UUFDcEJILFVBQVU7WUFBRVksT0FBTztZQUFTVCxNQUFNO1FBQVM7SUFDN0M7SUFDQSxzQkFBc0I7UUFDcEJILFVBQVU7WUFBRWEsV0FBVztZQUFTVixNQUFNO1FBQVM7SUFDakQ7SUFDQSx5QkFBeUI7UUFDdkJILFVBQVU7WUFBRWMsU0FBUztZQUFVWCxNQUFNO1FBQVM7SUFDaEQ7SUFDQSx5QkFBeUI7UUFDdkJILFVBQVU7WUFBRWUsaUJBQWlCO1lBQVNaLE1BQU07UUFBUztJQUN2RDtJQUNBLHlCQUF5QjtRQUN2QkgsVUFBVTtZQUFFZ0IsV0FBVztZQUFTYixNQUFNO1FBQVM7SUFDakQ7SUFDQSwyQkFBMkI7UUFDekJILFVBQVU7WUFBRWlCLFVBQVU7WUFBVUMsaUJBQWlCO1lBQVVDLGNBQWM7WUFBVWhCLE1BQU07UUFBUztJQUNwRztJQUNBLDRCQUE0QjtRQUMxQkgsVUFBVTtZQUFFb0IsU0FBUztZQUFTQyxpQkFBaUI7WUFBVWxCLE1BQU07UUFBUztJQUMxRTtJQUNBLDZCQUE2QjtRQUMzQkgsVUFBVTtZQUFFc0IsU0FBUztZQUFTQyxRQUFRO1lBQVNDLFVBQVU7WUFBVXJCLE1BQU07UUFBUztJQUNwRjtJQUNBLDBCQUEwQjtRQUN4QkgsVUFBVTtZQUFFeUIsT0FBTztZQUFTQyxPQUFPO1lBQVNDLFNBQVM7WUFBU3hCLE1BQU07UUFBUztJQUMvRTtJQUNBLDhCQUE4QjtRQUM1QkgsVUFBVTtZQUFFNEIsVUFBVTtZQUFTekIsTUFBTTtRQUFTO0lBQ2hEO0lBQ0EsK0JBQStCO1FBQzdCSCxVQUFVO1lBQUU2QixNQUFNO1lBQVUxQixNQUFNO1FBQVM7SUFDN0M7SUFDQSw2QkFBNkI7UUFDM0JILFVBQVU7WUFBRThCLFNBQVM7WUFBVUMsY0FBYztZQUFVQyxhQUFhO1lBQVU3QixNQUFNO1FBQVM7SUFDL0Y7SUFDQSxnQkFBZ0I7UUFDZEgsVUFBVTtZQUFFaUMsUUFBUTtZQUFVOUIsTUFBTTtRQUFTO0lBQy9DO0lBQ0EsZ0JBQWdCO1FBQ2RILFVBQVU7WUFBRWlDLFFBQVE7WUFBVTlCLE1BQU07UUFBUztJQUMvQztJQUNBLGdCQUFnQjtRQUNkSCxVQUFVO1lBQUVpQyxRQUFRO1lBQVU5QixNQUFNO1FBQVM7SUFDL0M7SUFDQSxrQkFBa0I7UUFDaEJILFVBQVU7WUFBRWlDLFFBQVE7WUFBVTlCLE1BQU07UUFBUztJQUMvQztBQUNGO0FBRUEsTUFBTStCLGlCQUFpQixDQUFDQyxVQUFZL0IsWUFBWSxDQUFDK0IsUUFBUSxJQUFJO0FBRTdEQyxPQUFPQyxPQUFPLEdBQUc7SUFBRWpDO0lBQWM4QjtBQUFlIiwic291cmNlcyI6WyIvVXNlcnMvYWJ1emFkYS9EZXNrdG9wL2FnZW50T1MvdXRpbHMvYWdlbnRTY2hlbWFzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBsYXRvblNjaGVtYSA9IHtcbiAgcmVxdWlyZWQ6IHsgc2VnbWVudHM6IFwiYXJyYXlcIiwgY29tcGFueV9jYW5kaWRhdGVzOiBcImFycmF5XCIsIG1ldGE6IFwib2JqZWN0XCIgfVxufTtcblxuY29uc3QgYWdlbnRTY2hlbWFzID0ge1xuICBcInBsYXRvbi1wcm9zcGVjdC1yZXNlYXJjaC1ydVwiOiBwbGF0b25TY2hlbWEsXG4gIHBsYXRvbjogcGxhdG9uU2NoZW1hLFxuICBcImFuYXRvbHktYWNjb3VudC1yZXNlYXJjaC1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgYWNjb3VudF9jYXJkOiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJ0aW1vZmV5LWNvbXBldGl0b3ItYW5hbHlzaXMtcnVcIjoge1xuICAgIHJlcXVpcmVkOiB7XG4gICAgICBjb21wZXRpdG9yczogXCJhcnJheVwiLFxuICAgICAgY29tcGFyaXNvbl90YWJsZTogXCJhcnJheVwiLFxuICAgICAgd2luX2FuZ2xlczogXCJhcnJheVwiLFxuICAgICAgYWdlbnRvc19wb3NpdGlvbmluZzogXCJvYmplY3RcIixcbiAgICAgIG9mZmVyczogXCJvYmplY3RcIixcbiAgICAgIG1ldGE6IFwib2JqZWN0XCJcbiAgICB9XG4gIH0sXG4gIFwibWF4aW0tbG9jYWwtbGVhZHMtcnVcIjoge1xuICAgIHJlcXVpcmVkOiB7IGxlYWRzOiBcImFycmF5XCIsIG1ldGE6IFwib2JqZWN0XCIgfVxuICB9LFxuICBcImZlZG9yLWIyYi1sZWFkcy1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgbGVhZHM6IFwiYXJyYXlcIiwgbWV0YTogXCJvYmplY3RcIiB9XG4gIH0sXG4gIFwiYXJ0ZW0taG90LWxlYWRzLXJ1XCI6IHtcbiAgICByZXF1aXJlZDogeyBob3RfbGVhZHM6IFwiYXJyYXlcIiwgbWV0YTogXCJvYmplY3RcIiB9XG4gIH0sXG4gIFwibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCI6IHtcbiAgICByZXF1aXJlZDogeyBkbV9wYWNrOiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJlbWVseWFuLWNvbGQtZW1haWwtcnVcIjoge1xuICAgIHJlcXVpcmVkOiB7IGVtYWlsX3NlcXVlbmNlczogXCJhcnJheVwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIjoge1xuICAgIHJlcXVpcmVkOiB7IGJkcl90YWJsZTogXCJhcnJheVwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJwYXZlbC1yZWVscy1hbmFseXNpcy1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgYW5hbHlzaXM6IFwib2JqZWN0XCIsIHNjcmlwdF9za2VsZXRvbjogXCJvYmplY3RcIiwgaW1wcm92ZW1lbnRzOiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJ0cm9maW0tc2hvcnRzLWFuYWxvZ3MtcnVcIjoge1xuICAgIHJlcXVpcmVkOiB7IGZvcm1hdHM6IFwiYXJyYXlcIiwgcmVjb21tZW5kYXRpb25zOiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJpcmluYS1jb250ZW50LWlkZWF0aW9uLXJ1XCI6IHtcbiAgICByZXF1aXJlZDogeyBwaWxsYXJzOiBcImFycmF5XCIsIHRvcGljczogXCJhcnJheVwiLCBjdGFfYmFuazogXCJvYmplY3RcIiwgbWV0YTogXCJvYmplY3RcIiB9XG4gIH0sXG4gIFwiaGFyaXRvbi12aXJhbC1ob29rcy1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgaG9va3M6IFwiYXJyYXlcIiwgcG9zdHM6IFwiYXJyYXlcIiwgc2NyaXB0czogXCJhcnJheVwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJrb3N0eWEtaW1hZ2UtZ2VuZXJhdGlvbi1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgY29uY2VwdHM6IFwiYXJyYXlcIiwgbWV0YTogXCJvYmplY3RcIiB9XG4gIH0sXG4gIFwic2V2YS1jb250ZW50LXJlcHVycG9zaW5nLXJ1XCI6IHtcbiAgICByZXF1aXJlZDogeyBwYWNrOiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJtaXR5YS13b3JrZmxvdy1kaWFncmFtLXJ1XCI6IHtcbiAgICByZXF1aXJlZDogeyBkaWFncmFtOiBcIm9iamVjdFwiLCBsYW5kaW5nX3RleHQ6IFwib2JqZWN0XCIsIGRlY2tfc2NyaXB0OiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJib2FyZC1jZW8tcnVcIjoge1xuICAgIHJlcXVpcmVkOiB7IHJldmlldzogXCJvYmplY3RcIiwgbWV0YTogXCJvYmplY3RcIiB9XG4gIH0sXG4gIFwiYm9hcmQtY3RvLXJ1XCI6IHtcbiAgICByZXF1aXJlZDogeyByZXZpZXc6IFwib2JqZWN0XCIsIG1ldGE6IFwib2JqZWN0XCIgfVxuICB9LFxuICBcImJvYXJkLWNmby1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgcmV2aWV3OiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJib2FyZC1jaGFpci1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgcmV2aWV3OiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfVxufTtcblxuY29uc3QgZ2V0QWdlbnRTY2hlbWEgPSAoYWdlbnRJZCkgPT4gYWdlbnRTY2hlbWFzW2FnZW50SWRdIHx8IG51bGw7XG5cbm1vZHVsZS5leHBvcnRzID0geyBhZ2VudFNjaGVtYXMsIGdldEFnZW50U2NoZW1hIH07XG4iXSwibmFtZXMiOlsicGxhdG9uU2NoZW1hIiwicmVxdWlyZWQiLCJzZWdtZW50cyIsImNvbXBhbnlfY2FuZGlkYXRlcyIsIm1ldGEiLCJhZ2VudFNjaGVtYXMiLCJwbGF0b24iLCJhY2NvdW50X2NhcmQiLCJjb21wZXRpdG9ycyIsImNvbXBhcmlzb25fdGFibGUiLCJ3aW5fYW5nbGVzIiwiYWdlbnRvc19wb3NpdGlvbmluZyIsIm9mZmVycyIsImxlYWRzIiwiaG90X2xlYWRzIiwiZG1fcGFjayIsImVtYWlsX3NlcXVlbmNlcyIsImJkcl90YWJsZSIsImFuYWx5c2lzIiwic2NyaXB0X3NrZWxldG9uIiwiaW1wcm92ZW1lbnRzIiwiZm9ybWF0cyIsInJlY29tbWVuZGF0aW9ucyIsInBpbGxhcnMiLCJ0b3BpY3MiLCJjdGFfYmFuayIsImhvb2tzIiwicG9zdHMiLCJzY3JpcHRzIiwiY29uY2VwdHMiLCJwYWNrIiwiZGlhZ3JhbSIsImxhbmRpbmdfdGV4dCIsImRlY2tfc2NyaXB0IiwicmV2aWV3IiwiZ2V0QWdlbnRTY2hlbWEiLCJhZ2VudElkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./utils/agentSchemas.js\n");

/***/ }),

/***/ "(rsc)/./utils/budget.js":
/*!*************************!*\
  !*** ./utils/budget.js ***!
  \*************************/
/***/ ((module) => {

eval("\nconst isFiniteNumber = (value)=>typeof value === \"number\" && Number.isFinite(value);\nconst getPath = (obj, path)=>{\n    if (!obj || !Array.isArray(path)) return undefined;\n    return path.reduce((acc, key)=>acc && typeof acc === \"object\" ? acc[key] : undefined, obj);\n};\nconst setPath = (obj, path, value)=>{\n    if (!obj || !Array.isArray(path)) return;\n    let cursor = obj;\n    for(let i = 0; i < path.length - 1; i += 1){\n        const key = path[i];\n        if (!cursor[key] || typeof cursor[key] !== \"object\") {\n            cursor[key] = {};\n        }\n        cursor = cursor[key];\n    }\n    cursor[path[path.length - 1]] = value;\n};\nconst clampValue = (current, maxValue)=>{\n    if (!isFiniteNumber(maxValue)) return current;\n    if (!isFiniteNumber(current)) return Math.round(maxValue);\n    return Math.min(current, maxValue);\n};\nconst applyBudget = (input, budget, options = {})=>{\n    const applied = {};\n    const warnings = new Set();\n    if (!budget || typeof budget !== \"object\") {\n        return {\n            budget_applied: null,\n            warnings: []\n        };\n    }\n    const { maxWebRequestsPath, maxItemsPaths = [], maxWordsPath } = options;\n    if (isFiniteNumber(budget.max_web_requests) && maxWebRequestsPath) {\n        const current = getPath(input, maxWebRequestsPath);\n        const clamped = clampValue(current, budget.max_web_requests);\n        if (isFiniteNumber(current) && clamped < current) warnings.add(\"budget_clamped\");\n        setPath(input, maxWebRequestsPath, Math.round(clamped));\n        applied.max_web_requests = Math.round(clamped);\n    }\n    if (isFiniteNumber(budget.max_items) && Array.isArray(maxItemsPaths) && maxItemsPaths.length) {\n        maxItemsPaths.forEach((path)=>{\n            const current = getPath(input, path);\n            const clamped = clampValue(current, budget.max_items);\n            if (isFiniteNumber(current) && clamped < current) warnings.add(\"budget_clamped\");\n            setPath(input, path, Math.round(clamped));\n        });\n        applied.max_items = Math.round(budget.max_items);\n    }\n    if (isFiniteNumber(budget.max_words) && maxWordsPath) {\n        const current = getPath(input, maxWordsPath);\n        const clamped = clampValue(current, budget.max_words);\n        if (isFiniteNumber(current) && clamped < current) warnings.add(\"budget_clamped\");\n        setPath(input, maxWordsPath, Math.round(clamped));\n        applied.max_words = Math.round(clamped);\n    }\n    return {\n        budget_applied: Object.keys(applied).length ? applied : null,\n        warnings: Array.from(warnings)\n    };\n};\nconst applyBudgetMeta = (meta, input)=>{\n    if (!meta || typeof meta !== \"object\" || !input || typeof input !== \"object\") return;\n    if (input.budget_applied) {\n        meta.budget_applied = input.budget_applied;\n    }\n    if (Array.isArray(input.budget_warnings) && input.budget_warnings.length) {\n        if (!Array.isArray(meta.warnings)) {\n            meta.warnings = [];\n        }\n        input.budget_warnings.forEach((warning)=>{\n            if (!meta.warnings.includes(warning)) meta.warnings.push(warning);\n        });\n    }\n};\nmodule.exports = {\n    applyBudget,\n    applyBudgetMeta\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVVkLFFBQVFvQixPQUFPUztRQUMvQixNQUFNRSxVQUFVbEIsV0FBV0MsU0FBU08sT0FBT2MsU0FBUztRQUNwRCxJQUFJdkMsZUFBZWtCLFlBQVlpQixVQUFVakIsU0FBU1UsU0FBU1EsR0FBRyxDQUFDO1FBQy9EdkIsUUFBUVcsT0FBT1MsY0FBY2IsS0FBS0MsS0FBSyxDQUFDYztRQUN4Q1IsUUFBUVksU0FBUyxHQUFHbkIsS0FBS0MsS0FBSyxDQUFDYztJQUNqQztJQUVBLE9BQU87UUFDTEwsZ0JBQWdCVSxPQUFPQyxJQUFJLENBQUNkLFNBQVNYLE1BQU0sR0FBR1csVUFBVTtRQUN4REMsVUFBVXJCLE1BQU1tQyxJQUFJLENBQUNkO0lBQ3ZCO0FBQ0Y7QUFFQSxNQUFNZSxrQkFBa0IsQ0FBQ0MsTUFBTXBCO0lBQzdCLElBQUksQ0FBQ29CLFFBQVEsT0FBT0EsU0FBUyxZQUFZLENBQUNwQixTQUFTLE9BQU9BLFVBQVUsVUFBVTtJQUM5RSxJQUFJQSxNQUFNTSxjQUFjLEVBQUU7UUFDeEJjLEtBQUtkLGNBQWMsR0FBR04sTUFBTU0sY0FBYztJQUM1QztJQUNBLElBQUl2QixNQUFNQyxPQUFPLENBQUNnQixNQUFNcUIsZUFBZSxLQUFLckIsTUFBTXFCLGVBQWUsQ0FBQzdCLE1BQU0sRUFBRTtRQUN4RSxJQUFJLENBQUNULE1BQU1DLE9BQU8sQ0FBQ29DLEtBQUtoQixRQUFRLEdBQUc7WUFDakNnQixLQUFLaEIsUUFBUSxHQUFHLEVBQUU7UUFDcEI7UUFDQUosTUFBTXFCLGVBQWUsQ0FBQ1AsT0FBTyxDQUFDLENBQUNRO1lBQzdCLElBQUksQ0FBQ0YsS0FBS2hCLFFBQVEsQ0FBQ21CLFFBQVEsQ0FBQ0QsVUFBVUYsS0FBS2hCLFFBQVEsQ0FBQ29CLElBQUksQ0FBQ0Y7UUFDM0Q7SUFDRjtBQUNGO0FBRUFHLE9BQU9DLE9BQU8sR0FBRztJQUFFM0I7SUFBYW9CO0FBQWdCIiwic291cmNlcyI6WyIvVXNlcnMvYWJ1emFkYS9EZXNrdG9wL2FnZW50T1MvdXRpbHMvYnVkZ2V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGlzRmluaXRlTnVtYmVyID0gKHZhbHVlKSA9PiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgTnVtYmVyLmlzRmluaXRlKHZhbHVlKTtcblxuY29uc3QgZ2V0UGF0aCA9IChvYmosIHBhdGgpID0+IHtcbiAgaWYgKCFvYmogfHwgIUFycmF5LmlzQXJyYXkocGF0aCkpIHJldHVybiB1bmRlZmluZWQ7XG4gIHJldHVybiBwYXRoLnJlZHVjZSgoYWNjLCBrZXkpID0+IChhY2MgJiYgdHlwZW9mIGFjYyA9PT0gXCJvYmplY3RcIiA/IGFjY1trZXldIDogdW5kZWZpbmVkKSwgb2JqKTtcbn07XG5cbmNvbnN0IHNldFBhdGggPSAob2JqLCBwYXRoLCB2YWx1ZSkgPT4ge1xuICBpZiAoIW9iaiB8fCAhQXJyYXkuaXNBcnJheShwYXRoKSkgcmV0dXJuO1xuICBsZXQgY3Vyc29yID0gb2JqO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoIC0gMTsgaSArPSAxKSB7XG4gICAgY29uc3Qga2V5ID0gcGF0aFtpXTtcbiAgICBpZiAoIWN1cnNvcltrZXldIHx8IHR5cGVvZiBjdXJzb3Jba2V5XSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgY3Vyc29yW2tleV0gPSB7fTtcbiAgICB9XG4gICAgY3Vyc29yID0gY3Vyc29yW2tleV07XG4gIH1cbiAgY3Vyc29yW3BhdGhbcGF0aC5sZW5ndGggLSAxXV0gPSB2YWx1ZTtcbn07XG5cbmNvbnN0IGNsYW1wVmFsdWUgPSAoY3VycmVudCwgbWF4VmFsdWUpID0+IHtcbiAgaWYgKCFpc0Zpbml0ZU51bWJlcihtYXhWYWx1ZSkpIHJldHVybiBjdXJyZW50O1xuICBpZiAoIWlzRmluaXRlTnVtYmVyKGN1cnJlbnQpKSByZXR1cm4gTWF0aC5yb3VuZChtYXhWYWx1ZSk7XG4gIHJldHVybiBNYXRoLm1pbihjdXJyZW50LCBtYXhWYWx1ZSk7XG59O1xuXG5jb25zdCBhcHBseUJ1ZGdldCA9IChpbnB1dCwgYnVkZ2V0LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgYXBwbGllZCA9IHt9O1xuICBjb25zdCB3YXJuaW5ncyA9IG5ldyBTZXQoKTtcbiAgaWYgKCFidWRnZXQgfHwgdHlwZW9mIGJ1ZGdldCAhPT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiB7IGJ1ZGdldF9hcHBsaWVkOiBudWxsLCB3YXJuaW5nczogW10gfTtcbiAgfVxuXG4gIGNvbnN0IHsgbWF4V2ViUmVxdWVzdHNQYXRoLCBtYXhJdGVtc1BhdGhzID0gW10sIG1heFdvcmRzUGF0aCB9ID0gb3B0aW9ucztcblxuICBpZiAoaXNGaW5pdGVOdW1iZXIoYnVkZ2V0Lm1heF93ZWJfcmVxdWVzdHMpICYmIG1heFdlYlJlcXVlc3RzUGF0aCkge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBnZXRQYXRoKGlucHV0LCBtYXhXZWJSZXF1ZXN0c1BhdGgpO1xuICAgIGNvbnN0IGNsYW1wZWQgPSBjbGFtcFZhbHVlKGN1cnJlbnQsIGJ1ZGdldC5tYXhfd2ViX3JlcXVlc3RzKTtcbiAgICBpZiAoaXNGaW5pdGVOdW1iZXIoY3VycmVudCkgJiYgY2xhbXBlZCA8IGN1cnJlbnQpIHdhcm5pbmdzLmFkZChcImJ1ZGdldF9jbGFtcGVkXCIpO1xuICAgIHNldFBhdGgoaW5wdXQsIG1heFdlYlJlcXVlc3RzUGF0aCwgTWF0aC5yb3VuZChjbGFtcGVkKSk7XG4gICAgYXBwbGllZC5tYXhfd2ViX3JlcXVlc3RzID0gTWF0aC5yb3VuZChjbGFtcGVkKTtcbiAgfVxuXG4gIGlmIChpc0Zpbml0ZU51bWJlcihidWRnZXQubWF4X2l0ZW1zKSAmJiBBcnJheS5pc0FycmF5KG1heEl0ZW1zUGF0aHMpICYmIG1heEl0ZW1zUGF0aHMubGVuZ3RoKSB7XG4gICAgbWF4SXRlbXNQYXRocy5mb3JFYWNoKChwYXRoKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gZ2V0UGF0aChpbnB1dCwgcGF0aCk7XG4gICAgICBjb25zdCBjbGFtcGVkID0gY2xhbXBWYWx1ZShjdXJyZW50LCBidWRnZXQubWF4X2l0ZW1zKTtcbiAgICAgIGlmIChpc0Zpbml0ZU51bWJlcihjdXJyZW50KSAmJiBjbGFtcGVkIDwgY3VycmVudCkgd2FybmluZ3MuYWRkKFwiYnVkZ2V0X2NsYW1wZWRcIik7XG4gICAgICBzZXRQYXRoKGlucHV0LCBwYXRoLCBNYXRoLnJvdW5kKGNsYW1wZWQpKTtcbiAgICB9KTtcbiAgICBhcHBsaWVkLm1heF9pdGVtcyA9IE1hdGgucm91bmQoYnVkZ2V0Lm1heF9pdGVtcyk7XG4gIH1cblxuICBpZiAoaXNGaW5pdGVOdW1iZXIoYnVkZ2V0Lm1heF93b3JkcykgJiYgbWF4V29yZHNQYXRoKSB7XG4gICAgY29uc3QgY3VycmVudCA9IGdldFBhdGgoaW5wdXQsIG1heFdvcmRzUGF0aCk7XG4gICAgY29uc3QgY2xhbXBlZCA9IGNsYW1wVmFsdWUoY3VycmVudCwgYnVkZ2V0Lm1heF93b3Jkcyk7XG4gICAgaWYgKGlzRmluaXRlTnVtYmVyKGN1cnJlbnQpICYmIGNsYW1wZWQgPCBjdXJyZW50KSB3YXJuaW5ncy5hZGQoXCJidWRnZXRfY2xhbXBlZFwiKTtcbiAgICBzZXRQYXRoKGlucHV0LCBtYXhXb3Jkc1BhdGgsIE1hdGgucm91bmQoY2xhbXBlZCkpO1xuICAgIGFwcGxpZWQubWF4X3dvcmRzID0gTWF0aC5yb3VuZChjbGFtcGVkKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYnVkZ2V0X2FwcGxpZWQ6IE9iamVjdC5rZXlzKGFwcGxpZWQpLmxlbmd0aCA/IGFwcGxpZWQgOiBudWxsLFxuICAgIHdhcm5pbmdzOiBBcnJheS5mcm9tKHdhcm5pbmdzKVxuICB9O1xufTtcblxuY29uc3QgYXBwbHlCdWRnZXRNZXRhID0gKG1ldGEsIGlucHV0KSA9PiB7XG4gIGlmICghbWV0YSB8fCB0eXBlb2YgbWV0YSAhPT0gXCJvYmplY3RcIiB8fCAhaW5wdXQgfHwgdHlwZW9mIGlucHV0ICE9PSBcIm9iamVjdFwiKSByZXR1cm47XG4gIGlmIChpbnB1dC5idWRnZXRfYXBwbGllZCkge1xuICAgIG1ldGEuYnVkZ2V0X2FwcGxpZWQgPSBpbnB1dC5idWRnZXRfYXBwbGllZDtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dC5idWRnZXRfd2FybmluZ3MpICYmIGlucHV0LmJ1ZGdldF93YXJuaW5ncy5sZW5ndGgpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkobWV0YS53YXJuaW5ncykpIHtcbiAgICAgIG1ldGEud2FybmluZ3MgPSBbXTtcbiAgICB9XG4gICAgaW5wdXQuYnVkZ2V0X3dhcm5pbmdzLmZvckVhY2goKHdhcm5pbmcpID0+IHtcbiAgICAgIGlmICghbWV0YS53YXJuaW5ncy5pbmNsdWRlcyh3YXJuaW5nKSkgbWV0YS53YXJuaW5ncy5wdXNoKHdhcm5pbmcpO1xuICAgIH0pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXBwbHlCdWRnZXQsIGFwcGx5QnVkZ2V0TWV0YSB9O1xuIl0sIm5hbWVzIjpbImlzRmluaXRlTnVtYmVyIiwidmFsdWUiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImdldFBhdGgiLCJvYmoiLCJwYXRoIiwiQXJyYXkiLCJpc0FycmF5IiwidW5kZWZpbmVkIiwicmVkdWNlIiwiYWNjIiwia2V5Iiwic2V0UGF0aCIsImN1cnNvciIsImkiLCJsZW5ndGgiLCJjbGFtcFZhbHVlIiwiY3VycmVudCIsIm1heFZhbHVlIiwiTWF0aCIsInJvdW5kIiwibWluIiwiYXBwbHlCdWRnZXQiLCJpbnB1dCIsImJ1ZGdldCIsIm9wdGlvbnMiLCJhcHBsaWVkIiwid2FybmluZ3MiLCJTZXQiLCJidWRnZXRfYXBwbGllZCIsIm1heFdlYlJlcXVlc3RzUGF0aCIsIm1heEl0ZW1zUGF0aHMiLCJtYXhXb3Jkc1BhdGgiLCJtYXhfd2ViX3JlcXVlc3RzIiwiY2xhbXBlZCIsImFkZCIsIm1heF9pdGVtcyIsImZvckVhY2giLCJtYXhfd29yZHMiLCJPYmplY3QiLCJrZXlzIiwiZnJvbSIsImFwcGx5QnVkZ2V0TWV0YSIsIm1ldGEiLCJidWRnZXRfd2FybmluZ3MiLCJ3YXJuaW5nIiwiaW5jbHVkZXMiLCJwdXNoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./utils/budget.js\n");

/***/ }),

/***/ "(rsc)/./utils/handoff.js":
/*!**************************!*\
  !*** ./utils/handoff.js ***!
  \**************************/
/***/ ((module) => {

eval("\nconst HANDOFF_VERSION = \"1.0\";\nconst COMPAT_BY_TYPE = {\n    leads_table: [\n        \"anatoly-account-research-ru\",\n        \"leonid-outreach-dm-ru\",\n        \"emelyan-cold-email-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    account_card: [\n        \"leonid-outreach-dm-ru\",\n        \"emelyan-cold-email-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    hot_leads: [\n        \"leonid-outreach-dm-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    messages_pack: [\n        \"boris-bdr-operator-ru\"\n    ],\n    bdr_queue: [],\n    board_review: [],\n    content_pack: []\n};\nconst RECOMMENDED_NEXT = {\n    \"platon-prospect-research-ru\": [\n        \"anatoly-account-research-ru\",\n        \"leonid-outreach-dm-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    platon: [\n        \"anatoly-account-research-ru\",\n        \"leonid-outreach-dm-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    \"maxim-local-leads-ru\": [\n        \"anatoly-account-research-ru\",\n        \"leonid-outreach-dm-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    \"fedor-b2b-leads-ru\": [\n        \"anatoly-account-research-ru\",\n        \"emelyan-cold-email-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    \"artem-hot-leads-ru\": [\n        \"anatoly-account-research-ru\",\n        \"leonid-outreach-dm-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    \"anatoly-account-research-ru\": [\n        \"leonid-outreach-dm-ru\",\n        \"emelyan-cold-email-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    \"timofey-competitor-analysis-ru\": [\n        \"platon-prospect-research-ru\",\n        \"anatoly-account-research-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    \"leonid-outreach-dm-ru\": [\n        \"boris-bdr-operator-ru\"\n    ],\n    \"emelyan-cold-email-ru\": [\n        \"boris-bdr-operator-ru\"\n    ],\n    \"boris-bdr-operator-ru\": [\n        \"leonid-outreach-dm-ru\",\n        \"emelyan-cold-email-ru\"\n    ],\n    \"pavel-reels-analysis-ru\": [\n        \"hariton-viral-hooks-ru\",\n        \"trofim-shorts-analogs-ru\"\n    ],\n    \"trofim-shorts-analogs-ru\": [\n        \"hariton-viral-hooks-ru\",\n        \"pavel-reels-analysis-ru\"\n    ],\n    \"irina-content-ideation-ru\": [\n        \"hariton-viral-hooks-ru\",\n        \"kostya-image-generation-ru\"\n    ],\n    \"hariton-viral-hooks-ru\": [\n        \"kostya-image-generation-ru\",\n        \"seva-content-repurposing-ru\"\n    ],\n    \"kostya-image-generation-ru\": [\n        \"hariton-viral-hooks-ru\",\n        \"irina-content-ideation-ru\"\n    ],\n    \"seva-content-repurposing-ru\": [\n        \"hariton-viral-hooks-ru\",\n        \"kostya-image-generation-ru\"\n    ],\n    \"mitya-workflow-diagram-ru\": [\n        \"kostya-image-generation-ru\",\n        \"irina-content-ideation-ru\"\n    ],\n    \"board-ceo-ru\": [\n        \"board-chair-ru\"\n    ],\n    \"board-cto-ru\": [\n        \"board-chair-ru\"\n    ],\n    \"board-cfo-ru\": [\n        \"board-chair-ru\"\n    ],\n    \"board-chair-ru\": []\n};\nconst normalizeLead = (lead)=>{\n    if (!lead || typeof lead !== \"object\") return null;\n    const leadName = lead.name || lead.company_name || lead.title || lead.name_placeholder || lead.lead_label || lead.link || lead.url || \"Lead\";\n    const contact = {\n        email: lead.email || (lead.public_contacts ? lead.public_contacts.email : undefined) || undefined,\n        phone: lead.phone || (lead.public_contacts ? lead.public_contacts.phone : undefined) || undefined,\n        website: lead.website || lead.domain || undefined,\n        url: lead.link || lead.url || lead.source_url || undefined\n    };\n    const source = lead.source || lead.channel || lead.source_type || \"\";\n    return {\n        lead_name: String(leadName),\n        dedupe_key: lead.dedupe_key || lead.dedupe_key_raw || \"\",\n        contact,\n        source,\n        proof_refs: lead.proof_refs || undefined\n    };\n};\nconst buildLeadsTableEntities = (data)=>{\n    const list = data && data.leads || data && data.company_candidates || data && data.hot_leads || [];\n    const leads = Array.isArray(list) ? list.map(normalizeLead).filter(Boolean) : [];\n    return {\n        leads\n    };\n};\nconst buildAccountCardEntities = (data)=>{\n    const card = data && data.account_card ? data.account_card : {};\n    const meta = data && data.meta ? data.meta : {};\n    return {\n        company_name: card.company_name || \"\",\n        discovered_channels: card.discovered_channels || {},\n        hooks: card.top_personalization_hooks || [],\n        pains: card.pain_hypotheses || [],\n        proof_items: Array.isArray(meta.proof_items) ? meta.proof_items : []\n    };\n};\nconst buildMessagesPackEntities = (data, channelOverride)=>{\n    if (data && data.dm_pack) {\n        return {\n            lead_label: data.dm_pack.lead_label || \"lead\",\n            channel: data.dm_pack.channel || channelOverride || \"dm\",\n            messages: data.dm_pack.messages || data.dm_pack.variants || []\n        };\n    }\n    if (data && data.email_sequences) {\n        return {\n            lead_label: \"lead\",\n            channel: channelOverride || \"email\",\n            email_sequences: data.email_sequences\n        };\n    }\n    return {\n        lead_label: \"lead\",\n        channel: channelOverride || \"\",\n        messages: []\n    };\n};\nconst buildContentPackEntities = (data)=>{\n    if (!data || typeof data !== \"object\") return {};\n    const entities = {\n        ...data\n    };\n    if (entities.meta) delete entities.meta;\n    return entities;\n};\nconst buildBoardReviewEntities = (data)=>{\n    const review = data && typeof data.review === \"object\" ? data.review : {};\n    return {\n        role: review.role || \"\",\n        decision: review.decision || review.stance || review.recommendation || review.feasibility || \"\",\n        summary: review.final_summary || review.verdict || review.unit_economics_view || \"\",\n        references: review.references || {}\n    };\n};\nconst buildHandoff = (agentId, data)=>{\n    const recommended_next_agents = RECOMMENDED_NEXT[agentId] || [\n        \"boris-bdr-operator-ru\"\n    ];\n    if (agentId === \"platon\" || agentId === \"platon-prospect-research-ru\" || agentId === \"maxim-local-leads-ru\" || agentId === \"fedor-b2b-leads-ru\") {\n        const type = \"leads_table\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: buildLeadsTableEntities(data),\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"artem-hot-leads-ru\") {\n        const type = \"hot_leads\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: buildLeadsTableEntities(data),\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"anatoly-account-research-ru\") {\n        const type = \"account_card\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: buildAccountCardEntities(data),\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"leonid-outreach-dm-ru\") {\n        const type = \"messages_pack\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: buildMessagesPackEntities(data, \"dm\"),\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"emelyan-cold-email-ru\") {\n        const type = \"messages_pack\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: buildMessagesPackEntities(data, \"email\"),\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"boris-bdr-operator-ru\") {\n        const type = \"bdr_queue\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: {\n                rows: Array.isArray(data.bdr_table) ? data.bdr_table : []\n            },\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"timofey-competitor-analysis-ru\") {\n        const type = \"content_pack\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: {\n                competitors: data.competitors || [],\n                comparison_table: data.comparison_table || [],\n                offers: data.offers || {},\n                win_angles: data.win_angles || [],\n                agentos_positioning: data.agentos_positioning || {}\n            },\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"board-ceo-ru\" || agentId === \"board-cto-ru\" || agentId === \"board-cfo-ru\" || agentId === \"board-chair-ru\") {\n        const type = \"board_review\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: buildBoardReviewEntities(data),\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    const type = \"content_pack\";\n    return {\n        type,\n        version: HANDOFF_VERSION,\n        entities: buildContentPackEntities(data),\n        recommended_next_agents,\n        compat: COMPAT_BY_TYPE[type] || []\n    };\n};\nconst getHandoffTypeForAgent = (agentId)=>{\n    if (agentId === \"platon\" || agentId === \"platon-prospect-research-ru\" || agentId === \"maxim-local-leads-ru\" || agentId === \"fedor-b2b-leads-ru\") {\n        return \"leads_table\";\n    }\n    if (agentId === \"artem-hot-leads-ru\") return \"hot_leads\";\n    if (agentId === \"anatoly-account-research-ru\") return \"account_card\";\n    if (agentId === \"leonid-outreach-dm-ru\") return \"messages_pack\";\n    if (agentId === \"emelyan-cold-email-ru\") return \"messages_pack\";\n    if (agentId === \"boris-bdr-operator-ru\") return \"bdr_queue\";\n    if (agentId === \"timofey-competitor-analysis-ru\") return \"content_pack\";\n    if (agentId === \"board-ceo-ru\" || agentId === \"board-cto-ru\" || agentId === \"board-cfo-ru\" || agentId === \"board-chair-ru\") {\n        return \"board_review\";\n    }\n    return \"content_pack\";\n};\nmodule.exports = {\n    buildHandoff,\n    HANDOFF_VERSION,\n    COMPAT_BY_TYPE,\n    getHandoffTypeForAgent\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dG9wL2FnZW50T1MvdXRpbHMvaGFuZG9mZi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBIQU5ET0ZGX1ZFUlNJT04gPSBcIjEuMFwiO1xuXG5jb25zdCBDT01QQVRfQllfVFlQRSA9IHtcbiAgbGVhZHNfdGFibGU6IFtcbiAgICBcImFuYXRvbHktYWNjb3VudC1yZXNlYXJjaC1ydVwiLFxuICAgIFwibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCIsXG4gICAgXCJlbWVseWFuLWNvbGQtZW1haWwtcnVcIixcbiAgICBcImJvcmlzLWJkci1vcGVyYXRvci1ydVwiXG4gIF0sXG4gIGFjY291bnRfY2FyZDogW1xuICAgIFwibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCIsXG4gICAgXCJlbWVseWFuLWNvbGQtZW1haWwtcnVcIixcbiAgICBcImJvcmlzLWJkci1vcGVyYXRvci1ydVwiXG4gIF0sXG4gIGhvdF9sZWFkczogW1wibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCIsIFwiYm9yaXMtYmRyLW9wZXJhdG9yLXJ1XCJdLFxuICBtZXNzYWdlc19wYWNrOiBbXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIl0sXG4gIGJkcl9xdWV1ZTogW10sXG4gIGJvYXJkX3JldmlldzogW10sXG4gIGNvbnRlbnRfcGFjazogW11cbn07XG5cbmNvbnN0IFJFQ09NTUVOREVEX05FWFQgPSB7XG4gIFwicGxhdG9uLXByb3NwZWN0LXJlc2VhcmNoLXJ1XCI6IFtcbiAgICBcImFuYXRvbHktYWNjb3VudC1yZXNlYXJjaC1ydVwiLFxuICAgIFwibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCIsXG4gICAgXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIlxuICBdLFxuICBwbGF0b246IFtcbiAgICBcImFuYXRvbHktYWNjb3VudC1yZXNlYXJjaC1ydVwiLFxuICAgIFwibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCIsXG4gICAgXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIlxuICBdLFxuICBcIm1heGltLWxvY2FsLWxlYWRzLXJ1XCI6IFtcbiAgICBcImFuYXRvbHktYWNjb3VudC1yZXNlYXJjaC1ydVwiLFxuICAgIFwibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCIsXG4gICAgXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIlxuICBdLFxuICBcImZlZG9yLWIyYi1sZWFkcy1ydVwiOiBbXG4gICAgXCJhbmF0b2x5LWFjY291bnQtcmVzZWFyY2gtcnVcIixcbiAgICBcImVtZWx5YW4tY29sZC1lbWFpbC1ydVwiLFxuICAgIFwiYm9yaXMtYmRyLW9wZXJhdG9yLXJ1XCJcbiAgXSxcbiAgXCJhcnRlbS1ob3QtbGVhZHMtcnVcIjogW1xuICAgIFwiYW5hdG9seS1hY2NvdW50LXJlc2VhcmNoLXJ1XCIsXG4gICAgXCJsZW9uaWQtb3V0cmVhY2gtZG0tcnVcIixcbiAgICBcImJvcmlzLWJkci1vcGVyYXRvci1ydVwiXG4gIF0sXG4gIFwiYW5hdG9seS1hY2NvdW50LXJlc2VhcmNoLXJ1XCI6IFtcbiAgICBcImxlb25pZC1vdXRyZWFjaC1kbS1ydVwiLFxuICAgIFwiZW1lbHlhbi1jb2xkLWVtYWlsLXJ1XCIsXG4gICAgXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIlxuICBdLFxuICBcInRpbW9mZXktY29tcGV0aXRvci1hbmFseXNpcy1ydVwiOiBbXG4gICAgXCJwbGF0b24tcHJvc3BlY3QtcmVzZWFyY2gtcnVcIixcbiAgICBcImFuYXRvbHktYWNjb3VudC1yZXNlYXJjaC1ydVwiLFxuICAgIFwiYm9yaXMtYmRyLW9wZXJhdG9yLXJ1XCJcbiAgXSxcbiAgXCJsZW9uaWQtb3V0cmVhY2gtZG0tcnVcIjogW1wiYm9yaXMtYmRyLW9wZXJhdG9yLXJ1XCJdLFxuICBcImVtZWx5YW4tY29sZC1lbWFpbC1ydVwiOiBbXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIl0sXG4gIFwiYm9yaXMtYmRyLW9wZXJhdG9yLXJ1XCI6IFtcImxlb25pZC1vdXRyZWFjaC1kbS1ydVwiLCBcImVtZWx5YW4tY29sZC1lbWFpbC1ydVwiXSxcbiAgXCJwYXZlbC1yZWVscy1hbmFseXNpcy1ydVwiOiBbXCJoYXJpdG9uLXZpcmFsLWhvb2tzLXJ1XCIsIFwidHJvZmltLXNob3J0cy1hbmFsb2dzLXJ1XCJdLFxuICBcInRyb2ZpbS1zaG9ydHMtYW5hbG9ncy1ydVwiOiBbXCJoYXJpdG9uLXZpcmFsLWhvb2tzLXJ1XCIsIFwicGF2ZWwtcmVlbHMtYW5hbHlzaXMtcnVcIl0sXG4gIFwiaXJpbmEtY29udGVudC1pZGVhdGlvbi1ydVwiOiBbXCJoYXJpdG9uLXZpcmFsLWhvb2tzLXJ1XCIsIFwia29zdHlhLWltYWdlLWdlbmVyYXRpb24tcnVcIl0sXG4gIFwiaGFyaXRvbi12aXJhbC1ob29rcy1ydVwiOiBbXCJrb3N0eWEtaW1hZ2UtZ2VuZXJhdGlvbi1ydVwiLCBcInNldmEtY29udGVudC1yZXB1cnBvc2luZy1ydVwiXSxcbiAgXCJrb3N0eWEtaW1hZ2UtZ2VuZXJhdGlvbi1ydVwiOiBbXCJoYXJpdG9uLXZpcmFsLWhvb2tzLXJ1XCIsIFwiaXJpbmEtY29udGVudC1pZGVhdGlvbi1ydVwiXSxcbiAgXCJzZXZhLWNvbnRlbnQtcmVwdXJwb3NpbmctcnVcIjogW1wiaGFyaXRvbi12aXJhbC1ob29rcy1ydVwiLCBcImtvc3R5YS1pbWFnZS1nZW5lcmF0aW9uLXJ1XCJdLFxuICBcIm1pdHlhLXdvcmtmbG93LWRpYWdyYW0tcnVcIjogW1wia29zdHlhLWltYWdlLWdlbmVyYXRpb24tcnVcIiwgXCJpcmluYS1jb250ZW50LWlkZWF0aW9uLXJ1XCJdLFxuICBcImJvYXJkLWNlby1ydVwiOiBbXCJib2FyZC1jaGFpci1ydVwiXSxcbiAgXCJib2FyZC1jdG8tcnVcIjogW1wiYm9hcmQtY2hhaXItcnVcIl0sXG4gIFwiYm9hcmQtY2ZvLXJ1XCI6IFtcImJvYXJkLWNoYWlyLXJ1XCJdLFxuICBcImJvYXJkLWNoYWlyLXJ1XCI6IFtdXG59O1xuXG5jb25zdCBub3JtYWxpemVMZWFkID0gKGxlYWQpID0+IHtcbiAgaWYgKCFsZWFkIHx8IHR5cGVvZiBsZWFkICE9PSBcIm9iamVjdFwiKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgbGVhZE5hbWUgPVxuICAgIGxlYWQubmFtZSB8fFxuICAgIGxlYWQuY29tcGFueV9uYW1lIHx8XG4gICAgbGVhZC50aXRsZSB8fFxuICAgIGxlYWQubmFtZV9wbGFjZWhvbGRlciB8fFxuICAgIGxlYWQubGVhZF9sYWJlbCB8fFxuICAgIGxlYWQubGluayB8fFxuICAgIGxlYWQudXJsIHx8XG4gICAgXCJMZWFkXCI7XG4gIGNvbnN0IGNvbnRhY3QgPSB7XG4gICAgZW1haWw6IGxlYWQuZW1haWwgfHwgKGxlYWQucHVibGljX2NvbnRhY3RzID8gbGVhZC5wdWJsaWNfY29udGFjdHMuZW1haWwgOiB1bmRlZmluZWQpIHx8IHVuZGVmaW5lZCxcbiAgICBwaG9uZTogbGVhZC5waG9uZSB8fCAobGVhZC5wdWJsaWNfY29udGFjdHMgPyBsZWFkLnB1YmxpY19jb250YWN0cy5waG9uZSA6IHVuZGVmaW5lZCkgfHwgdW5kZWZpbmVkLFxuICAgIHdlYnNpdGU6IGxlYWQud2Vic2l0ZSB8fCBsZWFkLmRvbWFpbiB8fCB1bmRlZmluZWQsXG4gICAgdXJsOiBsZWFkLmxpbmsgfHwgbGVhZC51cmwgfHwgbGVhZC5zb3VyY2VfdXJsIHx8IHVuZGVmaW5lZFxuICB9O1xuICBjb25zdCBzb3VyY2UgPSBsZWFkLnNvdXJjZSB8fCBsZWFkLmNoYW5uZWwgfHwgbGVhZC5zb3VyY2VfdHlwZSB8fCBcIlwiO1xuICByZXR1cm4ge1xuICAgIGxlYWRfbmFtZTogU3RyaW5nKGxlYWROYW1lKSxcbiAgICBkZWR1cGVfa2V5OiBsZWFkLmRlZHVwZV9rZXkgfHwgbGVhZC5kZWR1cGVfa2V5X3JhdyB8fCBcIlwiLFxuICAgIGNvbnRhY3QsXG4gICAgc291cmNlLFxuICAgIHByb29mX3JlZnM6IGxlYWQucHJvb2ZfcmVmcyB8fCB1bmRlZmluZWRcbiAgfTtcbn07XG5cbmNvbnN0IGJ1aWxkTGVhZHNUYWJsZUVudGl0aWVzID0gKGRhdGEpID0+IHtcbiAgY29uc3QgbGlzdCA9XG4gICAgKGRhdGEgJiYgZGF0YS5sZWFkcykgfHxcbiAgICAoZGF0YSAmJiBkYXRhLmNvbXBhbnlfY2FuZGlkYXRlcykgfHxcbiAgICAoZGF0YSAmJiBkYXRhLmhvdF9sZWFkcykgfHxcbiAgICBbXTtcbiAgY29uc3QgbGVhZHMgPSBBcnJheS5pc0FycmF5KGxpc3QpID8gbGlzdC5tYXAobm9ybWFsaXplTGVhZCkuZmlsdGVyKEJvb2xlYW4pIDogW107XG4gIHJldHVybiB7IGxlYWRzIH07XG59O1xuXG5jb25zdCBidWlsZEFjY291bnRDYXJkRW50aXRpZXMgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkID0gZGF0YSAmJiBkYXRhLmFjY291bnRfY2FyZCA/IGRhdGEuYWNjb3VudF9jYXJkIDoge307XG4gIGNvbnN0IG1ldGEgPSBkYXRhICYmIGRhdGEubWV0YSA/IGRhdGEubWV0YSA6IHt9O1xuICByZXR1cm4ge1xuICAgIGNvbXBhbnlfbmFtZTogY2FyZC5jb21wYW55X25hbWUgfHwgXCJcIixcbiAgICBkaXNjb3ZlcmVkX2NoYW5uZWxzOiBjYXJkLmRpc2NvdmVyZWRfY2hhbm5lbHMgfHwge30sXG4gICAgaG9va3M6IGNhcmQudG9wX3BlcnNvbmFsaXphdGlvbl9ob29rcyB8fCBbXSxcbiAgICBwYWluczogY2FyZC5wYWluX2h5cG90aGVzZXMgfHwgW10sXG4gICAgcHJvb2ZfaXRlbXM6IEFycmF5LmlzQXJyYXkobWV0YS5wcm9vZl9pdGVtcykgPyBtZXRhLnByb29mX2l0ZW1zIDogW11cbiAgfTtcbn07XG5cbmNvbnN0IGJ1aWxkTWVzc2FnZXNQYWNrRW50aXRpZXMgPSAoZGF0YSwgY2hhbm5lbE92ZXJyaWRlKSA9PiB7XG4gIGlmIChkYXRhICYmIGRhdGEuZG1fcGFjaykge1xuICAgIHJldHVybiB7XG4gICAgICBsZWFkX2xhYmVsOiBkYXRhLmRtX3BhY2subGVhZF9sYWJlbCB8fCBcImxlYWRcIixcbiAgICAgIGNoYW5uZWw6IGRhdGEuZG1fcGFjay5jaGFubmVsIHx8IGNoYW5uZWxPdmVycmlkZSB8fCBcImRtXCIsXG4gICAgICBtZXNzYWdlczogZGF0YS5kbV9wYWNrLm1lc3NhZ2VzIHx8IGRhdGEuZG1fcGFjay52YXJpYW50cyB8fCBbXVxuICAgIH07XG4gIH1cbiAgaWYgKGRhdGEgJiYgZGF0YS5lbWFpbF9zZXF1ZW5jZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGVhZF9sYWJlbDogXCJsZWFkXCIsXG4gICAgICBjaGFubmVsOiBjaGFubmVsT3ZlcnJpZGUgfHwgXCJlbWFpbFwiLFxuICAgICAgZW1haWxfc2VxdWVuY2VzOiBkYXRhLmVtYWlsX3NlcXVlbmNlc1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIHsgbGVhZF9sYWJlbDogXCJsZWFkXCIsIGNoYW5uZWw6IGNoYW5uZWxPdmVycmlkZSB8fCBcIlwiLCBtZXNzYWdlczogW10gfTtcbn07XG5cbmNvbnN0IGJ1aWxkQ29udGVudFBhY2tFbnRpdGllcyA9IChkYXRhKSA9PiB7XG4gIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHt9O1xuICBjb25zdCBlbnRpdGllcyA9IHsgLi4uZGF0YSB9O1xuICBpZiAoZW50aXRpZXMubWV0YSkgZGVsZXRlIGVudGl0aWVzLm1ldGE7XG4gIHJldHVybiBlbnRpdGllcztcbn07XG5cbmNvbnN0IGJ1aWxkQm9hcmRSZXZpZXdFbnRpdGllcyA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IHJldmlldyA9IGRhdGEgJiYgdHlwZW9mIGRhdGEucmV2aWV3ID09PSBcIm9iamVjdFwiID8gZGF0YS5yZXZpZXcgOiB7fTtcbiAgcmV0dXJuIHtcbiAgICByb2xlOiByZXZpZXcucm9sZSB8fCBcIlwiLFxuICAgIGRlY2lzaW9uOlxuICAgICAgcmV2aWV3LmRlY2lzaW9uIHx8XG4gICAgICByZXZpZXcuc3RhbmNlIHx8XG4gICAgICByZXZpZXcucmVjb21tZW5kYXRpb24gfHxcbiAgICAgIHJldmlldy5mZWFzaWJpbGl0eSB8fFxuICAgICAgXCJcIixcbiAgICBzdW1tYXJ5OlxuICAgICAgcmV2aWV3LmZpbmFsX3N1bW1hcnkgfHxcbiAgICAgIHJldmlldy52ZXJkaWN0IHx8XG4gICAgICByZXZpZXcudW5pdF9lY29ub21pY3NfdmlldyB8fFxuICAgICAgXCJcIixcbiAgICByZWZlcmVuY2VzOiByZXZpZXcucmVmZXJlbmNlcyB8fCB7fVxuICB9O1xufTtcblxuY29uc3QgYnVpbGRIYW5kb2ZmID0gKGFnZW50SWQsIGRhdGEpID0+IHtcbiAgY29uc3QgcmVjb21tZW5kZWRfbmV4dF9hZ2VudHMgPSBSRUNPTU1FTkRFRF9ORVhUW2FnZW50SWRdIHx8IFtcImJvcmlzLWJkci1vcGVyYXRvci1ydVwiXTtcblxuICBpZiAoXG4gICAgYWdlbnRJZCA9PT0gXCJwbGF0b25cIiB8fFxuICAgIGFnZW50SWQgPT09IFwicGxhdG9uLXByb3NwZWN0LXJlc2VhcmNoLXJ1XCIgfHxcbiAgICBhZ2VudElkID09PSBcIm1heGltLWxvY2FsLWxlYWRzLXJ1XCIgfHxcbiAgICBhZ2VudElkID09PSBcImZlZG9yLWIyYi1sZWFkcy1ydVwiXG4gICkge1xuICAgIGNvbnN0IHR5cGUgPSBcImxlYWRzX3RhYmxlXCI7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGUsXG4gICAgICB2ZXJzaW9uOiBIQU5ET0ZGX1ZFUlNJT04sXG4gICAgICBlbnRpdGllczogYnVpbGRMZWFkc1RhYmxlRW50aXRpZXMoZGF0YSksXG4gICAgICByZWNvbW1lbmRlZF9uZXh0X2FnZW50cyxcbiAgICAgIGNvbXBhdDogQ09NUEFUX0JZX1RZUEVbdHlwZV0gfHwgW11cbiAgICB9O1xuICB9XG5cbiAgaWYgKGFnZW50SWQgPT09IFwiYXJ0ZW0taG90LWxlYWRzLXJ1XCIpIHtcbiAgICBjb25zdCB0eXBlID0gXCJob3RfbGVhZHNcIjtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZSxcbiAgICAgIHZlcnNpb246IEhBTkRPRkZfVkVSU0lPTixcbiAgICAgIGVudGl0aWVzOiBidWlsZExlYWRzVGFibGVFbnRpdGllcyhkYXRhKSxcbiAgICAgIHJlY29tbWVuZGVkX25leHRfYWdlbnRzLFxuICAgICAgY29tcGF0OiBDT01QQVRfQllfVFlQRVt0eXBlXSB8fCBbXVxuICAgIH07XG4gIH1cblxuICBpZiAoYWdlbnRJZCA9PT0gXCJhbmF0b2x5LWFjY291bnQtcmVzZWFyY2gtcnVcIikge1xuICAgIGNvbnN0IHR5cGUgPSBcImFjY291bnRfY2FyZFwiO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlLFxuICAgICAgdmVyc2lvbjogSEFORE9GRl9WRVJTSU9OLFxuICAgICAgZW50aXRpZXM6IGJ1aWxkQWNjb3VudENhcmRFbnRpdGllcyhkYXRhKSxcbiAgICAgIHJlY29tbWVuZGVkX25leHRfYWdlbnRzLFxuICAgICAgY29tcGF0OiBDT01QQVRfQllfVFlQRVt0eXBlXSB8fCBbXVxuICAgIH07XG4gIH1cblxuICBpZiAoYWdlbnRJZCA9PT0gXCJsZW9uaWQtb3V0cmVhY2gtZG0tcnVcIikge1xuICAgIGNvbnN0IHR5cGUgPSBcIm1lc3NhZ2VzX3BhY2tcIjtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZSxcbiAgICAgIHZlcnNpb246IEhBTkRPRkZfVkVSU0lPTixcbiAgICAgIGVudGl0aWVzOiBidWlsZE1lc3NhZ2VzUGFja0VudGl0aWVzKGRhdGEsIFwiZG1cIiksXG4gICAgICByZWNvbW1lbmRlZF9uZXh0X2FnZW50cyxcbiAgICAgIGNvbXBhdDogQ09NUEFUX0JZX1RZUEVbdHlwZV0gfHwgW11cbiAgICB9O1xuICB9XG5cbiAgaWYgKGFnZW50SWQgPT09IFwiZW1lbHlhbi1jb2xkLWVtYWlsLXJ1XCIpIHtcbiAgICBjb25zdCB0eXBlID0gXCJtZXNzYWdlc19wYWNrXCI7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGUsXG4gICAgICB2ZXJzaW9uOiBIQU5ET0ZGX1ZFUlNJT04sXG4gICAgICBlbnRpdGllczogYnVpbGRNZXNzYWdlc1BhY2tFbnRpdGllcyhkYXRhLCBcImVtYWlsXCIpLFxuICAgICAgcmVjb21tZW5kZWRfbmV4dF9hZ2VudHMsXG4gICAgICBjb21wYXQ6IENPTVBBVF9CWV9UWVBFW3R5cGVdIHx8IFtdXG4gICAgfTtcbiAgfVxuXG4gIGlmIChhZ2VudElkID09PSBcImJvcmlzLWJkci1vcGVyYXRvci1ydVwiKSB7XG4gICAgY29uc3QgdHlwZSA9IFwiYmRyX3F1ZXVlXCI7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGUsXG4gICAgICB2ZXJzaW9uOiBIQU5ET0ZGX1ZFUlNJT04sXG4gICAgICBlbnRpdGllczogeyByb3dzOiBBcnJheS5pc0FycmF5KGRhdGEuYmRyX3RhYmxlKSA/IGRhdGEuYmRyX3RhYmxlIDogW10gfSxcbiAgICAgIHJlY29tbWVuZGVkX25leHRfYWdlbnRzLFxuICAgICAgY29tcGF0OiBDT01QQVRfQllfVFlQRVt0eXBlXSB8fCBbXVxuICAgIH07XG4gIH1cblxuICBpZiAoYWdlbnRJZCA9PT0gXCJ0aW1vZmV5LWNvbXBldGl0b3ItYW5hbHlzaXMtcnVcIikge1xuICAgIGNvbnN0IHR5cGUgPSBcImNvbnRlbnRfcGFja1wiO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlLFxuICAgICAgdmVyc2lvbjogSEFORE9GRl9WRVJTSU9OLFxuICAgICAgZW50aXRpZXM6IHtcbiAgICAgICAgY29tcGV0aXRvcnM6IGRhdGEuY29tcGV0aXRvcnMgfHwgW10sXG4gICAgICAgIGNvbXBhcmlzb25fdGFibGU6IGRhdGEuY29tcGFyaXNvbl90YWJsZSB8fCBbXSxcbiAgICAgICAgb2ZmZXJzOiBkYXRhLm9mZmVycyB8fCB7fSxcbiAgICAgICAgd2luX2FuZ2xlczogZGF0YS53aW5fYW5nbGVzIHx8IFtdLFxuICAgICAgICBhZ2VudG9zX3Bvc2l0aW9uaW5nOiBkYXRhLmFnZW50b3NfcG9zaXRpb25pbmcgfHwge31cbiAgICAgIH0sXG4gICAgICByZWNvbW1lbmRlZF9uZXh0X2FnZW50cyxcbiAgICAgIGNvbXBhdDogQ09NUEFUX0JZX1RZUEVbdHlwZV0gfHwgW11cbiAgICB9O1xuICB9XG5cbiAgaWYgKFxuICAgIGFnZW50SWQgPT09IFwiYm9hcmQtY2VvLXJ1XCIgfHxcbiAgICBhZ2VudElkID09PSBcImJvYXJkLWN0by1ydVwiIHx8XG4gICAgYWdlbnRJZCA9PT0gXCJib2FyZC1jZm8tcnVcIiB8fFxuICAgIGFnZW50SWQgPT09IFwiYm9hcmQtY2hhaXItcnVcIlxuICApIHtcbiAgICBjb25zdCB0eXBlID0gXCJib2FyZF9yZXZpZXdcIjtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZSxcbiAgICAgIHZlcnNpb246IEhBTkRPRkZfVkVSU0lPTixcbiAgICAgIGVudGl0aWVzOiBidWlsZEJvYXJkUmV2aWV3RW50aXRpZXMoZGF0YSksXG4gICAgICByZWNvbW1lbmRlZF9uZXh0X2FnZW50cyxcbiAgICAgIGNvbXBhdDogQ09NUEFUX0JZX1RZUEVbdHlwZV0gfHwgW11cbiAgICB9O1xuICB9XG5cbiAgY29uc3QgdHlwZSA9IFwiY29udGVudF9wYWNrXCI7XG4gIHJldHVybiB7XG4gICAgdHlwZSxcbiAgICB2ZXJzaW9uOiBIQU5ET0ZGX1ZFUlNJT04sXG4gICAgZW50aXRpZXM6IGJ1aWxkQ29udGVudFBhY2tFbnRpdGllcyhkYXRhKSxcbiAgICByZWNvbW1lbmRlZF9uZXh0X2FnZW50cyxcbiAgICBjb21wYXQ6IENPTVBBVF9CWV9UWVBFW3R5cGVdIHx8IFtdXG4gIH07XG59O1xuXG5jb25zdCBnZXRIYW5kb2ZmVHlwZUZvckFnZW50ID0gKGFnZW50SWQpID0+IHtcbiAgaWYgKFxuICAgIGFnZW50SWQgPT09IFwicGxhdG9uXCIgfHxcbiAgICBhZ2VudElkID09PSBcInBsYXRvbi1wcm9zcGVjdC1yZXNlYXJjaC1ydVwiIHx8XG4gICAgYWdlbnRJZCA9PT0gXCJtYXhpbS1sb2NhbC1sZWFkcy1ydVwiIHx8XG4gICAgYWdlbnRJZCA9PT0gXCJmZWRvci1iMmItbGVhZHMtcnVcIlxuICApIHtcbiAgICByZXR1cm4gXCJsZWFkc190YWJsZVwiO1xuICB9XG4gIGlmIChhZ2VudElkID09PSBcImFydGVtLWhvdC1sZWFkcy1ydVwiKSByZXR1cm4gXCJob3RfbGVhZHNcIjtcbiAgaWYgKGFnZW50SWQgPT09IFwiYW5hdG9seS1hY2NvdW50LXJlc2VhcmNoLXJ1XCIpIHJldHVybiBcImFjY291bnRfY2FyZFwiO1xuICBpZiAoYWdlbnRJZCA9PT0gXCJsZW9uaWQtb3V0cmVhY2gtZG0tcnVcIikgcmV0dXJuIFwibWVzc2FnZXNfcGFja1wiO1xuICBpZiAoYWdlbnRJZCA9PT0gXCJlbWVseWFuLWNvbGQtZW1haWwtcnVcIikgcmV0dXJuIFwibWVzc2FnZXNfcGFja1wiO1xuICBpZiAoYWdlbnRJZCA9PT0gXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIikgcmV0dXJuIFwiYmRyX3F1ZXVlXCI7XG4gIGlmIChhZ2VudElkID09PSBcInRpbW9mZXktY29tcGV0aXRvci1hbmFseXNpcy1ydVwiKSByZXR1cm4gXCJjb250ZW50X3BhY2tcIjtcbiAgaWYgKFxuICAgIGFnZW50SWQgPT09IFwiYm9hcmQtY2VvLXJ1XCIgfHxcbiAgICBhZ2VudElkID09PSBcImJvYXJkLWN0by1ydVwiIHx8XG4gICAgYWdlbnRJZCA9PT0gXCJib2FyZC1jZm8tcnVcIiB8fFxuICAgIGFnZW50SWQgPT09IFwiYm9hcmQtY2hhaXItcnVcIlxuICApIHtcbiAgICByZXR1cm4gXCJib2FyZF9yZXZpZXdcIjtcbiAgfVxuICByZXR1cm4gXCJjb250ZW50X3BhY2tcIjtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0geyBidWlsZEhhbmRvZmYsIEhBTkRPRkZfVkVSU0lPTiwgQ09NUEFUX0JZX1RZUEUsIGdldEhhbmRvZmZUeXBlRm9yQWdlbnQgfTtcbiJdLCJuYW1lcyI6WyJIQU5ET0ZGX1ZFUlNJT04iLCJDT01QQVRfQllfVFlQRSIsImxlYWRzX3RhYmxlIiwiYWNjb3VudF9jYXJkIiwiaG90X2xlYWRzIiwibWVzc2FnZXNfcGFjayIsImJkcl9xdWV1ZSIsImJvYXJkX3JldmlldyIsImNvbnRlbnRfcGFjayIsIlJFQ09NTUVOREVEX05FWFQiLCJwbGF0b24iLCJub3JtYWxpemVMZWFkIiwibGVhZCIsImxlYWROYW1lIiwibmFtZSIsImNvbXBhbnlfbmFtZSIsInRpdGxlIiwibmFtZV9wbGFjZWhvbGRlciIsImxlYWRfbGFiZWwiLCJsaW5rIiwidXJsIiwiY29udGFjdCIsImVtYWlsIiwicHVibGljX2NvbnRhY3RzIiwidW5kZWZpbmVkIiwicGhvbmUiLCJ3ZWJzaXRlIiwiZG9tYWluIiwic291cmNlX3VybCIsInNvdXJjZSIsImNoYW5uZWwiLCJzb3VyY2VfdHlwZSIsImxlYWRfbmFtZSIsIlN0cmluZyIsImRlZHVwZV9rZXkiLCJkZWR1cGVfa2V5X3JhdyIsInByb29mX3JlZnMiLCJidWlsZExlYWRzVGFibGVFbnRpdGllcyIsImRhdGEiLCJsaXN0IiwibGVhZHMiLCJjb21wYW55X2NhbmRpZGF0ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJmaWx0ZXIiLCJCb29sZWFuIiwiYnVpbGRBY2NvdW50Q2FyZEVudGl0aWVzIiwiY2FyZCIsIm1ldGEiLCJkaXNjb3ZlcmVkX2NoYW5uZWxzIiwiaG9va3MiLCJ0b3BfcGVyc29uYWxpemF0aW9uX2hvb2tzIiwicGFpbnMiLCJwYWluX2h5cG90aGVzZXMiLCJwcm9vZl9pdGVtcyIsImJ1aWxkTWVzc2FnZXNQYWNrRW50aXRpZXMiLCJjaGFubmVsT3ZlcnJpZGUiLCJkbV9wYWNrIiwibWVzc2FnZXMiLCJ2YXJpYW50cyIsImVtYWlsX3NlcXVlbmNlcyIsImJ1aWxkQ29udGVudFBhY2tFbnRpdGllcyIsImVudGl0aWVzIiwiYnVpbGRCb2FyZFJldmlld0VudGl0aWVzIiwicmV2aWV3Iiwicm9sZSIsImRlY2lzaW9uIiwic3RhbmNlIiwicmVjb21tZW5kYXRpb24iLCJmZWFzaWJpbGl0eSIsInN1bW1hcnkiLCJmaW5hbF9zdW1tYXJ5IiwidmVyZGljdCIsInVuaXRfZWNvbm9taWNzX3ZpZXciLCJyZWZlcmVuY2VzIiwiYnVpbGRIYW5kb2ZmIiwiYWdlbnRJZCIsInJlY29tbWVuZGVkX25leHRfYWdlbnRzIiwidHlwZSIsInZlcnNpb24iLCJjb21wYXQiLCJyb3dzIiwiYmRyX3RhYmxlIiwiY29tcGV0aXRvcnMiLCJjb21wYXJpc29uX3RhYmxlIiwib2ZmZXJzIiwid2luX2FuZ2xlcyIsImFnZW50b3NfcG9zaXRpb25pbmciLCJnZXRIYW5kb2ZmVHlwZUZvckFnZW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./utils/handoff.js\n");

/***/ }),

/***/ "(rsc)/./utils/normalize.js":
/*!****************************!*\
  !*** ./utils/normalize.js ***!
  \****************************/
/***/ ((module) => {

eval("\nconst normalizeEmail = (email)=>{\n    if (!email || typeof email !== \"string\") return \"\";\n    const cleaned = email.trim().toLowerCase();\n    if (!cleaned.includes(\"@\")) return \"\";\n    return cleaned;\n};\nconst pushPhoneWarning = (options, raw, code)=>{\n    if (!options || !Array.isArray(options.warnings)) return;\n    options.warnings.push({\n        code,\n        raw\n    });\n};\nconst resolvePhoneFallback = (options, raw, code)=>{\n    pushPhoneWarning(options, raw, code);\n    return options && options.returnNullOnFailure ? null : \"\";\n};\nconst normalizePhone = (phone, options = {})=>{\n    if (!phone || typeof phone !== \"string\") {\n        return resolvePhoneFallback(options, phone, \"phone_missing\");\n    }\n    const raw = phone.trim();\n    if (!raw) {\n        return resolvePhoneFallback(options, phone, \"phone_missing\");\n    }\n    const digits = raw.replace(/\\D/g, \"\");\n    if (!digits) {\n        return resolvePhoneFallback(options, raw, \"phone_no_digits\");\n    }\n    if (digits.length === 11 && (digits.startsWith(\"8\") || digits.startsWith(\"7\"))) {\n        return `+7${digits.slice(1)}`;\n    }\n    if (digits.length === 10) {\n        return `+7${digits}`;\n    }\n    return resolvePhoneFallback(options, raw, \"phone_ru_unrecognized\");\n};\nconst PATH_DEDUPE_DOMAINS = [\n    \"wildberries.ru\",\n    \"ozon.ru\",\n    \"vk.com\",\n    \"t.me\",\n    \"telegram.me\"\n];\nconst extractDomainFromUrl = (url)=>{\n    if (!url || typeof url !== \"string\") return \"\";\n    try {\n        const parsed = new URL(url);\n        const host = parsed.hostname.replace(/^www\\./, \"\").toLowerCase();\n        if (PATH_DEDUPE_DOMAINS.some((domain)=>host.endsWith(domain))) {\n            const parts = parsed.pathname.split(\"/\").filter(Boolean);\n            const path = parts.length ? `/${parts[0]}` : \"\";\n            return `${host}${path}`.toLowerCase();\n        }\n        return host;\n    } catch  {\n        const cleaned = url.toLowerCase().replace(/^www\\./, \"\");\n        if (cleaned.includes(\"/\")) {\n            const [host, first] = cleaned.split(\"/\");\n            if (PATH_DEDUPE_DOMAINS.some((domain)=>host.endsWith(domain)) && first) {\n                return `${host}/${first}`.toLowerCase();\n            }\n            return host;\n        }\n        return cleaned;\n    }\n};\nconst normalizeName = (value)=>{\n    if (!value || typeof value !== \"string\") return \"\";\n    return value.toLowerCase().replace(/ооо|ип|ao|zao|pao|llc|ltd|inc/gi, \"\").replace(/[\"'«»]/g, \"\").replace(/[^a-z0-9а-я]+/gi, \"_\").replace(/_+/g, \"_\").replace(/^_+|_+$/g, \"\").trim();\n};\nconst makeDedupeKey = (fields = {}, options = {})=>{\n    const prefix = options.prefix !== false;\n    const inn = fields.inn ? String(fields.inn).replace(/\\D/g, \"\") : \"\";\n    const domain = fields.domain ? String(fields.domain).toLowerCase() : \"\";\n    const phoneRaw = fields.phone ? String(fields.phone) : \"\";\n    const phoneDigits = phoneRaw.replace(/\\D/g, \"\");\n    const name = normalizeName(fields.name || \"\");\n    const city = normalizeName(fields.city || \"\");\n    if (inn) return prefix ? `inn:${inn}` : inn;\n    if (domain) return prefix ? `domain:${domain}` : domain;\n    if (phoneDigits) return prefix ? `phone:${phoneDigits}` : phoneDigits;\n    const nameCity = `${name}${city ? `_${city}` : \"\"}` || \"unknown\";\n    return prefix ? `name:${nameCity}` : nameCity;\n};\nmodule.exports = {\n    normalizeEmail,\n    normalizePhone,\n    extractDomainFromUrl,\n    makeDedupeKey\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUVBLE1BQU0sR0FBRyxJQUFJLElBQUk7SUFDdkQsT0FBT04sU0FBUyxDQUFDLEtBQUssRUFBRU8sVUFBVSxHQUFHQTtBQUN2QztBQUVBQyxPQUFPQyxPQUFPLEdBQUc7SUFDZnJEO0lBQ0FnQjtJQUNBUTtJQUNBa0I7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2FidXphZGEvRGVza3RvcC9hZ2VudE9TL3V0aWxzL25vcm1hbGl6ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBub3JtYWxpemVFbWFpbCA9IChlbWFpbCkgPT4ge1xuICBpZiAoIWVtYWlsIHx8IHR5cGVvZiBlbWFpbCAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIFwiXCI7XG4gIGNvbnN0IGNsZWFuZWQgPSBlbWFpbC50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgaWYgKCFjbGVhbmVkLmluY2x1ZGVzKFwiQFwiKSkgcmV0dXJuIFwiXCI7XG4gIHJldHVybiBjbGVhbmVkO1xufTtcblxuY29uc3QgcHVzaFBob25lV2FybmluZyA9IChvcHRpb25zLCByYXcsIGNvZGUpID0+IHtcbiAgaWYgKCFvcHRpb25zIHx8ICFBcnJheS5pc0FycmF5KG9wdGlvbnMud2FybmluZ3MpKSByZXR1cm47XG4gIG9wdGlvbnMud2FybmluZ3MucHVzaCh7IGNvZGUsIHJhdyB9KTtcbn07XG5cbmNvbnN0IHJlc29sdmVQaG9uZUZhbGxiYWNrID0gKG9wdGlvbnMsIHJhdywgY29kZSkgPT4ge1xuICBwdXNoUGhvbmVXYXJuaW5nKG9wdGlvbnMsIHJhdywgY29kZSk7XG4gIHJldHVybiBvcHRpb25zICYmIG9wdGlvbnMucmV0dXJuTnVsbE9uRmFpbHVyZSA/IG51bGwgOiBcIlwiO1xufTtcblxuY29uc3Qgbm9ybWFsaXplUGhvbmUgPSAocGhvbmUsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBpZiAoIXBob25lIHx8IHR5cGVvZiBwaG9uZSAhPT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiByZXNvbHZlUGhvbmVGYWxsYmFjayhvcHRpb25zLCBwaG9uZSwgXCJwaG9uZV9taXNzaW5nXCIpO1xuICB9XG5cbiAgY29uc3QgcmF3ID0gcGhvbmUudHJpbSgpO1xuICBpZiAoIXJhdykge1xuICAgIHJldHVybiByZXNvbHZlUGhvbmVGYWxsYmFjayhvcHRpb25zLCBwaG9uZSwgXCJwaG9uZV9taXNzaW5nXCIpO1xuICB9XG5cbiAgY29uc3QgZGlnaXRzID0gcmF3LnJlcGxhY2UoL1xcRC9nLCBcIlwiKTtcbiAgaWYgKCFkaWdpdHMpIHtcbiAgICByZXR1cm4gcmVzb2x2ZVBob25lRmFsbGJhY2sob3B0aW9ucywgcmF3LCBcInBob25lX25vX2RpZ2l0c1wiKTtcbiAgfVxuXG4gIGlmIChkaWdpdHMubGVuZ3RoID09PSAxMSAmJiAoZGlnaXRzLnN0YXJ0c1dpdGgoXCI4XCIpIHx8IGRpZ2l0cy5zdGFydHNXaXRoKFwiN1wiKSkpIHtcbiAgICByZXR1cm4gYCs3JHtkaWdpdHMuc2xpY2UoMSl9YDtcbiAgfVxuXG4gIGlmIChkaWdpdHMubGVuZ3RoID09PSAxMCkge1xuICAgIHJldHVybiBgKzcke2RpZ2l0c31gO1xuICB9XG5cbiAgcmV0dXJuIHJlc29sdmVQaG9uZUZhbGxiYWNrKG9wdGlvbnMsIHJhdywgXCJwaG9uZV9ydV91bnJlY29nbml6ZWRcIik7XG59O1xuXG5jb25zdCBQQVRIX0RFRFVQRV9ET01BSU5TID0gW1wid2lsZGJlcnJpZXMucnVcIiwgXCJvem9uLnJ1XCIsIFwidmsuY29tXCIsIFwidC5tZVwiLCBcInRlbGVncmFtLm1lXCJdO1xuXG5jb25zdCBleHRyYWN0RG9tYWluRnJvbVVybCA9ICh1cmwpID0+IHtcbiAgaWYgKCF1cmwgfHwgdHlwZW9mIHVybCAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIFwiXCI7XG4gIHRyeSB7XG4gICAgY29uc3QgcGFyc2VkID0gbmV3IFVSTCh1cmwpO1xuICAgIGNvbnN0IGhvc3QgPSBwYXJzZWQuaG9zdG5hbWUucmVwbGFjZSgvXnd3d1xcLi8sIFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKFBBVEhfREVEVVBFX0RPTUFJTlMuc29tZSgoZG9tYWluKSA9PiBob3N0LmVuZHNXaXRoKGRvbWFpbikpKSB7XG4gICAgICBjb25zdCBwYXJ0cyA9IHBhcnNlZC5wYXRobmFtZS5zcGxpdChcIi9cIikuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgY29uc3QgcGF0aCA9IHBhcnRzLmxlbmd0aCA/IGAvJHtwYXJ0c1swXX1gIDogXCJcIjtcbiAgICAgIHJldHVybiBgJHtob3N0fSR7cGF0aH1gLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIHJldHVybiBob3N0O1xuICB9IGNhdGNoIHtcbiAgICBjb25zdCBjbGVhbmVkID0gdXJsLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXnd3d1xcLi8sIFwiXCIpO1xuICAgIGlmIChjbGVhbmVkLmluY2x1ZGVzKFwiL1wiKSkge1xuICAgICAgY29uc3QgW2hvc3QsIGZpcnN0XSA9IGNsZWFuZWQuc3BsaXQoXCIvXCIpO1xuICAgICAgaWYgKFBBVEhfREVEVVBFX0RPTUFJTlMuc29tZSgoZG9tYWluKSA9PiBob3N0LmVuZHNXaXRoKGRvbWFpbikpICYmIGZpcnN0KSB7XG4gICAgICAgIHJldHVybiBgJHtob3N0fS8ke2ZpcnN0fWAudG9Mb3dlckNhc2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBob3N0O1xuICAgIH1cbiAgICByZXR1cm4gY2xlYW5lZDtcbiAgfVxufTtcblxuY29uc3Qgbm9ybWFsaXplTmFtZSA9ICh2YWx1ZSkgPT4ge1xuICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIFwiXCI7XG4gIHJldHVybiB2YWx1ZVxuICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgLnJlcGxhY2UoL9C+0L7QvnzQuNC/fGFvfHphb3xwYW98bGxjfGx0ZHxpbmMvZ2ksIFwiXCIpXG4gICAgLnJlcGxhY2UoL1tcIifCq8K7XS9nLCBcIlwiKVxuICAgIC5yZXBsYWNlKC9bXmEtejAtOdCwLdGPXSsvZ2ksIFwiX1wiKVxuICAgIC5yZXBsYWNlKC9fKy9nLCBcIl9cIilcbiAgICAucmVwbGFjZSgvXl8rfF8rJC9nLCBcIlwiKVxuICAgIC50cmltKCk7XG59O1xuXG5jb25zdCBtYWtlRGVkdXBlS2V5ID0gKGZpZWxkcyA9IHt9LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgcHJlZml4ID0gb3B0aW9ucy5wcmVmaXggIT09IGZhbHNlO1xuICBjb25zdCBpbm4gPSBmaWVsZHMuaW5uID8gU3RyaW5nKGZpZWxkcy5pbm4pLnJlcGxhY2UoL1xcRC9nLCBcIlwiKSA6IFwiXCI7XG4gIGNvbnN0IGRvbWFpbiA9IGZpZWxkcy5kb21haW4gPyBTdHJpbmcoZmllbGRzLmRvbWFpbikudG9Mb3dlckNhc2UoKSA6IFwiXCI7XG4gIGNvbnN0IHBob25lUmF3ID0gZmllbGRzLnBob25lID8gU3RyaW5nKGZpZWxkcy5waG9uZSkgOiBcIlwiO1xuICBjb25zdCBwaG9uZURpZ2l0cyA9IHBob25lUmF3LnJlcGxhY2UoL1xcRC9nLCBcIlwiKTtcbiAgY29uc3QgbmFtZSA9IG5vcm1hbGl6ZU5hbWUoZmllbGRzLm5hbWUgfHwgXCJcIik7XG4gIGNvbnN0IGNpdHkgPSBub3JtYWxpemVOYW1lKGZpZWxkcy5jaXR5IHx8IFwiXCIpO1xuXG4gIGlmIChpbm4pIHJldHVybiBwcmVmaXggPyBgaW5uOiR7aW5ufWAgOiBpbm47XG4gIGlmIChkb21haW4pIHJldHVybiBwcmVmaXggPyBgZG9tYWluOiR7ZG9tYWlufWAgOiBkb21haW47XG4gIGlmIChwaG9uZURpZ2l0cykgcmV0dXJuIHByZWZpeCA/IGBwaG9uZToke3Bob25lRGlnaXRzfWAgOiBwaG9uZURpZ2l0cztcblxuICBjb25zdCBuYW1lQ2l0eSA9IGAke25hbWV9JHtjaXR5ID8gYF8ke2NpdHl9YCA6IFwiXCJ9YCB8fCBcInVua25vd25cIjtcbiAgcmV0dXJuIHByZWZpeCA/IGBuYW1lOiR7bmFtZUNpdHl9YCA6IG5hbWVDaXR5O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIG5vcm1hbGl6ZUVtYWlsLFxuICBub3JtYWxpemVQaG9uZSxcbiAgZXh0cmFjdERvbWFpbkZyb21VcmwsXG4gIG1ha2VEZWR1cGVLZXlcbn07XG4iXSwibmFtZXMiOlsibm9ybWFsaXplRW1haWwiLCJlbWFpbCIsImNsZWFuZWQiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsInB1c2hQaG9uZVdhcm5pbmciLCJvcHRpb25zIiwicmF3IiwiY29kZSIsIkFycmF5IiwiaXNBcnJheSIsIndhcm5pbmdzIiwicHVzaCIsInJlc29sdmVQaG9uZUZhbGxiYWNrIiwicmV0dXJuTnVsbE9uRmFpbHVyZSIsIm5vcm1hbGl6ZVBob25lIiwicGhvbmUiLCJkaWdpdHMiLCJyZXBsYWNlIiwibGVuZ3RoIiwic3RhcnRzV2l0aCIsInNsaWNlIiwiUEFUSF9ERURVUEVfRE9NQUlOUyIsImV4dHJhY3REb21haW5Gcm9tVXJsIiwidXJsIiwicGFyc2VkIiwiVVJMIiwiaG9zdCIsImhvc3RuYW1lIiwic29tZSIsImRvbWFpbiIsImVuZHNXaXRoIiwicGFydHMiLCJwYXRobmFtZSIsInNwbGl0IiwiZmlsdGVyIiwiQm9vbGVhbiIsInBhdGgiLCJmaXJzdCIsIm5vcm1hbGl6ZU5hbWUiLCJ2YWx1ZSIsIm1ha2VEZWR1cGVLZXkiLCJmaWVsZHMiLCJwcmVmaXgiLCJpbm4iLCJTdHJpbmciLCJwaG9uZVJhdyIsInBob25lRGlnaXRzIiwibmFtZSIsImNpdHkiLCJuYW1lQ2l0eSIsIm1vZHVsZSIsImV4cG9ydHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./utils/normalize.js\n");

/***/ }),

/***/ "(rsc)/./utils/sanitizeSnippet.js":
/*!**********************************!*\
  !*** ./utils/sanitizeSnippet.js ***!
  \**********************************/
/***/ ((module) => {

eval("\nconst sanitizeSnippet = (text, max = 160)=>{\n    if (!text) return \"\";\n    const clean = String(text).replace(/<[^>]+>/g, \" \").replace(/[\\r\\n\\t]+/g, \" \").replace(/\\s+/g, \" \").trim();\n    if (clean.length <= max) return clean;\n    return clean.slice(0, max).trim();\n};\nmodule.exports = {\n    sanitizeSnippet\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi91dGlscy9zYW5pdGl6ZVNuaXBwZXQuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLGtCQUFrQixDQUFDQyxNQUFNQyxNQUFNLEdBQUc7SUFDdEMsSUFBSSxDQUFDRCxNQUFNLE9BQU87SUFDbEIsTUFBTUUsUUFBUUMsT0FBT0gsTUFDbEJJLE9BQU8sQ0FBQyxZQUFZLEtBQ3BCQSxPQUFPLENBQUMsY0FBYyxLQUN0QkEsT0FBTyxDQUFDLFFBQVEsS0FDaEJDLElBQUk7SUFDUCxJQUFJSCxNQUFNSSxNQUFNLElBQUlMLEtBQUssT0FBT0M7SUFDaEMsT0FBT0EsTUFBTUssS0FBSyxDQUFDLEdBQUdOLEtBQUtJLElBQUk7QUFDakM7QUFFQUcsT0FBT0MsT0FBTyxHQUFHO0lBQUVWO0FBQWdCIiwic291cmNlcyI6WyIvVXNlcnMvYWJ1emFkYS9EZXNrdG9wL2FnZW50T1MvdXRpbHMvc2FuaXRpemVTbmlwcGV0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNhbml0aXplU25pcHBldCA9ICh0ZXh0LCBtYXggPSAxNjApID0+IHtcbiAgaWYgKCF0ZXh0KSByZXR1cm4gXCJcIjtcbiAgY29uc3QgY2xlYW4gPSBTdHJpbmcodGV4dClcbiAgICAucmVwbGFjZSgvPFtePl0rPi9nLCBcIiBcIilcbiAgICAucmVwbGFjZSgvW1xcclxcblxcdF0rL2csIFwiIFwiKVxuICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxuICAgIC50cmltKCk7XG4gIGlmIChjbGVhbi5sZW5ndGggPD0gbWF4KSByZXR1cm4gY2xlYW47XG4gIHJldHVybiBjbGVhbi5zbGljZSgwLCBtYXgpLnRyaW0oKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0geyBzYW5pdGl6ZVNuaXBwZXQgfTtcbiJdLCJuYW1lcyI6WyJzYW5pdGl6ZVNuaXBwZXQiLCJ0ZXh0IiwibWF4IiwiY2xlYW4iLCJTdHJpbmciLCJyZXBsYWNlIiwidHJpbSIsImxlbmd0aCIsInNsaWNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./utils/sanitizeSnippet.js\n");

/***/ }),

/***/ "(rsc)/./utils/validateAgentResponse.js":
/*!****************************************!*\
  !*** ./utils/validateAgentResponse.js ***!
  \****************************************/
/***/ ((module) => {

eval("\nconst isObject = (value)=>typeof value === \"object\" && value !== null && !Array.isArray(value);\nconst isType = (value, type)=>{\n    if (type === \"array\") return Array.isArray(value);\n    if (type === \"object\") return isObject(value);\n    if (type === \"string\") return typeof value === \"string\";\n    if (type === \"number\") return typeof value === \"number\" && Number.isFinite(value);\n    if (type === \"boolean\") return typeof value === \"boolean\";\n    return value !== undefined;\n};\nconst validateAgentResponse = (data, schema)=>{\n    const errors = [];\n    if (!isObject(data)) {\n        return {\n            ok: false,\n            errors: [\n                \"data must be an object\"\n            ]\n        };\n    }\n    if (!schema || !schema.required) return {\n        ok: true,\n        errors\n    };\n    const required = schema.required || {};\n    Object.entries(required).forEach(([key, type])=>{\n        if (!(key in data)) {\n            errors.push(`missing key: ${key}`);\n            return;\n        }\n        if (type && !isType(data[key], type)) {\n            errors.push(`invalid type for ${key}: expected ${type}`);\n        }\n    });\n    return {\n        ok: errors.length === 0,\n        errors\n    };\n};\nmodule.exports = {\n    validateAgentResponse\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi91dGlscy92YWxpZGF0ZUFnZW50UmVzcG9uc2UuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLFdBQVcsQ0FBQ0MsUUFBVSxPQUFPQSxVQUFVLFlBQVlBLFVBQVUsUUFBUSxDQUFDQyxNQUFNQyxPQUFPLENBQUNGO0FBRTFGLE1BQU1HLFNBQVMsQ0FBQ0gsT0FBT0k7SUFDckIsSUFBSUEsU0FBUyxTQUFTLE9BQU9ILE1BQU1DLE9BQU8sQ0FBQ0Y7SUFDM0MsSUFBSUksU0FBUyxVQUFVLE9BQU9MLFNBQVNDO0lBQ3ZDLElBQUlJLFNBQVMsVUFBVSxPQUFPLE9BQU9KLFVBQVU7SUFDL0MsSUFBSUksU0FBUyxVQUFVLE9BQU8sT0FBT0osVUFBVSxZQUFZSyxPQUFPQyxRQUFRLENBQUNOO0lBQzNFLElBQUlJLFNBQVMsV0FBVyxPQUFPLE9BQU9KLFVBQVU7SUFDaEQsT0FBT0EsVUFBVU87QUFDbkI7QUFFQSxNQUFNQyx3QkFBd0IsQ0FBQ0MsTUFBTUM7SUFDbkMsTUFBTUMsU0FBUyxFQUFFO0lBQ2pCLElBQUksQ0FBQ1osU0FBU1UsT0FBTztRQUNuQixPQUFPO1lBQUVHLElBQUk7WUFBT0QsUUFBUTtnQkFBQzthQUF5QjtRQUFDO0lBQ3pEO0lBQ0EsSUFBSSxDQUFDRCxVQUFVLENBQUNBLE9BQU9HLFFBQVEsRUFBRSxPQUFPO1FBQUVELElBQUk7UUFBTUQ7SUFBTztJQUMzRCxNQUFNRSxXQUFXSCxPQUFPRyxRQUFRLElBQUksQ0FBQztJQUNyQ0MsT0FBT0MsT0FBTyxDQUFDRixVQUFVRyxPQUFPLENBQUMsQ0FBQyxDQUFDQyxLQUFLYixLQUFLO1FBQzNDLElBQUksQ0FBRWEsQ0FBQUEsT0FBT1IsSUFBRyxHQUFJO1lBQ2xCRSxPQUFPTyxJQUFJLENBQUMsQ0FBQyxhQUFhLEVBQUVELEtBQUs7WUFDakM7UUFDRjtRQUNBLElBQUliLFFBQVEsQ0FBQ0QsT0FBT00sSUFBSSxDQUFDUSxJQUFJLEVBQUViLE9BQU87WUFDcENPLE9BQU9PLElBQUksQ0FBQyxDQUFDLGlCQUFpQixFQUFFRCxJQUFJLFdBQVcsRUFBRWIsTUFBTTtRQUN6RDtJQUNGO0lBQ0EsT0FBTztRQUFFUSxJQUFJRCxPQUFPUSxNQUFNLEtBQUs7UUFBR1I7SUFBTztBQUMzQztBQUVBUyxPQUFPQyxPQUFPLEdBQUc7SUFBRWI7QUFBc0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hYnV6YWRhL0Rlc2t0b3AvYWdlbnRPUy91dGlscy92YWxpZGF0ZUFnZW50UmVzcG9uc2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaXNPYmplY3QgPSAodmFsdWUpID0+IHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG5cbmNvbnN0IGlzVHlwZSA9ICh2YWx1ZSwgdHlwZSkgPT4ge1xuICBpZiAodHlwZSA9PT0gXCJhcnJheVwiKSByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG4gIGlmICh0eXBlID09PSBcIm9iamVjdFwiKSByZXR1cm4gaXNPYmplY3QodmFsdWUpO1xuICBpZiAodHlwZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIjtcbiAgaWYgKHR5cGUgPT09IFwibnVtYmVyXCIpIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgTnVtYmVyLmlzRmluaXRlKHZhbHVlKTtcbiAgaWYgKHR5cGUgPT09IFwiYm9vbGVhblwiKSByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIjtcbiAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59O1xuXG5jb25zdCB2YWxpZGF0ZUFnZW50UmVzcG9uc2UgPSAoZGF0YSwgc2NoZW1hKSA9PiB7XG4gIGNvbnN0IGVycm9ycyA9IFtdO1xuICBpZiAoIWlzT2JqZWN0KGRhdGEpKSB7XG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBlcnJvcnM6IFtcImRhdGEgbXVzdCBiZSBhbiBvYmplY3RcIl0gfTtcbiAgfVxuICBpZiAoIXNjaGVtYSB8fCAhc2NoZW1hLnJlcXVpcmVkKSByZXR1cm4geyBvazogdHJ1ZSwgZXJyb3JzIH07XG4gIGNvbnN0IHJlcXVpcmVkID0gc2NoZW1hLnJlcXVpcmVkIHx8IHt9O1xuICBPYmplY3QuZW50cmllcyhyZXF1aXJlZCkuZm9yRWFjaCgoW2tleSwgdHlwZV0pID0+IHtcbiAgICBpZiAoIShrZXkgaW4gZGF0YSkpIHtcbiAgICAgIGVycm9ycy5wdXNoKGBtaXNzaW5nIGtleTogJHtrZXl9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlICYmICFpc1R5cGUoZGF0YVtrZXldLCB0eXBlKSkge1xuICAgICAgZXJyb3JzLnB1c2goYGludmFsaWQgdHlwZSBmb3IgJHtrZXl9OiBleHBlY3RlZCAke3R5cGV9YCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHsgb2s6IGVycm9ycy5sZW5ndGggPT09IDAsIGVycm9ycyB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IHZhbGlkYXRlQWdlbnRSZXNwb25zZSB9O1xuIl0sIm5hbWVzIjpbImlzT2JqZWN0IiwidmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJpc1R5cGUiLCJ0eXBlIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJ1bmRlZmluZWQiLCJ2YWxpZGF0ZUFnZW50UmVzcG9uc2UiLCJkYXRhIiwic2NoZW1hIiwiZXJyb3JzIiwib2siLCJyZXF1aXJlZCIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwicHVzaCIsImxlbmd0aCIsIm1vZHVsZSIsImV4cG9ydHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./utils/validateAgentResponse.js\n");

/***/ })

};
;