"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_lib_agents_pavel_js";
exports.ids = ["_rsc_lib_agents_pavel_js"];
exports.modules = {

/***/ "(rsc)/./lib/agents/pavel.js":
/*!*****************************!*\
  !*** ./lib/agents/pavel.js ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { wrapAgentOutput, unwrapLegacy } = __webpack_require__(/*! ../../utils/agentEnvelope.js */ \"(rsc)/./utils/agentEnvelope.js\");\nconst { wordLimitCompress } = __webpack_require__(/*! ../../utils/wordLimitCompress.js */ \"(rsc)/./utils/wordLimitCompress.js\");\nconst { compressPreserveShape } = __webpack_require__(/*! ../../utils/compressPreserveShape.js */ \"(rsc)/./utils/compressPreserveShape.js\");\nconst { applyBudget, applyBudgetMeta } = __webpack_require__(/*! ../../utils/budget.js */ \"(rsc)/./utils/budget.js\");\nconst inputDefaults = {\n    mode: \"deep\",\n    platform: \"mixed\",\n    niche: \"\",\n    goal: \"leads\",\n    audience: {\n        geo: \"RU\",\n        persona: \"\",\n        temperature: \"cold\"\n    },\n    input_content: {\n        transcript: \"\",\n        outline: \"\",\n        timestamps: [],\n        caption: \"\",\n        on_screen_text: \"\",\n        comments_sample: []\n    },\n    constraints: {\n        max_words: 350,\n        be_brutally_honest: true\n    },\n    language: \"ru\"\n};\nconst inputSchema = {\n    type: \"object\",\n    additionalProperties: false,\n    properties: {\n        mode: {\n            type: \"string\",\n            enum: [\n                \"quick\",\n                \"deep\"\n            ],\n            default: \"deep\"\n        },\n        platform: {\n            type: \"string\",\n            enum: [\n                \"instagram_reels\",\n                \"vk_clips\",\n                \"youtube_shorts\",\n                \"rutube_shorts\",\n                \"mixed\"\n            ],\n            default: \"mixed\"\n        },\n        niche: {\n            type: \"string\"\n        },\n        goal: {\n            type: \"string\",\n            enum: [\n                \"leads\",\n                \"views\",\n                \"followers\"\n            ],\n            default: \"leads\"\n        },\n        audience: {\n            type: \"object\",\n            properties: {\n                geo: {\n                    type: \"string\",\n                    enum: [\n                        \"RU\"\n                    ],\n                    default: \"RU\"\n                },\n                persona: {\n                    type: \"string\"\n                },\n                temperature: {\n                    type: \"string\",\n                    enum: [\n                        \"cold\",\n                        \"warm\"\n                    ],\n                    default: \"cold\"\n                }\n            }\n        },\n        input_content: {\n            type: \"object\",\n            properties: {\n                transcript: {\n                    type: \"string\"\n                },\n                outline: {\n                    type: \"string\"\n                },\n                timestamps: {\n                    type: \"array\",\n                    items: {\n                        type: \"object\",\n                        properties: {\n                            t_start: {\n                                type: \"string\"\n                            },\n                            t_end: {\n                                type: \"string\"\n                            },\n                            text: {\n                                type: \"string\"\n                            }\n                        }\n                    }\n                },\n                caption: {\n                    type: \"string\"\n                },\n                on_screen_text: {\n                    type: \"string\"\n                },\n                comments_sample: {\n                    type: \"array\",\n                    items: {\n                        type: \"string\"\n                    }\n                }\n            }\n        },\n        constraints: {\n            type: \"object\",\n            properties: {\n                max_words: {\n                    type: \"number\",\n                    default: 350\n                },\n                be_brutally_honest: {\n                    type: \"boolean\",\n                    default: true\n                }\n            }\n        },\n        language: {\n            type: \"string\",\n            enum: [\n                \"ru\"\n            ],\n            default: \"ru\"\n        }\n    },\n    required: [\n        \"mode\"\n    ],\n    default: inputDefaults\n};\nconst outputSchema = {\n    type: \"object\",\n    required: [\n        \"analysis\",\n        \"script_skeleton\",\n        \"improvements\",\n        \"meta\"\n    ],\n    additionalProperties: false,\n    properties: {\n        analysis: {\n            type: \"object\"\n        },\n        script_skeleton: {\n            type: \"object\"\n        },\n        improvements: {\n            type: \"object\"\n        },\n        meta: {\n            type: \"object\"\n        }\n    }\n};\nconst systemPrompt = `Ты — ИИ-агент agentOS: \"Павел — Анализ коротких видео\".\nРоль: разбирать короткие ролики под RU аудиторию без веб-доступа. Работаешь только с тем, что прислал пользователь.`;\nconst pavelAgent = {\n    id: \"pavel-reels-analysis-ru\",\n    displayName: \"Павел — Анализ коротких видео\",\n    description: \"Разбор Reels/Shorts под RU аудиторию: почему зашло/не зашло, скелет ролика и конкретные правки.\",\n    inputSchema,\n    outputSchema,\n    systemPrompt\n};\nconst wrapOutput = (legacyOutput, input)=>wrapAgentOutput({\n        agentId: pavelAgent.id,\n        inputEcho: input,\n        mode: input.mode,\n        legacyOutput\n    });\nconst isNonEmptyString = (value)=>typeof value === \"string\" && value.trim().length > 0;\nconst toStringSafe = (value)=>typeof value === \"string\" ? value.trim() : \"\";\nconst toStringArray = (value)=>Array.isArray(value) ? value.filter((item)=>typeof item === \"string\" && item.trim()).map((item)=>item.trim()) : [];\nconst normalizeInput = (input)=>{\n    const safe = typeof input === \"object\" && input !== null ? input : {};\n    const budget = safe.budget && typeof safe.budget === \"object\" ? safe.budget : null;\n    const mode = safe.mode === \"quick\" ? \"quick\" : \"deep\";\n    const platform = [\n        \"instagram_reels\",\n        \"vk_clips\",\n        \"youtube_shorts\",\n        \"rutube_shorts\",\n        \"mixed\"\n    ].includes(safe.platform) ? safe.platform : \"mixed\";\n    const goal = [\n        \"leads\",\n        \"views\",\n        \"followers\"\n    ].includes(safe.goal) ? safe.goal : \"leads\";\n    const audience = safe.audience && typeof safe.audience === \"object\" ? safe.audience : {};\n    const inputContent = safe.input_content && typeof safe.input_content === \"object\" ? safe.input_content : {};\n    const constraints = safe.constraints && typeof safe.constraints === \"object\" ? safe.constraints : {};\n    const normalized = {\n        mode,\n        platform,\n        niche: isNonEmptyString(safe.niche) ? safe.niche.trim() : \"\",\n        goal,\n        audience: {\n            geo: audience.geo === \"RU\" ? \"RU\" : \"RU\",\n            persona: isNonEmptyString(audience.persona) ? audience.persona.trim() : \"\",\n            temperature: audience.temperature === \"warm\" ? \"warm\" : \"cold\"\n        },\n        input_content: {\n            transcript: toStringSafe(inputContent.transcript),\n            outline: toStringSafe(inputContent.outline),\n            timestamps: Array.isArray(inputContent.timestamps) ? inputContent.timestamps.filter((item)=>item && typeof item === \"object\").map((item)=>({\n                    t_start: toStringSafe(item.t_start),\n                    t_end: toStringSafe(item.t_end),\n                    text: toStringSafe(item.text)\n                })).filter((item)=>item.t_start || item.t_end || item.text) : [],\n            caption: toStringSafe(inputContent.caption),\n            on_screen_text: toStringSafe(inputContent.on_screen_text),\n            comments_sample: toStringArray(inputContent.comments_sample)\n        },\n        constraints: {\n            max_words: typeof constraints.max_words === \"number\" && Number.isFinite(constraints.max_words) ? Math.max(120, Math.round(constraints.max_words)) : 350,\n            be_brutally_honest: constraints.be_brutally_honest !== false\n        },\n        language: safe.language === \"ru\" ? \"ru\" : \"ru\"\n    };\n    const budgetResult = applyBudget(normalized, budget, {\n        maxWordsPath: [\n            \"constraints\",\n            \"max_words\"\n        ]\n    });\n    normalized.budget = budget;\n    normalized.budget_applied = budgetResult.budget_applied;\n    normalized.budget_warnings = budgetResult.warnings;\n    return normalized;\n};\nconst pickGoalLabel = (goal)=>{\n    if (goal === \"views\") return \"просмотры\";\n    if (goal === \"followers\") return \"подписки\";\n    return \"лиды\";\n};\nconst collectText = (inputContent)=>{\n    const parts = [\n        inputContent.transcript,\n        inputContent.outline,\n        ...inputContent.timestamps.map((item)=>item.text),\n        inputContent.caption,\n        inputContent.on_screen_text\n    ].filter((item)=>isNonEmptyString(item));\n    return parts.join(\" \");\n};\nconst countWords = (text)=>{\n    if (!text) return 0;\n    const matches = text.match(/[A-Za-zА-Яа-я0-9]+/g);\n    return matches ? matches.length : 0;\n};\nconst clampScore = (value)=>Math.max(0, Math.min(10, Math.round(value)));\nconst extractFeatures = (input)=>{\n    const content = input.input_content;\n    const transcript = content.transcript;\n    const outline = content.outline;\n    const timestamps = content.timestamps;\n    const caption = content.caption;\n    const onScreenText = content.on_screen_text;\n    const combined = collectText(content);\n    const wordCount = countWords(combined);\n    const firstSource = transcript || outline || (timestamps[0] ? timestamps[0].text : \"\") || caption || onScreenText;\n    const lowerCombined = combined.toLowerCase();\n    const lowerFirst = (firstSource || \"\").toLowerCase();\n    const hasTranscript = isNonEmptyString(transcript);\n    const hasOutline = isNonEmptyString(outline) || timestamps.length > 0;\n    const hasCaption = isNonEmptyString(caption);\n    const hasOnScreenText = isNonEmptyString(onScreenText);\n    const hasNumbers = /\\d/.test(combined);\n    const hasConflict = /(ошибк|боль|проблем|фейл|провал|слив|не работает|дорого|ненавиж|разоблач|обман)/i.test(combined);\n    const hasProof = /(скрин|кейс|доказ|отзыв|клиент|результат|статист|до\\/?после|пруф)/i.test(combined);\n    const hasSpecifics = hasNumbers || /(например|кейс|шаг \\d|пример)/i.test(combined);\n    const hasCta = /(пиши|пишите|в личк|коммент|ссылка в био|подпиш|сохрани|оставь|ставь|слово)/i.test(combined);\n    const directTone = /(без воды|сразу|по делу|короче)/i.test(combined);\n    const greetingIntro = /^(привет|здравствуйте|друзья|всем привет)/i.test((firstSource || \"\").trim());\n    const hasLink = /https?:\\/\\//i.test(combined);\n    const pacingHint = timestamps.length;\n    const pacingFast = pacingHint >= 8 || wordCount >= 110 && wordCount <= 160;\n    const pacingSlow = pacingHint > 0 ? pacingHint < 4 : wordCount < 60;\n    const pacingDense = wordCount > 170;\n    return {\n        combined,\n        wordCount,\n        firstSource: firstSource || \"\",\n        hasTranscript,\n        hasOutline,\n        hasCaption,\n        hasOnScreenText,\n        hasNumbers,\n        hasConflict,\n        hasProof,\n        hasSpecifics,\n        hasCta,\n        directTone,\n        greetingIntro,\n        hasLink,\n        pacingFast,\n        pacingSlow,\n        pacingDense\n    };\n};\nconst detectHookTypes = (features)=>{\n    const text = features.combined.toLowerCase();\n    const types = [];\n    if (/(боль|проблем|теря|слив)/i.test(text) || features.hasConflict) types.push(\"боль\");\n    if (features.hasConflict || /(конфликт|vs|против)/i.test(text)) types.push(\"конфликт\");\n    if (features.hasNumbers) types.push(\"цифра\");\n    if (/(ошибк|не делай|неправильно)/i.test(text)) types.push(\"ошибка\");\n    if (/(мы|они|свои|чужие|все делают)/i.test(text)) types.push(\"свой-чужой\");\n    return Array.from(new Set(types));\n};\nconst detectMissingElements = (features)=>{\n    const missing = [];\n    if (!features.hasConflict) missing.push(\"нет боли/конфликта в начале\");\n    if (!features.hasNumbers) missing.push(\"нет цифры/срока\");\n    if (!features.hasProof) missing.push(\"нет доказательства\");\n    if (!features.hasCta) missing.push(\"нет CTA\");\n    if (!features.hasOnScreenText) missing.push(\"нет on-screen текста\");\n    return missing;\n};\nconst buildOnScreenTextBySecond = (features, input)=>{\n    const timestamps = Array.isArray(input.input_content.timestamps) ? input.input_content.timestamps : [];\n    if (timestamps.length > 0) {\n        return timestamps.slice(0, 8).map((item)=>({\n                second_range: `${item.t_start || \"?\"}-${item.t_end || \"?\"}`,\n                text: trimWords(item.text || \"\", 6)\n            }));\n    }\n    const hook = buildHookText(features, pickGoalLabel(input.goal));\n    return [\n        {\n            second_range: \"0-3\",\n            text: trimWords(hook, 6)\n        },\n        {\n            second_range: \"3-10\",\n            text: \"Проблема и контекст\"\n        },\n        {\n            second_range: \"10-20\",\n            text: features.hasProof ? \"Покажи доказательство\" : \"Покажи экран/скрин/пример\"\n        },\n        {\n            second_range: \"20-30\",\n            text: \"Один CTA в конце\"\n        }\n    ];\n};\nconst trimWords = (text, maxWords)=>{\n    if (!text) return \"\";\n    const words = text.trim().split(/\\s+/);\n    if (words.length <= maxWords) return text.trim();\n    return `${words.slice(0, maxWords).join(\" \")}...`;\n};\nconst buildHookText = (features, goalLabel)=>{\n    if (features.firstSource) {\n        const cleaned = features.firstSource.replace(/^(привет|здравствуйте|друзья|всем привет)[,\\s]*/i, \"\");\n        return trimWords(cleaned, 8);\n    }\n    return `Стоп. 1 ошибка в первые 2 сек = минус ${goalLabel}.`;\n};\nconst buildScores = (features)=>{\n    let hook = 4;\n    if (features.hasConflict) hook += 2;\n    if (features.hasNumbers) hook += 2;\n    if (features.greetingIntro) hook -= 2;\n    if (features.firstSource && countWords(features.firstSource) > 12) hook -= 1;\n    const hooks_score = clampScore(hook);\n    let pacing = 5;\n    if (features.pacingFast) pacing += 3;\n    if (features.pacingSlow) pacing -= 2;\n    if (features.pacingDense) pacing -= 1;\n    const pacing_score = clampScore(pacing);\n    let proof = 3;\n    if (features.hasProof) proof += 4;\n    if (features.hasNumbers) proof += 2;\n    if (!features.hasProof) proof -= 1;\n    const proof_score = clampScore(proof);\n    let cta = 3;\n    if (features.hasCta) cta += 4;\n    if (!features.hasCta) cta -= 1;\n    const cta_score = clampScore(cta);\n    let ruFit = 5;\n    if (features.directTone) ruFit += 2;\n    if (features.hasConflict) ruFit += 1;\n    if (features.greetingIntro) ruFit -= 2;\n    if (features.pacingSlow) ruFit -= 1;\n    const ru_fit_score = clampScore(ruFit);\n    return {\n        hooks_score,\n        pacing_score,\n        proof_score,\n        cta_score,\n        ru_fit_score\n    };\n};\nconst buildWhyWorked = (features, input)=>{\n    const items = [];\n    if (features.hasConflict) items.push(\"Хук с конфликтом/болью.\");\n    if (features.hasNumbers) items.push(\"Есть цифры/сроки — меньше недоверия.\");\n    if (features.hasSpecifics) items.push(\"Есть конкретика, без общих слов.\");\n    if (features.hasProof) items.push(\"Указано доказательство: кейс/скрин/отзыв.\");\n    if (features.hasCta) items.push(\"CTA понятный и короткий.\");\n    if (features.pacingFast) items.push(\"Темп плотный: каждые 1–2 сек новая мысль.\");\n    if (features.hasCaption) items.push(\"Есть подпись, контекст без звука.\");\n    if (features.hasOnScreenText) items.push(\"On-screen текст усиливает смысл.\");\n    if (features.directTone) items.push(\"Прямой тон, без заходов.\");\n    if (items.length < 5 && isNonEmptyString(input.niche)) {\n        items.push(`Тема привязана к нише: ${trimWords(input.niche, 4)}.`);\n    }\n    while(items.length < 5){\n        items.push(\"Сюжет держится на 1 тезисе.\");\n    }\n    return items.slice(0, 9);\n};\nconst buildWhyFailed = (features, soft)=>{\n    const items = [];\n    if (!features.hasConflict) {\n        items.push(soft ? \"Хук можно усилить конфликтом.\" : \"Хук общий, без конфликта.\");\n    }\n    if (features.greetingIntro) {\n        items.push(soft ? \"Лучше убрать приветствие в начале.\" : \"Приветствие съедает 1–2 сек.\");\n    }\n    if (!features.hasNumbers) {\n        items.push(soft ? \"Добавь 1 цифру/срок.\" : \"Нет цифры/срока для доверия.\");\n    }\n    if (!features.hasProof) {\n        items.push(soft ? \"Нужно доказательство: скрин/кейс.\" : \"Нет доказательства: скрин/кейс.\");\n    }\n    if (!features.hasCta) {\n        items.push(soft ? \"Нужен понятный CTA.\" : \"CTA не задан: что делать дальше.\");\n    }\n    if (features.pacingSlow) {\n        items.push(soft ? \"Сократи фразы, ускорь темп.\" : \"Темп медленный: длинные фразы.\");\n    }\n    if (features.pacingDense) {\n        items.push(soft ? \"Упрости, чтобы читалось легче.\" : \"Темп слишком плотный для чтения.\");\n    }\n    return items.slice(0, 7);\n};\nconst buildTopFixes = (features, goalLabel)=>{\n    const fixes = [];\n    if (!features.hasConflict) fixes.push(\"Добавь конфликт в 1-й фразе.\");\n    if (!features.hasNumbers) fixes.push(\"Вставь 1 цифру/срок до 5 сек.\");\n    if (!features.hasProof) fixes.push(\"Покажи доказательство в 15–30 сек.\");\n    if (!features.hasCta) fixes.push(`CTA: \"Коммент 'шаблон'\" или \"в личку\".`);\n    if (features.greetingIntro) fixes.push(\"Убери приветствие, стартуй с сути.\");\n    if (features.pacingSlow) fixes.push(\"Сократи фразы до 6–8 слов.\");\n    while(fixes.length < 3){\n        fixes.push(`Сфокусируйся на 1 цели: ${goalLabel}.`);\n    }\n    return fixes.slice(0, 3);\n};\nconst buildScriptSkeleton = (features, input, goalLabel)=>{\n    const nicheLabel = input.niche ? trimWords(input.niche, 3) : \"вашей нише\";\n    const hookText = buildHookText(features, goalLabel);\n    const issueHook = !features.hasConflict ? \"нет конфликта в 1-й фразе\" : \"слишком длинный заход\";\n    const hookVariants = [\n        `1 ошибка в 2 сек = минус ${goalLabel}.`,\n        `Если ты в ${nicheLabel}, вот почему ролик не заходит.`,\n        `Сразу к делу: ${issueHook}.`\n    ];\n    const valueBeats = [\n        \"Боль/конфликт в 1 фразе.\",\n        \"1 цифра/срок/результат.\",\n        \"Конкретный шаг или пример.\"\n    ];\n    if (features.hasProof) valueBeats.push(\"Подводка к доказательству.\");\n    const proofBeats = [\n        \"Скрин результата/статы.\",\n        \"Фраза клиента или отзыв.\",\n        \"До/после в 1 фразе.\"\n    ];\n    const ctaText = goalLabel === \"просмотры\" ? \"Сохрани и проверь на своём ролике.\" : goalLabel === \"подписки\" ? \"Подпишись за серию коротких разборов.\" : \"В личку слово \\\"разбор\\\" — пришлю шаблон.\";\n    const ctaVariants = [\n        \"Коммент \\\"шаблон\\\" — отправлю чеклист.\",\n        \"В личку слово \\\"разбор\\\" — 1 пример.\",\n        \"Коммент \\\"хочу\\\" — пришлю структуру.\"\n    ];\n    const onScreen = [\n        \"1 ошибка в 2 сек\",\n        \"Минус лиды здесь\",\n        \"Где ролик умирает\",\n        \"Покажи доказательство\",\n        \"CTA = 1 действие\"\n    ];\n    const editingNotes = [\n        \"Смена кадра каждые 1–2 сек.\",\n        \"Первые 2 сек без приветствия.\",\n        \"Крупный план на ключевую фразу.\",\n        \"Паузы короче 0.3 сек.\",\n        \"Текст на экране синхронно речи.\"\n    ];\n    return {\n        hook_0_3s: {\n            text: hookText,\n            variants: hookVariants.slice(0, 3),\n            notes: \"В 1–2 сек: конфликт + цифра.\"\n        },\n        value_3_15s: {\n            beats: valueBeats.slice(0, 6),\n            notes: \"Каждые 1–2 сек новая мысль.\"\n        },\n        proof_15_30s: {\n            beats: proofBeats.slice(0, 4),\n            notes: \"Доказательство коротко и по делу.\"\n        },\n        cta: {\n            text: ctaText,\n            variants: ctaVariants.slice(0, 3),\n            notes: \"Один CTA, без альтернатив.\"\n        },\n        on_screen_text_by_second: buildOnScreenTextBySecond(features, input),\n        on_screen_text_suggestions: onScreen.slice(0, 10),\n        editing_notes: editingNotes.slice(0, 10)\n    };\n};\nconst buildImprovements = (features, input, goalLabel)=>{\n    const hookA = buildHookText(features, goalLabel);\n    const hookB = `Если ты в ${input.niche ? trimWords(input.niche, 3) : \"нише\"}, слушай.`;\n    const proofAction = features.hasProof ? \"Доказательство: покажи уже упомянутый скрин/кейс на экране.\" : \"Доказательство: покажи экран/скрин/пример вместо обещаний.\";\n    const rewriteA = {\n        version: \"A\",\n        lines: [\n            `0–3: ${trimWords(hookA, 8)}.`,\n            \"3–15: Боль + 1 цифра + короткий шаг.\",\n            `15–30: ${proofAction}`,\n            \"CTA: Коммент \\\"шаблон\\\" — отправлю.\"\n        ],\n        proof_action: proofAction\n    };\n    const rewriteB = {\n        version: \"B\",\n        lines: [\n            `0–3: ${trimWords(hookB, 8)}.`,\n            \"3–15: 3 правки: хук, темп, CTA.\",\n            `15–30: ${proofAction}`,\n            \"CTA: В личку слово \\\"разбор\\\".\"\n        ],\n        proof_action: proofAction\n    };\n    const commentBait = [\n        \"Коммент \\\"шаблон\\\"\",\n        \"Коммент \\\"разбор\\\"\",\n        \"Коммент \\\"хочу\\\"\",\n        \"Коммент \\\"пример\\\"\",\n        \"Коммент \\\"чеклист\\\"\"\n    ];\n    const captionVariants = [\n        \"Почему ролики не заходят в RU: 3 правки.\",\n        \"Короткий разбор: хук, темп, доказательство.\",\n        \"1 ошибка в первые 2 сек — исправь сегодня.\"\n    ];\n    const abTests = {\n        hook_variants: [\n            \"1 ошибка в 2 сек.\",\n            \"Минус лиды в начале.\",\n            \"Хук без конфликта — мимо.\",\n            \"RU не терпит длинных вступлений.\",\n            \"Сразу к сути: 3 правки.\"\n        ],\n        cta_variants: [\n            \"Коммент \\\"шаблон\\\"\",\n            \"Коммент \\\"разбор\\\"\",\n            \"В личку \\\"пример\\\"\",\n            \"Ссылка в био\",\n            \"Сохрани на потом\"\n        ]\n    };\n    return {\n        rewrite_options: [\n            rewriteA,\n            rewriteB\n        ],\n        comment_bait: commentBait.slice(0, 10),\n        caption_variants: captionVariants.slice(0, 3),\n        a_b_tests: abTests\n    };\n};\nconst countWordsInObject = (value)=>{\n    if (typeof value === \"string\") return countWords(value);\n    if (Array.isArray(value)) return value.reduce((acc, item)=>acc + countWordsInObject(item), 0);\n    if (value && typeof value === \"object\") {\n        return Object.values(value).reduce((acc, item)=>acc + countWordsInObject(item), 0);\n    }\n    return 0;\n};\nconst countStringsInObject = (value)=>{\n    if (typeof value === \"string\") return 1;\n    if (Array.isArray(value)) return value.reduce((acc, item)=>acc + countStringsInObject(item), 0);\n    if (value && typeof value === \"object\") {\n        return Object.values(value).reduce((acc, item)=>acc + countStringsInObject(item), 0);\n    }\n    return 0;\n};\nconst mapStrings = (value, fn)=>{\n    if (typeof value === \"string\") return fn(value);\n    if (Array.isArray(value)) return value.map((item)=>mapStrings(item, fn));\n    if (value && typeof value === \"object\") {\n        return Object.fromEntries(Object.entries(value).map(([key, val])=>[\n                key,\n                mapStrings(val, fn)\n            ]));\n    }\n    return value;\n};\nconst applyWordLimit = (output, maxWords)=>wordLimitCompress(output, maxWords);\nconst buildMeta = (input, features, withinMaxWords, needsReview, limitations)=>{\n    const inputQuality = features.hasTranscript ? features.wordCount >= 60 ? \"high\" : \"medium\" : features.hasOutline ? \"medium\" : \"low\";\n    const assumptions = [\n        \"Длина ролика до 30 сек.\",\n        \"RU аудитория.\",\n        input.platform !== \"mixed\" ? `Платформа: ${input.platform}.` : \"\"\n    ].filter(Boolean);\n    return {\n        generated_at: new Date().toISOString(),\n        input_quality: inputQuality,\n        needsReview,\n        limitations,\n        assumptions,\n        quality_checks: {\n            within_max_words: withinMaxWords,\n            no_fluff: true\n        }\n    };\n};\nconst buildEmptyOutput = (input)=>{\n    const question = \"Скинь текст ролика (транскрипт) или хотя бы тезисы по секундам.\";\n    const goalLabel = pickGoalLabel(input.goal);\n    const features = extractFeatures(input);\n    const analysis = {\n        why_it_worked: [\n            \"Пока нет текста для оценки.\",\n            \"Нужен хук и структура.\",\n            \"Нужны цифры/сроки.\",\n            \"Нужно доказательство.\",\n            \"Нужен понятный CTA.\"\n        ],\n        why_it_failed: [\n            \"Нет транскрипта/тезисов для анализа.\"\n        ],\n        hooks_score: 0,\n        pacing_score: 0,\n        proof_score: 0,\n        cta_score: 0,\n        ru_fit_score: 0,\n        hook_types_detected: [],\n        missing_elements: [\n            \"нет данных для анализа\"\n        ],\n        top_3_fix_now: [\n            question,\n            \"Добавь таймкоды 0–3/3–15/15–30/CTA.\",\n            `Укажи цель ролика: ${goalLabel}.`\n        ]\n    };\n    const scriptSkeleton = buildScriptSkeleton(features, input, goalLabel);\n    const improvements = buildImprovements(features, input, goalLabel);\n    const baseOutput = {\n        analysis,\n        script_skeleton: scriptSkeleton,\n        improvements,\n        meta: {\n            generated_at: new Date().toISOString(),\n            input_quality: \"low\",\n            needsReview: true,\n            limitations: [\n                question\n            ],\n            assumptions: [\n                \"Длина ролика до 30 сек.\",\n                \"RU аудитория.\"\n            ],\n            quality_checks: {\n                within_max_words: true,\n                no_fluff: true\n            }\n        }\n    };\n    return baseOutput;\n};\nconst generateOutput = async (rawInput = {}, options = {})=>{\n    const input = normalizeInput(rawInput);\n    const features = extractFeatures(input);\n    const goalLabel = pickGoalLabel(input.goal);\n    const softTone = !input.constraints.be_brutally_honest;\n    const hasCoreContent = features.hasTranscript || features.hasOutline;\n    if (!hasCoreContent) {\n        const output = buildEmptyOutput(input);\n        applyBudgetMeta(output.meta, input);\n        return {\n            output: wrapOutput(output, input),\n            effectiveInput: input\n        };\n    }\n    const scores = buildScores(features);\n    const analysis = {\n        why_it_worked: buildWhyWorked(features, input),\n        why_it_failed: buildWhyFailed(features, softTone),\n        hooks_score: scores.hooks_score,\n        pacing_score: scores.pacing_score,\n        proof_score: scores.proof_score,\n        cta_score: scores.cta_score,\n        ru_fit_score: scores.ru_fit_score,\n        hook_types_detected: detectHookTypes(features),\n        missing_elements: detectMissingElements(features),\n        top_3_fix_now: buildTopFixes(features, goalLabel)\n    };\n    const scriptSkeleton = buildScriptSkeleton(features, input, goalLabel);\n    const improvements = buildImprovements(features, input, goalLabel);\n    const limitations = [];\n    if (!features.hasTranscript) limitations.push(\"Нет транскрипта: анализ по тезисам/описанию.\");\n    if (!features.hasOutline && !features.hasTranscript) {\n        limitations.push(\"Нет тезисов по секундам.\");\n    }\n    if (features.hasLink && !features.hasTranscript && !features.hasOutline) {\n        limitations.push(\"Ссылка без транскрипта: пришли текст.\");\n    }\n    const baseOutput = {\n        analysis,\n        script_skeleton: scriptSkeleton,\n        improvements,\n        meta: buildMeta(input, features, true, features.wordCount < 30, limitations)\n    };\n    const preserveResult = compressPreserveShape(baseOutput, {\n        max_words: input.constraints.max_words,\n        priorities: {\n            secondary_fields: [\n                \"analysis.notes\",\n                \"analysis.why_ru\"\n            ],\n            array_minimums: {\n                \"analysis.top_3_fix_now\": 3,\n                \"script_skeleton.on_screen_text_by_second\": 3,\n                \"improvements.rewrite_options\": 2\n            }\n        }\n    });\n    const limitResult = preserveResult.within ? {\n        output: preserveResult.output,\n        within: true\n    } : applyWordLimit(preserveResult.output, input.constraints.max_words);\n    const withinMaxWords = limitResult.within;\n    const output = {\n        ...limitResult.output,\n        meta: buildMeta(input, features, withinMaxWords, limitResult.output.meta?.needsReview ?? false, limitResult.output.meta?.limitations ?? limitations)\n    };\n    if (!withinMaxWords) {\n        output.meta.limitations = Array.isArray(output.meta.limitations) ? [\n            ...output.meta.limitations,\n            \"Сжатый ответ: превышен лимит слов.\"\n        ] : [\n            \"Сжатый ответ: превышен лимит слов.\"\n        ];\n    }\n    if (preserveResult.compressed_heavily) {\n        output.meta.limitations = Array.isArray(output.meta.limitations) ? [\n            ...output.meta.limitations,\n            \"compressed_heavily\"\n        ] : [\n            \"compressed_heavily\"\n        ];\n    }\n    applyBudgetMeta(output.meta, input);\n    return {\n        output: wrapOutput(output, input),\n        effectiveInput: input\n    };\n};\nconst generatePavelOutput = async (input = {}, options = {})=>{\n    const result = await generateOutput(input, options);\n    return result.output;\n};\nconst validatePavelOutput = (payload)=>{\n    const errors = [];\n    const legacy = unwrapLegacy(payload);\n    if (!legacy || typeof legacy !== \"object\") {\n        return {\n            valid: false,\n            errors: [\n                \"Output must be an object.\"\n            ]\n        };\n    }\n    payload = legacy;\n    if (!payload.analysis) errors.push(\"analysis required\");\n    if (!payload.script_skeleton) errors.push(\"script_skeleton required\");\n    if (!payload.improvements) errors.push(\"improvements required\");\n    if (!payload.meta) errors.push(\"meta required\");\n    if (!Array.isArray(payload.analysis?.hook_types_detected)) {\n        errors.push(\"analysis.hook_types_detected must be array\");\n    }\n    if (!Array.isArray(payload.script_skeleton?.on_screen_text_by_second)) {\n        errors.push(\"script_skeleton.on_screen_text_by_second must be array\");\n    }\n    return {\n        valid: errors.length === 0,\n        errors\n    };\n};\nmodule.exports = {\n    inputDefaults,\n    inputSchema,\n    outputSchema,\n    systemPrompt,\n    pavelAgent,\n    normalizeInput,\n    generateOutput,\n    generatePavelOutput,\n    validatePavelOutput\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU87WUFBT0YsUUFBUTtnQkFBQzthQUE0QjtRQUFDO0lBQy9EO0lBQ0FELFVBQVVFO0lBQ1YsSUFBSSxDQUFDRixRQUFRM00sUUFBUSxFQUFFNE0sT0FBTzdILElBQUksQ0FBQztJQUNuQyxJQUFJLENBQUM0SCxRQUFRMU0sZUFBZSxFQUFFMk0sT0FBTzdILElBQUksQ0FBQztJQUMxQyxJQUFJLENBQUM0SCxRQUFRek0sWUFBWSxFQUFFME0sT0FBTzdILElBQUksQ0FBQztJQUN2QyxJQUFJLENBQUM0SCxRQUFReE0sSUFBSSxFQUFFeU0sT0FBTzdILElBQUksQ0FBQztJQUMvQixJQUFJLENBQUMzRCxNQUFNQyxPQUFPLENBQUNzTCxRQUFRM00sUUFBUSxFQUFFcUwsc0JBQXNCO1FBQ3pEdUIsT0FBTzdILElBQUksQ0FBQztJQUNkO0lBQ0EsSUFBSSxDQUFDM0QsTUFBTUMsT0FBTyxDQUFDc0wsUUFBUTFNLGVBQWUsRUFBRStILDJCQUEyQjtRQUNyRTRFLE9BQU83SCxJQUFJLENBQUM7SUFDZDtJQUNBLE9BQU87UUFBRStILE9BQU9GLE9BQU8zTCxNQUFNLEtBQUs7UUFBRzJMO0lBQU87QUFDOUM7QUFFQUcsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZoUDtJQUNBb0I7SUFDQVc7SUFDQUs7SUFDQUM7SUFDQW9CO0lBQ0FpSztJQUNBYztJQUNBRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvYWJ1emFkYS9EZXNrdG9wL2FnZW50T1MvbGliL2FnZW50cy9wYXZlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHdyYXBBZ2VudE91dHB1dCwgdW53cmFwTGVnYWN5IH0gPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvYWdlbnRFbnZlbG9wZS5qc1wiKTtcbmNvbnN0IHsgd29yZExpbWl0Q29tcHJlc3MgfSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy93b3JkTGltaXRDb21wcmVzcy5qc1wiKTtcbmNvbnN0IHsgY29tcHJlc3NQcmVzZXJ2ZVNoYXBlIH0gPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvY29tcHJlc3NQcmVzZXJ2ZVNoYXBlLmpzXCIpO1xuY29uc3QgeyBhcHBseUJ1ZGdldCwgYXBwbHlCdWRnZXRNZXRhIH0gPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvYnVkZ2V0LmpzXCIpO1xuXG5jb25zdCBpbnB1dERlZmF1bHRzID0ge1xuICBtb2RlOiBcImRlZXBcIixcbiAgcGxhdGZvcm06IFwibWl4ZWRcIixcbiAgbmljaGU6IFwiXCIsXG4gIGdvYWw6IFwibGVhZHNcIixcbiAgYXVkaWVuY2U6IHsgZ2VvOiBcIlJVXCIsIHBlcnNvbmE6IFwiXCIsIHRlbXBlcmF0dXJlOiBcImNvbGRcIiB9LFxuICBpbnB1dF9jb250ZW50OiB7XG4gICAgdHJhbnNjcmlwdDogXCJcIixcbiAgICBvdXRsaW5lOiBcIlwiLFxuICAgIHRpbWVzdGFtcHM6IFtdLFxuICAgIGNhcHRpb246IFwiXCIsXG4gICAgb25fc2NyZWVuX3RleHQ6IFwiXCIsXG4gICAgY29tbWVudHNfc2FtcGxlOiBbXVxuICB9LFxuICBjb25zdHJhaW50czogeyBtYXhfd29yZHM6IDM1MCwgYmVfYnJ1dGFsbHlfaG9uZXN0OiB0cnVlIH0sXG4gIGxhbmd1YWdlOiBcInJ1XCJcbn07XG5cbmNvbnN0IGlucHV0U2NoZW1hID0ge1xuICB0eXBlOiBcIm9iamVjdFwiLFxuICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG4gIHByb3BlcnRpZXM6IHtcbiAgICBtb2RlOiB7IHR5cGU6IFwic3RyaW5nXCIsIGVudW06IFtcInF1aWNrXCIsIFwiZGVlcFwiXSwgZGVmYXVsdDogXCJkZWVwXCIgfSxcbiAgICBwbGF0Zm9ybToge1xuICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgIGVudW06IFtcbiAgICAgICAgXCJpbnN0YWdyYW1fcmVlbHNcIixcbiAgICAgICAgXCJ2a19jbGlwc1wiLFxuICAgICAgICBcInlvdXR1YmVfc2hvcnRzXCIsXG4gICAgICAgIFwicnV0dWJlX3Nob3J0c1wiLFxuICAgICAgICBcIm1peGVkXCJcbiAgICAgIF0sXG4gICAgICBkZWZhdWx0OiBcIm1peGVkXCJcbiAgICB9LFxuICAgIG5pY2hlOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcbiAgICBnb2FsOiB7XG4gICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgZW51bTogW1wibGVhZHNcIiwgXCJ2aWV3c1wiLCBcImZvbGxvd2Vyc1wiXSxcbiAgICAgIGRlZmF1bHQ6IFwibGVhZHNcIlxuICAgIH0sXG4gICAgYXVkaWVuY2U6IHtcbiAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGdlbzogeyB0eXBlOiBcInN0cmluZ1wiLCBlbnVtOiBbXCJSVVwiXSwgZGVmYXVsdDogXCJSVVwiIH0sXG4gICAgICAgIHBlcnNvbmE6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuICAgICAgICB0ZW1wZXJhdHVyZTogeyB0eXBlOiBcInN0cmluZ1wiLCBlbnVtOiBbXCJjb2xkXCIsIFwid2FybVwiXSwgZGVmYXVsdDogXCJjb2xkXCIgfVxuICAgICAgfVxuICAgIH0sXG4gICAgaW5wdXRfY29udGVudDoge1xuICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgdHJhbnNjcmlwdDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG4gICAgICAgIG91dGxpbmU6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuICAgICAgICB0aW1lc3RhbXBzOiB7XG4gICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgIGl0ZW1zOiB7XG4gICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICB0X3N0YXJ0OiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcbiAgICAgICAgICAgICAgdF9lbmQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuICAgICAgICAgICAgICB0ZXh0OiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2FwdGlvbjogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG4gICAgICAgIG9uX3NjcmVlbl90ZXh0OiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcbiAgICAgICAgY29tbWVudHNfc2FtcGxlOiB7IHR5cGU6IFwiYXJyYXlcIiwgaXRlbXM6IHsgdHlwZTogXCJzdHJpbmdcIiB9IH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbnN0cmFpbnRzOiB7XG4gICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBtYXhfd29yZHM6IHsgdHlwZTogXCJudW1iZXJcIiwgZGVmYXVsdDogMzUwIH0sXG4gICAgICAgIGJlX2JydXRhbGx5X2hvbmVzdDogeyB0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogdHJ1ZSB9XG4gICAgICB9XG4gICAgfSxcbiAgICBsYW5ndWFnZTogeyB0eXBlOiBcInN0cmluZ1wiLCBlbnVtOiBbXCJydVwiXSwgZGVmYXVsdDogXCJydVwiIH1cbiAgfSxcbiAgcmVxdWlyZWQ6IFtcIm1vZGVcIl0sXG4gIGRlZmF1bHQ6IGlucHV0RGVmYXVsdHNcbn07XG5cbmNvbnN0IG91dHB1dFNjaGVtYSA9IHtcbiAgdHlwZTogXCJvYmplY3RcIixcbiAgcmVxdWlyZWQ6IFtcImFuYWx5c2lzXCIsIFwic2NyaXB0X3NrZWxldG9uXCIsIFwiaW1wcm92ZW1lbnRzXCIsIFwibWV0YVwiXSxcbiAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICBwcm9wZXJ0aWVzOiB7XG4gICAgYW5hbHlzaXM6IHsgdHlwZTogXCJvYmplY3RcIiB9LFxuICAgIHNjcmlwdF9za2VsZXRvbjogeyB0eXBlOiBcIm9iamVjdFwiIH0sXG4gICAgaW1wcm92ZW1lbnRzOiB7IHR5cGU6IFwib2JqZWN0XCIgfSxcbiAgICBtZXRhOiB7IHR5cGU6IFwib2JqZWN0XCIgfVxuICB9XG59O1xuXG5jb25zdCBzeXN0ZW1Qcm9tcHQgPSBg0KLRiyDigJQg0JjQmC3QsNCz0LXQvdGCIGFnZW50T1M6IFwi0J/QsNCy0LXQuyDigJQg0JDQvdCw0LvQuNC3INC60L7RgNC+0YLQutC40YUg0LLQuNC00LXQvlwiLlxu0KDQvtC70Yw6INGA0LDQt9Cx0LjRgNCw0YLRjCDQutC+0YDQvtGC0LrQuNC1INGA0L7Qu9C40LrQuCDQv9C+0LQgUlUg0LDRg9C00LjRgtC+0YDQuNGOINCx0LXQtyDQstC10LEt0LTQvtGB0YLRg9C/0LAuINCg0LDQsdC+0YLQsNC10YjRjCDRgtC+0LvRjNC60L4g0YEg0YLQtdC8LCDRh9GC0L4g0L/RgNC40YHQu9Cw0Lsg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMLmA7XG5cbmNvbnN0IHBhdmVsQWdlbnQgPSB7XG4gIGlkOiBcInBhdmVsLXJlZWxzLWFuYWx5c2lzLXJ1XCIsXG4gIGRpc3BsYXlOYW1lOiBcItCf0LDQstC10Lsg4oCUINCQ0L3QsNC70LjQtyDQutC+0YDQvtGC0LrQuNGFINCy0LjQtNC10L5cIixcbiAgZGVzY3JpcHRpb246XG4gICAgXCLQoNCw0LfQsdC+0YAgUmVlbHMvU2hvcnRzINC/0L7QtCBSVSDQsNGD0LTQuNGC0L7RgNC40Y46INC/0L7Rh9C10LzRgyDQt9Cw0YjQu9C+L9C90LUg0LfQsNGI0LvQviwg0YHQutC10LvQtdGCINGA0L7Qu9C40LrQsCDQuCDQutC+0L3QutGA0LXRgtC90YvQtSDQv9GA0LDQstC60LguXCIsXG4gIGlucHV0U2NoZW1hLFxuICBvdXRwdXRTY2hlbWEsXG4gIHN5c3RlbVByb21wdFxufTtcblxuY29uc3Qgd3JhcE91dHB1dCA9IChsZWdhY3lPdXRwdXQsIGlucHV0KSA9PlxuICB3cmFwQWdlbnRPdXRwdXQoe1xuICAgIGFnZW50SWQ6IHBhdmVsQWdlbnQuaWQsXG4gICAgaW5wdXRFY2hvOiBpbnB1dCxcbiAgICBtb2RlOiBpbnB1dC5tb2RlLFxuICAgIGxlZ2FjeU91dHB1dFxuICB9KTtcblxuY29uc3QgaXNOb25FbXB0eVN0cmluZyA9ICh2YWx1ZSkgPT4gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLnRyaW0oKS5sZW5ndGggPiAwO1xuXG5jb25zdCB0b1N0cmluZ1NhZmUgPSAodmFsdWUpID0+ICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZS50cmltKCkgOiBcIlwiKTtcblxuY29uc3QgdG9TdHJpbmdBcnJheSA9ICh2YWx1ZSkgPT5cbiAgQXJyYXkuaXNBcnJheSh2YWx1ZSlcbiAgICA/IHZhbHVlLmZpbHRlcigoaXRlbSkgPT4gdHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIgJiYgaXRlbS50cmltKCkpLm1hcCgoaXRlbSkgPT4gaXRlbS50cmltKCkpXG4gICAgOiBbXTtcblxuY29uc3Qgbm9ybWFsaXplSW5wdXQgPSAoaW5wdXQpID0+IHtcbiAgY29uc3Qgc2FmZSA9IHR5cGVvZiBpbnB1dCA9PT0gXCJvYmplY3RcIiAmJiBpbnB1dCAhPT0gbnVsbCA/IGlucHV0IDoge307XG4gIGNvbnN0IGJ1ZGdldCA9IHNhZmUuYnVkZ2V0ICYmIHR5cGVvZiBzYWZlLmJ1ZGdldCA9PT0gXCJvYmplY3RcIiA/IHNhZmUuYnVkZ2V0IDogbnVsbDtcbiAgY29uc3QgbW9kZSA9IHNhZmUubW9kZSA9PT0gXCJxdWlja1wiID8gXCJxdWlja1wiIDogXCJkZWVwXCI7XG4gIGNvbnN0IHBsYXRmb3JtID0gW1xuICAgIFwiaW5zdGFncmFtX3JlZWxzXCIsXG4gICAgXCJ2a19jbGlwc1wiLFxuICAgIFwieW91dHViZV9zaG9ydHNcIixcbiAgICBcInJ1dHViZV9zaG9ydHNcIixcbiAgICBcIm1peGVkXCJcbiAgXS5pbmNsdWRlcyhzYWZlLnBsYXRmb3JtKVxuICAgID8gc2FmZS5wbGF0Zm9ybVxuICAgIDogXCJtaXhlZFwiO1xuICBjb25zdCBnb2FsID0gW1wibGVhZHNcIiwgXCJ2aWV3c1wiLCBcImZvbGxvd2Vyc1wiXS5pbmNsdWRlcyhzYWZlLmdvYWwpXG4gICAgPyBzYWZlLmdvYWxcbiAgICA6IFwibGVhZHNcIjtcbiAgY29uc3QgYXVkaWVuY2UgPSBzYWZlLmF1ZGllbmNlICYmIHR5cGVvZiBzYWZlLmF1ZGllbmNlID09PSBcIm9iamVjdFwiID8gc2FmZS5hdWRpZW5jZSA6IHt9O1xuICBjb25zdCBpbnB1dENvbnRlbnQgPSBzYWZlLmlucHV0X2NvbnRlbnQgJiYgdHlwZW9mIHNhZmUuaW5wdXRfY29udGVudCA9PT0gXCJvYmplY3RcIlxuICAgID8gc2FmZS5pbnB1dF9jb250ZW50XG4gICAgOiB7fTtcbiAgY29uc3QgY29uc3RyYWludHMgPSBzYWZlLmNvbnN0cmFpbnRzICYmIHR5cGVvZiBzYWZlLmNvbnN0cmFpbnRzID09PSBcIm9iamVjdFwiXG4gICAgPyBzYWZlLmNvbnN0cmFpbnRzXG4gICAgOiB7fTtcblxuICBjb25zdCBub3JtYWxpemVkID0ge1xuICAgIG1vZGUsXG4gICAgcGxhdGZvcm0sXG4gICAgbmljaGU6IGlzTm9uRW1wdHlTdHJpbmcoc2FmZS5uaWNoZSkgPyBzYWZlLm5pY2hlLnRyaW0oKSA6IFwiXCIsXG4gICAgZ29hbCxcbiAgICBhdWRpZW5jZToge1xuICAgICAgZ2VvOiBhdWRpZW5jZS5nZW8gPT09IFwiUlVcIiA/IFwiUlVcIiA6IFwiUlVcIixcbiAgICAgIHBlcnNvbmE6IGlzTm9uRW1wdHlTdHJpbmcoYXVkaWVuY2UucGVyc29uYSkgPyBhdWRpZW5jZS5wZXJzb25hLnRyaW0oKSA6IFwiXCIsXG4gICAgICB0ZW1wZXJhdHVyZTogYXVkaWVuY2UudGVtcGVyYXR1cmUgPT09IFwid2FybVwiID8gXCJ3YXJtXCIgOiBcImNvbGRcIlxuICAgIH0sXG4gICAgaW5wdXRfY29udGVudDoge1xuICAgICAgdHJhbnNjcmlwdDogdG9TdHJpbmdTYWZlKGlucHV0Q29udGVudC50cmFuc2NyaXB0KSxcbiAgICAgIG91dGxpbmU6IHRvU3RyaW5nU2FmZShpbnB1dENvbnRlbnQub3V0bGluZSksXG4gICAgICB0aW1lc3RhbXBzOiBBcnJheS5pc0FycmF5KGlucHV0Q29udGVudC50aW1lc3RhbXBzKVxuICAgICAgICA/IGlucHV0Q29udGVudC50aW1lc3RhbXBzXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtICYmIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT4gKHtcbiAgICAgICAgICAgICAgdF9zdGFydDogdG9TdHJpbmdTYWZlKGl0ZW0udF9zdGFydCksXG4gICAgICAgICAgICAgIHRfZW5kOiB0b1N0cmluZ1NhZmUoaXRlbS50X2VuZCksXG4gICAgICAgICAgICAgIHRleHQ6IHRvU3RyaW5nU2FmZShpdGVtLnRleHQpXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udF9zdGFydCB8fCBpdGVtLnRfZW5kIHx8IGl0ZW0udGV4dClcbiAgICAgICAgOiBbXSxcbiAgICAgIGNhcHRpb246IHRvU3RyaW5nU2FmZShpbnB1dENvbnRlbnQuY2FwdGlvbiksXG4gICAgICBvbl9zY3JlZW5fdGV4dDogdG9TdHJpbmdTYWZlKGlucHV0Q29udGVudC5vbl9zY3JlZW5fdGV4dCksXG4gICAgICBjb21tZW50c19zYW1wbGU6IHRvU3RyaW5nQXJyYXkoaW5wdXRDb250ZW50LmNvbW1lbnRzX3NhbXBsZSlcbiAgICB9LFxuICAgIGNvbnN0cmFpbnRzOiB7XG4gICAgICBtYXhfd29yZHM6XG4gICAgICAgIHR5cGVvZiBjb25zdHJhaW50cy5tYXhfd29yZHMgPT09IFwibnVtYmVyXCIgJiYgTnVtYmVyLmlzRmluaXRlKGNvbnN0cmFpbnRzLm1heF93b3JkcylcbiAgICAgICAgICA/IE1hdGgubWF4KDEyMCwgTWF0aC5yb3VuZChjb25zdHJhaW50cy5tYXhfd29yZHMpKVxuICAgICAgICAgIDogMzUwLFxuICAgICAgYmVfYnJ1dGFsbHlfaG9uZXN0OiBjb25zdHJhaW50cy5iZV9icnV0YWxseV9ob25lc3QgIT09IGZhbHNlXG4gICAgfSxcbiAgICBsYW5ndWFnZTogc2FmZS5sYW5ndWFnZSA9PT0gXCJydVwiID8gXCJydVwiIDogXCJydVwiXG4gIH07XG5cbiAgY29uc3QgYnVkZ2V0UmVzdWx0ID0gYXBwbHlCdWRnZXQobm9ybWFsaXplZCwgYnVkZ2V0LCB7XG4gICAgbWF4V29yZHNQYXRoOiBbXCJjb25zdHJhaW50c1wiLCBcIm1heF93b3Jkc1wiXVxuICB9KTtcbiAgbm9ybWFsaXplZC5idWRnZXQgPSBidWRnZXQ7XG4gIG5vcm1hbGl6ZWQuYnVkZ2V0X2FwcGxpZWQgPSBidWRnZXRSZXN1bHQuYnVkZ2V0X2FwcGxpZWQ7XG4gIG5vcm1hbGl6ZWQuYnVkZ2V0X3dhcm5pbmdzID0gYnVkZ2V0UmVzdWx0Lndhcm5pbmdzO1xuICByZXR1cm4gbm9ybWFsaXplZDtcbn07XG5cbmNvbnN0IHBpY2tHb2FsTGFiZWwgPSAoZ29hbCkgPT4ge1xuICBpZiAoZ29hbCA9PT0gXCJ2aWV3c1wiKSByZXR1cm4gXCLQv9GA0L7RgdC80L7RgtGA0YtcIjtcbiAgaWYgKGdvYWwgPT09IFwiZm9sbG93ZXJzXCIpIHJldHVybiBcItC/0L7QtNC/0LjRgdC60LhcIjtcbiAgcmV0dXJuIFwi0LvQuNC00YtcIjtcbn07XG5cbmNvbnN0IGNvbGxlY3RUZXh0ID0gKGlucHV0Q29udGVudCkgPT4ge1xuICBjb25zdCBwYXJ0cyA9IFtcbiAgICBpbnB1dENvbnRlbnQudHJhbnNjcmlwdCxcbiAgICBpbnB1dENvbnRlbnQub3V0bGluZSxcbiAgICAuLi5pbnB1dENvbnRlbnQudGltZXN0YW1wcy5tYXAoKGl0ZW0pID0+IGl0ZW0udGV4dCksXG4gICAgaW5wdXRDb250ZW50LmNhcHRpb24sXG4gICAgaW5wdXRDb250ZW50Lm9uX3NjcmVlbl90ZXh0XG4gIF0uZmlsdGVyKChpdGVtKSA9PiBpc05vbkVtcHR5U3RyaW5nKGl0ZW0pKTtcbiAgcmV0dXJuIHBhcnRzLmpvaW4oXCIgXCIpO1xufTtcblxuY29uc3QgY291bnRXb3JkcyA9ICh0ZXh0KSA9PiB7XG4gIGlmICghdGV4dCkgcmV0dXJuIDA7XG4gIGNvbnN0IG1hdGNoZXMgPSB0ZXh0Lm1hdGNoKC9bQS1aYS160JAt0K/QsC3RjzAtOV0rL2cpO1xuICByZXR1cm4gbWF0Y2hlcyA/IG1hdGNoZXMubGVuZ3RoIDogMDtcbn07XG5cbmNvbnN0IGNsYW1wU2NvcmUgPSAodmFsdWUpID0+IE1hdGgubWF4KDAsIE1hdGgubWluKDEwLCBNYXRoLnJvdW5kKHZhbHVlKSkpO1xuXG5jb25zdCBleHRyYWN0RmVhdHVyZXMgPSAoaW5wdXQpID0+IHtcbiAgY29uc3QgY29udGVudCA9IGlucHV0LmlucHV0X2NvbnRlbnQ7XG4gIGNvbnN0IHRyYW5zY3JpcHQgPSBjb250ZW50LnRyYW5zY3JpcHQ7XG4gIGNvbnN0IG91dGxpbmUgPSBjb250ZW50Lm91dGxpbmU7XG4gIGNvbnN0IHRpbWVzdGFtcHMgPSBjb250ZW50LnRpbWVzdGFtcHM7XG4gIGNvbnN0IGNhcHRpb24gPSBjb250ZW50LmNhcHRpb247XG4gIGNvbnN0IG9uU2NyZWVuVGV4dCA9IGNvbnRlbnQub25fc2NyZWVuX3RleHQ7XG4gIGNvbnN0IGNvbWJpbmVkID0gY29sbGVjdFRleHQoY29udGVudCk7XG4gIGNvbnN0IHdvcmRDb3VudCA9IGNvdW50V29yZHMoY29tYmluZWQpO1xuICBjb25zdCBmaXJzdFNvdXJjZSA9XG4gICAgdHJhbnNjcmlwdCB8fCBvdXRsaW5lIHx8ICh0aW1lc3RhbXBzWzBdID8gdGltZXN0YW1wc1swXS50ZXh0IDogXCJcIikgfHwgY2FwdGlvbiB8fCBvblNjcmVlblRleHQ7XG4gIGNvbnN0IGxvd2VyQ29tYmluZWQgPSBjb21iaW5lZC50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBsb3dlckZpcnN0ID0gKGZpcnN0U291cmNlIHx8IFwiXCIpLnRvTG93ZXJDYXNlKCk7XG5cbiAgY29uc3QgaGFzVHJhbnNjcmlwdCA9IGlzTm9uRW1wdHlTdHJpbmcodHJhbnNjcmlwdCk7XG4gIGNvbnN0IGhhc091dGxpbmUgPSBpc05vbkVtcHR5U3RyaW5nKG91dGxpbmUpIHx8IHRpbWVzdGFtcHMubGVuZ3RoID4gMDtcbiAgY29uc3QgaGFzQ2FwdGlvbiA9IGlzTm9uRW1wdHlTdHJpbmcoY2FwdGlvbik7XG4gIGNvbnN0IGhhc09uU2NyZWVuVGV4dCA9IGlzTm9uRW1wdHlTdHJpbmcob25TY3JlZW5UZXh0KTtcblxuICBjb25zdCBoYXNOdW1iZXJzID0gL1xcZC8udGVzdChjb21iaW5lZCk7XG4gIGNvbnN0IGhhc0NvbmZsaWN0ID0gLyjQvtGI0LjQsdC6fNCx0L7Qu9GMfNC/0YDQvtCx0LvQtdC8fNGE0LXQudC7fNC/0YDQvtCy0LDQu3zRgdC70LjQsnzQvdC1INGA0LDQsdC+0YLQsNC10YJ80LTQvtGA0L7Qs9C+fNC90LXQvdCw0LLQuNC2fNGA0LDQt9C+0LHQu9Cw0Yd80L7QsdC80LDQvSkvaS50ZXN0KFxuICAgIGNvbWJpbmVkXG4gICk7XG4gIGNvbnN0IGhhc1Byb29mID0gLyjRgdC60YDQuNC9fNC60LXQudGBfNC00L7QutCw0Ld80L7RgtC30YvQsnzQutC70LjQtdC90YJ80YDQtdC30YPQu9GM0YLQsNGCfNGB0YLQsNGC0LjRgdGCfNC00L5cXC8/0L/QvtGB0LvQtXzQv9GA0YPRhCkvaS50ZXN0KFxuICAgIGNvbWJpbmVkXG4gICk7XG4gIGNvbnN0IGhhc1NwZWNpZmljcyA9IGhhc051bWJlcnMgfHwgLyjQvdCw0L/RgNC40LzQtdGAfNC60LXQudGBfNGI0LDQsyBcXGR80L/RgNC40LzQtdGAKS9pLnRlc3QoY29tYmluZWQpO1xuICBjb25zdCBoYXNDdGEgPSAvKNC/0LjRiNC4fNC/0LjRiNC40YLQtXzQsiDQu9C40YfQunzQutC+0LzQvNC10L3RgnzRgdGB0YvQu9C60LAg0LIg0LHQuNC+fNC/0L7QtNC/0LjRiHzRgdC+0YXRgNCw0L3QuHzQvtGB0YLQsNCy0Yx80YHRgtCw0LLRjHzRgdC70L7QstC+KS9pLnRlc3QoXG4gICAgY29tYmluZWRcbiAgKTtcbiAgY29uc3QgZGlyZWN0VG9uZSA9IC8o0LHQtdC3INCy0L7QtNGLfNGB0YDQsNC30YN80L/QviDQtNC10LvRg3zQutC+0YDQvtGH0LUpL2kudGVzdChjb21iaW5lZCk7XG4gIGNvbnN0IGdyZWV0aW5nSW50cm8gPSAvXijQv9GA0LjQstC10YJ80LfQtNGA0LDQstGB0YLQstGD0LnRgtC1fNC00YDRg9C30YzRj3zQstGB0LXQvCDQv9GA0LjQstC10YIpL2kudGVzdChcbiAgICAoZmlyc3RTb3VyY2UgfHwgXCJcIikudHJpbSgpXG4gICk7XG4gIGNvbnN0IGhhc0xpbmsgPSAvaHR0cHM/OlxcL1xcLy9pLnRlc3QoY29tYmluZWQpO1xuXG4gIGNvbnN0IHBhY2luZ0hpbnQgPSB0aW1lc3RhbXBzLmxlbmd0aDtcbiAgY29uc3QgcGFjaW5nRmFzdCA9IHBhY2luZ0hpbnQgPj0gOCB8fCAod29yZENvdW50ID49IDExMCAmJiB3b3JkQ291bnQgPD0gMTYwKTtcbiAgY29uc3QgcGFjaW5nU2xvdyA9IHBhY2luZ0hpbnQgPiAwID8gcGFjaW5nSGludCA8IDQgOiB3b3JkQ291bnQgPCA2MDtcbiAgY29uc3QgcGFjaW5nRGVuc2UgPSB3b3JkQ291bnQgPiAxNzA7XG5cbiAgcmV0dXJuIHtcbiAgICBjb21iaW5lZCxcbiAgICB3b3JkQ291bnQsXG4gICAgZmlyc3RTb3VyY2U6IGZpcnN0U291cmNlIHx8IFwiXCIsXG4gICAgaGFzVHJhbnNjcmlwdCxcbiAgICBoYXNPdXRsaW5lLFxuICAgIGhhc0NhcHRpb24sXG4gICAgaGFzT25TY3JlZW5UZXh0LFxuICAgIGhhc051bWJlcnMsXG4gICAgaGFzQ29uZmxpY3QsXG4gICAgaGFzUHJvb2YsXG4gICAgaGFzU3BlY2lmaWNzLFxuICAgIGhhc0N0YSxcbiAgICBkaXJlY3RUb25lLFxuICAgIGdyZWV0aW5nSW50cm8sXG4gICAgaGFzTGluayxcbiAgICBwYWNpbmdGYXN0LFxuICAgIHBhY2luZ1Nsb3csXG4gICAgcGFjaW5nRGVuc2VcbiAgfTtcbn07XG5cbmNvbnN0IGRldGVjdEhvb2tUeXBlcyA9IChmZWF0dXJlcykgPT4ge1xuICBjb25zdCB0ZXh0ID0gZmVhdHVyZXMuY29tYmluZWQudG9Mb3dlckNhc2UoKTtcbiAgY29uc3QgdHlwZXMgPSBbXTtcbiAgaWYgKC8o0LHQvtC70Yx80L/RgNC+0LHQu9C10Lx80YLQtdGA0Y980YHQu9C40LIpL2kudGVzdCh0ZXh0KSB8fCBmZWF0dXJlcy5oYXNDb25mbGljdCkgdHlwZXMucHVzaChcItCx0L7Qu9GMXCIpO1xuICBpZiAoZmVhdHVyZXMuaGFzQ29uZmxpY3QgfHwgLyjQutC+0L3RhNC70LjQutGCfHZzfNC/0YDQvtGC0LjQsikvaS50ZXN0KHRleHQpKSB0eXBlcy5wdXNoKFwi0LrQvtC90YTQu9C40LrRglwiKTtcbiAgaWYgKGZlYXR1cmVzLmhhc051bWJlcnMpIHR5cGVzLnB1c2goXCLRhtC40YTRgNCwXCIpO1xuICBpZiAoLyjQvtGI0LjQsdC6fNC90LUg0LTQtdC70LDQuXzQvdC10L/RgNCw0LLQuNC70YzQvdC+KS9pLnRlc3QodGV4dCkpIHR5cGVzLnB1c2goXCLQvtGI0LjQsdC60LBcIik7XG4gIGlmICgvKNC80Yt80L7QvdC4fNGB0LLQvtC4fNGH0YPQttC40LV80LLRgdC1INC00LXQu9Cw0Y7RgikvaS50ZXN0KHRleHQpKSB0eXBlcy5wdXNoKFwi0YHQstC+0Lkt0YfRg9C20L7QuVwiKTtcbiAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldCh0eXBlcykpO1xufTtcblxuY29uc3QgZGV0ZWN0TWlzc2luZ0VsZW1lbnRzID0gKGZlYXR1cmVzKSA9PiB7XG4gIGNvbnN0IG1pc3NpbmcgPSBbXTtcbiAgaWYgKCFmZWF0dXJlcy5oYXNDb25mbGljdCkgbWlzc2luZy5wdXNoKFwi0L3QtdGCINCx0L7Qu9C4L9C60L7QvdGE0LvQuNC60YLQsCDQsiDQvdCw0YfQsNC70LVcIik7XG4gIGlmICghZmVhdHVyZXMuaGFzTnVtYmVycykgbWlzc2luZy5wdXNoKFwi0L3QtdGCINGG0LjRhNGA0Ysv0YHRgNC+0LrQsFwiKTtcbiAgaWYgKCFmZWF0dXJlcy5oYXNQcm9vZikgbWlzc2luZy5wdXNoKFwi0L3QtdGCINC00L7QutCw0LfQsNGC0LXQu9GM0YHRgtCy0LBcIik7XG4gIGlmICghZmVhdHVyZXMuaGFzQ3RhKSBtaXNzaW5nLnB1c2goXCLQvdC10YIgQ1RBXCIpO1xuICBpZiAoIWZlYXR1cmVzLmhhc09uU2NyZWVuVGV4dCkgbWlzc2luZy5wdXNoKFwi0L3QtdGCIG9uLXNjcmVlbiDRgtC10LrRgdGC0LBcIik7XG4gIHJldHVybiBtaXNzaW5nO1xufTtcblxuY29uc3QgYnVpbGRPblNjcmVlblRleHRCeVNlY29uZCA9IChmZWF0dXJlcywgaW5wdXQpID0+IHtcbiAgY29uc3QgdGltZXN0YW1wcyA9IEFycmF5LmlzQXJyYXkoaW5wdXQuaW5wdXRfY29udGVudC50aW1lc3RhbXBzKSA/IGlucHV0LmlucHV0X2NvbnRlbnQudGltZXN0YW1wcyA6IFtdO1xuICBpZiAodGltZXN0YW1wcy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHRpbWVzdGFtcHMuc2xpY2UoMCwgOCkubWFwKChpdGVtKSA9PiAoe1xuICAgICAgc2Vjb25kX3JhbmdlOiBgJHtpdGVtLnRfc3RhcnQgfHwgXCI/XCJ9LSR7aXRlbS50X2VuZCB8fCBcIj9cIn1gLFxuICAgICAgdGV4dDogdHJpbVdvcmRzKGl0ZW0udGV4dCB8fCBcIlwiLCA2KVxuICAgIH0pKTtcbiAgfVxuICBjb25zdCBob29rID0gYnVpbGRIb29rVGV4dChmZWF0dXJlcywgcGlja0dvYWxMYWJlbChpbnB1dC5nb2FsKSk7XG4gIHJldHVybiBbXG4gICAgeyBzZWNvbmRfcmFuZ2U6IFwiMC0zXCIsIHRleHQ6IHRyaW1Xb3Jkcyhob29rLCA2KSB9LFxuICAgIHsgc2Vjb25kX3JhbmdlOiBcIjMtMTBcIiwgdGV4dDogXCLQn9GA0L7QsdC70LXQvNCwINC4INC60L7QvdGC0LXQutGB0YJcIiB9LFxuICAgIHsgc2Vjb25kX3JhbmdlOiBcIjEwLTIwXCIsIHRleHQ6IGZlYXR1cmVzLmhhc1Byb29mID8gXCLQn9C+0LrQsNC20Lgg0LTQvtC60LDQt9Cw0YLQtdC70YzRgdGC0LLQvlwiIDogXCLQn9C+0LrQsNC20Lgg0Y3QutGA0LDQvS/RgdC60YDQuNC9L9C/0YDQuNC80LXRgFwiIH0sXG4gICAgeyBzZWNvbmRfcmFuZ2U6IFwiMjAtMzBcIiwgdGV4dDogXCLQntC00LjQvSBDVEEg0LIg0LrQvtC90YbQtVwiIH1cbiAgXTtcbn07XG5cbmNvbnN0IHRyaW1Xb3JkcyA9ICh0ZXh0LCBtYXhXb3JkcykgPT4ge1xuICBpZiAoIXRleHQpIHJldHVybiBcIlwiO1xuICBjb25zdCB3b3JkcyA9IHRleHQudHJpbSgpLnNwbGl0KC9cXHMrLyk7XG4gIGlmICh3b3Jkcy5sZW5ndGggPD0gbWF4V29yZHMpIHJldHVybiB0ZXh0LnRyaW0oKTtcbiAgcmV0dXJuIGAke3dvcmRzLnNsaWNlKDAsIG1heFdvcmRzKS5qb2luKFwiIFwiKX0uLi5gO1xufTtcblxuY29uc3QgYnVpbGRIb29rVGV4dCA9IChmZWF0dXJlcywgZ29hbExhYmVsKSA9PiB7XG4gIGlmIChmZWF0dXJlcy5maXJzdFNvdXJjZSkge1xuICAgIGNvbnN0IGNsZWFuZWQgPSBmZWF0dXJlcy5maXJzdFNvdXJjZS5yZXBsYWNlKC9eKNC/0YDQuNCy0LXRgnzQt9C00YDQsNCy0YHRgtCy0YPQudGC0LV80LTRgNGD0LfRjNGPfNCy0YHQtdC8INC/0YDQuNCy0LXRgilbLFxcc10qL2ksIFwiXCIpO1xuICAgIHJldHVybiB0cmltV29yZHMoY2xlYW5lZCwgOCk7XG4gIH1cbiAgcmV0dXJuIGDQodGC0L7Qvy4gMSDQvtGI0LjQsdC60LAg0LIg0L/QtdGA0LLRi9C1IDIg0YHQtdC6ID0g0LzQuNC90YPRgSAke2dvYWxMYWJlbH0uYDtcbn07XG5cbmNvbnN0IGJ1aWxkU2NvcmVzID0gKGZlYXR1cmVzKSA9PiB7XG4gIGxldCBob29rID0gNDtcbiAgaWYgKGZlYXR1cmVzLmhhc0NvbmZsaWN0KSBob29rICs9IDI7XG4gIGlmIChmZWF0dXJlcy5oYXNOdW1iZXJzKSBob29rICs9IDI7XG4gIGlmIChmZWF0dXJlcy5ncmVldGluZ0ludHJvKSBob29rIC09IDI7XG4gIGlmIChmZWF0dXJlcy5maXJzdFNvdXJjZSAmJiBjb3VudFdvcmRzKGZlYXR1cmVzLmZpcnN0U291cmNlKSA+IDEyKSBob29rIC09IDE7XG4gIGNvbnN0IGhvb2tzX3Njb3JlID0gY2xhbXBTY29yZShob29rKTtcblxuICBsZXQgcGFjaW5nID0gNTtcbiAgaWYgKGZlYXR1cmVzLnBhY2luZ0Zhc3QpIHBhY2luZyArPSAzO1xuICBpZiAoZmVhdHVyZXMucGFjaW5nU2xvdykgcGFjaW5nIC09IDI7XG4gIGlmIChmZWF0dXJlcy5wYWNpbmdEZW5zZSkgcGFjaW5nIC09IDE7XG4gIGNvbnN0IHBhY2luZ19zY29yZSA9IGNsYW1wU2NvcmUocGFjaW5nKTtcblxuICBsZXQgcHJvb2YgPSAzO1xuICBpZiAoZmVhdHVyZXMuaGFzUHJvb2YpIHByb29mICs9IDQ7XG4gIGlmIChmZWF0dXJlcy5oYXNOdW1iZXJzKSBwcm9vZiArPSAyO1xuICBpZiAoIWZlYXR1cmVzLmhhc1Byb29mKSBwcm9vZiAtPSAxO1xuICBjb25zdCBwcm9vZl9zY29yZSA9IGNsYW1wU2NvcmUocHJvb2YpO1xuXG4gIGxldCBjdGEgPSAzO1xuICBpZiAoZmVhdHVyZXMuaGFzQ3RhKSBjdGEgKz0gNDtcbiAgaWYgKCFmZWF0dXJlcy5oYXNDdGEpIGN0YSAtPSAxO1xuICBjb25zdCBjdGFfc2NvcmUgPSBjbGFtcFNjb3JlKGN0YSk7XG5cbiAgbGV0IHJ1Rml0ID0gNTtcbiAgaWYgKGZlYXR1cmVzLmRpcmVjdFRvbmUpIHJ1Rml0ICs9IDI7XG4gIGlmIChmZWF0dXJlcy5oYXNDb25mbGljdCkgcnVGaXQgKz0gMTtcbiAgaWYgKGZlYXR1cmVzLmdyZWV0aW5nSW50cm8pIHJ1Rml0IC09IDI7XG4gIGlmIChmZWF0dXJlcy5wYWNpbmdTbG93KSBydUZpdCAtPSAxO1xuICBjb25zdCBydV9maXRfc2NvcmUgPSBjbGFtcFNjb3JlKHJ1Rml0KTtcblxuICByZXR1cm4geyBob29rc19zY29yZSwgcGFjaW5nX3Njb3JlLCBwcm9vZl9zY29yZSwgY3RhX3Njb3JlLCBydV9maXRfc2NvcmUgfTtcbn07XG5cbmNvbnN0IGJ1aWxkV2h5V29ya2VkID0gKGZlYXR1cmVzLCBpbnB1dCkgPT4ge1xuICBjb25zdCBpdGVtcyA9IFtdO1xuICBpZiAoZmVhdHVyZXMuaGFzQ29uZmxpY3QpIGl0ZW1zLnB1c2goXCLQpdGD0Log0YEg0LrQvtC90YTQu9C40LrRgtC+0Lwv0LHQvtC70YzRji5cIik7XG4gIGlmIChmZWF0dXJlcy5oYXNOdW1iZXJzKSBpdGVtcy5wdXNoKFwi0JXRgdGC0Ywg0YbQuNGE0YDRiy/RgdGA0L7QutC4IOKAlCDQvNC10L3RjNGI0LUg0L3QtdC00L7QstC10YDQuNGPLlwiKTtcbiAgaWYgKGZlYXR1cmVzLmhhc1NwZWNpZmljcykgaXRlbXMucHVzaChcItCV0YHRgtGMINC60L7QvdC60YDQtdGC0LjQutCwLCDQsdC10Lcg0L7QsdGJ0LjRhSDRgdC70L7Qsi5cIik7XG4gIGlmIChmZWF0dXJlcy5oYXNQcm9vZikgaXRlbXMucHVzaChcItCj0LrQsNC30LDQvdC+INC00L7QutCw0LfQsNGC0LXQu9GM0YHRgtCy0L46INC60LXQudGBL9GB0LrRgNC40L0v0L7RgtC30YvQsi5cIik7XG4gIGlmIChmZWF0dXJlcy5oYXNDdGEpIGl0ZW1zLnB1c2goXCJDVEEg0L/QvtC90Y/RgtC90YvQuSDQuCDQutC+0YDQvtGC0LrQuNC5LlwiKTtcbiAgaWYgKGZlYXR1cmVzLnBhY2luZ0Zhc3QpIGl0ZW1zLnB1c2goXCLQotC10LzQvyDQv9C70L7RgtC90YvQuTog0LrQsNC20LTRi9C1IDHigJMyINGB0LXQuiDQvdC+0LLQsNGPINC80YvRgdC70YwuXCIpO1xuICBpZiAoZmVhdHVyZXMuaGFzQ2FwdGlvbikgaXRlbXMucHVzaChcItCV0YHRgtGMINC/0L7QtNC/0LjRgdGMLCDQutC+0L3RgtC10LrRgdGCINCx0LXQtyDQt9Cy0YPQutCwLlwiKTtcbiAgaWYgKGZlYXR1cmVzLmhhc09uU2NyZWVuVGV4dCkgaXRlbXMucHVzaChcIk9uLXNjcmVlbiDRgtC10LrRgdGCINGD0YHQuNC70LjQstCw0LXRgiDRgdC80YvRgdC7LlwiKTtcbiAgaWYgKGZlYXR1cmVzLmRpcmVjdFRvbmUpIGl0ZW1zLnB1c2goXCLQn9GA0Y/QvNC+0Lkg0YLQvtC9LCDQsdC10Lcg0LfQsNGF0L7QtNC+0LIuXCIpO1xuXG4gIGlmIChpdGVtcy5sZW5ndGggPCA1ICYmIGlzTm9uRW1wdHlTdHJpbmcoaW5wdXQubmljaGUpKSB7XG4gICAgaXRlbXMucHVzaChg0KLQtdC80LAg0L/RgNC40LLRj9C30LDQvdCwINC6INC90LjRiNC1OiAke3RyaW1Xb3JkcyhpbnB1dC5uaWNoZSwgNCl9LmApO1xuICB9XG5cbiAgd2hpbGUgKGl0ZW1zLmxlbmd0aCA8IDUpIHtcbiAgICBpdGVtcy5wdXNoKFwi0KHRjtC20LXRgiDQtNC10YDQttC40YLRgdGPINC90LAgMSDRgtC10LfQuNGB0LUuXCIpO1xuICB9XG5cbiAgcmV0dXJuIGl0ZW1zLnNsaWNlKDAsIDkpO1xufTtcblxuY29uc3QgYnVpbGRXaHlGYWlsZWQgPSAoZmVhdHVyZXMsIHNvZnQpID0+IHtcbiAgY29uc3QgaXRlbXMgPSBbXTtcbiAgaWYgKCFmZWF0dXJlcy5oYXNDb25mbGljdCkge1xuICAgIGl0ZW1zLnB1c2goc29mdCA/IFwi0KXRg9C6INC80L7QttC90L4g0YPRgdC40LvQuNGC0Ywg0LrQvtC90YTQu9C40LrRgtC+0LwuXCIgOiBcItCl0YPQuiDQvtCx0YnQuNC5LCDQsdC10Lcg0LrQvtC90YTQu9C40LrRgtCwLlwiKTtcbiAgfVxuICBpZiAoZmVhdHVyZXMuZ3JlZXRpbmdJbnRybykge1xuICAgIGl0ZW1zLnB1c2goc29mdCA/IFwi0JvRg9GH0YjQtSDRg9Cx0YDQsNGC0Ywg0L/RgNC40LLQtdGC0YHRgtCy0LjQtSDQsiDQvdCw0YfQsNC70LUuXCIgOiBcItCf0YDQuNCy0LXRgtGB0YLQstC40LUg0YHRitC10LTQsNC10YIgMeKAkzIg0YHQtdC6LlwiKTtcbiAgfVxuICBpZiAoIWZlYXR1cmVzLmhhc051bWJlcnMpIHtcbiAgICBpdGVtcy5wdXNoKHNvZnQgPyBcItCU0L7QsdCw0LLRjCAxINGG0LjRhNGA0YMv0YHRgNC+0LouXCIgOiBcItCd0LXRgiDRhtC40YTRgNGLL9GB0YDQvtC60LAg0LTQu9GPINC00L7QstC10YDQuNGPLlwiKTtcbiAgfVxuICBpZiAoIWZlYXR1cmVzLmhhc1Byb29mKSB7XG4gICAgaXRlbXMucHVzaChzb2Z0ID8gXCLQndGD0LbQvdC+INC00L7QutCw0LfQsNGC0LXQu9GM0YHRgtCy0L46INGB0LrRgNC40L0v0LrQtdC50YEuXCIgOiBcItCd0LXRgiDQtNC+0LrQsNC30LDRgtC10LvRjNGB0YLQstCwOiDRgdC60YDQuNC9L9C60LXQudGBLlwiKTtcbiAgfVxuICBpZiAoIWZlYXR1cmVzLmhhc0N0YSkge1xuICAgIGl0ZW1zLnB1c2goc29mdCA/IFwi0J3Rg9C20LXQvSDQv9C+0L3Rj9GC0L3Ri9C5IENUQS5cIiA6IFwiQ1RBINC90LUg0LfQsNC00LDQvTog0YfRgtC+INC00LXQu9Cw0YLRjCDQtNCw0LvRjNGI0LUuXCIpO1xuICB9XG4gIGlmIChmZWF0dXJlcy5wYWNpbmdTbG93KSB7XG4gICAgaXRlbXMucHVzaChzb2Z0ID8gXCLQodC+0LrRgNCw0YLQuCDRhNGA0LDQt9GLLCDRg9GB0LrQvtGA0Ywg0YLQtdC80L8uXCIgOiBcItCi0LXQvNC/INC80LXQtNC70LXQvdC90YvQuTog0LTQu9C40L3QvdGL0LUg0YTRgNCw0LfRiy5cIik7XG4gIH1cbiAgaWYgKGZlYXR1cmVzLnBhY2luZ0RlbnNlKSB7XG4gICAgaXRlbXMucHVzaChzb2Z0ID8gXCLQo9C/0YDQvtGB0YLQuCwg0YfRgtC+0LHRiyDRh9C40YLQsNC70L7RgdGMINC70LXQs9GH0LUuXCIgOiBcItCi0LXQvNC/INGB0LvQuNGI0LrQvtC8INC/0LvQvtGC0L3Ri9C5INC00LvRjyDRh9GC0LXQvdC40Y8uXCIpO1xuICB9XG4gIHJldHVybiBpdGVtcy5zbGljZSgwLCA3KTtcbn07XG5cbmNvbnN0IGJ1aWxkVG9wRml4ZXMgPSAoZmVhdHVyZXMsIGdvYWxMYWJlbCkgPT4ge1xuICBjb25zdCBmaXhlcyA9IFtdO1xuICBpZiAoIWZlYXR1cmVzLmhhc0NvbmZsaWN0KSBmaXhlcy5wdXNoKFwi0JTQvtCx0LDQstGMINC60L7QvdGE0LvQuNC60YIg0LIgMS3QuSDRhNGA0LDQt9C1LlwiKTtcbiAgaWYgKCFmZWF0dXJlcy5oYXNOdW1iZXJzKSBmaXhlcy5wdXNoKFwi0JLRgdGC0LDQstGMIDEg0YbQuNGE0YDRgy/RgdGA0L7QuiDQtNC+IDUg0YHQtdC6LlwiKTtcbiAgaWYgKCFmZWF0dXJlcy5oYXNQcm9vZikgZml4ZXMucHVzaChcItCf0L7QutCw0LbQuCDQtNC+0LrQsNC30LDRgtC10LvRjNGB0YLQstC+INCyIDE14oCTMzAg0YHQtdC6LlwiKTtcbiAgaWYgKCFmZWF0dXJlcy5oYXNDdGEpIGZpeGVzLnB1c2goYENUQTogXCLQmtC+0LzQvNC10L3RgiAn0YjQsNCx0LvQvtC9J1wiINC40LvQuCBcItCyINC70LjRh9C60YNcIi5gKTtcbiAgaWYgKGZlYXR1cmVzLmdyZWV0aW5nSW50cm8pIGZpeGVzLnB1c2goXCLQo9Cx0LXRgNC4INC/0YDQuNCy0LXRgtGB0YLQstC40LUsINGB0YLQsNGA0YLRg9C5INGBINGB0YPRgtC4LlwiKTtcbiAgaWYgKGZlYXR1cmVzLnBhY2luZ1Nsb3cpIGZpeGVzLnB1c2goXCLQodC+0LrRgNCw0YLQuCDRhNGA0LDQt9GLINC00L4gNuKAkzgg0YHQu9C+0LIuXCIpO1xuICB3aGlsZSAoZml4ZXMubGVuZ3RoIDwgMykge1xuICAgIGZpeGVzLnB1c2goYNCh0YTQvtC60YPRgdC40YDRg9C50YHRjyDQvdCwIDEg0YbQtdC70Lg6ICR7Z29hbExhYmVsfS5gKTtcbiAgfVxuICByZXR1cm4gZml4ZXMuc2xpY2UoMCwgMyk7XG59O1xuXG5jb25zdCBidWlsZFNjcmlwdFNrZWxldG9uID0gKGZlYXR1cmVzLCBpbnB1dCwgZ29hbExhYmVsKSA9PiB7XG4gIGNvbnN0IG5pY2hlTGFiZWwgPSBpbnB1dC5uaWNoZSA/IHRyaW1Xb3JkcyhpbnB1dC5uaWNoZSwgMykgOiBcItCy0LDRiNC10Lkg0L3QuNGI0LVcIjtcbiAgY29uc3QgaG9va1RleHQgPSBidWlsZEhvb2tUZXh0KGZlYXR1cmVzLCBnb2FsTGFiZWwpO1xuICBjb25zdCBpc3N1ZUhvb2sgPSAhZmVhdHVyZXMuaGFzQ29uZmxpY3RcbiAgICA/IFwi0L3QtdGCINC60L7QvdGE0LvQuNC60YLQsCDQsiAxLdC5INGE0YDQsNC30LVcIlxuICAgIDogXCLRgdC70LjRiNC60L7QvCDQtNC70LjQvdC90YvQuSDQt9Cw0YXQvtC0XCI7XG5cbiAgY29uc3QgaG9va1ZhcmlhbnRzID0gW1xuICAgIGAxINC+0YjQuNCx0LrQsCDQsiAyINGB0LXQuiA9INC80LjQvdGD0YEgJHtnb2FsTGFiZWx9LmAsXG4gICAgYNCV0YHQu9C4INGC0Ysg0LIgJHtuaWNoZUxhYmVsfSwg0LLQvtGCINC/0L7Rh9C10LzRgyDRgNC+0LvQuNC6INC90LUg0LfQsNGF0L7QtNC40YIuYCxcbiAgICBg0KHRgNCw0LfRgyDQuiDQtNC10LvRgzogJHtpc3N1ZUhvb2t9LmBcbiAgXTtcblxuICBjb25zdCB2YWx1ZUJlYXRzID0gW1xuICAgIFwi0JHQvtC70Ywv0LrQvtC90YTQu9C40LrRgiDQsiAxINGE0YDQsNC30LUuXCIsXG4gICAgXCIxINGG0LjRhNGA0LAv0YHRgNC+0Lov0YDQtdC30YPQu9GM0YLQsNGCLlwiLFxuICAgIFwi0JrQvtC90LrRgNC10YLQvdGL0Lkg0YjQsNCzINC40LvQuCDQv9GA0LjQvNC10YAuXCJcbiAgXTtcbiAgaWYgKGZlYXR1cmVzLmhhc1Byb29mKSB2YWx1ZUJlYXRzLnB1c2goXCLQn9C+0LTQstC+0LTQutCwINC6INC00L7QutCw0LfQsNGC0LXQu9GM0YHRgtCy0YMuXCIpO1xuXG4gIGNvbnN0IHByb29mQmVhdHMgPSBbXG4gICAgXCLQodC60YDQuNC9INGA0LXQt9GD0LvRjNGC0LDRgtCwL9GB0YLQsNGC0YsuXCIsXG4gICAgXCLQpNGA0LDQt9CwINC60LvQuNC10L3RgtCwINC40LvQuCDQvtGC0LfRi9CyLlwiLFxuICAgIFwi0JTQvi/Qv9C+0YHQu9C1INCyIDEg0YTRgNCw0LfQtS5cIlxuICBdO1xuXG4gIGNvbnN0IGN0YVRleHQgPSBnb2FsTGFiZWwgPT09IFwi0L/RgNC+0YHQvNC+0YLRgNGLXCJcbiAgICA/IFwi0KHQvtGF0YDQsNC90Lgg0Lgg0L/RgNC+0LLQtdGA0Ywg0L3QsCDRgdCy0L7RkdC8INGA0L7Qu9C40LrQtS5cIlxuICAgIDogZ29hbExhYmVsID09PSBcItC/0L7QtNC/0LjRgdC60LhcIlxuICAgICAgPyBcItCf0L7QtNC/0LjRiNC40YHRjCDQt9CwINGB0LXRgNC40Y4g0LrQvtGA0L7RgtC60LjRhSDRgNCw0LfQsdC+0YDQvtCyLlwiXG4gICAgICA6IFwi0JIg0LvQuNGH0LrRgyDRgdC70L7QstC+IFxcXCLRgNCw0LfQsdC+0YBcXFwiIOKAlCDQv9GA0LjRiNC70Y4g0YjQsNCx0LvQvtC9LlwiO1xuXG4gIGNvbnN0IGN0YVZhcmlhbnRzID0gW1xuICAgIFwi0JrQvtC80LzQtdC90YIgXFxcItGI0LDQsdC70L7QvVxcXCIg4oCUINC+0YLQv9GA0LDQstC70Y4g0YfQtdC60LvQuNGB0YIuXCIsXG4gICAgXCLQkiDQu9C40YfQutGDINGB0LvQvtCy0L4gXFxcItGA0LDQt9Cx0L7RgFxcXCIg4oCUIDEg0L/RgNC40LzQtdGALlwiLFxuICAgIFwi0JrQvtC80LzQtdC90YIgXFxcItGF0L7Rh9GDXFxcIiDigJQg0L/RgNC40YjQu9GOINGB0YLRgNGD0LrRgtGD0YDRgy5cIlxuICBdO1xuXG4gIGNvbnN0IG9uU2NyZWVuID0gW1xuICAgIFwiMSDQvtGI0LjQsdC60LAg0LIgMiDRgdC10LpcIixcbiAgICBcItCc0LjQvdGD0YEg0LvQuNC00Ysg0LfQtNC10YHRjFwiLFxuICAgIFwi0JPQtNC1INGA0L7Qu9C40Log0YPQvNC40YDQsNC10YJcIixcbiAgICBcItCf0L7QutCw0LbQuCDQtNC+0LrQsNC30LDRgtC10LvRjNGB0YLQstC+XCIsXG4gICAgXCJDVEEgPSAxINC00LXQudGB0YLQstC40LVcIlxuICBdO1xuXG4gIGNvbnN0IGVkaXRpbmdOb3RlcyA9IFtcbiAgICBcItCh0LzQtdC90LAg0LrQsNC00YDQsCDQutCw0LbQtNGL0LUgMeKAkzIg0YHQtdC6LlwiLFxuICAgIFwi0J/QtdGA0LLRi9C1IDIg0YHQtdC6INCx0LXQtyDQv9GA0LjQstC10YLRgdGC0LLQuNGPLlwiLFxuICAgIFwi0JrRgNGD0L/QvdGL0Lkg0L/Qu9Cw0L0g0L3QsCDQutC70Y7Rh9C10LLRg9GOINGE0YDQsNC30YMuXCIsXG4gICAgXCLQn9Cw0YPQt9GLINC60L7RgNC+0YfQtSAwLjMg0YHQtdC6LlwiLFxuICAgIFwi0KLQtdC60YHRgiDQvdCwINGN0LrRgNCw0L3QtSDRgdC40L3RhdGA0L7QvdC90L4g0YDQtdGH0LguXCJcbiAgXTtcblxuICByZXR1cm4ge1xuICAgIGhvb2tfMF8zczoge1xuICAgICAgdGV4dDogaG9va1RleHQsXG4gICAgICB2YXJpYW50czogaG9va1ZhcmlhbnRzLnNsaWNlKDAsIDMpLFxuICAgICAgbm90ZXM6IFwi0JIgMeKAkzIg0YHQtdC6OiDQutC+0L3RhNC70LjQutGCICsg0YbQuNGE0YDQsC5cIlxuICAgIH0sXG4gICAgdmFsdWVfM18xNXM6IHtcbiAgICAgIGJlYXRzOiB2YWx1ZUJlYXRzLnNsaWNlKDAsIDYpLFxuICAgICAgbm90ZXM6IFwi0JrQsNC20LTRi9C1IDHigJMyINGB0LXQuiDQvdC+0LLQsNGPINC80YvRgdC70YwuXCJcbiAgICB9LFxuICAgIHByb29mXzE1XzMwczoge1xuICAgICAgYmVhdHM6IHByb29mQmVhdHMuc2xpY2UoMCwgNCksXG4gICAgICBub3RlczogXCLQlNC+0LrQsNC30LDRgtC10LvRjNGB0YLQstC+INC60L7RgNC+0YLQutC+INC4INC/0L4g0LTQtdC70YMuXCJcbiAgICB9LFxuICAgIGN0YToge1xuICAgICAgdGV4dDogY3RhVGV4dCxcbiAgICAgIHZhcmlhbnRzOiBjdGFWYXJpYW50cy5zbGljZSgwLCAzKSxcbiAgICAgIG5vdGVzOiBcItCe0LTQuNC9IENUQSwg0LHQtdC3INCw0LvRjNGC0LXRgNC90LDRgtC40LIuXCJcbiAgICB9LFxuICAgIG9uX3NjcmVlbl90ZXh0X2J5X3NlY29uZDogYnVpbGRPblNjcmVlblRleHRCeVNlY29uZChmZWF0dXJlcywgaW5wdXQpLFxuICAgIG9uX3NjcmVlbl90ZXh0X3N1Z2dlc3Rpb25zOiBvblNjcmVlbi5zbGljZSgwLCAxMCksXG4gICAgZWRpdGluZ19ub3RlczogZWRpdGluZ05vdGVzLnNsaWNlKDAsIDEwKVxuICB9O1xufTtcblxuY29uc3QgYnVpbGRJbXByb3ZlbWVudHMgPSAoZmVhdHVyZXMsIGlucHV0LCBnb2FsTGFiZWwpID0+IHtcbiAgY29uc3QgaG9va0EgPSBidWlsZEhvb2tUZXh0KGZlYXR1cmVzLCBnb2FsTGFiZWwpO1xuICBjb25zdCBob29rQiA9IGDQldGB0LvQuCDRgtGLINCyICR7aW5wdXQubmljaGUgPyB0cmltV29yZHMoaW5wdXQubmljaGUsIDMpIDogXCLQvdC40YjQtVwifSwg0YHQu9GD0YjQsNC5LmA7XG4gIGNvbnN0IHByb29mQWN0aW9uID0gZmVhdHVyZXMuaGFzUHJvb2ZcbiAgICA/IFwi0JTQvtC60LDQt9Cw0YLQtdC70YzRgdGC0LLQvjog0L/QvtC60LDQttC4INGD0LbQtSDRg9C/0L7QvNGP0L3Rg9GC0YvQuSDRgdC60YDQuNC9L9C60LXQudGBINC90LAg0Y3QutGA0LDQvdC1LlwiXG4gICAgOiBcItCU0L7QutCw0LfQsNGC0LXQu9GM0YHRgtCy0L46INC/0L7QutCw0LbQuCDRjdC60YDQsNC9L9GB0LrRgNC40L0v0L/RgNC40LzQtdGAINCy0LzQtdGB0YLQviDQvtCx0LXRidCw0L3QuNC5LlwiO1xuXG4gIGNvbnN0IHJld3JpdGVBID0ge1xuICAgIHZlcnNpb246IFwiQVwiLFxuICAgIGxpbmVzOiBbXG4gICAgICBgMOKAkzM6ICR7dHJpbVdvcmRzKGhvb2tBLCA4KX0uYCxcbiAgICAgIFwiM+KAkzE1OiDQkdC+0LvRjCArIDEg0YbQuNGE0YDQsCArINC60L7RgNC+0YLQutC40Lkg0YjQsNCzLlwiLFxuICAgICAgYDE14oCTMzA6ICR7cHJvb2ZBY3Rpb259YCxcbiAgICAgIFwiQ1RBOiDQmtC+0LzQvNC10L3RgiBcXFwi0YjQsNCx0LvQvtC9XFxcIiDigJQg0L7RgtC/0YDQsNCy0LvRji5cIlxuICAgIF0sXG4gICAgcHJvb2ZfYWN0aW9uOiBwcm9vZkFjdGlvblxuICB9O1xuXG4gIGNvbnN0IHJld3JpdGVCID0ge1xuICAgIHZlcnNpb246IFwiQlwiLFxuICAgIGxpbmVzOiBbXG4gICAgICBgMOKAkzM6ICR7dHJpbVdvcmRzKGhvb2tCLCA4KX0uYCxcbiAgICAgIFwiM+KAkzE1OiAzINC/0YDQsNCy0LrQuDog0YXRg9C6LCDRgtC10LzQvywgQ1RBLlwiLFxuICAgICAgYDE14oCTMzA6ICR7cHJvb2ZBY3Rpb259YCxcbiAgICAgIFwiQ1RBOiDQkiDQu9C40YfQutGDINGB0LvQvtCy0L4gXFxcItGA0LDQt9Cx0L7RgFxcXCIuXCJcbiAgICBdLFxuICAgIHByb29mX2FjdGlvbjogcHJvb2ZBY3Rpb25cbiAgfTtcblxuICBjb25zdCBjb21tZW50QmFpdCA9IFtcbiAgICBcItCa0L7QvNC80LXQvdGCIFxcXCLRiNCw0LHQu9C+0L1cXFwiXCIsXG4gICAgXCLQmtC+0LzQvNC10L3RgiBcXFwi0YDQsNC30LHQvtGAXFxcIlwiLFxuICAgIFwi0JrQvtC80LzQtdC90YIgXFxcItGF0L7Rh9GDXFxcIlwiLFxuICAgIFwi0JrQvtC80LzQtdC90YIgXFxcItC/0YDQuNC80LXRgFxcXCJcIixcbiAgICBcItCa0L7QvNC80LXQvdGCIFxcXCLRh9C10LrQu9C40YHRglxcXCJcIlxuICBdO1xuXG4gIGNvbnN0IGNhcHRpb25WYXJpYW50cyA9IFtcbiAgICBcItCf0L7Rh9C10LzRgyDRgNC+0LvQuNC60Lgg0L3QtSDQt9Cw0YXQvtC00Y/RgiDQsiBSVTogMyDQv9GA0LDQstC60LguXCIsXG4gICAgXCLQmtC+0YDQvtGC0LrQuNC5INGA0LDQt9Cx0L7RgDog0YXRg9C6LCDRgtC10LzQvywg0LTQvtC60LDQt9Cw0YLQtdC70YzRgdGC0LLQvi5cIixcbiAgICBcIjEg0L7RiNC40LHQutCwINCyINC/0LXRgNCy0YvQtSAyINGB0LXQuiDigJQg0LjRgdC/0YDQsNCy0Ywg0YHQtdCz0L7QtNC90Y8uXCJcbiAgXTtcblxuICBjb25zdCBhYlRlc3RzID0ge1xuICAgIGhvb2tfdmFyaWFudHM6IFtcbiAgICAgIFwiMSDQvtGI0LjQsdC60LAg0LIgMiDRgdC10LouXCIsXG4gICAgICBcItCc0LjQvdGD0YEg0LvQuNC00Ysg0LIg0L3QsNGH0LDQu9C1LlwiLFxuICAgICAgXCLQpdGD0Log0LHQtdC3INC60L7QvdGE0LvQuNC60YLQsCDigJQg0LzQuNC80L4uXCIsXG4gICAgICBcIlJVINC90LUg0YLQtdGA0L/QuNGCINC00LvQuNC90L3Ri9GFINCy0YHRgtGD0L/Qu9C10L3QuNC5LlwiLFxuICAgICAgXCLQodGA0LDQt9GDINC6INGB0YPRgtC4OiAzINC/0YDQsNCy0LrQuC5cIlxuICAgIF0sXG4gICAgY3RhX3ZhcmlhbnRzOiBbXG4gICAgICBcItCa0L7QvNC80LXQvdGCIFxcXCLRiNCw0LHQu9C+0L1cXFwiXCIsXG4gICAgICBcItCa0L7QvNC80LXQvdGCIFxcXCLRgNCw0LfQsdC+0YBcXFwiXCIsXG4gICAgICBcItCSINC70LjRh9C60YMgXFxcItC/0YDQuNC80LXRgFxcXCJcIixcbiAgICAgIFwi0KHRgdGL0LvQutCwINCyINCx0LjQvlwiLFxuICAgICAgXCLQodC+0YXRgNCw0L3QuCDQvdCwINC/0L7RgtC+0LxcIlxuICAgIF1cbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHJld3JpdGVfb3B0aW9uczogW3Jld3JpdGVBLCByZXdyaXRlQl0sXG4gICAgY29tbWVudF9iYWl0OiBjb21tZW50QmFpdC5zbGljZSgwLCAxMCksXG4gICAgY2FwdGlvbl92YXJpYW50czogY2FwdGlvblZhcmlhbnRzLnNsaWNlKDAsIDMpLFxuICAgIGFfYl90ZXN0czogYWJUZXN0c1xuICB9O1xufTtcblxuY29uc3QgY291bnRXb3Jkc0luT2JqZWN0ID0gKHZhbHVlKSA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHJldHVybiBjb3VudFdvcmRzKHZhbHVlKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gdmFsdWUucmVkdWNlKChhY2MsIGl0ZW0pID0+IGFjYyArIGNvdW50V29yZHNJbk9iamVjdChpdGVtKSwgMCk7XG4gIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh2YWx1ZSkucmVkdWNlKChhY2MsIGl0ZW0pID0+IGFjYyArIGNvdW50V29yZHNJbk9iamVjdChpdGVtKSwgMCk7XG4gIH1cbiAgcmV0dXJuIDA7XG59O1xuXG5jb25zdCBjb3VudFN0cmluZ3NJbk9iamVjdCA9ICh2YWx1ZSkgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSByZXR1cm4gMTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gdmFsdWUucmVkdWNlKChhY2MsIGl0ZW0pID0+IGFjYyArIGNvdW50U3RyaW5nc0luT2JqZWN0KGl0ZW0pLCAwKTtcbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHZhbHVlKS5yZWR1Y2UoKGFjYywgaXRlbSkgPT4gYWNjICsgY291bnRTdHJpbmdzSW5PYmplY3QoaXRlbSksIDApO1xuICB9XG4gIHJldHVybiAwO1xufTtcblxuY29uc3QgbWFwU3RyaW5ncyA9ICh2YWx1ZSwgZm4pID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGZuKHZhbHVlKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gdmFsdWUubWFwKChpdGVtKSA9PiBtYXBTdHJpbmdzKGl0ZW0sIGZuKSk7XG4gIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgT2JqZWN0LmVudHJpZXModmFsdWUpLm1hcCgoW2tleSwgdmFsXSkgPT4gW2tleSwgbWFwU3RyaW5ncyh2YWwsIGZuKV0pXG4gICAgKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59O1xuXG5jb25zdCBhcHBseVdvcmRMaW1pdCA9IChvdXRwdXQsIG1heFdvcmRzKSA9PiB3b3JkTGltaXRDb21wcmVzcyhvdXRwdXQsIG1heFdvcmRzKTtcblxuY29uc3QgYnVpbGRNZXRhID0gKGlucHV0LCBmZWF0dXJlcywgd2l0aGluTWF4V29yZHMsIG5lZWRzUmV2aWV3LCBsaW1pdGF0aW9ucykgPT4ge1xuICBjb25zdCBpbnB1dFF1YWxpdHkgPSBmZWF0dXJlcy5oYXNUcmFuc2NyaXB0XG4gICAgPyBmZWF0dXJlcy53b3JkQ291bnQgPj0gNjBcbiAgICAgID8gXCJoaWdoXCJcbiAgICAgIDogXCJtZWRpdW1cIlxuICAgIDogZmVhdHVyZXMuaGFzT3V0bGluZVxuICAgICAgPyBcIm1lZGl1bVwiXG4gICAgICA6IFwibG93XCI7XG5cbiAgY29uc3QgYXNzdW1wdGlvbnMgPSBbXG4gICAgXCLQlNC70LjQvdCwINGA0L7Qu9C40LrQsCDQtNC+IDMwINGB0LXQui5cIixcbiAgICBcIlJVINCw0YPQtNC40YLQvtGA0LjRjy5cIixcbiAgICBpbnB1dC5wbGF0Zm9ybSAhPT0gXCJtaXhlZFwiID8gYNCf0LvQsNGC0YTQvtGA0LzQsDogJHtpbnB1dC5wbGF0Zm9ybX0uYCA6IFwiXCJcbiAgXS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgcmV0dXJuIHtcbiAgICBnZW5lcmF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBpbnB1dF9xdWFsaXR5OiBpbnB1dFF1YWxpdHksXG4gICAgbmVlZHNSZXZpZXcsXG4gICAgbGltaXRhdGlvbnMsXG4gICAgYXNzdW1wdGlvbnMsXG4gICAgcXVhbGl0eV9jaGVja3M6IHtcbiAgICAgIHdpdGhpbl9tYXhfd29yZHM6IHdpdGhpbk1heFdvcmRzLFxuICAgICAgbm9fZmx1ZmY6IHRydWVcbiAgICB9XG4gIH07XG59O1xuXG5jb25zdCBidWlsZEVtcHR5T3V0cHV0ID0gKGlucHV0KSA9PiB7XG4gIGNvbnN0IHF1ZXN0aW9uID0gXCLQodC60LjQvdGMINGC0LXQutGB0YIg0YDQvtC70LjQutCwICjRgtGA0LDQvdGB0LrRgNC40L/Rgikg0LjQu9C4INGF0L7RgtGPINCx0Ysg0YLQtdC30LjRgdGLINC/0L4g0YHQtdC60YPQvdC00LDQvC5cIjtcbiAgY29uc3QgZ29hbExhYmVsID0gcGlja0dvYWxMYWJlbChpbnB1dC5nb2FsKTtcbiAgY29uc3QgZmVhdHVyZXMgPSBleHRyYWN0RmVhdHVyZXMoaW5wdXQpO1xuXG4gIGNvbnN0IGFuYWx5c2lzID0ge1xuICAgIHdoeV9pdF93b3JrZWQ6IFtcbiAgICAgIFwi0J/QvtC60LAg0L3QtdGCINGC0LXQutGB0YLQsCDQtNC70Y8g0L7RhtC10L3QutC4LlwiLFxuICAgICAgXCLQndGD0LbQtdC9INGF0YPQuiDQuCDRgdGC0YDRg9C60YLRg9GA0LAuXCIsXG4gICAgICBcItCd0YPQttC90Ysg0YbQuNGE0YDRiy/RgdGA0L7QutC4LlwiLFxuICAgICAgXCLQndGD0LbQvdC+INC00L7QutCw0LfQsNGC0LXQu9GM0YHRgtCy0L4uXCIsXG4gICAgICBcItCd0YPQttC10L0g0L/QvtC90Y/RgtC90YvQuSBDVEEuXCJcbiAgICBdLFxuICAgIHdoeV9pdF9mYWlsZWQ6IFtcItCd0LXRgiDRgtGA0LDQvdGB0LrRgNC40L/RgtCwL9GC0LXQt9C40YHQvtCyINC00LvRjyDQsNC90LDQu9C40LfQsC5cIl0sXG4gICAgaG9va3Nfc2NvcmU6IDAsXG4gICAgcGFjaW5nX3Njb3JlOiAwLFxuICAgIHByb29mX3Njb3JlOiAwLFxuICAgIGN0YV9zY29yZTogMCxcbiAgICBydV9maXRfc2NvcmU6IDAsXG4gICAgaG9va190eXBlc19kZXRlY3RlZDogW10sXG4gICAgbWlzc2luZ19lbGVtZW50czogW1wi0L3QtdGCINC00LDQvdC90YvRhSDQtNC70Y8g0LDQvdCw0LvQuNC30LBcIl0sXG4gICAgdG9wXzNfZml4X25vdzogW1xuICAgICAgcXVlc3Rpb24sXG4gICAgICBcItCU0L7QsdCw0LLRjCDRgtCw0LnQvNC60L7QtNGLIDDigJMzLzPigJMxNS8xNeKAkzMwL0NUQS5cIixcbiAgICAgIGDQo9C60LDQttC4INGG0LXQu9GMINGA0L7Qu9C40LrQsDogJHtnb2FsTGFiZWx9LmBcbiAgICBdXG4gIH07XG5cbiAgY29uc3Qgc2NyaXB0U2tlbGV0b24gPSBidWlsZFNjcmlwdFNrZWxldG9uKGZlYXR1cmVzLCBpbnB1dCwgZ29hbExhYmVsKTtcbiAgY29uc3QgaW1wcm92ZW1lbnRzID0gYnVpbGRJbXByb3ZlbWVudHMoZmVhdHVyZXMsIGlucHV0LCBnb2FsTGFiZWwpO1xuXG4gIGNvbnN0IGJhc2VPdXRwdXQgPSB7XG4gICAgYW5hbHlzaXMsXG4gICAgc2NyaXB0X3NrZWxldG9uOiBzY3JpcHRTa2VsZXRvbixcbiAgICBpbXByb3ZlbWVudHMsXG4gICAgbWV0YToge1xuICAgICAgZ2VuZXJhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBpbnB1dF9xdWFsaXR5OiBcImxvd1wiLFxuICAgICAgbmVlZHNSZXZpZXc6IHRydWUsXG4gICAgICBsaW1pdGF0aW9uczogW3F1ZXN0aW9uXSxcbiAgICAgIGFzc3VtcHRpb25zOiBbXCLQlNC70LjQvdCwINGA0L7Qu9C40LrQsCDQtNC+IDMwINGB0LXQui5cIiwgXCJSVSDQsNGD0LTQuNGC0L7RgNC40Y8uXCJdLFxuICAgICAgcXVhbGl0eV9jaGVja3M6IHsgd2l0aGluX21heF93b3JkczogdHJ1ZSwgbm9fZmx1ZmY6IHRydWUgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gYmFzZU91dHB1dDtcbn07XG5cbmNvbnN0IGdlbmVyYXRlT3V0cHV0ID0gYXN5bmMgKHJhd0lucHV0ID0ge30sIG9wdGlvbnMgPSB7fSkgPT4ge1xuICBjb25zdCBpbnB1dCA9IG5vcm1hbGl6ZUlucHV0KHJhd0lucHV0KTtcbiAgY29uc3QgZmVhdHVyZXMgPSBleHRyYWN0RmVhdHVyZXMoaW5wdXQpO1xuICBjb25zdCBnb2FsTGFiZWwgPSBwaWNrR29hbExhYmVsKGlucHV0LmdvYWwpO1xuICBjb25zdCBzb2Z0VG9uZSA9ICFpbnB1dC5jb25zdHJhaW50cy5iZV9icnV0YWxseV9ob25lc3Q7XG4gIGNvbnN0IGhhc0NvcmVDb250ZW50ID0gZmVhdHVyZXMuaGFzVHJhbnNjcmlwdCB8fCBmZWF0dXJlcy5oYXNPdXRsaW5lO1xuXG4gIGlmICghaGFzQ29yZUNvbnRlbnQpIHtcbiAgICBjb25zdCBvdXRwdXQgPSBidWlsZEVtcHR5T3V0cHV0KGlucHV0KTtcbiAgICBhcHBseUJ1ZGdldE1ldGEob3V0cHV0Lm1ldGEsIGlucHV0KTtcbiAgICByZXR1cm4geyBvdXRwdXQ6IHdyYXBPdXRwdXQob3V0cHV0LCBpbnB1dCksIGVmZmVjdGl2ZUlucHV0OiBpbnB1dCB9O1xuICB9XG5cbiAgY29uc3Qgc2NvcmVzID0gYnVpbGRTY29yZXMoZmVhdHVyZXMpO1xuICBjb25zdCBhbmFseXNpcyA9IHtcbiAgICB3aHlfaXRfd29ya2VkOiBidWlsZFdoeVdvcmtlZChmZWF0dXJlcywgaW5wdXQpLFxuICAgIHdoeV9pdF9mYWlsZWQ6IGJ1aWxkV2h5RmFpbGVkKGZlYXR1cmVzLCBzb2Z0VG9uZSksXG4gICAgaG9va3Nfc2NvcmU6IHNjb3Jlcy5ob29rc19zY29yZSxcbiAgICBwYWNpbmdfc2NvcmU6IHNjb3Jlcy5wYWNpbmdfc2NvcmUsXG4gICAgcHJvb2Zfc2NvcmU6IHNjb3Jlcy5wcm9vZl9zY29yZSxcbiAgICBjdGFfc2NvcmU6IHNjb3Jlcy5jdGFfc2NvcmUsXG4gICAgcnVfZml0X3Njb3JlOiBzY29yZXMucnVfZml0X3Njb3JlLFxuICAgIGhvb2tfdHlwZXNfZGV0ZWN0ZWQ6IGRldGVjdEhvb2tUeXBlcyhmZWF0dXJlcyksXG4gICAgbWlzc2luZ19lbGVtZW50czogZGV0ZWN0TWlzc2luZ0VsZW1lbnRzKGZlYXR1cmVzKSxcbiAgICB0b3BfM19maXhfbm93OiBidWlsZFRvcEZpeGVzKGZlYXR1cmVzLCBnb2FsTGFiZWwpXG4gIH07XG5cbiAgY29uc3Qgc2NyaXB0U2tlbGV0b24gPSBidWlsZFNjcmlwdFNrZWxldG9uKGZlYXR1cmVzLCBpbnB1dCwgZ29hbExhYmVsKTtcbiAgY29uc3QgaW1wcm92ZW1lbnRzID0gYnVpbGRJbXByb3ZlbWVudHMoZmVhdHVyZXMsIGlucHV0LCBnb2FsTGFiZWwpO1xuXG4gIGNvbnN0IGxpbWl0YXRpb25zID0gW107XG4gIGlmICghZmVhdHVyZXMuaGFzVHJhbnNjcmlwdCkgbGltaXRhdGlvbnMucHVzaChcItCd0LXRgiDRgtGA0LDQvdGB0LrRgNC40L/RgtCwOiDQsNC90LDQu9C40Lcg0L/QviDRgtC10LfQuNGB0LDQvC/QvtC/0LjRgdCw0L3QuNGOLlwiKTtcbiAgaWYgKCFmZWF0dXJlcy5oYXNPdXRsaW5lICYmICFmZWF0dXJlcy5oYXNUcmFuc2NyaXB0KSB7XG4gICAgbGltaXRhdGlvbnMucHVzaChcItCd0LXRgiDRgtC10LfQuNGB0L7QsiDQv9C+INGB0LXQutGD0L3QtNCw0LwuXCIpO1xuICB9XG4gIGlmIChmZWF0dXJlcy5oYXNMaW5rICYmICFmZWF0dXJlcy5oYXNUcmFuc2NyaXB0ICYmICFmZWF0dXJlcy5oYXNPdXRsaW5lKSB7XG4gICAgbGltaXRhdGlvbnMucHVzaChcItCh0YHRi9C70LrQsCDQsdC10Lcg0YLRgNCw0L3RgdC60YDQuNC/0YLQsDog0L/RgNC40YjQu9C4INGC0LXQutGB0YIuXCIpO1xuICB9XG5cbiAgY29uc3QgYmFzZU91dHB1dCA9IHtcbiAgICBhbmFseXNpcyxcbiAgICBzY3JpcHRfc2tlbGV0b246IHNjcmlwdFNrZWxldG9uLFxuICAgIGltcHJvdmVtZW50cyxcbiAgICBtZXRhOiBidWlsZE1ldGEoXG4gICAgICBpbnB1dCxcbiAgICAgIGZlYXR1cmVzLFxuICAgICAgdHJ1ZSxcbiAgICAgIGZlYXR1cmVzLndvcmRDb3VudCA8IDMwLFxuICAgICAgbGltaXRhdGlvbnNcbiAgICApXG4gIH07XG5cbiAgY29uc3QgcHJlc2VydmVSZXN1bHQgPSBjb21wcmVzc1ByZXNlcnZlU2hhcGUoYmFzZU91dHB1dCwge1xuICAgIG1heF93b3JkczogaW5wdXQuY29uc3RyYWludHMubWF4X3dvcmRzLFxuICAgIHByaW9yaXRpZXM6IHtcbiAgICAgIHNlY29uZGFyeV9maWVsZHM6IFtcImFuYWx5c2lzLm5vdGVzXCIsIFwiYW5hbHlzaXMud2h5X3J1XCJdLFxuICAgICAgYXJyYXlfbWluaW11bXM6IHtcbiAgICAgICAgXCJhbmFseXNpcy50b3BfM19maXhfbm93XCI6IDMsXG4gICAgICAgIFwic2NyaXB0X3NrZWxldG9uLm9uX3NjcmVlbl90ZXh0X2J5X3NlY29uZFwiOiAzLFxuICAgICAgICBcImltcHJvdmVtZW50cy5yZXdyaXRlX29wdGlvbnNcIjogMlxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgbGltaXRSZXN1bHQgPSBwcmVzZXJ2ZVJlc3VsdC53aXRoaW5cbiAgICA/IHsgb3V0cHV0OiBwcmVzZXJ2ZVJlc3VsdC5vdXRwdXQsIHdpdGhpbjogdHJ1ZSB9XG4gICAgOiBhcHBseVdvcmRMaW1pdChwcmVzZXJ2ZVJlc3VsdC5vdXRwdXQsIGlucHV0LmNvbnN0cmFpbnRzLm1heF93b3Jkcyk7XG4gIGNvbnN0IHdpdGhpbk1heFdvcmRzID0gbGltaXRSZXN1bHQud2l0aGluO1xuXG4gIGNvbnN0IG91dHB1dCA9IHtcbiAgICAuLi5saW1pdFJlc3VsdC5vdXRwdXQsXG4gICAgbWV0YTogYnVpbGRNZXRhKFxuICAgICAgaW5wdXQsXG4gICAgICBmZWF0dXJlcyxcbiAgICAgIHdpdGhpbk1heFdvcmRzLFxuICAgICAgbGltaXRSZXN1bHQub3V0cHV0Lm1ldGE/Lm5lZWRzUmV2aWV3ID8/IGZhbHNlLFxuICAgICAgbGltaXRSZXN1bHQub3V0cHV0Lm1ldGE/LmxpbWl0YXRpb25zID8/IGxpbWl0YXRpb25zXG4gICAgKVxuICB9O1xuXG4gIGlmICghd2l0aGluTWF4V29yZHMpIHtcbiAgICBvdXRwdXQubWV0YS5saW1pdGF0aW9ucyA9IEFycmF5LmlzQXJyYXkob3V0cHV0Lm1ldGEubGltaXRhdGlvbnMpXG4gICAgICA/IFsuLi5vdXRwdXQubWV0YS5saW1pdGF0aW9ucywgXCLQodC20LDRgtGL0Lkg0L7RgtCy0LXRgjog0L/RgNC10LLRi9GI0LXQvSDQu9C40LzQuNGCINGB0LvQvtCyLlwiXVxuICAgICAgOiBbXCLQodC20LDRgtGL0Lkg0L7RgtCy0LXRgjog0L/RgNC10LLRi9GI0LXQvSDQu9C40LzQuNGCINGB0LvQvtCyLlwiXTtcbiAgfVxuICBpZiAocHJlc2VydmVSZXN1bHQuY29tcHJlc3NlZF9oZWF2aWx5KSB7XG4gICAgb3V0cHV0Lm1ldGEubGltaXRhdGlvbnMgPSBBcnJheS5pc0FycmF5KG91dHB1dC5tZXRhLmxpbWl0YXRpb25zKVxuICAgICAgPyBbLi4ub3V0cHV0Lm1ldGEubGltaXRhdGlvbnMsIFwiY29tcHJlc3NlZF9oZWF2aWx5XCJdXG4gICAgICA6IFtcImNvbXByZXNzZWRfaGVhdmlseVwiXTtcbiAgfVxuXG4gIGFwcGx5QnVkZ2V0TWV0YShvdXRwdXQubWV0YSwgaW5wdXQpO1xuICByZXR1cm4geyBvdXRwdXQ6IHdyYXBPdXRwdXQob3V0cHV0LCBpbnB1dCksIGVmZmVjdGl2ZUlucHV0OiBpbnB1dCB9O1xufTtcblxuY29uc3QgZ2VuZXJhdGVQYXZlbE91dHB1dCA9IGFzeW5jIChpbnB1dCA9IHt9LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2VuZXJhdGVPdXRwdXQoaW5wdXQsIG9wdGlvbnMpO1xuICByZXR1cm4gcmVzdWx0Lm91dHB1dDtcbn07XG5cbmNvbnN0IHZhbGlkYXRlUGF2ZWxPdXRwdXQgPSAocGF5bG9hZCkgPT4ge1xuICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgY29uc3QgbGVnYWN5ID0gdW53cmFwTGVnYWN5KHBheWxvYWQpO1xuICBpZiAoIWxlZ2FjeSB8fCB0eXBlb2YgbGVnYWN5ICE9PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcnM6IFtcIk91dHB1dCBtdXN0IGJlIGFuIG9iamVjdC5cIl0gfTtcbiAgfVxuICBwYXlsb2FkID0gbGVnYWN5O1xuICBpZiAoIXBheWxvYWQuYW5hbHlzaXMpIGVycm9ycy5wdXNoKFwiYW5hbHlzaXMgcmVxdWlyZWRcIik7XG4gIGlmICghcGF5bG9hZC5zY3JpcHRfc2tlbGV0b24pIGVycm9ycy5wdXNoKFwic2NyaXB0X3NrZWxldG9uIHJlcXVpcmVkXCIpO1xuICBpZiAoIXBheWxvYWQuaW1wcm92ZW1lbnRzKSBlcnJvcnMucHVzaChcImltcHJvdmVtZW50cyByZXF1aXJlZFwiKTtcbiAgaWYgKCFwYXlsb2FkLm1ldGEpIGVycm9ycy5wdXNoKFwibWV0YSByZXF1aXJlZFwiKTtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHBheWxvYWQuYW5hbHlzaXM/Lmhvb2tfdHlwZXNfZGV0ZWN0ZWQpKSB7XG4gICAgZXJyb3JzLnB1c2goXCJhbmFseXNpcy5ob29rX3R5cGVzX2RldGVjdGVkIG11c3QgYmUgYXJyYXlcIik7XG4gIH1cbiAgaWYgKCFBcnJheS5pc0FycmF5KHBheWxvYWQuc2NyaXB0X3NrZWxldG9uPy5vbl9zY3JlZW5fdGV4dF9ieV9zZWNvbmQpKSB7XG4gICAgZXJyb3JzLnB1c2goXCJzY3JpcHRfc2tlbGV0b24ub25fc2NyZWVuX3RleHRfYnlfc2Vjb25kIG11c3QgYmUgYXJyYXlcIik7XG4gIH1cbiAgcmV0dXJuIHsgdmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsIGVycm9ycyB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlucHV0RGVmYXVsdHMsXG4gIGlucHV0U2NoZW1hLFxuICBvdXRwdXRTY2hlbWEsXG4gIHN5c3RlbVByb21wdCxcbiAgcGF2ZWxBZ2VudCxcbiAgbm9ybWFsaXplSW5wdXQsXG4gIGdlbmVyYXRlT3V0cHV0LFxuICBnZW5lcmF0ZVBhdmVsT3V0cHV0LFxuICB2YWxpZGF0ZVBhdmVsT3V0cHV0XG59O1xuIl0sIm5hbWVzIjpbIndyYXBBZ2VudE91dHB1dCIsInVud3JhcExlZ2FjeSIsInJlcXVpcmUiLCJ3b3JkTGltaXRDb21wcmVzcyIsImNvbXByZXNzUHJlc2VydmVTaGFwZSIsImFwcGx5QnVkZ2V0IiwiYXBwbHlCdWRnZXRNZXRhIiwiaW5wdXREZWZhdWx0cyIsIm1vZGUiLCJwbGF0Zm9ybSIsIm5pY2hlIiwiZ29hbCIsImF1ZGllbmNlIiwiZ2VvIiwicGVyc29uYSIsInRlbXBlcmF0dXJlIiwiaW5wdXRfY29udGVudCIsInRyYW5zY3JpcHQiLCJvdXRsaW5lIiwidGltZXN0YW1wcyIsImNhcHRpb24iLCJvbl9zY3JlZW5fdGV4dCIsImNvbW1lbnRzX3NhbXBsZSIsImNvbnN0cmFpbnRzIiwibWF4X3dvcmRzIiwiYmVfYnJ1dGFsbHlfaG9uZXN0IiwibGFuZ3VhZ2UiLCJpbnB1dFNjaGVtYSIsInR5cGUiLCJhZGRpdGlvbmFsUHJvcGVydGllcyIsInByb3BlcnRpZXMiLCJlbnVtIiwiZGVmYXVsdCIsIml0ZW1zIiwidF9zdGFydCIsInRfZW5kIiwidGV4dCIsInJlcXVpcmVkIiwib3V0cHV0U2NoZW1hIiwiYW5hbHlzaXMiLCJzY3JpcHRfc2tlbGV0b24iLCJpbXByb3ZlbWVudHMiLCJtZXRhIiwic3lzdGVtUHJvbXB0IiwicGF2ZWxBZ2VudCIsImlkIiwiZGlzcGxheU5hbWUiLCJkZXNjcmlwdGlvbiIsIndyYXBPdXRwdXQiLCJsZWdhY3lPdXRwdXQiLCJpbnB1dCIsImFnZW50SWQiLCJpbnB1dEVjaG8iLCJpc05vbkVtcHR5U3RyaW5nIiwidmFsdWUiLCJ0cmltIiwibGVuZ3RoIiwidG9TdHJpbmdTYWZlIiwidG9TdHJpbmdBcnJheSIsIkFycmF5IiwiaXNBcnJheSIsImZpbHRlciIsIml0ZW0iLCJtYXAiLCJub3JtYWxpemVJbnB1dCIsInNhZmUiLCJidWRnZXQiLCJpbmNsdWRlcyIsImlucHV0Q29udGVudCIsIm5vcm1hbGl6ZWQiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsIk1hdGgiLCJtYXgiLCJyb3VuZCIsImJ1ZGdldFJlc3VsdCIsIm1heFdvcmRzUGF0aCIsImJ1ZGdldF9hcHBsaWVkIiwiYnVkZ2V0X3dhcm5pbmdzIiwid2FybmluZ3MiLCJwaWNrR29hbExhYmVsIiwiY29sbGVjdFRleHQiLCJwYXJ0cyIsImpvaW4iLCJjb3VudFdvcmRzIiwibWF0Y2hlcyIsIm1hdGNoIiwiY2xhbXBTY29yZSIsIm1pbiIsImV4dHJhY3RGZWF0dXJlcyIsImNvbnRlbnQiLCJvblNjcmVlblRleHQiLCJjb21iaW5lZCIsIndvcmRDb3VudCIsImZpcnN0U291cmNlIiwibG93ZXJDb21iaW5lZCIsInRvTG93ZXJDYXNlIiwibG93ZXJGaXJzdCIsImhhc1RyYW5zY3JpcHQiLCJoYXNPdXRsaW5lIiwiaGFzQ2FwdGlvbiIsImhhc09uU2NyZWVuVGV4dCIsImhhc051bWJlcnMiLCJ0ZXN0IiwiaGFzQ29uZmxpY3QiLCJoYXNQcm9vZiIsImhhc1NwZWNpZmljcyIsImhhc0N0YSIsImRpcmVjdFRvbmUiLCJncmVldGluZ0ludHJvIiwiaGFzTGluayIsInBhY2luZ0hpbnQiLCJwYWNpbmdGYXN0IiwicGFjaW5nU2xvdyIsInBhY2luZ0RlbnNlIiwiZGV0ZWN0SG9va1R5cGVzIiwiZmVhdHVyZXMiLCJ0eXBlcyIsInB1c2giLCJmcm9tIiwiU2V0IiwiZGV0ZWN0TWlzc2luZ0VsZW1lbnRzIiwibWlzc2luZyIsImJ1aWxkT25TY3JlZW5UZXh0QnlTZWNvbmQiLCJzbGljZSIsInNlY29uZF9yYW5nZSIsInRyaW1Xb3JkcyIsImhvb2siLCJidWlsZEhvb2tUZXh0IiwibWF4V29yZHMiLCJ3b3JkcyIsInNwbGl0IiwiZ29hbExhYmVsIiwiY2xlYW5lZCIsInJlcGxhY2UiLCJidWlsZFNjb3JlcyIsImhvb2tzX3Njb3JlIiwicGFjaW5nIiwicGFjaW5nX3Njb3JlIiwicHJvb2YiLCJwcm9vZl9zY29yZSIsImN0YSIsImN0YV9zY29yZSIsInJ1Rml0IiwicnVfZml0X3Njb3JlIiwiYnVpbGRXaHlXb3JrZWQiLCJidWlsZFdoeUZhaWxlZCIsInNvZnQiLCJidWlsZFRvcEZpeGVzIiwiZml4ZXMiLCJidWlsZFNjcmlwdFNrZWxldG9uIiwibmljaGVMYWJlbCIsImhvb2tUZXh0IiwiaXNzdWVIb29rIiwiaG9va1ZhcmlhbnRzIiwidmFsdWVCZWF0cyIsInByb29mQmVhdHMiLCJjdGFUZXh0IiwiY3RhVmFyaWFudHMiLCJvblNjcmVlbiIsImVkaXRpbmdOb3RlcyIsImhvb2tfMF8zcyIsInZhcmlhbnRzIiwibm90ZXMiLCJ2YWx1ZV8zXzE1cyIsImJlYXRzIiwicHJvb2ZfMTVfMzBzIiwib25fc2NyZWVuX3RleHRfYnlfc2Vjb25kIiwib25fc2NyZWVuX3RleHRfc3VnZ2VzdGlvbnMiLCJlZGl0aW5nX25vdGVzIiwiYnVpbGRJbXByb3ZlbWVudHMiLCJob29rQSIsImhvb2tCIiwicHJvb2ZBY3Rpb24iLCJyZXdyaXRlQSIsInZlcnNpb24iLCJsaW5lcyIsInByb29mX2FjdGlvbiIsInJld3JpdGVCIiwiY29tbWVudEJhaXQiLCJjYXB0aW9uVmFyaWFudHMiLCJhYlRlc3RzIiwiaG9va192YXJpYW50cyIsImN0YV92YXJpYW50cyIsInJld3JpdGVfb3B0aW9ucyIsImNvbW1lbnRfYmFpdCIsImNhcHRpb25fdmFyaWFudHMiLCJhX2JfdGVzdHMiLCJjb3VudFdvcmRzSW5PYmplY3QiLCJyZWR1Y2UiLCJhY2MiLCJPYmplY3QiLCJ2YWx1ZXMiLCJjb3VudFN0cmluZ3NJbk9iamVjdCIsIm1hcFN0cmluZ3MiLCJmbiIsImZyb21FbnRyaWVzIiwiZW50cmllcyIsImtleSIsInZhbCIsImFwcGx5V29yZExpbWl0Iiwib3V0cHV0IiwiYnVpbGRNZXRhIiwid2l0aGluTWF4V29yZHMiLCJuZWVkc1JldmlldyIsImxpbWl0YXRpb25zIiwiaW5wdXRRdWFsaXR5IiwiYXNzdW1wdGlvbnMiLCJCb29sZWFuIiwiZ2VuZXJhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiaW5wdXRfcXVhbGl0eSIsInF1YWxpdHlfY2hlY2tzIiwid2l0aGluX21heF93b3JkcyIsIm5vX2ZsdWZmIiwiYnVpbGRFbXB0eU91dHB1dCIsInF1ZXN0aW9uIiwid2h5X2l0X3dvcmtlZCIsIndoeV9pdF9mYWlsZWQiLCJob29rX3R5cGVzX2RldGVjdGVkIiwibWlzc2luZ19lbGVtZW50cyIsInRvcF8zX2ZpeF9ub3ciLCJzY3JpcHRTa2VsZXRvbiIsImJhc2VPdXRwdXQiLCJnZW5lcmF0ZU91dHB1dCIsInJhd0lucHV0Iiwib3B0aW9ucyIsInNvZnRUb25lIiwiaGFzQ29yZUNvbnRlbnQiLCJlZmZlY3RpdmVJbnB1dCIsInNjb3JlcyIsInByZXNlcnZlUmVzdWx0IiwicHJpb3JpdGllcyIsInNlY29uZGFyeV9maWVsZHMiLCJhcnJheV9taW5pbXVtcyIsImxpbWl0UmVzdWx0Iiwid2l0aGluIiwiY29tcHJlc3NlZF9oZWF2aWx5IiwiZ2VuZXJhdGVQYXZlbE91dHB1dCIsInJlc3VsdCIsInZhbGlkYXRlUGF2ZWxPdXRwdXQiLCJwYXlsb2FkIiwiZXJyb3JzIiwibGVnYWN5IiwidmFsaWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/agents/pavel.js\n");

/***/ }),

/***/ "(rsc)/./lib/llm/provider.js":
/*!*****************************!*\
  !*** ./lib/llm/provider.js ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst fs = __webpack_require__(/*! node:fs */ \"node:fs\");\nconst path = __webpack_require__(/*! node:path */ \"node:path\");\nconst DEFAULT_PROVIDER = \"fake\";\nconst normalizeProviderName = (value)=>{\n    const normalized = String(value || \"\").trim().toLowerCase();\n    return normalized === \"real\" ? \"real\" : \"fake\";\n};\nconst getConfiguredProviderName = ()=>normalizeProviderName(process.env.LLM_PROVIDER || DEFAULT_PROVIDER);\nconst hasRealProviderCredentials = ()=>Boolean(String(process.env.OPENAI_API_KEY || \"\").trim());\nconst AGENT_ID_ALIASES = {\n    platon: \"platon-prospect-research-ru\",\n    anatoly: \"anatoly-account-research-ru\",\n    maxim: \"maxim-local-leads-ru\"\n};\nconst canonicalAgentId = (agentId)=>{\n    if (!agentId) return \"\";\n    const normalized = String(agentId).trim();\n    return AGENT_ID_ALIASES[normalized] || normalized;\n};\nconst resolveFixtureOutputPath = (agentId, fixturesRoot)=>{\n    const canonical = canonicalAgentId(agentId);\n    if (!canonical) return \"\";\n    const root = fixturesRoot || path.join(process.cwd(), \"fixtures\", \"agents\");\n    return path.join(root, canonical, \"output.json\");\n};\nconst hasFixtureForAgent = (agentId, fixturesRoot)=>{\n    const outputPath = resolveFixtureOutputPath(agentId, fixturesRoot);\n    return Boolean(outputPath && fs.existsSync(outputPath));\n};\nconst stripVolatile = (value)=>{\n    if (!value || typeof value !== \"object\") return value;\n    if (Array.isArray(value)) return value.map((item)=>stripVolatile(item));\n    const next = {};\n    Object.entries(value).forEach(([key, val])=>{\n        if (key === \"generated_at\") {\n            next[key] = \"1970-01-01T00:00:00.000Z\";\n            return;\n        }\n        if (key === \"run_id\" || key === \"trace_id\") {\n            next[key] = \"stub-run\";\n            return;\n        }\n        if (key === \"duration_ms\") {\n            next[key] = 0;\n            return;\n        }\n        next[key] = stripVolatile(val);\n    });\n    return next;\n};\nconst cloneJson = (value)=>{\n    try {\n        return JSON.parse(JSON.stringify(value));\n    } catch  {\n        return value;\n    }\n};\nconst pickSchemaNode = (schema)=>{\n    if (!schema || typeof schema !== \"object\") return {};\n    if (Array.isArray(schema.oneOf) && schema.oneOf.length) return schema.oneOf[0] || {};\n    if (Array.isArray(schema.anyOf) && schema.anyOf.length) return schema.anyOf[0] || {};\n    if (Array.isArray(schema.allOf) && schema.allOf.length) {\n        return schema.allOf.reduce((acc, item)=>({\n                ...acc,\n                ...item\n            }), {});\n    }\n    return schema;\n};\nconst schemaType = (schema)=>{\n    const node = pickSchemaNode(schema);\n    if (!node || typeof node !== \"object\") return \"object\";\n    if (node.const !== undefined) return typeof node.const;\n    if (node.default !== undefined) return typeof node.default;\n    if (Array.isArray(node.enum) && node.enum.length) return typeof node.enum[0];\n    if (Array.isArray(node.type)) return node.type[0] || \"object\";\n    return node.type || \"object\";\n};\nconst valueForFormat = (format)=>{\n    if (format === \"date-time\") return \"1970-01-01T00:00:00.000Z\";\n    if (format === \"date\") return \"1970-01-01\";\n    if (format === \"email\") return \"stub@example.com\";\n    if (format === \"uri\" || format === \"url\") return \"https://example.com\";\n    return \"stub\";\n};\nconst buildFromSchema = (schema, keyHint = \"\")=>{\n    const node = pickSchemaNode(schema);\n    if (!node || typeof node !== \"object\") return {};\n    if (Object.prototype.hasOwnProperty.call(node, \"const\")) return cloneJson(node.const);\n    if (Object.prototype.hasOwnProperty.call(node, \"default\")) return cloneJson(node.default);\n    if (Array.isArray(node.enum) && node.enum.length) return cloneJson(node.enum[0]);\n    const type = schemaType(node);\n    if (type === \"string\") {\n        if (node.format) return valueForFormat(node.format);\n        if (keyHint.toLowerCase().includes(\"email\")) return \"stub@example.com\";\n        if (keyHint.toLowerCase().includes(\"url\") || keyHint.toLowerCase().includes(\"link\")) {\n            return \"https://example.com\";\n        }\n        return \"stub\";\n    }\n    if (type === \"number\" || type === \"integer\") {\n        if (Number.isFinite(node.minimum)) return Number(node.minimum);\n        return 0;\n    }\n    if (type === \"boolean\") return false;\n    if (type === \"array\") {\n        const itemSchema = node.items || {};\n        return [\n            buildFromSchema(itemSchema, keyHint ? `${keyHint}_item` : \"item\")\n        ];\n    }\n    if (type === \"object\") {\n        const properties = node.properties && typeof node.properties === \"object\" ? node.properties : {};\n        const required = Array.isArray(node.required) ? node.required : [];\n        const keys = new Set([\n            ...required,\n            ...Object.keys(properties)\n        ]);\n        const result = {};\n        if (keys.size === 0) {\n            return keyHint === \"meta\" ? {\n                generated_at: \"1970-01-01T00:00:00.000Z\"\n            } : {};\n        }\n        keys.forEach((key)=>{\n            const childSchema = properties[key] || {};\n            result[key] = buildFromSchema(childSchema, key);\n        });\n        return result;\n    }\n    return {};\n};\nclass FakeLLMProvider {\n    constructor(options = {}){\n        this.name = \"fake\";\n        this.fixturesRoot = options.fixturesRoot || path.join(process.cwd(), \"fixtures\", \"agents\");\n    }\n    loadFixtureData(agentId) {\n        const outputPath = resolveFixtureOutputPath(agentId, this.fixturesRoot);\n        if (!outputPath || !fs.existsSync(outputPath)) return null;\n        try {\n            const parsed = JSON.parse(fs.readFileSync(outputPath, \"utf8\"));\n            const legacyData = parsed && parsed.data ? parsed.data : parsed;\n            return stripVolatile(cloneJson(legacyData));\n        } catch  {\n            return null;\n        }\n    }\n    async generateJson({ schema, meta } = {}) {\n        const agentId = meta && typeof meta === \"object\" ? meta.agent_id || meta.agentId : \"\";\n        const fixtureData = agentId ? this.loadFixtureData(agentId) : null;\n        if (fixtureData) {\n            return fixtureData;\n        }\n        return buildFromSchema(schema || {}, \"root\");\n    }\n}\nconst sanitizeSchemaName = (value)=>{\n    const normalized = String(value || \"agent_output\").replace(/[^a-zA-Z0-9_]/g, \"_\").replace(/_+/g, \"_\").replace(/^_+|_+$/g, \"\");\n    return normalized || \"agent_output\";\n};\nconst stripCodeFences = (value)=>String(value || \"\").replace(/```json/gi, \"```\").replace(/^```/, \"\").replace(/```$/, \"\").trim();\nconst parseJsonString = (value)=>{\n    if (typeof value !== \"string\") return null;\n    const direct = value.trim();\n    if (!direct) return null;\n    try {\n        return JSON.parse(direct);\n    } catch  {\n    // continue\n    }\n    const stripped = stripCodeFences(direct);\n    if (!stripped) return null;\n    try {\n        return JSON.parse(stripped);\n    } catch  {\n        return null;\n    }\n};\nconst extractErrorMessage = (payload)=>{\n    if (!payload || typeof payload !== \"object\") return \"\";\n    if (payload.error && typeof payload.error === \"object\") {\n        const message = payload.error.message || payload.error.code;\n        if (message) return String(message);\n    }\n    return \"\";\n};\nconst getNumericOption = (value, fallback)=>{\n    const numeric = Number(value);\n    return Number.isFinite(numeric) ? numeric : fallback;\n};\nclass RealLLMProvider {\n    constructor(options = {}){\n        this.name = \"real\";\n        this.apiKey = options.apiKey || process.env.OPENAI_API_KEY || \"\";\n        this.baseUrl = String(options.baseUrl || process.env.OPENAI_BASE_URL || \"https://api.openai.com/v1\").replace(/\\/+$/, \"\");\n        this.model = options.model || process.env.OPENAI_MODEL || \"gpt-5-mini\";\n        this.timeoutMs = getNumericOption(options.timeoutMs || process.env.OPENAI_TIMEOUT_MS, 45000);\n        this.fetchImpl = options.fetch || globalThis.fetch;\n    }\n    async requestChatCompletions(payload) {\n        if (typeof this.fetchImpl !== \"function\") {\n            throw new Error(\"Global fetch is not available for RealLLMProvider.\");\n        }\n        const controller = new AbortController();\n        const timeout = setTimeout(()=>controller.abort(), this.timeoutMs);\n        let response;\n        try {\n            response = await this.fetchImpl(`${this.baseUrl}/chat/completions`, {\n                method: \"POST\",\n                headers: {\n                    \"content-type\": \"application/json\",\n                    authorization: `Bearer ${this.apiKey}`\n                },\n                body: JSON.stringify(payload),\n                signal: controller.signal\n            });\n        } catch (error) {\n            const message = error && typeof error === \"object\" && error.name === \"AbortError\" ? `OpenAI request timed out after ${this.timeoutMs}ms` : `OpenAI request failed: ${error instanceof Error ? error.message : \"unknown error\"}`;\n            throw new Error(message);\n        } finally{\n            clearTimeout(timeout);\n        }\n        const text = await response.text();\n        const parsed = parseJsonString(text) || {};\n        if (!response.ok) {\n            const apiMessage = extractErrorMessage(parsed);\n            const reason = apiMessage || text.slice(0, 300) || `HTTP ${response.status}`;\n            const error = new Error(`OpenAI request failed (${response.status}): ${reason}`);\n            error.status = response.status;\n            throw error;\n        }\n        return parsed;\n    }\n    extractMessageText(payload) {\n        const content = payload?.choices?.[0]?.message?.content;\n        if (typeof content === \"string\") return content;\n        if (Array.isArray(content)) {\n            return content.map((part)=>{\n                if (!part || typeof part !== \"object\") return \"\";\n                if (typeof part.text === \"string\") return part.text;\n                if (part.text && typeof part.text === \"object\" && typeof part.text.value === \"string\") {\n                    return part.text.value;\n                }\n                if (typeof part.content === \"string\") return part.content;\n                return \"\";\n            }).join(\"\").trim();\n        }\n        return \"\";\n    }\n    buildMessages(system, prompt, schema) {\n        const baseSystem = typeof system === \"string\" && system.trim() ? system.trim() : \"You are a strict JSON assistant.\";\n        const schemaHint = schema && typeof schema === \"object\" && Object.keys(schema).length ? `Return only JSON that matches this schema:\\n${JSON.stringify(schema)}` : \"Return only valid JSON.\";\n        const userPrompt = typeof prompt === \"string\" && prompt.trim() ? prompt.trim() : \"{}\";\n        return [\n            {\n                role: \"system\",\n                content: `${baseSystem}\\n\\n${schemaHint}`\n            },\n            {\n                role: \"user\",\n                content: userPrompt\n            }\n        ];\n    }\n    async generateJson({ system, prompt, schema, temperature, maxTokens, meta } = {}) {\n        if (!this.apiKey) {\n            throw new Error(\"OPENAI_API_KEY is required when LLM_PROVIDER=real.\");\n        }\n        const requestedModel = meta && typeof meta === \"object\" && typeof meta.model === \"string\" ? meta.model.trim() : \"\";\n        const model = requestedModel || this.model;\n        const messages = this.buildMessages(system, prompt, schema);\n        const cappedTemperature = Math.min(Math.max(getNumericOption(temperature, 0.2), 0), 1.5);\n        const tokenLimit = Math.max(200, Math.min(6000, getNumericOption(maxTokens, 1800)));\n        const hasSchema = Boolean(schema && typeof schema === \"object\" && Object.keys(schema).length);\n        const schemaName = sanitizeSchemaName(meta && typeof meta === \"object\" ? meta.agent_id || meta.agentId || \"agent_output\" : \"agent_output\");\n        const withSchemaPayload = {\n            model,\n            messages,\n            temperature: cappedTemperature,\n            max_tokens: tokenLimit,\n            response_format: hasSchema ? {\n                type: \"json_schema\",\n                json_schema: {\n                    name: schemaName,\n                    strict: true,\n                    schema\n                }\n            } : {\n                type: \"json_object\"\n            }\n        };\n        let firstResult;\n        try {\n            firstResult = await this.requestChatCompletions(withSchemaPayload);\n        } catch (error) {\n            // Some models/endpoints may reject json_schema; fallback to plain json_object.\n            const fallbackPayload = {\n                model,\n                messages,\n                temperature: cappedTemperature,\n                max_tokens: tokenLimit,\n                response_format: {\n                    type: \"json_object\"\n                }\n            };\n            firstResult = await this.requestChatCompletions(fallbackPayload);\n        }\n        const text = this.extractMessageText(firstResult);\n        const parsed = parseJsonString(text);\n        if (parsed && typeof parsed === \"object\") {\n            return parsed;\n        }\n        throw new Error(\"OpenAI returned non-JSON output for generateJson().\");\n    }\n}\nconst createLLMProvider = ({ provider, fixturesRoot } = {})=>{\n    const mode = normalizeProviderName(provider || getConfiguredProviderName());\n    if (mode === \"real\") return new RealLLMProvider();\n    return new FakeLLMProvider({\n        fixturesRoot\n    });\n};\nlet singleton = null;\nconst getLLMProvider = (options = {})=>{\n    if (options.forceNew) return createLLMProvider(options);\n    if (!singleton) singleton = createLLMProvider(options);\n    return singleton;\n};\nconst isFakeLLMProvider = (provider)=>{\n    const name = provider && typeof provider === \"object\" ? provider.name : \"\";\n    return normalizeProviderName(name) === \"fake\";\n};\nmodule.exports = {\n    FakeLLMProvider,\n    RealLLMProvider,\n    buildFromSchema,\n    canonicalAgentId,\n    createLLMProvider,\n    getConfiguredProviderName,\n    getLLMProvider,\n    hasRealProviderCredentials,\n    hasFixtureForAgent,\n    isFakeLLMProvider,\n    resolveFixtureOutputPath,\n    stripVolatile\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TDtJQUN6QixNQUFNckYsT0FBT3FGLFlBQVksT0FBT0EsYUFBYSxXQUFXQSxTQUFTckYsSUFBSSxHQUFHO0lBQ3hFLE9BQU9qRixzQkFBc0JpRixVQUFVO0FBQ3pDO0FBRUEyRixPQUFPQyxPQUFPLEdBQUc7SUFDZjlGO0lBQ0EwQjtJQUNBN0M7SUFDQTNDO0lBQ0FvSjtJQUNBL0o7SUFDQW1LO0lBQ0EvSjtJQUNBZTtJQUNBa0o7SUFDQXhKO0lBQ0FTO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hYnV6YWRhL0Rlc2t0b3AvYWdlbnRPUy9saWIvbGxtL3Byb3ZpZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZShcIm5vZGU6ZnNcIik7XG5jb25zdCBwYXRoID0gcmVxdWlyZShcIm5vZGU6cGF0aFwiKTtcblxuY29uc3QgREVGQVVMVF9QUk9WSURFUiA9IFwiZmFrZVwiO1xuXG5jb25zdCBub3JtYWxpemVQcm92aWRlck5hbWUgPSAodmFsdWUpID0+IHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IFN0cmluZyh2YWx1ZSB8fCBcIlwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIG5vcm1hbGl6ZWQgPT09IFwicmVhbFwiID8gXCJyZWFsXCIgOiBcImZha2VcIjtcbn07XG5cbmNvbnN0IGdldENvbmZpZ3VyZWRQcm92aWRlck5hbWUgPSAoKSA9PiBub3JtYWxpemVQcm92aWRlck5hbWUocHJvY2Vzcy5lbnYuTExNX1BST1ZJREVSIHx8IERFRkFVTFRfUFJPVklERVIpO1xuY29uc3QgaGFzUmVhbFByb3ZpZGVyQ3JlZGVudGlhbHMgPSAoKSA9PlxuICBCb29sZWFuKFN0cmluZyhwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSB8fCBcIlwiKS50cmltKCkpO1xuXG5jb25zdCBBR0VOVF9JRF9BTElBU0VTID0ge1xuICBwbGF0b246IFwicGxhdG9uLXByb3NwZWN0LXJlc2VhcmNoLXJ1XCIsXG4gIGFuYXRvbHk6IFwiYW5hdG9seS1hY2NvdW50LXJlc2VhcmNoLXJ1XCIsXG4gIG1heGltOiBcIm1heGltLWxvY2FsLWxlYWRzLXJ1XCJcbn07XG5cbmNvbnN0IGNhbm9uaWNhbEFnZW50SWQgPSAoYWdlbnRJZCkgPT4ge1xuICBpZiAoIWFnZW50SWQpIHJldHVybiBcIlwiO1xuICBjb25zdCBub3JtYWxpemVkID0gU3RyaW5nKGFnZW50SWQpLnRyaW0oKTtcbiAgcmV0dXJuIEFHRU5UX0lEX0FMSUFTRVNbbm9ybWFsaXplZF0gfHwgbm9ybWFsaXplZDtcbn07XG5cbmNvbnN0IHJlc29sdmVGaXh0dXJlT3V0cHV0UGF0aCA9IChhZ2VudElkLCBmaXh0dXJlc1Jvb3QpID0+IHtcbiAgY29uc3QgY2Fub25pY2FsID0gY2Fub25pY2FsQWdlbnRJZChhZ2VudElkKTtcbiAgaWYgKCFjYW5vbmljYWwpIHJldHVybiBcIlwiO1xuICBjb25zdCByb290ID0gZml4dHVyZXNSb290IHx8IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBcImZpeHR1cmVzXCIsIFwiYWdlbnRzXCIpO1xuICByZXR1cm4gcGF0aC5qb2luKHJvb3QsIGNhbm9uaWNhbCwgXCJvdXRwdXQuanNvblwiKTtcbn07XG5cbmNvbnN0IGhhc0ZpeHR1cmVGb3JBZ2VudCA9IChhZ2VudElkLCBmaXh0dXJlc1Jvb3QpID0+IHtcbiAgY29uc3Qgb3V0cHV0UGF0aCA9IHJlc29sdmVGaXh0dXJlT3V0cHV0UGF0aChhZ2VudElkLCBmaXh0dXJlc1Jvb3QpO1xuICByZXR1cm4gQm9vbGVhbihvdXRwdXRQYXRoICYmIGZzLmV4aXN0c1N5bmMob3V0cHV0UGF0aCkpO1xufTtcblxuY29uc3Qgc3RyaXBWb2xhdGlsZSA9ICh2YWx1ZSkgPT4ge1xuICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHZhbHVlO1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHJldHVybiB2YWx1ZS5tYXAoKGl0ZW0pID0+IHN0cmlwVm9sYXRpbGUoaXRlbSkpO1xuXG4gIGNvbnN0IG5leHQgPSB7fTtcbiAgT2JqZWN0LmVudHJpZXModmFsdWUpLmZvckVhY2goKFtrZXksIHZhbF0pID0+IHtcbiAgICBpZiAoa2V5ID09PSBcImdlbmVyYXRlZF9hdFwiKSB7XG4gICAgICBuZXh0W2tleV0gPSBcIjE5NzAtMDEtMDFUMDA6MDA6MDAuMDAwWlwiO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoa2V5ID09PSBcInJ1bl9pZFwiIHx8IGtleSA9PT0gXCJ0cmFjZV9pZFwiKSB7XG4gICAgICBuZXh0W2tleV0gPSBcInN0dWItcnVuXCI7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChrZXkgPT09IFwiZHVyYXRpb25fbXNcIikge1xuICAgICAgbmV4dFtrZXldID0gMDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbmV4dFtrZXldID0gc3RyaXBWb2xhdGlsZSh2YWwpO1xuICB9KTtcbiAgcmV0dXJuIG5leHQ7XG59O1xuXG5jb25zdCBjbG9uZUpzb24gPSAodmFsdWUpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn07XG5cbmNvbnN0IHBpY2tTY2hlbWFOb2RlID0gKHNjaGVtYSkgPT4ge1xuICBpZiAoIXNjaGVtYSB8fCB0eXBlb2Ygc2NoZW1hICE9PSBcIm9iamVjdFwiKSByZXR1cm4ge307XG4gIGlmIChBcnJheS5pc0FycmF5KHNjaGVtYS5vbmVPZikgJiYgc2NoZW1hLm9uZU9mLmxlbmd0aCkgcmV0dXJuIHNjaGVtYS5vbmVPZlswXSB8fCB7fTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoc2NoZW1hLmFueU9mKSAmJiBzY2hlbWEuYW55T2YubGVuZ3RoKSByZXR1cm4gc2NoZW1hLmFueU9mWzBdIHx8IHt9O1xuICBpZiAoQXJyYXkuaXNBcnJheShzY2hlbWEuYWxsT2YpICYmIHNjaGVtYS5hbGxPZi5sZW5ndGgpIHtcbiAgICByZXR1cm4gc2NoZW1hLmFsbE9mLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiAoeyAuLi5hY2MsIC4uLml0ZW0gfSksIHt9KTtcbiAgfVxuICByZXR1cm4gc2NoZW1hO1xufTtcblxuY29uc3Qgc2NoZW1hVHlwZSA9IChzY2hlbWEpID0+IHtcbiAgY29uc3Qgbm9kZSA9IHBpY2tTY2hlbWFOb2RlKHNjaGVtYSk7XG4gIGlmICghbm9kZSB8fCB0eXBlb2Ygbm9kZSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIFwib2JqZWN0XCI7XG4gIGlmIChub2RlLmNvbnN0ICE9PSB1bmRlZmluZWQpIHJldHVybiB0eXBlb2Ygbm9kZS5jb25zdDtcbiAgaWYgKG5vZGUuZGVmYXVsdCAhPT0gdW5kZWZpbmVkKSByZXR1cm4gdHlwZW9mIG5vZGUuZGVmYXVsdDtcbiAgaWYgKEFycmF5LmlzQXJyYXkobm9kZS5lbnVtKSAmJiBub2RlLmVudW0ubGVuZ3RoKSByZXR1cm4gdHlwZW9mIG5vZGUuZW51bVswXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkobm9kZS50eXBlKSkgcmV0dXJuIG5vZGUudHlwZVswXSB8fCBcIm9iamVjdFwiO1xuICByZXR1cm4gbm9kZS50eXBlIHx8IFwib2JqZWN0XCI7XG59O1xuXG5jb25zdCB2YWx1ZUZvckZvcm1hdCA9IChmb3JtYXQpID0+IHtcbiAgaWYgKGZvcm1hdCA9PT0gXCJkYXRlLXRpbWVcIikgcmV0dXJuIFwiMTk3MC0wMS0wMVQwMDowMDowMC4wMDBaXCI7XG4gIGlmIChmb3JtYXQgPT09IFwiZGF0ZVwiKSByZXR1cm4gXCIxOTcwLTAxLTAxXCI7XG4gIGlmIChmb3JtYXQgPT09IFwiZW1haWxcIikgcmV0dXJuIFwic3R1YkBleGFtcGxlLmNvbVwiO1xuICBpZiAoZm9ybWF0ID09PSBcInVyaVwiIHx8IGZvcm1hdCA9PT0gXCJ1cmxcIikgcmV0dXJuIFwiaHR0cHM6Ly9leGFtcGxlLmNvbVwiO1xuICByZXR1cm4gXCJzdHViXCI7XG59O1xuXG5jb25zdCBidWlsZEZyb21TY2hlbWEgPSAoc2NoZW1hLCBrZXlIaW50ID0gXCJcIikgPT4ge1xuICBjb25zdCBub2RlID0gcGlja1NjaGVtYU5vZGUoc2NoZW1hKTtcbiAgaWYgKCFub2RlIHx8IHR5cGVvZiBub2RlICE9PSBcIm9iamVjdFwiKSByZXR1cm4ge307XG5cbiAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChub2RlLCBcImNvbnN0XCIpKSByZXR1cm4gY2xvbmVKc29uKG5vZGUuY29uc3QpO1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG5vZGUsIFwiZGVmYXVsdFwiKSkgcmV0dXJuIGNsb25lSnNvbihub2RlLmRlZmF1bHQpO1xuICBpZiAoQXJyYXkuaXNBcnJheShub2RlLmVudW0pICYmIG5vZGUuZW51bS5sZW5ndGgpIHJldHVybiBjbG9uZUpzb24obm9kZS5lbnVtWzBdKTtcblxuICBjb25zdCB0eXBlID0gc2NoZW1hVHlwZShub2RlKTtcblxuICBpZiAodHlwZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGlmIChub2RlLmZvcm1hdCkgcmV0dXJuIHZhbHVlRm9yRm9ybWF0KG5vZGUuZm9ybWF0KTtcbiAgICBpZiAoa2V5SGludC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiZW1haWxcIikpIHJldHVybiBcInN0dWJAZXhhbXBsZS5jb21cIjtcbiAgICBpZiAoa2V5SGludC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwidXJsXCIpIHx8IGtleUhpbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImxpbmtcIikpIHtcbiAgICAgIHJldHVybiBcImh0dHBzOi8vZXhhbXBsZS5jb21cIjtcbiAgICB9XG4gICAgcmV0dXJuIFwic3R1YlwiO1xuICB9XG5cbiAgaWYgKHR5cGUgPT09IFwibnVtYmVyXCIgfHwgdHlwZSA9PT0gXCJpbnRlZ2VyXCIpIHtcbiAgICBpZiAoTnVtYmVyLmlzRmluaXRlKG5vZGUubWluaW11bSkpIHJldHVybiBOdW1iZXIobm9kZS5taW5pbXVtKTtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGlmICh0eXBlID09PSBcImJvb2xlYW5cIikgcmV0dXJuIGZhbHNlO1xuXG4gIGlmICh0eXBlID09PSBcImFycmF5XCIpIHtcbiAgICBjb25zdCBpdGVtU2NoZW1hID0gbm9kZS5pdGVtcyB8fCB7fTtcbiAgICByZXR1cm4gW2J1aWxkRnJvbVNjaGVtYShpdGVtU2NoZW1hLCBrZXlIaW50ID8gYCR7a2V5SGludH1faXRlbWAgOiBcIml0ZW1cIildO1xuICB9XG5cbiAgaWYgKHR5cGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gbm9kZS5wcm9wZXJ0aWVzICYmIHR5cGVvZiBub2RlLnByb3BlcnRpZXMgPT09IFwib2JqZWN0XCIgPyBub2RlLnByb3BlcnRpZXMgOiB7fTtcbiAgICBjb25zdCByZXF1aXJlZCA9IEFycmF5LmlzQXJyYXkobm9kZS5yZXF1aXJlZCkgPyBub2RlLnJlcXVpcmVkIDogW107XG4gICAgY29uc3Qga2V5cyA9IG5ldyBTZXQoWy4uLnJlcXVpcmVkLCAuLi5PYmplY3Qua2V5cyhwcm9wZXJ0aWVzKV0pO1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuXG4gICAgaWYgKGtleXMuc2l6ZSA9PT0gMCkge1xuICAgICAgcmV0dXJuIGtleUhpbnQgPT09IFwibWV0YVwiID8geyBnZW5lcmF0ZWRfYXQ6IFwiMTk3MC0wMS0wMVQwMDowMDowMC4wMDBaXCIgfSA6IHt9O1xuICAgIH1cblxuICAgIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCBjaGlsZFNjaGVtYSA9IHByb3BlcnRpZXNba2V5XSB8fCB7fTtcbiAgICAgIHJlc3VsdFtrZXldID0gYnVpbGRGcm9tU2NoZW1hKGNoaWxkU2NoZW1hLCBrZXkpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHJldHVybiB7fTtcbn07XG5cbmNsYXNzIEZha2VMTE1Qcm92aWRlciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMubmFtZSA9IFwiZmFrZVwiO1xuICAgIHRoaXMuZml4dHVyZXNSb290ID0gb3B0aW9ucy5maXh0dXJlc1Jvb3QgfHwgcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIFwiZml4dHVyZXNcIiwgXCJhZ2VudHNcIik7XG4gIH1cblxuICBsb2FkRml4dHVyZURhdGEoYWdlbnRJZCkge1xuICAgIGNvbnN0IG91dHB1dFBhdGggPSByZXNvbHZlRml4dHVyZU91dHB1dFBhdGgoYWdlbnRJZCwgdGhpcy5maXh0dXJlc1Jvb3QpO1xuICAgIGlmICghb3V0cHV0UGF0aCB8fCAhZnMuZXhpc3RzU3luYyhvdXRwdXRQYXRoKSkgcmV0dXJuIG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKG91dHB1dFBhdGgsIFwidXRmOFwiKSk7XG4gICAgICBjb25zdCBsZWdhY3lEYXRhID0gcGFyc2VkICYmIHBhcnNlZC5kYXRhID8gcGFyc2VkLmRhdGEgOiBwYXJzZWQ7XG4gICAgICByZXR1cm4gc3RyaXBWb2xhdGlsZShjbG9uZUpzb24obGVnYWN5RGF0YSkpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2VuZXJhdGVKc29uKHsgc2NoZW1hLCBtZXRhIH0gPSB7fSkge1xuICAgIGNvbnN0IGFnZW50SWQgPSBtZXRhICYmIHR5cGVvZiBtZXRhID09PSBcIm9iamVjdFwiID8gbWV0YS5hZ2VudF9pZCB8fCBtZXRhLmFnZW50SWQgOiBcIlwiO1xuICAgIGNvbnN0IGZpeHR1cmVEYXRhID0gYWdlbnRJZCA/IHRoaXMubG9hZEZpeHR1cmVEYXRhKGFnZW50SWQpIDogbnVsbDtcbiAgICBpZiAoZml4dHVyZURhdGEpIHtcbiAgICAgIHJldHVybiBmaXh0dXJlRGF0YTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVpbGRGcm9tU2NoZW1hKHNjaGVtYSB8fCB7fSwgXCJyb290XCIpO1xuICB9XG59XG5cbmNvbnN0IHNhbml0aXplU2NoZW1hTmFtZSA9ICh2YWx1ZSkgPT4ge1xuICBjb25zdCBub3JtYWxpemVkID0gU3RyaW5nKHZhbHVlIHx8IFwiYWdlbnRfb3V0cHV0XCIpXG4gICAgLnJlcGxhY2UoL1teYS16QS1aMC05X10vZywgXCJfXCIpXG4gICAgLnJlcGxhY2UoL18rL2csIFwiX1wiKVxuICAgIC5yZXBsYWNlKC9eXyt8XyskL2csIFwiXCIpO1xuICByZXR1cm4gbm9ybWFsaXplZCB8fCBcImFnZW50X291dHB1dFwiO1xufTtcblxuY29uc3Qgc3RyaXBDb2RlRmVuY2VzID0gKHZhbHVlKSA9PlxuICBTdHJpbmcodmFsdWUgfHwgXCJcIilcbiAgICAucmVwbGFjZSgvYGBganNvbi9naSwgXCJgYGBcIilcbiAgICAucmVwbGFjZSgvXmBgYC8sIFwiXCIpXG4gICAgLnJlcGxhY2UoL2BgYCQvLCBcIlwiKVxuICAgIC50cmltKCk7XG5cbmNvbnN0IHBhcnNlSnNvblN0cmluZyA9ICh2YWx1ZSkgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgZGlyZWN0ID0gdmFsdWUudHJpbSgpO1xuICBpZiAoIWRpcmVjdCkgcmV0dXJuIG51bGw7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZGlyZWN0KTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gY29udGludWVcbiAgfVxuICBjb25zdCBzdHJpcHBlZCA9IHN0cmlwQ29kZUZlbmNlcyhkaXJlY3QpO1xuICBpZiAoIXN0cmlwcGVkKSByZXR1cm4gbnVsbDtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShzdHJpcHBlZCk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG5jb25zdCBleHRyYWN0RXJyb3JNZXNzYWdlID0gKHBheWxvYWQpID0+IHtcbiAgaWYgKCFwYXlsb2FkIHx8IHR5cGVvZiBwYXlsb2FkICE9PSBcIm9iamVjdFwiKSByZXR1cm4gXCJcIjtcbiAgaWYgKHBheWxvYWQuZXJyb3IgJiYgdHlwZW9mIHBheWxvYWQuZXJyb3IgPT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gcGF5bG9hZC5lcnJvci5tZXNzYWdlIHx8IHBheWxvYWQuZXJyb3IuY29kZTtcbiAgICBpZiAobWVzc2FnZSkgcmV0dXJuIFN0cmluZyhtZXNzYWdlKTtcbiAgfVxuICByZXR1cm4gXCJcIjtcbn07XG5cbmNvbnN0IGdldE51bWVyaWNPcHRpb24gPSAodmFsdWUsIGZhbGxiYWNrKSA9PiB7XG4gIGNvbnN0IG51bWVyaWMgPSBOdW1iZXIodmFsdWUpO1xuICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG51bWVyaWMpID8gbnVtZXJpYyA6IGZhbGxiYWNrO1xufTtcblxuY2xhc3MgUmVhbExMTVByb3ZpZGVyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5uYW1lID0gXCJyZWFsXCI7XG4gICAgdGhpcy5hcGlLZXkgPSBvcHRpb25zLmFwaUtleSB8fCBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSB8fCBcIlwiO1xuICAgIHRoaXMuYmFzZVVybCA9IFN0cmluZyhcbiAgICAgIG9wdGlvbnMuYmFzZVVybCB8fCBwcm9jZXNzLmVudi5PUEVOQUlfQkFTRV9VUkwgfHwgXCJodHRwczovL2FwaS5vcGVuYWkuY29tL3YxXCJcbiAgICApLnJlcGxhY2UoL1xcLyskLywgXCJcIik7XG4gICAgdGhpcy5tb2RlbCA9IG9wdGlvbnMubW9kZWwgfHwgcHJvY2Vzcy5lbnYuT1BFTkFJX01PREVMIHx8IFwiZ3B0LTUtbWluaVwiO1xuICAgIHRoaXMudGltZW91dE1zID0gZ2V0TnVtZXJpY09wdGlvbihvcHRpb25zLnRpbWVvdXRNcyB8fCBwcm9jZXNzLmVudi5PUEVOQUlfVElNRU9VVF9NUywgNDUwMDApO1xuICAgIHRoaXMuZmV0Y2hJbXBsID0gb3B0aW9ucy5mZXRjaCB8fCBnbG9iYWxUaGlzLmZldGNoO1xuICB9XG5cbiAgYXN5bmMgcmVxdWVzdENoYXRDb21wbGV0aW9ucyhwYXlsb2FkKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmZldGNoSW1wbCAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHbG9iYWwgZmV0Y2ggaXMgbm90IGF2YWlsYWJsZSBmb3IgUmVhbExMTVByb3ZpZGVyLlwiKTtcbiAgICB9XG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIHRoaXMudGltZW91dE1zKTtcbiAgICBsZXQgcmVzcG9uc2U7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaEltcGwoYCR7dGhpcy5iYXNlVXJsfS9jaGF0L2NvbXBsZXRpb25zYCwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMuYXBpS2V5fWBcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmIGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiXG4gICAgICAgICAgPyBgT3BlbkFJIHJlcXVlc3QgdGltZWQgb3V0IGFmdGVyICR7dGhpcy50aW1lb3V0TXN9bXNgXG4gICAgICAgICAgOiBgT3BlbkFJIHJlcXVlc3QgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJ1bmtub3duIGVycm9yXCJ9YDtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIH1cblxuICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VKc29uU3RyaW5nKHRleHQpIHx8IHt9O1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGFwaU1lc3NhZ2UgPSBleHRyYWN0RXJyb3JNZXNzYWdlKHBhcnNlZCk7XG4gICAgICBjb25zdCByZWFzb24gPSBhcGlNZXNzYWdlIHx8IHRleHQuc2xpY2UoMCwgMzAwKSB8fCBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c31gO1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYE9wZW5BSSByZXF1ZXN0IGZhaWxlZCAoJHtyZXNwb25zZS5zdGF0dXN9KTogJHtyZWFzb259YCk7XG4gICAgICBlcnJvci5zdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZDtcbiAgfVxuXG4gIGV4dHJhY3RNZXNzYWdlVGV4dChwYXlsb2FkKSB7XG4gICAgY29uc3QgY29udGVudCA9IHBheWxvYWQ/LmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudDtcbiAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHJldHVybiBjb250ZW50O1xuICAgIGlmIChBcnJheS5pc0FycmF5KGNvbnRlbnQpKSB7XG4gICAgICByZXR1cm4gY29udGVudFxuICAgICAgICAubWFwKChwYXJ0KSA9PiB7XG4gICAgICAgICAgaWYgKCFwYXJ0IHx8IHR5cGVvZiBwYXJ0ICE9PSBcIm9iamVjdFwiKSByZXR1cm4gXCJcIjtcbiAgICAgICAgICBpZiAodHlwZW9mIHBhcnQudGV4dCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHBhcnQudGV4dDtcbiAgICAgICAgICBpZiAocGFydC50ZXh0ICYmIHR5cGVvZiBwYXJ0LnRleHQgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHBhcnQudGV4dC52YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnQudGV4dC52YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiBwYXJ0LmNvbnRlbnQgPT09IFwic3RyaW5nXCIpIHJldHVybiBwYXJ0LmNvbnRlbnQ7XG4gICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKFwiXCIpXG4gICAgICAgIC50cmltKCk7XG4gICAgfVxuICAgIHJldHVybiBcIlwiO1xuICB9XG5cbiAgYnVpbGRNZXNzYWdlcyhzeXN0ZW0sIHByb21wdCwgc2NoZW1hKSB7XG4gICAgY29uc3QgYmFzZVN5c3RlbSA9XG4gICAgICB0eXBlb2Ygc3lzdGVtID09PSBcInN0cmluZ1wiICYmIHN5c3RlbS50cmltKClcbiAgICAgICAgPyBzeXN0ZW0udHJpbSgpXG4gICAgICAgIDogXCJZb3UgYXJlIGEgc3RyaWN0IEpTT04gYXNzaXN0YW50LlwiO1xuICAgIGNvbnN0IHNjaGVtYUhpbnQgPVxuICAgICAgc2NoZW1hICYmIHR5cGVvZiBzY2hlbWEgPT09IFwib2JqZWN0XCIgJiYgT2JqZWN0LmtleXMoc2NoZW1hKS5sZW5ndGhcbiAgICAgICAgPyBgUmV0dXJuIG9ubHkgSlNPTiB0aGF0IG1hdGNoZXMgdGhpcyBzY2hlbWE6XFxuJHtKU09OLnN0cmluZ2lmeShzY2hlbWEpfWBcbiAgICAgICAgOiBcIlJldHVybiBvbmx5IHZhbGlkIEpTT04uXCI7XG4gICAgY29uc3QgdXNlclByb21wdCA9IHR5cGVvZiBwcm9tcHQgPT09IFwic3RyaW5nXCIgJiYgcHJvbXB0LnRyaW0oKSA/IHByb21wdC50cmltKCkgOiBcInt9XCI7XG4gICAgcmV0dXJuIFtcbiAgICAgIHsgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudDogYCR7YmFzZVN5c3RlbX1cXG5cXG4ke3NjaGVtYUhpbnR9YCB9LFxuICAgICAgeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogdXNlclByb21wdCB9XG4gICAgXTtcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlSnNvbih7IHN5c3RlbSwgcHJvbXB0LCBzY2hlbWEsIHRlbXBlcmF0dXJlLCBtYXhUb2tlbnMsIG1ldGEgfSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmFwaUtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT1BFTkFJX0FQSV9LRVkgaXMgcmVxdWlyZWQgd2hlbiBMTE1fUFJPVklERVI9cmVhbC5cIik7XG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdGVkTW9kZWwgPVxuICAgICAgbWV0YSAmJiB0eXBlb2YgbWV0YSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbWV0YS5tb2RlbCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICA/IG1ldGEubW9kZWwudHJpbSgpXG4gICAgICAgIDogXCJcIjtcbiAgICBjb25zdCBtb2RlbCA9IHJlcXVlc3RlZE1vZGVsIHx8IHRoaXMubW9kZWw7XG4gICAgY29uc3QgbWVzc2FnZXMgPSB0aGlzLmJ1aWxkTWVzc2FnZXMoc3lzdGVtLCBwcm9tcHQsIHNjaGVtYSk7XG4gICAgY29uc3QgY2FwcGVkVGVtcGVyYXR1cmUgPSBNYXRoLm1pbihNYXRoLm1heChnZXROdW1lcmljT3B0aW9uKHRlbXBlcmF0dXJlLCAwLjIpLCAwKSwgMS41KTtcbiAgICBjb25zdCB0b2tlbkxpbWl0ID0gTWF0aC5tYXgoMjAwLCBNYXRoLm1pbig2MDAwLCBnZXROdW1lcmljT3B0aW9uKG1heFRva2VucywgMTgwMCkpKTtcbiAgICBjb25zdCBoYXNTY2hlbWEgPSBCb29sZWFuKHNjaGVtYSAmJiB0eXBlb2Ygc2NoZW1hID09PSBcIm9iamVjdFwiICYmIE9iamVjdC5rZXlzKHNjaGVtYSkubGVuZ3RoKTtcbiAgICBjb25zdCBzY2hlbWFOYW1lID0gc2FuaXRpemVTY2hlbWFOYW1lKFxuICAgICAgbWV0YSAmJiB0eXBlb2YgbWV0YSA9PT0gXCJvYmplY3RcIiA/IG1ldGEuYWdlbnRfaWQgfHwgbWV0YS5hZ2VudElkIHx8IFwiYWdlbnRfb3V0cHV0XCIgOiBcImFnZW50X291dHB1dFwiXG4gICAgKTtcblxuICAgIGNvbnN0IHdpdGhTY2hlbWFQYXlsb2FkID0ge1xuICAgICAgbW9kZWwsXG4gICAgICBtZXNzYWdlcyxcbiAgICAgIHRlbXBlcmF0dXJlOiBjYXBwZWRUZW1wZXJhdHVyZSxcbiAgICAgIG1heF90b2tlbnM6IHRva2VuTGltaXQsXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IGhhc1NjaGVtYVxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHR5cGU6IFwianNvbl9zY2hlbWFcIixcbiAgICAgICAgICAgIGpzb25fc2NoZW1hOiB7IG5hbWU6IHNjaGVtYU5hbWUsIHN0cmljdDogdHJ1ZSwgc2NoZW1hIH1cbiAgICAgICAgICB9XG4gICAgICAgIDogeyB0eXBlOiBcImpzb25fb2JqZWN0XCIgfVxuICAgIH07XG5cbiAgICBsZXQgZmlyc3RSZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgIGZpcnN0UmVzdWx0ID0gYXdhaXQgdGhpcy5yZXF1ZXN0Q2hhdENvbXBsZXRpb25zKHdpdGhTY2hlbWFQYXlsb2FkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gU29tZSBtb2RlbHMvZW5kcG9pbnRzIG1heSByZWplY3QganNvbl9zY2hlbWE7IGZhbGxiYWNrIHRvIHBsYWluIGpzb25fb2JqZWN0LlxuICAgICAgY29uc3QgZmFsbGJhY2tQYXlsb2FkID0ge1xuICAgICAgICBtb2RlbCxcbiAgICAgICAgbWVzc2FnZXMsXG4gICAgICAgIHRlbXBlcmF0dXJlOiBjYXBwZWRUZW1wZXJhdHVyZSxcbiAgICAgICAgbWF4X3Rva2VuczogdG9rZW5MaW1pdCxcbiAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6IFwianNvbl9vYmplY3RcIiB9XG4gICAgICB9O1xuICAgICAgZmlyc3RSZXN1bHQgPSBhd2FpdCB0aGlzLnJlcXVlc3RDaGF0Q29tcGxldGlvbnMoZmFsbGJhY2tQYXlsb2FkKTtcbiAgICB9XG5cbiAgICBjb25zdCB0ZXh0ID0gdGhpcy5leHRyYWN0TWVzc2FnZVRleHQoZmlyc3RSZXN1bHQpO1xuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlSnNvblN0cmluZyh0ZXh0KTtcbiAgICBpZiAocGFyc2VkICYmIHR5cGVvZiBwYXJzZWQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiT3BlbkFJIHJldHVybmVkIG5vbi1KU09OIG91dHB1dCBmb3IgZ2VuZXJhdGVKc29uKCkuXCIpO1xuICB9XG59XG5cbmNvbnN0IGNyZWF0ZUxMTVByb3ZpZGVyID0gKHsgcHJvdmlkZXIsIGZpeHR1cmVzUm9vdCB9ID0ge30pID0+IHtcbiAgY29uc3QgbW9kZSA9IG5vcm1hbGl6ZVByb3ZpZGVyTmFtZShwcm92aWRlciB8fCBnZXRDb25maWd1cmVkUHJvdmlkZXJOYW1lKCkpO1xuICBpZiAobW9kZSA9PT0gXCJyZWFsXCIpIHJldHVybiBuZXcgUmVhbExMTVByb3ZpZGVyKCk7XG4gIHJldHVybiBuZXcgRmFrZUxMTVByb3ZpZGVyKHsgZml4dHVyZXNSb290IH0pO1xufTtcblxubGV0IHNpbmdsZXRvbiA9IG51bGw7XG5cbmNvbnN0IGdldExMTVByb3ZpZGVyID0gKG9wdGlvbnMgPSB7fSkgPT4ge1xuICBpZiAob3B0aW9ucy5mb3JjZU5ldykgcmV0dXJuIGNyZWF0ZUxMTVByb3ZpZGVyKG9wdGlvbnMpO1xuICBpZiAoIXNpbmdsZXRvbikgc2luZ2xldG9uID0gY3JlYXRlTExNUHJvdmlkZXIob3B0aW9ucyk7XG4gIHJldHVybiBzaW5nbGV0b247XG59O1xuXG5jb25zdCBpc0Zha2VMTE1Qcm92aWRlciA9IChwcm92aWRlcikgPT4ge1xuICBjb25zdCBuYW1lID0gcHJvdmlkZXIgJiYgdHlwZW9mIHByb3ZpZGVyID09PSBcIm9iamVjdFwiID8gcHJvdmlkZXIubmFtZSA6IFwiXCI7XG4gIHJldHVybiBub3JtYWxpemVQcm92aWRlck5hbWUobmFtZSkgPT09IFwiZmFrZVwiO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEZha2VMTE1Qcm92aWRlcixcbiAgUmVhbExMTVByb3ZpZGVyLFxuICBidWlsZEZyb21TY2hlbWEsXG4gIGNhbm9uaWNhbEFnZW50SWQsXG4gIGNyZWF0ZUxMTVByb3ZpZGVyLFxuICBnZXRDb25maWd1cmVkUHJvdmlkZXJOYW1lLFxuICBnZXRMTE1Qcm92aWRlcixcbiAgaGFzUmVhbFByb3ZpZGVyQ3JlZGVudGlhbHMsXG4gIGhhc0ZpeHR1cmVGb3JBZ2VudCxcbiAgaXNGYWtlTExNUHJvdmlkZXIsXG4gIHJlc29sdmVGaXh0dXJlT3V0cHV0UGF0aCxcbiAgc3RyaXBWb2xhdGlsZVxufTtcbiJdLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwYXRoIiwiREVGQVVMVF9QUk9WSURFUiIsIm5vcm1hbGl6ZVByb3ZpZGVyTmFtZSIsInZhbHVlIiwibm9ybWFsaXplZCIsIlN0cmluZyIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsImdldENvbmZpZ3VyZWRQcm92aWRlck5hbWUiLCJwcm9jZXNzIiwiZW52IiwiTExNX1BST1ZJREVSIiwiaGFzUmVhbFByb3ZpZGVyQ3JlZGVudGlhbHMiLCJCb29sZWFuIiwiT1BFTkFJX0FQSV9LRVkiLCJBR0VOVF9JRF9BTElBU0VTIiwicGxhdG9uIiwiYW5hdG9seSIsIm1heGltIiwiY2Fub25pY2FsQWdlbnRJZCIsImFnZW50SWQiLCJyZXNvbHZlRml4dHVyZU91dHB1dFBhdGgiLCJmaXh0dXJlc1Jvb3QiLCJjYW5vbmljYWwiLCJyb290Iiwiam9pbiIsImN3ZCIsImhhc0ZpeHR1cmVGb3JBZ2VudCIsIm91dHB1dFBhdGgiLCJleGlzdHNTeW5jIiwic3RyaXBWb2xhdGlsZSIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsIml0ZW0iLCJuZXh0IiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWwiLCJjbG9uZUpzb24iLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJwaWNrU2NoZW1hTm9kZSIsInNjaGVtYSIsIm9uZU9mIiwibGVuZ3RoIiwiYW55T2YiLCJhbGxPZiIsInJlZHVjZSIsImFjYyIsInNjaGVtYVR5cGUiLCJub2RlIiwiY29uc3QiLCJ1bmRlZmluZWQiLCJkZWZhdWx0IiwiZW51bSIsInR5cGUiLCJ2YWx1ZUZvckZvcm1hdCIsImZvcm1hdCIsImJ1aWxkRnJvbVNjaGVtYSIsImtleUhpbnQiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbmNsdWRlcyIsIk51bWJlciIsImlzRmluaXRlIiwibWluaW11bSIsIml0ZW1TY2hlbWEiLCJpdGVtcyIsInByb3BlcnRpZXMiLCJyZXF1aXJlZCIsImtleXMiLCJTZXQiLCJyZXN1bHQiLCJzaXplIiwiZ2VuZXJhdGVkX2F0IiwiY2hpbGRTY2hlbWEiLCJGYWtlTExNUHJvdmlkZXIiLCJvcHRpb25zIiwibmFtZSIsImxvYWRGaXh0dXJlRGF0YSIsInBhcnNlZCIsInJlYWRGaWxlU3luYyIsImxlZ2FjeURhdGEiLCJkYXRhIiwiZ2VuZXJhdGVKc29uIiwibWV0YSIsImFnZW50X2lkIiwiZml4dHVyZURhdGEiLCJzYW5pdGl6ZVNjaGVtYU5hbWUiLCJyZXBsYWNlIiwic3RyaXBDb2RlRmVuY2VzIiwicGFyc2VKc29uU3RyaW5nIiwiZGlyZWN0Iiwic3RyaXBwZWQiLCJleHRyYWN0RXJyb3JNZXNzYWdlIiwicGF5bG9hZCIsImVycm9yIiwibWVzc2FnZSIsImNvZGUiLCJnZXROdW1lcmljT3B0aW9uIiwiZmFsbGJhY2siLCJudW1lcmljIiwiUmVhbExMTVByb3ZpZGVyIiwiYXBpS2V5IiwiYmFzZVVybCIsIk9QRU5BSV9CQVNFX1VSTCIsIm1vZGVsIiwiT1BFTkFJX01PREVMIiwidGltZW91dE1zIiwiT1BFTkFJX1RJTUVPVVRfTVMiLCJmZXRjaEltcGwiLCJmZXRjaCIsImdsb2JhbFRoaXMiLCJyZXF1ZXN0Q2hhdENvbXBsZXRpb25zIiwiRXJyb3IiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwidGltZW91dCIsInNldFRpbWVvdXQiLCJhYm9ydCIsInJlc3BvbnNlIiwibWV0aG9kIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJib2R5Iiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0IiwidGV4dCIsIm9rIiwiYXBpTWVzc2FnZSIsInJlYXNvbiIsInNsaWNlIiwic3RhdHVzIiwiZXh0cmFjdE1lc3NhZ2VUZXh0IiwiY29udGVudCIsImNob2ljZXMiLCJwYXJ0IiwiYnVpbGRNZXNzYWdlcyIsInN5c3RlbSIsInByb21wdCIsImJhc2VTeXN0ZW0iLCJzY2hlbWFIaW50IiwidXNlclByb21wdCIsInJvbGUiLCJ0ZW1wZXJhdHVyZSIsIm1heFRva2VucyIsInJlcXVlc3RlZE1vZGVsIiwibWVzc2FnZXMiLCJjYXBwZWRUZW1wZXJhdHVyZSIsIk1hdGgiLCJtaW4iLCJtYXgiLCJ0b2tlbkxpbWl0IiwiaGFzU2NoZW1hIiwic2NoZW1hTmFtZSIsIndpdGhTY2hlbWFQYXlsb2FkIiwibWF4X3Rva2VucyIsInJlc3BvbnNlX2Zvcm1hdCIsImpzb25fc2NoZW1hIiwic3RyaWN0IiwiZmlyc3RSZXN1bHQiLCJmYWxsYmFja1BheWxvYWQiLCJjcmVhdGVMTE1Qcm92aWRlciIsInByb3ZpZGVyIiwibW9kZSIsInNpbmdsZXRvbiIsImdldExMTVByb3ZpZGVyIiwiZm9yY2VOZXciLCJpc0Zha2VMTE1Qcm92aWRlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/llm/provider.js\n");

/***/ }),

/***/ "(rsc)/./utils/agentEnvelope.js":
/*!********************************!*\
  !*** ./utils/agentEnvelope.js ***!
  \********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { randomUUID } = __webpack_require__(/*! crypto */ \"crypto\");\nconst { getAgentSchema } = __webpack_require__(/*! ./agentSchemas */ \"(rsc)/./utils/agentSchemas.js\");\nconst { validateAgentResponse } = __webpack_require__(/*! ./validateAgentResponse */ \"(rsc)/./utils/validateAgentResponse.js\");\nconst { buildHandoff } = __webpack_require__(/*! ./handoff */ \"(rsc)/./utils/handoff.js\");\nconst { getConfiguredProviderName, hasRealProviderCredentials } = __webpack_require__(/*! ../lib/llm/provider.js */ \"(rsc)/./lib/llm/provider.js\");\nconst makeRunId = ()=>{\n    if (typeof randomUUID === \"function\") {\n        return randomUUID();\n    }\n    const rand = Math.random().toString(36).slice(2, 8);\n    return `run_${Date.now()}_${rand}`;\n};\nconst deriveQualityChecks = (legacyMeta = {})=>{\n    const legacy = legacyMeta && legacyMeta.quality_checks ? legacyMeta.quality_checks : {};\n    const providerName = getConfiguredProviderName();\n    const withinLimits = typeof legacy.within_max_words === \"boolean\" ? legacy.within_max_words : typeof legacy.within_limits === \"boolean\" ? legacy.within_limits : true;\n    const noFabrication = typeof legacy.no_fabrication === \"boolean\" ? legacy.no_fabrication : typeof legacy.no_gray_scraping === \"boolean\" ? legacy.no_gray_scraping : true;\n    const dedupeOk = typeof legacy.dedupe_ok === \"boolean\" ? legacy.dedupe_ok : true;\n    const groundingOk = typeof legacy.grounded_claims_ok === \"boolean\" ? legacy.grounded_claims_ok : typeof legacy.grounding_ok === \"boolean\" ? legacy.grounding_ok : true;\n    const llmConnectedByEnv = providerName === \"real\" && hasRealProviderCredentials();\n    return {\n        no_fabrication: noFabrication,\n        within_limits: withinLimits,\n        dedupe_ok: dedupeOk,\n        grounding_ok: groundingOk,\n        llm_connected: typeof legacy.llm_connected === \"boolean\" ? legacy.llm_connected : llmConnectedByEnv,\n        schema_valid: true\n    };\n};\nconst unwrapLegacy = (payload)=>{\n    if (payload && payload.data && payload.meta) return payload.data;\n    return payload;\n};\nconst sanitizeInputEcho = (input)=>{\n    if (!input || typeof input !== \"object\") return input;\n    const clone = Array.isArray(input) ? [\n        ...input\n    ] : {\n        ...input\n    };\n    if (Array.isArray(clone)) return clone;\n    Object.keys(clone).forEach((key)=>{\n        if (key.startsWith(\"__\")) {\n            delete clone[key];\n        }\n    });\n    return clone;\n};\nconst wrapAgentOutput = ({ agentId, inputEcho, mode, legacyOutput, webStatsOverride, traceId })=>{\n    const data = legacyOutput || {};\n    const legacyMeta = data && data.meta ? data.meta : {};\n    const schema = getAgentSchema(agentId);\n    const validation = validateAgentResponse(data, schema);\n    const qualityChecks = deriveQualityChecks(legacyMeta);\n    qualityChecks.schema_valid = validation.ok;\n    const limitations = Array.isArray(legacyMeta.limitations) ? legacyMeta.limitations : [];\n    const assumptions = Array.isArray(legacyMeta.assumptions) ? legacyMeta.assumptions : [];\n    const warnings = Array.isArray(legacyMeta.warnings) ? legacyMeta.warnings : [];\n    const budgetApplied = legacyMeta && typeof legacyMeta.budget_applied === \"object\" ? legacyMeta.budget_applied : null;\n    const knowledgeUsed = legacyMeta && legacyMeta.knowledge_used || inputEcho && inputEcho.__knowledge_used || {\n        workspace_items: 0,\n        agent_items: 0,\n        top_ids: []\n    };\n    const web_stats = webStatsOverride || (legacyMeta && legacyMeta.web_stats ? legacyMeta.web_stats : null);\n    const handoff = buildHandoff(agentId, data);\n    const envelopeMeta = {\n        agent_id: agentId,\n        generated_at: new Date().toISOString(),\n        run_id: makeRunId(),\n        mode: mode || \"\",\n        input_echo: sanitizeInputEcho(inputEcho) || {},\n        quality_checks: qualityChecks,\n        limitations,\n        assumptions,\n        handoff,\n        web_stats,\n        knowledge_used: knowledgeUsed\n    };\n    if (warnings.length) {\n        envelopeMeta.warnings = warnings;\n    }\n    if (budgetApplied) {\n        envelopeMeta.budget_applied = budgetApplied;\n    }\n    const hasWebStats = web_stats && typeof web_stats === \"object\";\n    const trace_id = traceId || (hasWebStats ? envelopeMeta.run_id : undefined);\n    if (trace_id) {\n        envelopeMeta.trace_id = trace_id;\n    }\n    return {\n        data,\n        meta: envelopeMeta,\n        validation\n    };\n};\nmodule.exports = {\n    wrapAgentOutput,\n    unwrapLegacy\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUEsSUFBSUgsU0FBU2lCLE1BQU0sRUFBRTtRQUNuQk4sYUFBYVgsUUFBUSxHQUFHQTtJQUMxQjtJQUNBLElBQUlDLGVBQWU7UUFDakJVLGFBQWFULGNBQWMsR0FBR0Q7SUFDaEM7SUFFQSxNQUFNaUIsY0FBY1QsYUFBYSxPQUFPQSxjQUFjO0lBQ3RELE1BQU1VLFdBQVcxQixXQUFZeUIsQ0FBQUEsY0FBY1AsYUFBYUksTUFBTSxHQUFHSyxTQUFRO0lBQ3pFLElBQUlELFVBQVU7UUFDWlIsYUFBYVEsUUFBUSxHQUFHQTtJQUMxQjtJQUVBLE9BQU87UUFBRTVDO1FBQU1DLE1BQU1tQztRQUFjaEI7SUFBVztBQUNoRDtBQUVBMEIsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZuQztJQUNBZDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvYWJ1emFkYS9EZXNrdG9wL2FnZW50T1MvdXRpbHMvYWdlbnRFbnZlbG9wZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHJhbmRvbVVVSUQgfSA9IHJlcXVpcmUoXCJjcnlwdG9cIik7XG5jb25zdCB7IGdldEFnZW50U2NoZW1hIH0gPSByZXF1aXJlKFwiLi9hZ2VudFNjaGVtYXNcIik7XG5jb25zdCB7IHZhbGlkYXRlQWdlbnRSZXNwb25zZSB9ID0gcmVxdWlyZShcIi4vdmFsaWRhdGVBZ2VudFJlc3BvbnNlXCIpO1xuY29uc3QgeyBidWlsZEhhbmRvZmYgfSA9IHJlcXVpcmUoXCIuL2hhbmRvZmZcIik7XG5jb25zdCB7XG4gIGdldENvbmZpZ3VyZWRQcm92aWRlck5hbWUsXG4gIGhhc1JlYWxQcm92aWRlckNyZWRlbnRpYWxzXG59ID0gcmVxdWlyZShcIi4uL2xpYi9sbG0vcHJvdmlkZXIuanNcIik7XG5cbmNvbnN0IG1ha2VSdW5JZCA9ICgpID0+IHtcbiAgaWYgKHR5cGVvZiByYW5kb21VVUlEID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gcmFuZG9tVVVJRCgpO1xuICB9XG4gIGNvbnN0IHJhbmQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLCA4KTtcbiAgcmV0dXJuIGBydW5fJHtEYXRlLm5vdygpfV8ke3JhbmR9YDtcbn07XG5cbmNvbnN0IGRlcml2ZVF1YWxpdHlDaGVja3MgPSAobGVnYWN5TWV0YSA9IHt9KSA9PiB7XG4gIGNvbnN0IGxlZ2FjeSA9IGxlZ2FjeU1ldGEgJiYgbGVnYWN5TWV0YS5xdWFsaXR5X2NoZWNrcyA/IGxlZ2FjeU1ldGEucXVhbGl0eV9jaGVja3MgOiB7fTtcbiAgY29uc3QgcHJvdmlkZXJOYW1lID0gZ2V0Q29uZmlndXJlZFByb3ZpZGVyTmFtZSgpO1xuICBjb25zdCB3aXRoaW5MaW1pdHMgPVxuICAgIHR5cGVvZiBsZWdhY3kud2l0aGluX21heF93b3JkcyA9PT0gXCJib29sZWFuXCJcbiAgICAgID8gbGVnYWN5LndpdGhpbl9tYXhfd29yZHNcbiAgICAgIDogdHlwZW9mIGxlZ2FjeS53aXRoaW5fbGltaXRzID09PSBcImJvb2xlYW5cIlxuICAgICAgICA/IGxlZ2FjeS53aXRoaW5fbGltaXRzXG4gICAgICAgIDogdHJ1ZTtcbiAgY29uc3Qgbm9GYWJyaWNhdGlvbiA9XG4gICAgdHlwZW9mIGxlZ2FjeS5ub19mYWJyaWNhdGlvbiA9PT0gXCJib29sZWFuXCJcbiAgICAgID8gbGVnYWN5Lm5vX2ZhYnJpY2F0aW9uXG4gICAgICA6IHR5cGVvZiBsZWdhY3kubm9fZ3JheV9zY3JhcGluZyA9PT0gXCJib29sZWFuXCJcbiAgICAgICAgPyBsZWdhY3kubm9fZ3JheV9zY3JhcGluZ1xuICAgICAgICA6IHRydWU7XG4gIGNvbnN0IGRlZHVwZU9rID0gdHlwZW9mIGxlZ2FjeS5kZWR1cGVfb2sgPT09IFwiYm9vbGVhblwiID8gbGVnYWN5LmRlZHVwZV9vayA6IHRydWU7XG4gIGNvbnN0IGdyb3VuZGluZ09rID1cbiAgICB0eXBlb2YgbGVnYWN5Lmdyb3VuZGVkX2NsYWltc19vayA9PT0gXCJib29sZWFuXCJcbiAgICAgID8gbGVnYWN5Lmdyb3VuZGVkX2NsYWltc19va1xuICAgICAgOiB0eXBlb2YgbGVnYWN5Lmdyb3VuZGluZ19vayA9PT0gXCJib29sZWFuXCJcbiAgICAgICAgPyBsZWdhY3kuZ3JvdW5kaW5nX29rXG4gICAgICAgIDogdHJ1ZTtcbiAgY29uc3QgbGxtQ29ubmVjdGVkQnlFbnYgPSBwcm92aWRlck5hbWUgPT09IFwicmVhbFwiICYmIGhhc1JlYWxQcm92aWRlckNyZWRlbnRpYWxzKCk7XG4gIHJldHVybiB7XG4gICAgbm9fZmFicmljYXRpb246IG5vRmFicmljYXRpb24sXG4gICAgd2l0aGluX2xpbWl0czogd2l0aGluTGltaXRzLFxuICAgIGRlZHVwZV9vazogZGVkdXBlT2ssXG4gICAgZ3JvdW5kaW5nX29rOiBncm91bmRpbmdPayxcbiAgICBsbG1fY29ubmVjdGVkOlxuICAgICAgdHlwZW9mIGxlZ2FjeS5sbG1fY29ubmVjdGVkID09PSBcImJvb2xlYW5cIlxuICAgICAgICA/IGxlZ2FjeS5sbG1fY29ubmVjdGVkXG4gICAgICAgIDogbGxtQ29ubmVjdGVkQnlFbnYsXG4gICAgc2NoZW1hX3ZhbGlkOiB0cnVlXG4gIH07XG59O1xuXG5jb25zdCB1bndyYXBMZWdhY3kgPSAocGF5bG9hZCkgPT4ge1xuICBpZiAocGF5bG9hZCAmJiBwYXlsb2FkLmRhdGEgJiYgcGF5bG9hZC5tZXRhKSByZXR1cm4gcGF5bG9hZC5kYXRhO1xuICByZXR1cm4gcGF5bG9hZDtcbn07XG5cbmNvbnN0IHNhbml0aXplSW5wdXRFY2hvID0gKGlucHV0KSA9PiB7XG4gIGlmICghaW5wdXQgfHwgdHlwZW9mIGlucHV0ICE9PSBcIm9iamVjdFwiKSByZXR1cm4gaW5wdXQ7XG4gIGNvbnN0IGNsb25lID0gQXJyYXkuaXNBcnJheShpbnB1dCkgPyBbLi4uaW5wdXRdIDogeyAuLi5pbnB1dCB9O1xuICBpZiAoQXJyYXkuaXNBcnJheShjbG9uZSkpIHJldHVybiBjbG9uZTtcbiAgT2JqZWN0LmtleXMoY2xvbmUpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmIChrZXkuc3RhcnRzV2l0aChcIl9fXCIpKSB7XG4gICAgICBkZWxldGUgY2xvbmVba2V5XTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gY2xvbmU7XG59O1xuXG5jb25zdCB3cmFwQWdlbnRPdXRwdXQgPSAoe1xuICBhZ2VudElkLFxuICBpbnB1dEVjaG8sXG4gIG1vZGUsXG4gIGxlZ2FjeU91dHB1dCxcbiAgd2ViU3RhdHNPdmVycmlkZSxcbiAgdHJhY2VJZFxufSkgPT4ge1xuICBjb25zdCBkYXRhID0gbGVnYWN5T3V0cHV0IHx8IHt9O1xuICBjb25zdCBsZWdhY3lNZXRhID0gZGF0YSAmJiBkYXRhLm1ldGEgPyBkYXRhLm1ldGEgOiB7fTtcbiAgY29uc3Qgc2NoZW1hID0gZ2V0QWdlbnRTY2hlbWEoYWdlbnRJZCk7XG4gIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZUFnZW50UmVzcG9uc2UoZGF0YSwgc2NoZW1hKTtcblxuICBjb25zdCBxdWFsaXR5Q2hlY2tzID0gZGVyaXZlUXVhbGl0eUNoZWNrcyhsZWdhY3lNZXRhKTtcbiAgcXVhbGl0eUNoZWNrcy5zY2hlbWFfdmFsaWQgPSB2YWxpZGF0aW9uLm9rO1xuXG4gIGNvbnN0IGxpbWl0YXRpb25zID0gQXJyYXkuaXNBcnJheShsZWdhY3lNZXRhLmxpbWl0YXRpb25zKSA/IGxlZ2FjeU1ldGEubGltaXRhdGlvbnMgOiBbXTtcbiAgY29uc3QgYXNzdW1wdGlvbnMgPSBBcnJheS5pc0FycmF5KGxlZ2FjeU1ldGEuYXNzdW1wdGlvbnMpID8gbGVnYWN5TWV0YS5hc3N1bXB0aW9ucyA6IFtdO1xuICBjb25zdCB3YXJuaW5ncyA9IEFycmF5LmlzQXJyYXkobGVnYWN5TWV0YS53YXJuaW5ncykgPyBsZWdhY3lNZXRhLndhcm5pbmdzIDogW107XG4gIGNvbnN0IGJ1ZGdldEFwcGxpZWQgPVxuICAgIGxlZ2FjeU1ldGEgJiYgdHlwZW9mIGxlZ2FjeU1ldGEuYnVkZ2V0X2FwcGxpZWQgPT09IFwib2JqZWN0XCJcbiAgICAgID8gbGVnYWN5TWV0YS5idWRnZXRfYXBwbGllZFxuICAgICAgOiBudWxsO1xuICBjb25zdCBrbm93bGVkZ2VVc2VkID1cbiAgICAobGVnYWN5TWV0YSAmJiBsZWdhY3lNZXRhLmtub3dsZWRnZV91c2VkKSB8fFxuICAgIChpbnB1dEVjaG8gJiYgaW5wdXRFY2hvLl9fa25vd2xlZGdlX3VzZWQpIHx8XG4gICAgeyB3b3Jrc3BhY2VfaXRlbXM6IDAsIGFnZW50X2l0ZW1zOiAwLCB0b3BfaWRzOiBbXSB9O1xuXG4gIGNvbnN0IHdlYl9zdGF0cyA9XG4gICAgd2ViU3RhdHNPdmVycmlkZSB8fCAobGVnYWN5TWV0YSAmJiBsZWdhY3lNZXRhLndlYl9zdGF0cyA/IGxlZ2FjeU1ldGEud2ViX3N0YXRzIDogbnVsbCk7XG5cbiAgY29uc3QgaGFuZG9mZiA9IGJ1aWxkSGFuZG9mZihhZ2VudElkLCBkYXRhKTtcblxuICBjb25zdCBlbnZlbG9wZU1ldGEgPSB7XG4gICAgYWdlbnRfaWQ6IGFnZW50SWQsXG4gICAgZ2VuZXJhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgcnVuX2lkOiBtYWtlUnVuSWQoKSxcbiAgICBtb2RlOiBtb2RlIHx8IFwiXCIsXG4gICAgaW5wdXRfZWNobzogc2FuaXRpemVJbnB1dEVjaG8oaW5wdXRFY2hvKSB8fCB7fSxcbiAgICBxdWFsaXR5X2NoZWNrczogcXVhbGl0eUNoZWNrcyxcbiAgICBsaW1pdGF0aW9ucyxcbiAgICBhc3N1bXB0aW9ucyxcbiAgICBoYW5kb2ZmLFxuICAgIHdlYl9zdGF0cyxcbiAgICBrbm93bGVkZ2VfdXNlZDoga25vd2xlZGdlVXNlZFxuICB9O1xuXG4gIGlmICh3YXJuaW5ncy5sZW5ndGgpIHtcbiAgICBlbnZlbG9wZU1ldGEud2FybmluZ3MgPSB3YXJuaW5ncztcbiAgfVxuICBpZiAoYnVkZ2V0QXBwbGllZCkge1xuICAgIGVudmVsb3BlTWV0YS5idWRnZXRfYXBwbGllZCA9IGJ1ZGdldEFwcGxpZWQ7XG4gIH1cblxuICBjb25zdCBoYXNXZWJTdGF0cyA9IHdlYl9zdGF0cyAmJiB0eXBlb2Ygd2ViX3N0YXRzID09PSBcIm9iamVjdFwiO1xuICBjb25zdCB0cmFjZV9pZCA9IHRyYWNlSWQgfHwgKGhhc1dlYlN0YXRzID8gZW52ZWxvcGVNZXRhLnJ1bl9pZCA6IHVuZGVmaW5lZCk7XG4gIGlmICh0cmFjZV9pZCkge1xuICAgIGVudmVsb3BlTWV0YS50cmFjZV9pZCA9IHRyYWNlX2lkO1xuICB9XG5cbiAgcmV0dXJuIHsgZGF0YSwgbWV0YTogZW52ZWxvcGVNZXRhLCB2YWxpZGF0aW9uIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgd3JhcEFnZW50T3V0cHV0LFxuICB1bndyYXBMZWdhY3lcbn07XG4iXSwibmFtZXMiOlsicmFuZG9tVVVJRCIsInJlcXVpcmUiLCJnZXRBZ2VudFNjaGVtYSIsInZhbGlkYXRlQWdlbnRSZXNwb25zZSIsImJ1aWxkSGFuZG9mZiIsImdldENvbmZpZ3VyZWRQcm92aWRlck5hbWUiLCJoYXNSZWFsUHJvdmlkZXJDcmVkZW50aWFscyIsIm1ha2VSdW5JZCIsInJhbmQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzbGljZSIsIkRhdGUiLCJub3ciLCJkZXJpdmVRdWFsaXR5Q2hlY2tzIiwibGVnYWN5TWV0YSIsImxlZ2FjeSIsInF1YWxpdHlfY2hlY2tzIiwicHJvdmlkZXJOYW1lIiwid2l0aGluTGltaXRzIiwid2l0aGluX21heF93b3JkcyIsIndpdGhpbl9saW1pdHMiLCJub0ZhYnJpY2F0aW9uIiwibm9fZmFicmljYXRpb24iLCJub19ncmF5X3NjcmFwaW5nIiwiZGVkdXBlT2siLCJkZWR1cGVfb2siLCJncm91bmRpbmdPayIsImdyb3VuZGVkX2NsYWltc19vayIsImdyb3VuZGluZ19vayIsImxsbUNvbm5lY3RlZEJ5RW52IiwibGxtX2Nvbm5lY3RlZCIsInNjaGVtYV92YWxpZCIsInVud3JhcExlZ2FjeSIsInBheWxvYWQiLCJkYXRhIiwibWV0YSIsInNhbml0aXplSW5wdXRFY2hvIiwiaW5wdXQiLCJjbG9uZSIsIkFycmF5IiwiaXNBcnJheSIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5Iiwic3RhcnRzV2l0aCIsIndyYXBBZ2VudE91dHB1dCIsImFnZW50SWQiLCJpbnB1dEVjaG8iLCJtb2RlIiwibGVnYWN5T3V0cHV0Iiwid2ViU3RhdHNPdmVycmlkZSIsInRyYWNlSWQiLCJzY2hlbWEiLCJ2YWxpZGF0aW9uIiwicXVhbGl0eUNoZWNrcyIsIm9rIiwibGltaXRhdGlvbnMiLCJhc3N1bXB0aW9ucyIsIndhcm5pbmdzIiwiYnVkZ2V0QXBwbGllZCIsImJ1ZGdldF9hcHBsaWVkIiwia25vd2xlZGdlVXNlZCIsImtub3dsZWRnZV91c2VkIiwiX19rbm93bGVkZ2VfdXNlZCIsIndvcmtzcGFjZV9pdGVtcyIsImFnZW50X2l0ZW1zIiwidG9wX2lkcyIsIndlYl9zdGF0cyIsImhhbmRvZmYiLCJlbnZlbG9wZU1ldGEiLCJhZ2VudF9pZCIsImdlbmVyYXRlZF9hdCIsInRvSVNPU3RyaW5nIiwicnVuX2lkIiwiaW5wdXRfZWNobyIsImxlbmd0aCIsImhhc1dlYlN0YXRzIiwidHJhY2VfaWQiLCJ1bmRlZmluZWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./utils/agentEnvelope.js\n");

/***/ }),

/***/ "(rsc)/./utils/agentSchemas.js":
/*!*******************************!*\
  !*** ./utils/agentSchemas.js ***!
  \*******************************/
/***/ ((module) => {

eval("\nconst platonSchema = {\n    required: {\n        segments: \"array\",\n        company_candidates: \"array\",\n        meta: \"object\"\n    }\n};\nconst agentSchemas = {\n    \"platon-prospect-research-ru\": platonSchema,\n    platon: platonSchema,\n    \"anatoly-account-research-ru\": {\n        required: {\n            account_card: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"timofey-competitor-analysis-ru\": {\n        required: {\n            competitors: \"array\",\n            comparison_table: \"array\",\n            win_angles: \"array\",\n            agentos_positioning: \"object\",\n            offers: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"maxim-local-leads-ru\": {\n        required: {\n            leads: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"fedor-b2b-leads-ru\": {\n        required: {\n            leads: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"artem-hot-leads-ru\": {\n        required: {\n            hot_leads: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"leonid-outreach-dm-ru\": {\n        required: {\n            dm_pack: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"emelyan-cold-email-ru\": {\n        required: {\n            email_sequences: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"boris-bdr-operator-ru\": {\n        required: {\n            bdr_table: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"pavel-reels-analysis-ru\": {\n        required: {\n            analysis: \"object\",\n            script_skeleton: \"object\",\n            improvements: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"trofim-shorts-analogs-ru\": {\n        required: {\n            formats: \"array\",\n            recommendations: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"irina-content-ideation-ru\": {\n        required: {\n            pillars: \"array\",\n            topics: \"array\",\n            cta_bank: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"hariton-viral-hooks-ru\": {\n        required: {\n            hooks: \"array\",\n            posts: \"array\",\n            scripts: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"kostya-image-generation-ru\": {\n        required: {\n            concepts: \"array\",\n            meta: \"object\"\n        }\n    },\n    \"seva-content-repurposing-ru\": {\n        required: {\n            pack: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"mitya-workflow-diagram-ru\": {\n        required: {\n            diagram: \"object\",\n            landing_text: \"object\",\n            deck_script: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"board-ceo-ru\": {\n        required: {\n            review: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"board-cto-ru\": {\n        required: {\n            review: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"board-cfo-ru\": {\n        required: {\n            review: \"object\",\n            meta: \"object\"\n        }\n    },\n    \"board-chair-ru\": {\n        required: {\n            review: \"object\",\n            meta: \"object\"\n        }\n    }\n};\nconst getAgentSchema = (agentId)=>agentSchemas[agentId] || null;\nmodule.exports = {\n    agentSchemas,\n    getAgentSchema\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi91dGlscy9hZ2VudFNjaGVtYXMuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLGVBQWU7SUFDbkJDLFVBQVU7UUFBRUMsVUFBVTtRQUFTQyxvQkFBb0I7UUFBU0MsTUFBTTtJQUFTO0FBQzdFO0FBRUEsTUFBTUMsZUFBZTtJQUNuQiwrQkFBK0JMO0lBQy9CTSxRQUFRTjtJQUNSLCtCQUErQjtRQUM3QkMsVUFBVTtZQUFFTSxjQUFjO1lBQVVILE1BQU07UUFBUztJQUNyRDtJQUNBLGtDQUFrQztRQUNoQ0gsVUFBVTtZQUNSTyxhQUFhO1lBQ2JDLGtCQUFrQjtZQUNsQkMsWUFBWTtZQUNaQyxxQkFBcUI7WUFDckJDLFFBQVE7WUFDUlIsTUFBTTtRQUNSO0lBQ0Y7SUFDQSx3QkFBd0I7UUFDdEJILFVBQVU7WUFBRVksT0FBTztZQUFTVCxNQUFNO1FBQVM7SUFDN0M7SUFDQSxzQkFBc0I7UUFDcEJILFVBQVU7WUFBRVksT0FBTztZQUFTVCxNQUFNO1FBQVM7SUFDN0M7SUFDQSxzQkFBc0I7UUFDcEJILFVBQVU7WUFBRWEsV0FBVztZQUFTVixNQUFNO1FBQVM7SUFDakQ7SUFDQSx5QkFBeUI7UUFDdkJILFVBQVU7WUFBRWMsU0FBUztZQUFVWCxNQUFNO1FBQVM7SUFDaEQ7SUFDQSx5QkFBeUI7UUFDdkJILFVBQVU7WUFBRWUsaUJBQWlCO1lBQVNaLE1BQU07UUFBUztJQUN2RDtJQUNBLHlCQUF5QjtRQUN2QkgsVUFBVTtZQUFFZ0IsV0FBVztZQUFTYixNQUFNO1FBQVM7SUFDakQ7SUFDQSwyQkFBMkI7UUFDekJILFVBQVU7WUFBRWlCLFVBQVU7WUFBVUMsaUJBQWlCO1lBQVVDLGNBQWM7WUFBVWhCLE1BQU07UUFBUztJQUNwRztJQUNBLDRCQUE0QjtRQUMxQkgsVUFBVTtZQUFFb0IsU0FBUztZQUFTQyxpQkFBaUI7WUFBVWxCLE1BQU07UUFBUztJQUMxRTtJQUNBLDZCQUE2QjtRQUMzQkgsVUFBVTtZQUFFc0IsU0FBUztZQUFTQyxRQUFRO1lBQVNDLFVBQVU7WUFBVXJCLE1BQU07UUFBUztJQUNwRjtJQUNBLDBCQUEwQjtRQUN4QkgsVUFBVTtZQUFFeUIsT0FBTztZQUFTQyxPQUFPO1lBQVNDLFNBQVM7WUFBU3hCLE1BQU07UUFBUztJQUMvRTtJQUNBLDhCQUE4QjtRQUM1QkgsVUFBVTtZQUFFNEIsVUFBVTtZQUFTekIsTUFBTTtRQUFTO0lBQ2hEO0lBQ0EsK0JBQStCO1FBQzdCSCxVQUFVO1lBQUU2QixNQUFNO1lBQVUxQixNQUFNO1FBQVM7SUFDN0M7SUFDQSw2QkFBNkI7UUFDM0JILFVBQVU7WUFBRThCLFNBQVM7WUFBVUMsY0FBYztZQUFVQyxhQUFhO1lBQVU3QixNQUFNO1FBQVM7SUFDL0Y7SUFDQSxnQkFBZ0I7UUFDZEgsVUFBVTtZQUFFaUMsUUFBUTtZQUFVOUIsTUFBTTtRQUFTO0lBQy9DO0lBQ0EsZ0JBQWdCO1FBQ2RILFVBQVU7WUFBRWlDLFFBQVE7WUFBVTlCLE1BQU07UUFBUztJQUMvQztJQUNBLGdCQUFnQjtRQUNkSCxVQUFVO1lBQUVpQyxRQUFRO1lBQVU5QixNQUFNO1FBQVM7SUFDL0M7SUFDQSxrQkFBa0I7UUFDaEJILFVBQVU7WUFBRWlDLFFBQVE7WUFBVTlCLE1BQU07UUFBUztJQUMvQztBQUNGO0FBRUEsTUFBTStCLGlCQUFpQixDQUFDQyxVQUFZL0IsWUFBWSxDQUFDK0IsUUFBUSxJQUFJO0FBRTdEQyxPQUFPQyxPQUFPLEdBQUc7SUFBRWpDO0lBQWM4QjtBQUFlIiwic291cmNlcyI6WyIvVXNlcnMvYWJ1emFkYS9EZXNrdG9wL2FnZW50T1MvdXRpbHMvYWdlbnRTY2hlbWFzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHBsYXRvblNjaGVtYSA9IHtcbiAgcmVxdWlyZWQ6IHsgc2VnbWVudHM6IFwiYXJyYXlcIiwgY29tcGFueV9jYW5kaWRhdGVzOiBcImFycmF5XCIsIG1ldGE6IFwib2JqZWN0XCIgfVxufTtcblxuY29uc3QgYWdlbnRTY2hlbWFzID0ge1xuICBcInBsYXRvbi1wcm9zcGVjdC1yZXNlYXJjaC1ydVwiOiBwbGF0b25TY2hlbWEsXG4gIHBsYXRvbjogcGxhdG9uU2NoZW1hLFxuICBcImFuYXRvbHktYWNjb3VudC1yZXNlYXJjaC1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgYWNjb3VudF9jYXJkOiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJ0aW1vZmV5LWNvbXBldGl0b3ItYW5hbHlzaXMtcnVcIjoge1xuICAgIHJlcXVpcmVkOiB7XG4gICAgICBjb21wZXRpdG9yczogXCJhcnJheVwiLFxuICAgICAgY29tcGFyaXNvbl90YWJsZTogXCJhcnJheVwiLFxuICAgICAgd2luX2FuZ2xlczogXCJhcnJheVwiLFxuICAgICAgYWdlbnRvc19wb3NpdGlvbmluZzogXCJvYmplY3RcIixcbiAgICAgIG9mZmVyczogXCJvYmplY3RcIixcbiAgICAgIG1ldGE6IFwib2JqZWN0XCJcbiAgICB9XG4gIH0sXG4gIFwibWF4aW0tbG9jYWwtbGVhZHMtcnVcIjoge1xuICAgIHJlcXVpcmVkOiB7IGxlYWRzOiBcImFycmF5XCIsIG1ldGE6IFwib2JqZWN0XCIgfVxuICB9LFxuICBcImZlZG9yLWIyYi1sZWFkcy1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgbGVhZHM6IFwiYXJyYXlcIiwgbWV0YTogXCJvYmplY3RcIiB9XG4gIH0sXG4gIFwiYXJ0ZW0taG90LWxlYWRzLXJ1XCI6IHtcbiAgICByZXF1aXJlZDogeyBob3RfbGVhZHM6IFwiYXJyYXlcIiwgbWV0YTogXCJvYmplY3RcIiB9XG4gIH0sXG4gIFwibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCI6IHtcbiAgICByZXF1aXJlZDogeyBkbV9wYWNrOiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJlbWVseWFuLWNvbGQtZW1haWwtcnVcIjoge1xuICAgIHJlcXVpcmVkOiB7IGVtYWlsX3NlcXVlbmNlczogXCJhcnJheVwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIjoge1xuICAgIHJlcXVpcmVkOiB7IGJkcl90YWJsZTogXCJhcnJheVwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJwYXZlbC1yZWVscy1hbmFseXNpcy1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgYW5hbHlzaXM6IFwib2JqZWN0XCIsIHNjcmlwdF9za2VsZXRvbjogXCJvYmplY3RcIiwgaW1wcm92ZW1lbnRzOiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJ0cm9maW0tc2hvcnRzLWFuYWxvZ3MtcnVcIjoge1xuICAgIHJlcXVpcmVkOiB7IGZvcm1hdHM6IFwiYXJyYXlcIiwgcmVjb21tZW5kYXRpb25zOiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJpcmluYS1jb250ZW50LWlkZWF0aW9uLXJ1XCI6IHtcbiAgICByZXF1aXJlZDogeyBwaWxsYXJzOiBcImFycmF5XCIsIHRvcGljczogXCJhcnJheVwiLCBjdGFfYmFuazogXCJvYmplY3RcIiwgbWV0YTogXCJvYmplY3RcIiB9XG4gIH0sXG4gIFwiaGFyaXRvbi12aXJhbC1ob29rcy1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgaG9va3M6IFwiYXJyYXlcIiwgcG9zdHM6IFwiYXJyYXlcIiwgc2NyaXB0czogXCJhcnJheVwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJrb3N0eWEtaW1hZ2UtZ2VuZXJhdGlvbi1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgY29uY2VwdHM6IFwiYXJyYXlcIiwgbWV0YTogXCJvYmplY3RcIiB9XG4gIH0sXG4gIFwic2V2YS1jb250ZW50LXJlcHVycG9zaW5nLXJ1XCI6IHtcbiAgICByZXF1aXJlZDogeyBwYWNrOiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJtaXR5YS13b3JrZmxvdy1kaWFncmFtLXJ1XCI6IHtcbiAgICByZXF1aXJlZDogeyBkaWFncmFtOiBcIm9iamVjdFwiLCBsYW5kaW5nX3RleHQ6IFwib2JqZWN0XCIsIGRlY2tfc2NyaXB0OiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJib2FyZC1jZW8tcnVcIjoge1xuICAgIHJlcXVpcmVkOiB7IHJldmlldzogXCJvYmplY3RcIiwgbWV0YTogXCJvYmplY3RcIiB9XG4gIH0sXG4gIFwiYm9hcmQtY3RvLXJ1XCI6IHtcbiAgICByZXF1aXJlZDogeyByZXZpZXc6IFwib2JqZWN0XCIsIG1ldGE6IFwib2JqZWN0XCIgfVxuICB9LFxuICBcImJvYXJkLWNmby1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgcmV2aWV3OiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfSxcbiAgXCJib2FyZC1jaGFpci1ydVwiOiB7XG4gICAgcmVxdWlyZWQ6IHsgcmV2aWV3OiBcIm9iamVjdFwiLCBtZXRhOiBcIm9iamVjdFwiIH1cbiAgfVxufTtcblxuY29uc3QgZ2V0QWdlbnRTY2hlbWEgPSAoYWdlbnRJZCkgPT4gYWdlbnRTY2hlbWFzW2FnZW50SWRdIHx8IG51bGw7XG5cbm1vZHVsZS5leHBvcnRzID0geyBhZ2VudFNjaGVtYXMsIGdldEFnZW50U2NoZW1hIH07XG4iXSwibmFtZXMiOlsicGxhdG9uU2NoZW1hIiwicmVxdWlyZWQiLCJzZWdtZW50cyIsImNvbXBhbnlfY2FuZGlkYXRlcyIsIm1ldGEiLCJhZ2VudFNjaGVtYXMiLCJwbGF0b24iLCJhY2NvdW50X2NhcmQiLCJjb21wZXRpdG9ycyIsImNvbXBhcmlzb25fdGFibGUiLCJ3aW5fYW5nbGVzIiwiYWdlbnRvc19wb3NpdGlvbmluZyIsIm9mZmVycyIsImxlYWRzIiwiaG90X2xlYWRzIiwiZG1fcGFjayIsImVtYWlsX3NlcXVlbmNlcyIsImJkcl90YWJsZSIsImFuYWx5c2lzIiwic2NyaXB0X3NrZWxldG9uIiwiaW1wcm92ZW1lbnRzIiwiZm9ybWF0cyIsInJlY29tbWVuZGF0aW9ucyIsInBpbGxhcnMiLCJ0b3BpY3MiLCJjdGFfYmFuayIsImhvb2tzIiwicG9zdHMiLCJzY3JpcHRzIiwiY29uY2VwdHMiLCJwYWNrIiwiZGlhZ3JhbSIsImxhbmRpbmdfdGV4dCIsImRlY2tfc2NyaXB0IiwicmV2aWV3IiwiZ2V0QWdlbnRTY2hlbWEiLCJhZ2VudElkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./utils/agentSchemas.js\n");

/***/ }),

/***/ "(rsc)/./utils/budget.js":
/*!*************************!*\
  !*** ./utils/budget.js ***!
  \*************************/
/***/ ((module) => {

eval("\nconst isFiniteNumber = (value)=>typeof value === \"number\" && Number.isFinite(value);\nconst getPath = (obj, path)=>{\n    if (!obj || !Array.isArray(path)) return undefined;\n    return path.reduce((acc, key)=>acc && typeof acc === \"object\" ? acc[key] : undefined, obj);\n};\nconst setPath = (obj, path, value)=>{\n    if (!obj || !Array.isArray(path)) return;\n    let cursor = obj;\n    for(let i = 0; i < path.length - 1; i += 1){\n        const key = path[i];\n        if (!cursor[key] || typeof cursor[key] !== \"object\") {\n            cursor[key] = {};\n        }\n        cursor = cursor[key];\n    }\n    cursor[path[path.length - 1]] = value;\n};\nconst clampValue = (current, maxValue)=>{\n    if (!isFiniteNumber(maxValue)) return current;\n    if (!isFiniteNumber(current)) return Math.round(maxValue);\n    return Math.min(current, maxValue);\n};\nconst applyBudget = (input, budget, options = {})=>{\n    const applied = {};\n    const warnings = new Set();\n    if (!budget || typeof budget !== \"object\") {\n        return {\n            budget_applied: null,\n            warnings: []\n        };\n    }\n    const { maxWebRequestsPath, maxItemsPaths = [], maxWordsPath } = options;\n    if (isFiniteNumber(budget.max_web_requests) && maxWebRequestsPath) {\n        const current = getPath(input, maxWebRequestsPath);\n        const clamped = clampValue(current, budget.max_web_requests);\n        if (isFiniteNumber(current) && clamped < current) warnings.add(\"budget_clamped\");\n        setPath(input, maxWebRequestsPath, Math.round(clamped));\n        applied.max_web_requests = Math.round(clamped);\n    }\n    if (isFiniteNumber(budget.max_items) && Array.isArray(maxItemsPaths) && maxItemsPaths.length) {\n        maxItemsPaths.forEach((path)=>{\n            const current = getPath(input, path);\n            const clamped = clampValue(current, budget.max_items);\n            if (isFiniteNumber(current) && clamped < current) warnings.add(\"budget_clamped\");\n            setPath(input, path, Math.round(clamped));\n        });\n        applied.max_items = Math.round(budget.max_items);\n    }\n    if (isFiniteNumber(budget.max_words) && maxWordsPath) {\n        const current = getPath(input, maxWordsPath);\n        const clamped = clampValue(current, budget.max_words);\n        if (isFiniteNumber(current) && clamped < current) warnings.add(\"budget_clamped\");\n        setPath(input, maxWordsPath, Math.round(clamped));\n        applied.max_words = Math.round(clamped);\n    }\n    return {\n        budget_applied: Object.keys(applied).length ? applied : null,\n        warnings: Array.from(warnings)\n    };\n};\nconst applyBudgetMeta = (meta, input)=>{\n    if (!meta || typeof meta !== \"object\" || !input || typeof input !== \"object\") return;\n    if (input.budget_applied) {\n        meta.budget_applied = input.budget_applied;\n    }\n    if (Array.isArray(input.budget_warnings) && input.budget_warnings.length) {\n        if (!Array.isArray(meta.warnings)) {\n            meta.warnings = [];\n        }\n        input.budget_warnings.forEach((warning)=>{\n            if (!meta.warnings.includes(warning)) meta.warnings.push(warning);\n        });\n    }\n};\nmodule.exports = {\n    applyBudget,\n    applyBudgetMeta\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVVkLFFBQVFvQixPQUFPUztRQUMvQixNQUFNRSxVQUFVbEIsV0FBV0MsU0FBU08sT0FBT2MsU0FBUztRQUNwRCxJQUFJdkMsZUFBZWtCLFlBQVlpQixVQUFVakIsU0FBU1UsU0FBU1EsR0FBRyxDQUFDO1FBQy9EdkIsUUFBUVcsT0FBT1MsY0FBY2IsS0FBS0MsS0FBSyxDQUFDYztRQUN4Q1IsUUFBUVksU0FBUyxHQUFHbkIsS0FBS0MsS0FBSyxDQUFDYztJQUNqQztJQUVBLE9BQU87UUFDTEwsZ0JBQWdCVSxPQUFPQyxJQUFJLENBQUNkLFNBQVNYLE1BQU0sR0FBR1csVUFBVTtRQUN4REMsVUFBVXJCLE1BQU1tQyxJQUFJLENBQUNkO0lBQ3ZCO0FBQ0Y7QUFFQSxNQUFNZSxrQkFBa0IsQ0FBQ0MsTUFBTXBCO0lBQzdCLElBQUksQ0FBQ29CLFFBQVEsT0FBT0EsU0FBUyxZQUFZLENBQUNwQixTQUFTLE9BQU9BLFVBQVUsVUFBVTtJQUM5RSxJQUFJQSxNQUFNTSxjQUFjLEVBQUU7UUFDeEJjLEtBQUtkLGNBQWMsR0FBR04sTUFBTU0sY0FBYztJQUM1QztJQUNBLElBQUl2QixNQUFNQyxPQUFPLENBQUNnQixNQUFNcUIsZUFBZSxLQUFLckIsTUFBTXFCLGVBQWUsQ0FBQzdCLE1BQU0sRUFBRTtRQUN4RSxJQUFJLENBQUNULE1BQU1DLE9BQU8sQ0FBQ29DLEtBQUtoQixRQUFRLEdBQUc7WUFDakNnQixLQUFLaEIsUUFBUSxHQUFHLEVBQUU7UUFDcEI7UUFDQUosTUFBTXFCLGVBQWUsQ0FBQ1AsT0FBTyxDQUFDLENBQUNRO1lBQzdCLElBQUksQ0FBQ0YsS0FBS2hCLFFBQVEsQ0FBQ21CLFFBQVEsQ0FBQ0QsVUFBVUYsS0FBS2hCLFFBQVEsQ0FBQ29CLElBQUksQ0FBQ0Y7UUFDM0Q7SUFDRjtBQUNGO0FBRUFHLE9BQU9DLE9BQU8sR0FBRztJQUFFM0I7SUFBYW9CO0FBQWdCIiwic291cmNlcyI6WyIvVXNlcnMvYWJ1emFkYS9EZXNrdG9wL2FnZW50T1MvdXRpbHMvYnVkZ2V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGlzRmluaXRlTnVtYmVyID0gKHZhbHVlKSA9PiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgTnVtYmVyLmlzRmluaXRlKHZhbHVlKTtcblxuY29uc3QgZ2V0UGF0aCA9IChvYmosIHBhdGgpID0+IHtcbiAgaWYgKCFvYmogfHwgIUFycmF5LmlzQXJyYXkocGF0aCkpIHJldHVybiB1bmRlZmluZWQ7XG4gIHJldHVybiBwYXRoLnJlZHVjZSgoYWNjLCBrZXkpID0+IChhY2MgJiYgdHlwZW9mIGFjYyA9PT0gXCJvYmplY3RcIiA/IGFjY1trZXldIDogdW5kZWZpbmVkKSwgb2JqKTtcbn07XG5cbmNvbnN0IHNldFBhdGggPSAob2JqLCBwYXRoLCB2YWx1ZSkgPT4ge1xuICBpZiAoIW9iaiB8fCAhQXJyYXkuaXNBcnJheShwYXRoKSkgcmV0dXJuO1xuICBsZXQgY3Vyc29yID0gb2JqO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoIC0gMTsgaSArPSAxKSB7XG4gICAgY29uc3Qga2V5ID0gcGF0aFtpXTtcbiAgICBpZiAoIWN1cnNvcltrZXldIHx8IHR5cGVvZiBjdXJzb3Jba2V5XSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgY3Vyc29yW2tleV0gPSB7fTtcbiAgICB9XG4gICAgY3Vyc29yID0gY3Vyc29yW2tleV07XG4gIH1cbiAgY3Vyc29yW3BhdGhbcGF0aC5sZW5ndGggLSAxXV0gPSB2YWx1ZTtcbn07XG5cbmNvbnN0IGNsYW1wVmFsdWUgPSAoY3VycmVudCwgbWF4VmFsdWUpID0+IHtcbiAgaWYgKCFpc0Zpbml0ZU51bWJlcihtYXhWYWx1ZSkpIHJldHVybiBjdXJyZW50O1xuICBpZiAoIWlzRmluaXRlTnVtYmVyKGN1cnJlbnQpKSByZXR1cm4gTWF0aC5yb3VuZChtYXhWYWx1ZSk7XG4gIHJldHVybiBNYXRoLm1pbihjdXJyZW50LCBtYXhWYWx1ZSk7XG59O1xuXG5jb25zdCBhcHBseUJ1ZGdldCA9IChpbnB1dCwgYnVkZ2V0LCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgYXBwbGllZCA9IHt9O1xuICBjb25zdCB3YXJuaW5ncyA9IG5ldyBTZXQoKTtcbiAgaWYgKCFidWRnZXQgfHwgdHlwZW9mIGJ1ZGdldCAhPT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiB7IGJ1ZGdldF9hcHBsaWVkOiBudWxsLCB3YXJuaW5nczogW10gfTtcbiAgfVxuXG4gIGNvbnN0IHsgbWF4V2ViUmVxdWVzdHNQYXRoLCBtYXhJdGVtc1BhdGhzID0gW10sIG1heFdvcmRzUGF0aCB9ID0gb3B0aW9ucztcblxuICBpZiAoaXNGaW5pdGVOdW1iZXIoYnVkZ2V0Lm1heF93ZWJfcmVxdWVzdHMpICYmIG1heFdlYlJlcXVlc3RzUGF0aCkge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBnZXRQYXRoKGlucHV0LCBtYXhXZWJSZXF1ZXN0c1BhdGgpO1xuICAgIGNvbnN0IGNsYW1wZWQgPSBjbGFtcFZhbHVlKGN1cnJlbnQsIGJ1ZGdldC5tYXhfd2ViX3JlcXVlc3RzKTtcbiAgICBpZiAoaXNGaW5pdGVOdW1iZXIoY3VycmVudCkgJiYgY2xhbXBlZCA8IGN1cnJlbnQpIHdhcm5pbmdzLmFkZChcImJ1ZGdldF9jbGFtcGVkXCIpO1xuICAgIHNldFBhdGgoaW5wdXQsIG1heFdlYlJlcXVlc3RzUGF0aCwgTWF0aC5yb3VuZChjbGFtcGVkKSk7XG4gICAgYXBwbGllZC5tYXhfd2ViX3JlcXVlc3RzID0gTWF0aC5yb3VuZChjbGFtcGVkKTtcbiAgfVxuXG4gIGlmIChpc0Zpbml0ZU51bWJlcihidWRnZXQubWF4X2l0ZW1zKSAmJiBBcnJheS5pc0FycmF5KG1heEl0ZW1zUGF0aHMpICYmIG1heEl0ZW1zUGF0aHMubGVuZ3RoKSB7XG4gICAgbWF4SXRlbXNQYXRocy5mb3JFYWNoKChwYXRoKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gZ2V0UGF0aChpbnB1dCwgcGF0aCk7XG4gICAgICBjb25zdCBjbGFtcGVkID0gY2xhbXBWYWx1ZShjdXJyZW50LCBidWRnZXQubWF4X2l0ZW1zKTtcbiAgICAgIGlmIChpc0Zpbml0ZU51bWJlcihjdXJyZW50KSAmJiBjbGFtcGVkIDwgY3VycmVudCkgd2FybmluZ3MuYWRkKFwiYnVkZ2V0X2NsYW1wZWRcIik7XG4gICAgICBzZXRQYXRoKGlucHV0LCBwYXRoLCBNYXRoLnJvdW5kKGNsYW1wZWQpKTtcbiAgICB9KTtcbiAgICBhcHBsaWVkLm1heF9pdGVtcyA9IE1hdGgucm91bmQoYnVkZ2V0Lm1heF9pdGVtcyk7XG4gIH1cblxuICBpZiAoaXNGaW5pdGVOdW1iZXIoYnVkZ2V0Lm1heF93b3JkcykgJiYgbWF4V29yZHNQYXRoKSB7XG4gICAgY29uc3QgY3VycmVudCA9IGdldFBhdGgoaW5wdXQsIG1heFdvcmRzUGF0aCk7XG4gICAgY29uc3QgY2xhbXBlZCA9IGNsYW1wVmFsdWUoY3VycmVudCwgYnVkZ2V0Lm1heF93b3Jkcyk7XG4gICAgaWYgKGlzRmluaXRlTnVtYmVyKGN1cnJlbnQpICYmIGNsYW1wZWQgPCBjdXJyZW50KSB3YXJuaW5ncy5hZGQoXCJidWRnZXRfY2xhbXBlZFwiKTtcbiAgICBzZXRQYXRoKGlucHV0LCBtYXhXb3Jkc1BhdGgsIE1hdGgucm91bmQoY2xhbXBlZCkpO1xuICAgIGFwcGxpZWQubWF4X3dvcmRzID0gTWF0aC5yb3VuZChjbGFtcGVkKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYnVkZ2V0X2FwcGxpZWQ6IE9iamVjdC5rZXlzKGFwcGxpZWQpLmxlbmd0aCA/IGFwcGxpZWQgOiBudWxsLFxuICAgIHdhcm5pbmdzOiBBcnJheS5mcm9tKHdhcm5pbmdzKVxuICB9O1xufTtcblxuY29uc3QgYXBwbHlCdWRnZXRNZXRhID0gKG1ldGEsIGlucHV0KSA9PiB7XG4gIGlmICghbWV0YSB8fCB0eXBlb2YgbWV0YSAhPT0gXCJvYmplY3RcIiB8fCAhaW5wdXQgfHwgdHlwZW9mIGlucHV0ICE9PSBcIm9iamVjdFwiKSByZXR1cm47XG4gIGlmIChpbnB1dC5idWRnZXRfYXBwbGllZCkge1xuICAgIG1ldGEuYnVkZ2V0X2FwcGxpZWQgPSBpbnB1dC5idWRnZXRfYXBwbGllZDtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dC5idWRnZXRfd2FybmluZ3MpICYmIGlucHV0LmJ1ZGdldF93YXJuaW5ncy5sZW5ndGgpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkobWV0YS53YXJuaW5ncykpIHtcbiAgICAgIG1ldGEud2FybmluZ3MgPSBbXTtcbiAgICB9XG4gICAgaW5wdXQuYnVkZ2V0X3dhcm5pbmdzLmZvckVhY2goKHdhcm5pbmcpID0+IHtcbiAgICAgIGlmICghbWV0YS53YXJuaW5ncy5pbmNsdWRlcyh3YXJuaW5nKSkgbWV0YS53YXJuaW5ncy5wdXNoKHdhcm5pbmcpO1xuICAgIH0pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXBwbHlCdWRnZXQsIGFwcGx5QnVkZ2V0TWV0YSB9O1xuIl0sIm5hbWVzIjpbImlzRmluaXRlTnVtYmVyIiwidmFsdWUiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImdldFBhdGgiLCJvYmoiLCJwYXRoIiwiQXJyYXkiLCJpc0FycmF5IiwidW5kZWZpbmVkIiwicmVkdWNlIiwiYWNjIiwia2V5Iiwic2V0UGF0aCIsImN1cnNvciIsImkiLCJsZW5ndGgiLCJjbGFtcFZhbHVlIiwiY3VycmVudCIsIm1heFZhbHVlIiwiTWF0aCIsInJvdW5kIiwibWluIiwiYXBwbHlCdWRnZXQiLCJpbnB1dCIsImJ1ZGdldCIsIm9wdGlvbnMiLCJhcHBsaWVkIiwid2FybmluZ3MiLCJTZXQiLCJidWRnZXRfYXBwbGllZCIsIm1heFdlYlJlcXVlc3RzUGF0aCIsIm1heEl0ZW1zUGF0aHMiLCJtYXhXb3Jkc1BhdGgiLCJtYXhfd2ViX3JlcXVlc3RzIiwiY2xhbXBlZCIsImFkZCIsIm1heF9pdGVtcyIsImZvckVhY2giLCJtYXhfd29yZHMiLCJPYmplY3QiLCJrZXlzIiwiZnJvbSIsImFwcGx5QnVkZ2V0TWV0YSIsIm1ldGEiLCJidWRnZXRfd2FybmluZ3MiLCJ3YXJuaW5nIiwiaW5jbHVkZXMiLCJwdXNoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./utils/budget.js\n");

/***/ }),

/***/ "(rsc)/./utils/compressPreserveShape.js":
/*!****************************************!*\
  !*** ./utils/compressPreserveShape.js ***!
  \****************************************/
/***/ ((module) => {

eval("\nconst countWords = (text)=>{\n    if (!text) return 0;\n    const matches = String(text).match(/[A-Za-zА-Яа-я0-9_]+/g);\n    return matches ? matches.length : 0;\n};\nconst countWordsInObject = (value)=>{\n    if (typeof value === \"string\") return countWords(value);\n    if (Array.isArray(value)) return value.reduce((acc, item)=>acc + countWordsInObject(item), 0);\n    if (value && typeof value === \"object\") {\n        return Object.values(value).reduce((acc, item)=>acc + countWordsInObject(item), 0);\n    }\n    return 0;\n};\nconst trimWords = (text, maxWords)=>{\n    if (!text) return \"\";\n    const words = String(text).trim().split(/\\s+/);\n    if (!Number.isFinite(maxWords) || maxWords <= 0) return \"\";\n    if (words.length <= maxWords) return String(text).trim();\n    return `${words.slice(0, maxWords).join(\" \")}...`;\n};\nconst deepClone = (value)=>{\n    try {\n        return JSON.parse(JSON.stringify(value));\n    } catch  {\n        return value;\n    }\n};\nconst mapStrings = (value, mapper, keyPath = [])=>{\n    if (typeof value === \"string\") {\n        return mapper(value, keyPath[keyPath.length - 1] || \"\", keyPath);\n    }\n    if (Array.isArray(value)) {\n        return value.map((item, index)=>mapStrings(item, mapper, [\n                ...keyPath,\n                String(index)\n            ]));\n    }\n    if (value && typeof value === \"object\") {\n        return Object.fromEntries(Object.entries(value).map(([key, val])=>[\n                key,\n                mapStrings(val, mapper, [\n                    ...keyPath,\n                    key\n                ])\n            ]));\n    }\n    return value;\n};\nconst clearFieldByName = (value, fieldName)=>{\n    if (Array.isArray(value)) return value.map((item)=>clearFieldByName(item, fieldName));\n    if (!value || typeof value !== \"object\") return value;\n    return Object.fromEntries(Object.entries(value).map(([key, val])=>{\n        if (key === fieldName) {\n            if (typeof val === \"string\") return [\n                key,\n                \"\"\n            ];\n            if (Array.isArray(val)) return [\n                key,\n                []\n            ];\n            if (val && typeof val === \"object\") return [\n                key,\n                {}\n            ];\n            return [\n                key,\n                null\n            ];\n        }\n        return [\n            key,\n            clearFieldByName(val, fieldName)\n        ];\n    }));\n};\nconst readPath = (obj, path)=>{\n    if (!obj || typeof obj !== \"object\") return undefined;\n    const keys = String(path || \"\").split(\".\").filter(Boolean);\n    let cursor = obj;\n    for (const key of keys){\n        if (!cursor || typeof cursor !== \"object\" && !Array.isArray(cursor)) return undefined;\n        cursor = cursor[key];\n        if (typeof cursor === \"undefined\") return undefined;\n    }\n    return cursor;\n};\nconst reduceArrayByPath = (obj, path, minCount, maxWords)=>{\n    const arr = readPath(obj, path);\n    if (!Array.isArray(arr)) return false;\n    const safeMin = Number.isFinite(minCount) ? Math.max(0, Math.round(minCount)) : 0;\n    let reduced = false;\n    while(countWordsInObject(obj) > maxWords && arr.length > safeMin){\n        arr.pop();\n        reduced = true;\n    }\n    return reduced;\n};\nconst normalizeArrayMinimums = (value)=>{\n    if (!value || typeof value !== \"object\") return [];\n    return Object.entries(value).map(([path, min])=>({\n            path,\n            min\n        })).filter((item)=>item.path && Number.isFinite(item.min));\n};\nconst compressPreserveShape = (payload, { max_words, priorities } = {})=>{\n    if (!Number.isFinite(max_words) || max_words <= 0) {\n        return {\n            output: payload,\n            within: true,\n            compressed: false,\n            compressed_heavily: false,\n            words_before: countWordsInObject(payload),\n            words_after: countWordsInObject(payload)\n        };\n    }\n    let output = deepClone(payload);\n    const wordsBefore = countWordsInObject(output);\n    if (wordsBefore <= max_words) {\n        return {\n            output,\n            within: true,\n            compressed: false,\n            compressed_heavily: false,\n            words_before: wordsBefore,\n            words_after: wordsBefore\n        };\n    }\n    const priority = priorities && typeof priorities === \"object\" ? priorities : {};\n    const textKeys = Array.isArray(priority.text_keys) ? priority.text_keys : [\n        \"body\",\n        \"text\",\n        \"notes\",\n        \"description\",\n        \"summary\",\n        \"proof_line\",\n        \"why_ru\"\n    ];\n    const secondaryFields = Array.isArray(priority.secondary_fields) ? priority.secondary_fields : [\n        \"notes\",\n        \"why_ru\"\n    ];\n    const primaryPasses = Array.isArray(priority.primary_passes) ? priority.primary_passes : [\n        32,\n        24,\n        18,\n        14\n    ];\n    const globalPasses = Array.isArray(priority.global_passes) ? priority.global_passes : [\n        12,\n        10,\n        8,\n        6,\n        4,\n        3\n    ];\n    const arrayMinimums = normalizeArrayMinimums(priority.array_minimums);\n    let droppedSecondary = false;\n    let reducedItems = false;\n    for (const pass of primaryPasses){\n        if (countWordsInObject(output) <= max_words) break;\n        output = mapStrings(output, (text, key)=>textKeys.includes(key) ? trimWords(text, pass) : text);\n    }\n    for (const pass of globalPasses){\n        if (countWordsInObject(output) <= max_words) break;\n        output = mapStrings(output, (text)=>trimWords(text, pass));\n    }\n    for (const field of secondaryFields){\n        if (countWordsInObject(output) <= max_words) break;\n        if (!field || typeof field !== \"string\") continue;\n        if (field.includes(\".\")) {\n            const current = readPath(output, field);\n            if (typeof current === \"string\") {\n                const keys = field.split(\".\");\n                let cursor = output;\n                for(let i = 0; i < keys.length - 1; i += 1){\n                    if (!cursor || typeof cursor !== \"object\") break;\n                    cursor = cursor[keys[i]];\n                }\n                const last = keys[keys.length - 1];\n                if (cursor && typeof cursor === \"object\" && Object.prototype.hasOwnProperty.call(cursor, last)) {\n                    cursor[last] = \"\";\n                    droppedSecondary = true;\n                }\n            }\n            continue;\n        }\n        output = clearFieldByName(output, field);\n        droppedSecondary = true;\n    }\n    for (const rule of arrayMinimums){\n        if (countWordsInObject(output) <= max_words) break;\n        const didReduce = reduceArrayByPath(output, rule.path, rule.min, max_words);\n        if (didReduce) reducedItems = true;\n    }\n    if (countWordsInObject(output) > max_words) {\n        output = mapStrings(output, (text)=>trimWords(text, 2));\n    }\n    const wordsAfter = countWordsInObject(output);\n    const within = wordsAfter <= max_words;\n    const compressed = wordsAfter < wordsBefore;\n    return {\n        output,\n        within,\n        compressed,\n        compressed_heavily: reducedItems || droppedSecondary || !within,\n        words_before: wordsBefore,\n        words_after: wordsAfter\n    };\n};\nmodule.exports = {\n    compressPreserveShape,\n    countWordsInObject,\n    trimWords\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDMUI7Z0JBQ0EsTUFBTUMsT0FBTzVDLElBQUksQ0FBQ0EsS0FBS3RDLE1BQU0sR0FBRyxFQUFFO2dCQUNsQyxJQUFJeUMsVUFBVSxPQUFPQSxXQUFXLFlBQVlqQyxPQUFPMkUsU0FBUyxDQUFDQyxjQUFjLENBQUNDLElBQUksQ0FBQzVDLFFBQVF5QyxPQUFPO29CQUM5RnpDLE1BQU0sQ0FBQ3lDLEtBQUssR0FBRztvQkFDZlAsbUJBQW1CO2dCQUNyQjtZQUNGO1lBQ0E7UUFDRjtRQUVBbEIsU0FBU3pCLGlCQUFpQnlCLFFBQVFzQjtRQUNsQ0osbUJBQW1CO0lBQ3JCO0lBRUEsS0FBSyxNQUFNVyxRQUFRYixjQUFlO1FBQ2hDLElBQUl4RSxtQkFBbUJ3RCxXQUFXRixXQUFXO1FBQzdDLE1BQU1nQyxZQUFZN0Msa0JBQWtCZSxRQUFRNkIsS0FBS2xELElBQUksRUFBRWtELEtBQUtsQyxHQUFHLEVBQUVHO1FBQ2pFLElBQUlnQyxXQUFXWCxlQUFlO0lBQ2hDO0lBRUEsSUFBSTNFLG1CQUFtQndELFVBQVVGLFdBQVc7UUFDMUNFLFNBQVNsQyxXQUFXa0MsUUFBUSxDQUFDN0QsT0FBU2MsVUFBVWQsTUFBTTtJQUN4RDtJQUVBLE1BQU00RixhQUFhdkYsbUJBQW1Cd0Q7SUFDdEMsTUFBTUMsU0FBUzhCLGNBQWNqQztJQUM3QixNQUFNSSxhQUFhNkIsYUFBYXpCO0lBRWhDLE9BQU87UUFDTE47UUFDQUM7UUFDQUM7UUFDQUMsb0JBQW9CZ0IsZ0JBQWdCRCxvQkFBb0IsQ0FBQ2pCO1FBQ3pERyxjQUFjRTtRQUNkRCxhQUFhMEI7SUFDZjtBQUNGO0FBRUFDLE9BQU9DLE9BQU8sR0FBRztJQUNmckM7SUFDQXBEO0lBQ0FTO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hYnV6YWRhL0Rlc2t0b3AvYWdlbnRPUy91dGlscy9jb21wcmVzc1ByZXNlcnZlU2hhcGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY291bnRXb3JkcyA9ICh0ZXh0KSA9PiB7XG4gIGlmICghdGV4dCkgcmV0dXJuIDA7XG4gIGNvbnN0IG1hdGNoZXMgPSBTdHJpbmcodGV4dCkubWF0Y2goL1tBLVphLXrQkC3Qr9CwLdGPMC05X10rL2cpO1xuICByZXR1cm4gbWF0Y2hlcyA/IG1hdGNoZXMubGVuZ3RoIDogMDtcbn07XG5cbmNvbnN0IGNvdW50V29yZHNJbk9iamVjdCA9ICh2YWx1ZSkgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSByZXR1cm4gY291bnRXb3Jkcyh2YWx1ZSk7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIHZhbHVlLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiBhY2MgKyBjb3VudFdvcmRzSW5PYmplY3QoaXRlbSksIDApO1xuICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXModmFsdWUpLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiBhY2MgKyBjb3VudFdvcmRzSW5PYmplY3QoaXRlbSksIDApO1xuICB9XG4gIHJldHVybiAwO1xufTtcblxuY29uc3QgdHJpbVdvcmRzID0gKHRleHQsIG1heFdvcmRzKSA9PiB7XG4gIGlmICghdGV4dCkgcmV0dXJuIFwiXCI7XG4gIGNvbnN0IHdvcmRzID0gU3RyaW5nKHRleHQpLnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuICBpZiAoIU51bWJlci5pc0Zpbml0ZShtYXhXb3JkcykgfHwgbWF4V29yZHMgPD0gMCkgcmV0dXJuIFwiXCI7XG4gIGlmICh3b3Jkcy5sZW5ndGggPD0gbWF4V29yZHMpIHJldHVybiBTdHJpbmcodGV4dCkudHJpbSgpO1xuICByZXR1cm4gYCR7d29yZHMuc2xpY2UoMCwgbWF4V29yZHMpLmpvaW4oXCIgXCIpfS4uLmA7XG59O1xuXG5jb25zdCBkZWVwQ2xvbmUgPSAodmFsdWUpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn07XG5cbmNvbnN0IG1hcFN0cmluZ3MgPSAodmFsdWUsIG1hcHBlciwga2V5UGF0aCA9IFtdKSA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gbWFwcGVyKHZhbHVlLCBrZXlQYXRoW2tleVBhdGgubGVuZ3RoIC0gMV0gfHwgXCJcIiwga2V5UGF0aCk7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLm1hcCgoaXRlbSwgaW5kZXgpID0+IG1hcFN0cmluZ3MoaXRlbSwgbWFwcGVyLCBbLi4ua2V5UGF0aCwgU3RyaW5nKGluZGV4KV0pKTtcbiAgfVxuICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIE9iamVjdC5lbnRyaWVzKHZhbHVlKS5tYXAoKFtrZXksIHZhbF0pID0+IFtrZXksIG1hcFN0cmluZ3ModmFsLCBtYXBwZXIsIFsuLi5rZXlQYXRoLCBrZXldKV0pXG4gICAgKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59O1xuXG5jb25zdCBjbGVhckZpZWxkQnlOYW1lID0gKHZhbHVlLCBmaWVsZE5hbWUpID0+IHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gdmFsdWUubWFwKChpdGVtKSA9PiBjbGVhckZpZWxkQnlOYW1lKGl0ZW0sIGZpZWxkTmFtZSkpO1xuICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHZhbHVlO1xuXG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgT2JqZWN0LmVudHJpZXModmFsdWUpLm1hcCgoW2tleSwgdmFsXSkgPT4ge1xuICAgICAgaWYgKGtleSA9PT0gZmllbGROYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiKSByZXR1cm4gW2tleSwgXCJcIl07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHJldHVybiBba2V5LCBbXV07XG4gICAgICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikgcmV0dXJuIFtrZXksIHt9XTtcbiAgICAgICAgcmV0dXJuIFtrZXksIG51bGxdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtrZXksIGNsZWFyRmllbGRCeU5hbWUodmFsLCBmaWVsZE5hbWUpXTtcbiAgICB9KVxuICApO1xufTtcblxuY29uc3QgcmVhZFBhdGggPSAob2JqLCBwYXRoKSA9PiB7XG4gIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIpIHJldHVybiB1bmRlZmluZWQ7XG4gIGNvbnN0IGtleXMgPSBTdHJpbmcocGF0aCB8fCBcIlwiKS5zcGxpdChcIi5cIikuZmlsdGVyKEJvb2xlYW4pO1xuICBsZXQgY3Vyc29yID0gb2JqO1xuICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgaWYgKCFjdXJzb3IgfHwgKHR5cGVvZiBjdXJzb3IgIT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkoY3Vyc29yKSkpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY3Vyc29yID0gY3Vyc29yW2tleV07XG4gICAgaWYgKHR5cGVvZiBjdXJzb3IgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGN1cnNvcjtcbn07XG5cbmNvbnN0IHJlZHVjZUFycmF5QnlQYXRoID0gKG9iaiwgcGF0aCwgbWluQ291bnQsIG1heFdvcmRzKSA9PiB7XG4gIGNvbnN0IGFyciA9IHJlYWRQYXRoKG9iaiwgcGF0aCk7XG4gIGlmICghQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gZmFsc2U7XG4gIGNvbnN0IHNhZmVNaW4gPSBOdW1iZXIuaXNGaW5pdGUobWluQ291bnQpID8gTWF0aC5tYXgoMCwgTWF0aC5yb3VuZChtaW5Db3VudCkpIDogMDtcbiAgbGV0IHJlZHVjZWQgPSBmYWxzZTtcbiAgd2hpbGUgKGNvdW50V29yZHNJbk9iamVjdChvYmopID4gbWF4V29yZHMgJiYgYXJyLmxlbmd0aCA+IHNhZmVNaW4pIHtcbiAgICBhcnIucG9wKCk7XG4gICAgcmVkdWNlZCA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIHJlZHVjZWQ7XG59O1xuXG5jb25zdCBub3JtYWxpemVBcnJheU1pbmltdW1zID0gKHZhbHVlKSA9PiB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiKSByZXR1cm4gW107XG4gIHJldHVybiBPYmplY3QuZW50cmllcyh2YWx1ZSlcbiAgICAubWFwKChbcGF0aCwgbWluXSkgPT4gKHsgcGF0aCwgbWluIH0pKVxuICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0ucGF0aCAmJiBOdW1iZXIuaXNGaW5pdGUoaXRlbS5taW4pKTtcbn07XG5cbmNvbnN0IGNvbXByZXNzUHJlc2VydmVTaGFwZSA9IChwYXlsb2FkLCB7IG1heF93b3JkcywgcHJpb3JpdGllcyB9ID0ge30pID0+IHtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobWF4X3dvcmRzKSB8fCBtYXhfd29yZHMgPD0gMCkge1xuICAgIHJldHVybiB7XG4gICAgICBvdXRwdXQ6IHBheWxvYWQsXG4gICAgICB3aXRoaW46IHRydWUsXG4gICAgICBjb21wcmVzc2VkOiBmYWxzZSxcbiAgICAgIGNvbXByZXNzZWRfaGVhdmlseTogZmFsc2UsXG4gICAgICB3b3Jkc19iZWZvcmU6IGNvdW50V29yZHNJbk9iamVjdChwYXlsb2FkKSxcbiAgICAgIHdvcmRzX2FmdGVyOiBjb3VudFdvcmRzSW5PYmplY3QocGF5bG9hZClcbiAgICB9O1xuICB9XG5cbiAgbGV0IG91dHB1dCA9IGRlZXBDbG9uZShwYXlsb2FkKTtcbiAgY29uc3Qgd29yZHNCZWZvcmUgPSBjb3VudFdvcmRzSW5PYmplY3Qob3V0cHV0KTtcbiAgaWYgKHdvcmRzQmVmb3JlIDw9IG1heF93b3Jkcykge1xuICAgIHJldHVybiB7XG4gICAgICBvdXRwdXQsXG4gICAgICB3aXRoaW46IHRydWUsXG4gICAgICBjb21wcmVzc2VkOiBmYWxzZSxcbiAgICAgIGNvbXByZXNzZWRfaGVhdmlseTogZmFsc2UsXG4gICAgICB3b3Jkc19iZWZvcmU6IHdvcmRzQmVmb3JlLFxuICAgICAgd29yZHNfYWZ0ZXI6IHdvcmRzQmVmb3JlXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHByaW9yaXR5ID0gcHJpb3JpdGllcyAmJiB0eXBlb2YgcHJpb3JpdGllcyA9PT0gXCJvYmplY3RcIiA/IHByaW9yaXRpZXMgOiB7fTtcbiAgY29uc3QgdGV4dEtleXMgPSBBcnJheS5pc0FycmF5KHByaW9yaXR5LnRleHRfa2V5cylcbiAgICA/IHByaW9yaXR5LnRleHRfa2V5c1xuICAgIDogW1wiYm9keVwiLCBcInRleHRcIiwgXCJub3Rlc1wiLCBcImRlc2NyaXB0aW9uXCIsIFwic3VtbWFyeVwiLCBcInByb29mX2xpbmVcIiwgXCJ3aHlfcnVcIl07XG4gIGNvbnN0IHNlY29uZGFyeUZpZWxkcyA9IEFycmF5LmlzQXJyYXkocHJpb3JpdHkuc2Vjb25kYXJ5X2ZpZWxkcylcbiAgICA/IHByaW9yaXR5LnNlY29uZGFyeV9maWVsZHNcbiAgICA6IFtcIm5vdGVzXCIsIFwid2h5X3J1XCJdO1xuICBjb25zdCBwcmltYXJ5UGFzc2VzID0gQXJyYXkuaXNBcnJheShwcmlvcml0eS5wcmltYXJ5X3Bhc3NlcylcbiAgICA/IHByaW9yaXR5LnByaW1hcnlfcGFzc2VzXG4gICAgOiBbMzIsIDI0LCAxOCwgMTRdO1xuICBjb25zdCBnbG9iYWxQYXNzZXMgPSBBcnJheS5pc0FycmF5KHByaW9yaXR5Lmdsb2JhbF9wYXNzZXMpXG4gICAgPyBwcmlvcml0eS5nbG9iYWxfcGFzc2VzXG4gICAgOiBbMTIsIDEwLCA4LCA2LCA0LCAzXTtcbiAgY29uc3QgYXJyYXlNaW5pbXVtcyA9IG5vcm1hbGl6ZUFycmF5TWluaW11bXMocHJpb3JpdHkuYXJyYXlfbWluaW11bXMpO1xuXG4gIGxldCBkcm9wcGVkU2Vjb25kYXJ5ID0gZmFsc2U7XG4gIGxldCByZWR1Y2VkSXRlbXMgPSBmYWxzZTtcblxuICBmb3IgKGNvbnN0IHBhc3Mgb2YgcHJpbWFyeVBhc3Nlcykge1xuICAgIGlmIChjb3VudFdvcmRzSW5PYmplY3Qob3V0cHV0KSA8PSBtYXhfd29yZHMpIGJyZWFrO1xuICAgIG91dHB1dCA9IG1hcFN0cmluZ3Mob3V0cHV0LCAodGV4dCwga2V5KSA9PlxuICAgICAgdGV4dEtleXMuaW5jbHVkZXMoa2V5KSA/IHRyaW1Xb3Jkcyh0ZXh0LCBwYXNzKSA6IHRleHRcbiAgICApO1xuICB9XG5cbiAgZm9yIChjb25zdCBwYXNzIG9mIGdsb2JhbFBhc3Nlcykge1xuICAgIGlmIChjb3VudFdvcmRzSW5PYmplY3Qob3V0cHV0KSA8PSBtYXhfd29yZHMpIGJyZWFrO1xuICAgIG91dHB1dCA9IG1hcFN0cmluZ3Mob3V0cHV0LCAodGV4dCkgPT4gdHJpbVdvcmRzKHRleHQsIHBhc3MpKTtcbiAgfVxuXG4gIGZvciAoY29uc3QgZmllbGQgb2Ygc2Vjb25kYXJ5RmllbGRzKSB7XG4gICAgaWYgKGNvdW50V29yZHNJbk9iamVjdChvdXRwdXQpIDw9IG1heF93b3JkcykgYnJlYWs7XG4gICAgaWYgKCFmaWVsZCB8fCB0eXBlb2YgZmllbGQgIT09IFwic3RyaW5nXCIpIGNvbnRpbnVlO1xuXG4gICAgaWYgKGZpZWxkLmluY2x1ZGVzKFwiLlwiKSkge1xuICAgICAgY29uc3QgY3VycmVudCA9IHJlYWRQYXRoKG91dHB1dCwgZmllbGQpO1xuICAgICAgaWYgKHR5cGVvZiBjdXJyZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBmaWVsZC5zcGxpdChcIi5cIik7XG4gICAgICAgIGxldCBjdXJzb3IgPSBvdXRwdXQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGggLSAxOyBpICs9IDEpIHtcbiAgICAgICAgICBpZiAoIWN1cnNvciB8fCB0eXBlb2YgY3Vyc29yICE9PSBcIm9iamVjdFwiKSBicmVhaztcbiAgICAgICAgICBjdXJzb3IgPSBjdXJzb3Jba2V5c1tpXV07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGFzdCA9IGtleXNba2V5cy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGN1cnNvciAmJiB0eXBlb2YgY3Vyc29yID09PSBcIm9iamVjdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjdXJzb3IsIGxhc3QpKSB7XG4gICAgICAgICAgY3Vyc29yW2xhc3RdID0gXCJcIjtcbiAgICAgICAgICBkcm9wcGVkU2Vjb25kYXJ5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgb3V0cHV0ID0gY2xlYXJGaWVsZEJ5TmFtZShvdXRwdXQsIGZpZWxkKTtcbiAgICBkcm9wcGVkU2Vjb25kYXJ5ID0gdHJ1ZTtcbiAgfVxuXG4gIGZvciAoY29uc3QgcnVsZSBvZiBhcnJheU1pbmltdW1zKSB7XG4gICAgaWYgKGNvdW50V29yZHNJbk9iamVjdChvdXRwdXQpIDw9IG1heF93b3JkcykgYnJlYWs7XG4gICAgY29uc3QgZGlkUmVkdWNlID0gcmVkdWNlQXJyYXlCeVBhdGgob3V0cHV0LCBydWxlLnBhdGgsIHJ1bGUubWluLCBtYXhfd29yZHMpO1xuICAgIGlmIChkaWRSZWR1Y2UpIHJlZHVjZWRJdGVtcyA9IHRydWU7XG4gIH1cblxuICBpZiAoY291bnRXb3Jkc0luT2JqZWN0KG91dHB1dCkgPiBtYXhfd29yZHMpIHtcbiAgICBvdXRwdXQgPSBtYXBTdHJpbmdzKG91dHB1dCwgKHRleHQpID0+IHRyaW1Xb3Jkcyh0ZXh0LCAyKSk7XG4gIH1cblxuICBjb25zdCB3b3Jkc0FmdGVyID0gY291bnRXb3Jkc0luT2JqZWN0KG91dHB1dCk7XG4gIGNvbnN0IHdpdGhpbiA9IHdvcmRzQWZ0ZXIgPD0gbWF4X3dvcmRzO1xuICBjb25zdCBjb21wcmVzc2VkID0gd29yZHNBZnRlciA8IHdvcmRzQmVmb3JlO1xuXG4gIHJldHVybiB7XG4gICAgb3V0cHV0LFxuICAgIHdpdGhpbixcbiAgICBjb21wcmVzc2VkLFxuICAgIGNvbXByZXNzZWRfaGVhdmlseTogcmVkdWNlZEl0ZW1zIHx8IGRyb3BwZWRTZWNvbmRhcnkgfHwgIXdpdGhpbixcbiAgICB3b3Jkc19iZWZvcmU6IHdvcmRzQmVmb3JlLFxuICAgIHdvcmRzX2FmdGVyOiB3b3Jkc0FmdGVyXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY29tcHJlc3NQcmVzZXJ2ZVNoYXBlLFxuICBjb3VudFdvcmRzSW5PYmplY3QsXG4gIHRyaW1Xb3Jkc1xufTtcbiJdLCJuYW1lcyI6WyJjb3VudFdvcmRzIiwidGV4dCIsIm1hdGNoZXMiLCJTdHJpbmciLCJtYXRjaCIsImxlbmd0aCIsImNvdW50V29yZHNJbk9iamVjdCIsInZhbHVlIiwiQXJyYXkiLCJpc0FycmF5IiwicmVkdWNlIiwiYWNjIiwiaXRlbSIsIk9iamVjdCIsInZhbHVlcyIsInRyaW1Xb3JkcyIsIm1heFdvcmRzIiwid29yZHMiLCJ0cmltIiwic3BsaXQiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsInNsaWNlIiwiam9pbiIsImRlZXBDbG9uZSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIm1hcFN0cmluZ3MiLCJtYXBwZXIiLCJrZXlQYXRoIiwibWFwIiwiaW5kZXgiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJrZXkiLCJ2YWwiLCJjbGVhckZpZWxkQnlOYW1lIiwiZmllbGROYW1lIiwicmVhZFBhdGgiLCJvYmoiLCJwYXRoIiwidW5kZWZpbmVkIiwia2V5cyIsImZpbHRlciIsIkJvb2xlYW4iLCJjdXJzb3IiLCJyZWR1Y2VBcnJheUJ5UGF0aCIsIm1pbkNvdW50IiwiYXJyIiwic2FmZU1pbiIsIk1hdGgiLCJtYXgiLCJyb3VuZCIsInJlZHVjZWQiLCJwb3AiLCJub3JtYWxpemVBcnJheU1pbmltdW1zIiwibWluIiwiY29tcHJlc3NQcmVzZXJ2ZVNoYXBlIiwicGF5bG9hZCIsIm1heF93b3JkcyIsInByaW9yaXRpZXMiLCJvdXRwdXQiLCJ3aXRoaW4iLCJjb21wcmVzc2VkIiwiY29tcHJlc3NlZF9oZWF2aWx5Iiwid29yZHNfYmVmb3JlIiwid29yZHNfYWZ0ZXIiLCJ3b3Jkc0JlZm9yZSIsInByaW9yaXR5IiwidGV4dEtleXMiLCJ0ZXh0X2tleXMiLCJzZWNvbmRhcnlGaWVsZHMiLCJzZWNvbmRhcnlfZmllbGRzIiwicHJpbWFyeVBhc3NlcyIsInByaW1hcnlfcGFzc2VzIiwiZ2xvYmFsUGFzc2VzIiwiZ2xvYmFsX3Bhc3NlcyIsImFycmF5TWluaW11bXMiLCJhcnJheV9taW5pbXVtcyIsImRyb3BwZWRTZWNvbmRhcnkiLCJyZWR1Y2VkSXRlbXMiLCJwYXNzIiwiaW5jbHVkZXMiLCJmaWVsZCIsImN1cnJlbnQiLCJpIiwibGFzdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInJ1bGUiLCJkaWRSZWR1Y2UiLCJ3b3Jkc0FmdGVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./utils/compressPreserveShape.js\n");

/***/ }),

/***/ "(rsc)/./utils/handoff.js":
/*!**************************!*\
  !*** ./utils/handoff.js ***!
  \**************************/
/***/ ((module) => {

eval("\nconst HANDOFF_VERSION = \"1.0\";\nconst COMPAT_BY_TYPE = {\n    leads_table: [\n        \"anatoly-account-research-ru\",\n        \"leonid-outreach-dm-ru\",\n        \"emelyan-cold-email-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    account_card: [\n        \"leonid-outreach-dm-ru\",\n        \"emelyan-cold-email-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    hot_leads: [\n        \"leonid-outreach-dm-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    messages_pack: [\n        \"boris-bdr-operator-ru\"\n    ],\n    bdr_queue: [],\n    board_review: [],\n    content_pack: []\n};\nconst RECOMMENDED_NEXT = {\n    \"platon-prospect-research-ru\": [\n        \"anatoly-account-research-ru\",\n        \"leonid-outreach-dm-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    platon: [\n        \"anatoly-account-research-ru\",\n        \"leonid-outreach-dm-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    \"maxim-local-leads-ru\": [\n        \"anatoly-account-research-ru\",\n        \"leonid-outreach-dm-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    \"fedor-b2b-leads-ru\": [\n        \"anatoly-account-research-ru\",\n        \"emelyan-cold-email-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    \"artem-hot-leads-ru\": [\n        \"anatoly-account-research-ru\",\n        \"leonid-outreach-dm-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    \"anatoly-account-research-ru\": [\n        \"leonid-outreach-dm-ru\",\n        \"emelyan-cold-email-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    \"timofey-competitor-analysis-ru\": [\n        \"platon-prospect-research-ru\",\n        \"anatoly-account-research-ru\",\n        \"boris-bdr-operator-ru\"\n    ],\n    \"leonid-outreach-dm-ru\": [\n        \"boris-bdr-operator-ru\"\n    ],\n    \"emelyan-cold-email-ru\": [\n        \"boris-bdr-operator-ru\"\n    ],\n    \"boris-bdr-operator-ru\": [\n        \"leonid-outreach-dm-ru\",\n        \"emelyan-cold-email-ru\"\n    ],\n    \"pavel-reels-analysis-ru\": [\n        \"hariton-viral-hooks-ru\",\n        \"trofim-shorts-analogs-ru\"\n    ],\n    \"trofim-shorts-analogs-ru\": [\n        \"hariton-viral-hooks-ru\",\n        \"pavel-reels-analysis-ru\"\n    ],\n    \"irina-content-ideation-ru\": [\n        \"hariton-viral-hooks-ru\",\n        \"kostya-image-generation-ru\"\n    ],\n    \"hariton-viral-hooks-ru\": [\n        \"kostya-image-generation-ru\",\n        \"seva-content-repurposing-ru\"\n    ],\n    \"kostya-image-generation-ru\": [\n        \"hariton-viral-hooks-ru\",\n        \"irina-content-ideation-ru\"\n    ],\n    \"seva-content-repurposing-ru\": [\n        \"hariton-viral-hooks-ru\",\n        \"kostya-image-generation-ru\"\n    ],\n    \"mitya-workflow-diagram-ru\": [\n        \"kostya-image-generation-ru\",\n        \"irina-content-ideation-ru\"\n    ],\n    \"board-ceo-ru\": [\n        \"board-chair-ru\"\n    ],\n    \"board-cto-ru\": [\n        \"board-chair-ru\"\n    ],\n    \"board-cfo-ru\": [\n        \"board-chair-ru\"\n    ],\n    \"board-chair-ru\": []\n};\nconst normalizeLead = (lead)=>{\n    if (!lead || typeof lead !== \"object\") return null;\n    const leadName = lead.name || lead.company_name || lead.title || lead.name_placeholder || lead.lead_label || lead.link || lead.url || \"Lead\";\n    const contact = {\n        email: lead.email || (lead.public_contacts ? lead.public_contacts.email : undefined) || undefined,\n        phone: lead.phone || (lead.public_contacts ? lead.public_contacts.phone : undefined) || undefined,\n        website: lead.website || lead.domain || undefined,\n        url: lead.link || lead.url || lead.source_url || undefined\n    };\n    const source = lead.source || lead.channel || lead.source_type || \"\";\n    return {\n        lead_name: String(leadName),\n        dedupe_key: lead.dedupe_key || lead.dedupe_key_raw || \"\",\n        contact,\n        source,\n        proof_refs: lead.proof_refs || undefined\n    };\n};\nconst buildLeadsTableEntities = (data)=>{\n    const list = data && data.leads || data && data.company_candidates || data && data.hot_leads || [];\n    const leads = Array.isArray(list) ? list.map(normalizeLead).filter(Boolean) : [];\n    return {\n        leads\n    };\n};\nconst buildAccountCardEntities = (data)=>{\n    const card = data && data.account_card ? data.account_card : {};\n    const meta = data && data.meta ? data.meta : {};\n    return {\n        company_name: card.company_name || \"\",\n        discovered_channels: card.discovered_channels || {},\n        hooks: card.top_personalization_hooks || [],\n        pains: card.pain_hypotheses || [],\n        proof_items: Array.isArray(meta.proof_items) ? meta.proof_items : []\n    };\n};\nconst buildMessagesPackEntities = (data, channelOverride)=>{\n    if (data && data.dm_pack) {\n        return {\n            lead_label: data.dm_pack.lead_label || \"lead\",\n            channel: data.dm_pack.channel || channelOverride || \"dm\",\n            messages: data.dm_pack.messages || data.dm_pack.variants || []\n        };\n    }\n    if (data && data.email_sequences) {\n        return {\n            lead_label: \"lead\",\n            channel: channelOverride || \"email\",\n            email_sequences: data.email_sequences\n        };\n    }\n    return {\n        lead_label: \"lead\",\n        channel: channelOverride || \"\",\n        messages: []\n    };\n};\nconst buildContentPackEntities = (data)=>{\n    if (!data || typeof data !== \"object\") return {};\n    const entities = {\n        ...data\n    };\n    if (entities.meta) delete entities.meta;\n    return entities;\n};\nconst buildBoardReviewEntities = (data)=>{\n    const review = data && typeof data.review === \"object\" ? data.review : {};\n    return {\n        role: review.role || \"\",\n        decision: review.decision || review.stance || review.recommendation || review.feasibility || \"\",\n        summary: review.final_summary || review.verdict || review.unit_economics_view || \"\",\n        references: review.references || {}\n    };\n};\nconst buildHandoff = (agentId, data)=>{\n    const recommended_next_agents = RECOMMENDED_NEXT[agentId] || [\n        \"boris-bdr-operator-ru\"\n    ];\n    if (agentId === \"platon\" || agentId === \"platon-prospect-research-ru\" || agentId === \"maxim-local-leads-ru\" || agentId === \"fedor-b2b-leads-ru\") {\n        const type = \"leads_table\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: buildLeadsTableEntities(data),\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"artem-hot-leads-ru\") {\n        const type = \"hot_leads\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: buildLeadsTableEntities(data),\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"anatoly-account-research-ru\") {\n        const type = \"account_card\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: buildAccountCardEntities(data),\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"leonid-outreach-dm-ru\") {\n        const type = \"messages_pack\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: buildMessagesPackEntities(data, \"dm\"),\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"emelyan-cold-email-ru\") {\n        const type = \"messages_pack\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: buildMessagesPackEntities(data, \"email\"),\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"boris-bdr-operator-ru\") {\n        const type = \"bdr_queue\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: {\n                rows: Array.isArray(data.bdr_table) ? data.bdr_table : []\n            },\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"timofey-competitor-analysis-ru\") {\n        const type = \"content_pack\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: {\n                competitors: data.competitors || [],\n                comparison_table: data.comparison_table || [],\n                offers: data.offers || {},\n                win_angles: data.win_angles || [],\n                agentos_positioning: data.agentos_positioning || {}\n            },\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    if (agentId === \"board-ceo-ru\" || agentId === \"board-cto-ru\" || agentId === \"board-cfo-ru\" || agentId === \"board-chair-ru\") {\n        const type = \"board_review\";\n        return {\n            type,\n            version: HANDOFF_VERSION,\n            entities: buildBoardReviewEntities(data),\n            recommended_next_agents,\n            compat: COMPAT_BY_TYPE[type] || []\n        };\n    }\n    const type = \"content_pack\";\n    return {\n        type,\n        version: HANDOFF_VERSION,\n        entities: buildContentPackEntities(data),\n        recommended_next_agents,\n        compat: COMPAT_BY_TYPE[type] || []\n    };\n};\nconst getHandoffTypeForAgent = (agentId)=>{\n    if (agentId === \"platon\" || agentId === \"platon-prospect-research-ru\" || agentId === \"maxim-local-leads-ru\" || agentId === \"fedor-b2b-leads-ru\") {\n        return \"leads_table\";\n    }\n    if (agentId === \"artem-hot-leads-ru\") return \"hot_leads\";\n    if (agentId === \"anatoly-account-research-ru\") return \"account_card\";\n    if (agentId === \"leonid-outreach-dm-ru\") return \"messages_pack\";\n    if (agentId === \"emelyan-cold-email-ru\") return \"messages_pack\";\n    if (agentId === \"boris-bdr-operator-ru\") return \"bdr_queue\";\n    if (agentId === \"timofey-competitor-analysis-ru\") return \"content_pack\";\n    if (agentId === \"board-ceo-ru\" || agentId === \"board-cto-ru\" || agentId === \"board-cfo-ru\" || agentId === \"board-chair-ru\") {\n        return \"board_review\";\n    }\n    return \"content_pack\";\n};\nmodule.exports = {\n    buildHandoff,\n    HANDOFF_VERSION,\n    COMPAT_BY_TYPE,\n    getHandoffTypeForAgent\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dG9wL2FnZW50T1MvdXRpbHMvaGFuZG9mZi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBIQU5ET0ZGX1ZFUlNJT04gPSBcIjEuMFwiO1xuXG5jb25zdCBDT01QQVRfQllfVFlQRSA9IHtcbiAgbGVhZHNfdGFibGU6IFtcbiAgICBcImFuYXRvbHktYWNjb3VudC1yZXNlYXJjaC1ydVwiLFxuICAgIFwibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCIsXG4gICAgXCJlbWVseWFuLWNvbGQtZW1haWwtcnVcIixcbiAgICBcImJvcmlzLWJkci1vcGVyYXRvci1ydVwiXG4gIF0sXG4gIGFjY291bnRfY2FyZDogW1xuICAgIFwibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCIsXG4gICAgXCJlbWVseWFuLWNvbGQtZW1haWwtcnVcIixcbiAgICBcImJvcmlzLWJkci1vcGVyYXRvci1ydVwiXG4gIF0sXG4gIGhvdF9sZWFkczogW1wibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCIsIFwiYm9yaXMtYmRyLW9wZXJhdG9yLXJ1XCJdLFxuICBtZXNzYWdlc19wYWNrOiBbXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIl0sXG4gIGJkcl9xdWV1ZTogW10sXG4gIGJvYXJkX3JldmlldzogW10sXG4gIGNvbnRlbnRfcGFjazogW11cbn07XG5cbmNvbnN0IFJFQ09NTUVOREVEX05FWFQgPSB7XG4gIFwicGxhdG9uLXByb3NwZWN0LXJlc2VhcmNoLXJ1XCI6IFtcbiAgICBcImFuYXRvbHktYWNjb3VudC1yZXNlYXJjaC1ydVwiLFxuICAgIFwibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCIsXG4gICAgXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIlxuICBdLFxuICBwbGF0b246IFtcbiAgICBcImFuYXRvbHktYWNjb3VudC1yZXNlYXJjaC1ydVwiLFxuICAgIFwibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCIsXG4gICAgXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIlxuICBdLFxuICBcIm1heGltLWxvY2FsLWxlYWRzLXJ1XCI6IFtcbiAgICBcImFuYXRvbHktYWNjb3VudC1yZXNlYXJjaC1ydVwiLFxuICAgIFwibGVvbmlkLW91dHJlYWNoLWRtLXJ1XCIsXG4gICAgXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIlxuICBdLFxuICBcImZlZG9yLWIyYi1sZWFkcy1ydVwiOiBbXG4gICAgXCJhbmF0b2x5LWFjY291bnQtcmVzZWFyY2gtcnVcIixcbiAgICBcImVtZWx5YW4tY29sZC1lbWFpbC1ydVwiLFxuICAgIFwiYm9yaXMtYmRyLW9wZXJhdG9yLXJ1XCJcbiAgXSxcbiAgXCJhcnRlbS1ob3QtbGVhZHMtcnVcIjogW1xuICAgIFwiYW5hdG9seS1hY2NvdW50LXJlc2VhcmNoLXJ1XCIsXG4gICAgXCJsZW9uaWQtb3V0cmVhY2gtZG0tcnVcIixcbiAgICBcImJvcmlzLWJkci1vcGVyYXRvci1ydVwiXG4gIF0sXG4gIFwiYW5hdG9seS1hY2NvdW50LXJlc2VhcmNoLXJ1XCI6IFtcbiAgICBcImxlb25pZC1vdXRyZWFjaC1kbS1ydVwiLFxuICAgIFwiZW1lbHlhbi1jb2xkLWVtYWlsLXJ1XCIsXG4gICAgXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIlxuICBdLFxuICBcInRpbW9mZXktY29tcGV0aXRvci1hbmFseXNpcy1ydVwiOiBbXG4gICAgXCJwbGF0b24tcHJvc3BlY3QtcmVzZWFyY2gtcnVcIixcbiAgICBcImFuYXRvbHktYWNjb3VudC1yZXNlYXJjaC1ydVwiLFxuICAgIFwiYm9yaXMtYmRyLW9wZXJhdG9yLXJ1XCJcbiAgXSxcbiAgXCJsZW9uaWQtb3V0cmVhY2gtZG0tcnVcIjogW1wiYm9yaXMtYmRyLW9wZXJhdG9yLXJ1XCJdLFxuICBcImVtZWx5YW4tY29sZC1lbWFpbC1ydVwiOiBbXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIl0sXG4gIFwiYm9yaXMtYmRyLW9wZXJhdG9yLXJ1XCI6IFtcImxlb25pZC1vdXRyZWFjaC1kbS1ydVwiLCBcImVtZWx5YW4tY29sZC1lbWFpbC1ydVwiXSxcbiAgXCJwYXZlbC1yZWVscy1hbmFseXNpcy1ydVwiOiBbXCJoYXJpdG9uLXZpcmFsLWhvb2tzLXJ1XCIsIFwidHJvZmltLXNob3J0cy1hbmFsb2dzLXJ1XCJdLFxuICBcInRyb2ZpbS1zaG9ydHMtYW5hbG9ncy1ydVwiOiBbXCJoYXJpdG9uLXZpcmFsLWhvb2tzLXJ1XCIsIFwicGF2ZWwtcmVlbHMtYW5hbHlzaXMtcnVcIl0sXG4gIFwiaXJpbmEtY29udGVudC1pZGVhdGlvbi1ydVwiOiBbXCJoYXJpdG9uLXZpcmFsLWhvb2tzLXJ1XCIsIFwia29zdHlhLWltYWdlLWdlbmVyYXRpb24tcnVcIl0sXG4gIFwiaGFyaXRvbi12aXJhbC1ob29rcy1ydVwiOiBbXCJrb3N0eWEtaW1hZ2UtZ2VuZXJhdGlvbi1ydVwiLCBcInNldmEtY29udGVudC1yZXB1cnBvc2luZy1ydVwiXSxcbiAgXCJrb3N0eWEtaW1hZ2UtZ2VuZXJhdGlvbi1ydVwiOiBbXCJoYXJpdG9uLXZpcmFsLWhvb2tzLXJ1XCIsIFwiaXJpbmEtY29udGVudC1pZGVhdGlvbi1ydVwiXSxcbiAgXCJzZXZhLWNvbnRlbnQtcmVwdXJwb3NpbmctcnVcIjogW1wiaGFyaXRvbi12aXJhbC1ob29rcy1ydVwiLCBcImtvc3R5YS1pbWFnZS1nZW5lcmF0aW9uLXJ1XCJdLFxuICBcIm1pdHlhLXdvcmtmbG93LWRpYWdyYW0tcnVcIjogW1wia29zdHlhLWltYWdlLWdlbmVyYXRpb24tcnVcIiwgXCJpcmluYS1jb250ZW50LWlkZWF0aW9uLXJ1XCJdLFxuICBcImJvYXJkLWNlby1ydVwiOiBbXCJib2FyZC1jaGFpci1ydVwiXSxcbiAgXCJib2FyZC1jdG8tcnVcIjogW1wiYm9hcmQtY2hhaXItcnVcIl0sXG4gIFwiYm9hcmQtY2ZvLXJ1XCI6IFtcImJvYXJkLWNoYWlyLXJ1XCJdLFxuICBcImJvYXJkLWNoYWlyLXJ1XCI6IFtdXG59O1xuXG5jb25zdCBub3JtYWxpemVMZWFkID0gKGxlYWQpID0+IHtcbiAgaWYgKCFsZWFkIHx8IHR5cGVvZiBsZWFkICE9PSBcIm9iamVjdFwiKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgbGVhZE5hbWUgPVxuICAgIGxlYWQubmFtZSB8fFxuICAgIGxlYWQuY29tcGFueV9uYW1lIHx8XG4gICAgbGVhZC50aXRsZSB8fFxuICAgIGxlYWQubmFtZV9wbGFjZWhvbGRlciB8fFxuICAgIGxlYWQubGVhZF9sYWJlbCB8fFxuICAgIGxlYWQubGluayB8fFxuICAgIGxlYWQudXJsIHx8XG4gICAgXCJMZWFkXCI7XG4gIGNvbnN0IGNvbnRhY3QgPSB7XG4gICAgZW1haWw6IGxlYWQuZW1haWwgfHwgKGxlYWQucHVibGljX2NvbnRhY3RzID8gbGVhZC5wdWJsaWNfY29udGFjdHMuZW1haWwgOiB1bmRlZmluZWQpIHx8IHVuZGVmaW5lZCxcbiAgICBwaG9uZTogbGVhZC5waG9uZSB8fCAobGVhZC5wdWJsaWNfY29udGFjdHMgPyBsZWFkLnB1YmxpY19jb250YWN0cy5waG9uZSA6IHVuZGVmaW5lZCkgfHwgdW5kZWZpbmVkLFxuICAgIHdlYnNpdGU6IGxlYWQud2Vic2l0ZSB8fCBsZWFkLmRvbWFpbiB8fCB1bmRlZmluZWQsXG4gICAgdXJsOiBsZWFkLmxpbmsgfHwgbGVhZC51cmwgfHwgbGVhZC5zb3VyY2VfdXJsIHx8IHVuZGVmaW5lZFxuICB9O1xuICBjb25zdCBzb3VyY2UgPSBsZWFkLnNvdXJjZSB8fCBsZWFkLmNoYW5uZWwgfHwgbGVhZC5zb3VyY2VfdHlwZSB8fCBcIlwiO1xuICByZXR1cm4ge1xuICAgIGxlYWRfbmFtZTogU3RyaW5nKGxlYWROYW1lKSxcbiAgICBkZWR1cGVfa2V5OiBsZWFkLmRlZHVwZV9rZXkgfHwgbGVhZC5kZWR1cGVfa2V5X3JhdyB8fCBcIlwiLFxuICAgIGNvbnRhY3QsXG4gICAgc291cmNlLFxuICAgIHByb29mX3JlZnM6IGxlYWQucHJvb2ZfcmVmcyB8fCB1bmRlZmluZWRcbiAgfTtcbn07XG5cbmNvbnN0IGJ1aWxkTGVhZHNUYWJsZUVudGl0aWVzID0gKGRhdGEpID0+IHtcbiAgY29uc3QgbGlzdCA9XG4gICAgKGRhdGEgJiYgZGF0YS5sZWFkcykgfHxcbiAgICAoZGF0YSAmJiBkYXRhLmNvbXBhbnlfY2FuZGlkYXRlcykgfHxcbiAgICAoZGF0YSAmJiBkYXRhLmhvdF9sZWFkcykgfHxcbiAgICBbXTtcbiAgY29uc3QgbGVhZHMgPSBBcnJheS5pc0FycmF5KGxpc3QpID8gbGlzdC5tYXAobm9ybWFsaXplTGVhZCkuZmlsdGVyKEJvb2xlYW4pIDogW107XG4gIHJldHVybiB7IGxlYWRzIH07XG59O1xuXG5jb25zdCBidWlsZEFjY291bnRDYXJkRW50aXRpZXMgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkID0gZGF0YSAmJiBkYXRhLmFjY291bnRfY2FyZCA/IGRhdGEuYWNjb3VudF9jYXJkIDoge307XG4gIGNvbnN0IG1ldGEgPSBkYXRhICYmIGRhdGEubWV0YSA/IGRhdGEubWV0YSA6IHt9O1xuICByZXR1cm4ge1xuICAgIGNvbXBhbnlfbmFtZTogY2FyZC5jb21wYW55X25hbWUgfHwgXCJcIixcbiAgICBkaXNjb3ZlcmVkX2NoYW5uZWxzOiBjYXJkLmRpc2NvdmVyZWRfY2hhbm5lbHMgfHwge30sXG4gICAgaG9va3M6IGNhcmQudG9wX3BlcnNvbmFsaXphdGlvbl9ob29rcyB8fCBbXSxcbiAgICBwYWluczogY2FyZC5wYWluX2h5cG90aGVzZXMgfHwgW10sXG4gICAgcHJvb2ZfaXRlbXM6IEFycmF5LmlzQXJyYXkobWV0YS5wcm9vZl9pdGVtcykgPyBtZXRhLnByb29mX2l0ZW1zIDogW11cbiAgfTtcbn07XG5cbmNvbnN0IGJ1aWxkTWVzc2FnZXNQYWNrRW50aXRpZXMgPSAoZGF0YSwgY2hhbm5lbE92ZXJyaWRlKSA9PiB7XG4gIGlmIChkYXRhICYmIGRhdGEuZG1fcGFjaykge1xuICAgIHJldHVybiB7XG4gICAgICBsZWFkX2xhYmVsOiBkYXRhLmRtX3BhY2subGVhZF9sYWJlbCB8fCBcImxlYWRcIixcbiAgICAgIGNoYW5uZWw6IGRhdGEuZG1fcGFjay5jaGFubmVsIHx8IGNoYW5uZWxPdmVycmlkZSB8fCBcImRtXCIsXG4gICAgICBtZXNzYWdlczogZGF0YS5kbV9wYWNrLm1lc3NhZ2VzIHx8IGRhdGEuZG1fcGFjay52YXJpYW50cyB8fCBbXVxuICAgIH07XG4gIH1cbiAgaWYgKGRhdGEgJiYgZGF0YS5lbWFpbF9zZXF1ZW5jZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGVhZF9sYWJlbDogXCJsZWFkXCIsXG4gICAgICBjaGFubmVsOiBjaGFubmVsT3ZlcnJpZGUgfHwgXCJlbWFpbFwiLFxuICAgICAgZW1haWxfc2VxdWVuY2VzOiBkYXRhLmVtYWlsX3NlcXVlbmNlc1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIHsgbGVhZF9sYWJlbDogXCJsZWFkXCIsIGNoYW5uZWw6IGNoYW5uZWxPdmVycmlkZSB8fCBcIlwiLCBtZXNzYWdlczogW10gfTtcbn07XG5cbmNvbnN0IGJ1aWxkQ29udGVudFBhY2tFbnRpdGllcyA9IChkYXRhKSA9PiB7XG4gIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHt9O1xuICBjb25zdCBlbnRpdGllcyA9IHsgLi4uZGF0YSB9O1xuICBpZiAoZW50aXRpZXMubWV0YSkgZGVsZXRlIGVudGl0aWVzLm1ldGE7XG4gIHJldHVybiBlbnRpdGllcztcbn07XG5cbmNvbnN0IGJ1aWxkQm9hcmRSZXZpZXdFbnRpdGllcyA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IHJldmlldyA9IGRhdGEgJiYgdHlwZW9mIGRhdGEucmV2aWV3ID09PSBcIm9iamVjdFwiID8gZGF0YS5yZXZpZXcgOiB7fTtcbiAgcmV0dXJuIHtcbiAgICByb2xlOiByZXZpZXcucm9sZSB8fCBcIlwiLFxuICAgIGRlY2lzaW9uOlxuICAgICAgcmV2aWV3LmRlY2lzaW9uIHx8XG4gICAgICByZXZpZXcuc3RhbmNlIHx8XG4gICAgICByZXZpZXcucmVjb21tZW5kYXRpb24gfHxcbiAgICAgIHJldmlldy5mZWFzaWJpbGl0eSB8fFxuICAgICAgXCJcIixcbiAgICBzdW1tYXJ5OlxuICAgICAgcmV2aWV3LmZpbmFsX3N1bW1hcnkgfHxcbiAgICAgIHJldmlldy52ZXJkaWN0IHx8XG4gICAgICByZXZpZXcudW5pdF9lY29ub21pY3NfdmlldyB8fFxuICAgICAgXCJcIixcbiAgICByZWZlcmVuY2VzOiByZXZpZXcucmVmZXJlbmNlcyB8fCB7fVxuICB9O1xufTtcblxuY29uc3QgYnVpbGRIYW5kb2ZmID0gKGFnZW50SWQsIGRhdGEpID0+IHtcbiAgY29uc3QgcmVjb21tZW5kZWRfbmV4dF9hZ2VudHMgPSBSRUNPTU1FTkRFRF9ORVhUW2FnZW50SWRdIHx8IFtcImJvcmlzLWJkci1vcGVyYXRvci1ydVwiXTtcblxuICBpZiAoXG4gICAgYWdlbnRJZCA9PT0gXCJwbGF0b25cIiB8fFxuICAgIGFnZW50SWQgPT09IFwicGxhdG9uLXByb3NwZWN0LXJlc2VhcmNoLXJ1XCIgfHxcbiAgICBhZ2VudElkID09PSBcIm1heGltLWxvY2FsLWxlYWRzLXJ1XCIgfHxcbiAgICBhZ2VudElkID09PSBcImZlZG9yLWIyYi1sZWFkcy1ydVwiXG4gICkge1xuICAgIGNvbnN0IHR5cGUgPSBcImxlYWRzX3RhYmxlXCI7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGUsXG4gICAgICB2ZXJzaW9uOiBIQU5ET0ZGX1ZFUlNJT04sXG4gICAgICBlbnRpdGllczogYnVpbGRMZWFkc1RhYmxlRW50aXRpZXMoZGF0YSksXG4gICAgICByZWNvbW1lbmRlZF9uZXh0X2FnZW50cyxcbiAgICAgIGNvbXBhdDogQ09NUEFUX0JZX1RZUEVbdHlwZV0gfHwgW11cbiAgICB9O1xuICB9XG5cbiAgaWYgKGFnZW50SWQgPT09IFwiYXJ0ZW0taG90LWxlYWRzLXJ1XCIpIHtcbiAgICBjb25zdCB0eXBlID0gXCJob3RfbGVhZHNcIjtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZSxcbiAgICAgIHZlcnNpb246IEhBTkRPRkZfVkVSU0lPTixcbiAgICAgIGVudGl0aWVzOiBidWlsZExlYWRzVGFibGVFbnRpdGllcyhkYXRhKSxcbiAgICAgIHJlY29tbWVuZGVkX25leHRfYWdlbnRzLFxuICAgICAgY29tcGF0OiBDT01QQVRfQllfVFlQRVt0eXBlXSB8fCBbXVxuICAgIH07XG4gIH1cblxuICBpZiAoYWdlbnRJZCA9PT0gXCJhbmF0b2x5LWFjY291bnQtcmVzZWFyY2gtcnVcIikge1xuICAgIGNvbnN0IHR5cGUgPSBcImFjY291bnRfY2FyZFwiO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlLFxuICAgICAgdmVyc2lvbjogSEFORE9GRl9WRVJTSU9OLFxuICAgICAgZW50aXRpZXM6IGJ1aWxkQWNjb3VudENhcmRFbnRpdGllcyhkYXRhKSxcbiAgICAgIHJlY29tbWVuZGVkX25leHRfYWdlbnRzLFxuICAgICAgY29tcGF0OiBDT01QQVRfQllfVFlQRVt0eXBlXSB8fCBbXVxuICAgIH07XG4gIH1cblxuICBpZiAoYWdlbnRJZCA9PT0gXCJsZW9uaWQtb3V0cmVhY2gtZG0tcnVcIikge1xuICAgIGNvbnN0IHR5cGUgPSBcIm1lc3NhZ2VzX3BhY2tcIjtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZSxcbiAgICAgIHZlcnNpb246IEhBTkRPRkZfVkVSU0lPTixcbiAgICAgIGVudGl0aWVzOiBidWlsZE1lc3NhZ2VzUGFja0VudGl0aWVzKGRhdGEsIFwiZG1cIiksXG4gICAgICByZWNvbW1lbmRlZF9uZXh0X2FnZW50cyxcbiAgICAgIGNvbXBhdDogQ09NUEFUX0JZX1RZUEVbdHlwZV0gfHwgW11cbiAgICB9O1xuICB9XG5cbiAgaWYgKGFnZW50SWQgPT09IFwiZW1lbHlhbi1jb2xkLWVtYWlsLXJ1XCIpIHtcbiAgICBjb25zdCB0eXBlID0gXCJtZXNzYWdlc19wYWNrXCI7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGUsXG4gICAgICB2ZXJzaW9uOiBIQU5ET0ZGX1ZFUlNJT04sXG4gICAgICBlbnRpdGllczogYnVpbGRNZXNzYWdlc1BhY2tFbnRpdGllcyhkYXRhLCBcImVtYWlsXCIpLFxuICAgICAgcmVjb21tZW5kZWRfbmV4dF9hZ2VudHMsXG4gICAgICBjb21wYXQ6IENPTVBBVF9CWV9UWVBFW3R5cGVdIHx8IFtdXG4gICAgfTtcbiAgfVxuXG4gIGlmIChhZ2VudElkID09PSBcImJvcmlzLWJkci1vcGVyYXRvci1ydVwiKSB7XG4gICAgY29uc3QgdHlwZSA9IFwiYmRyX3F1ZXVlXCI7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGUsXG4gICAgICB2ZXJzaW9uOiBIQU5ET0ZGX1ZFUlNJT04sXG4gICAgICBlbnRpdGllczogeyByb3dzOiBBcnJheS5pc0FycmF5KGRhdGEuYmRyX3RhYmxlKSA/IGRhdGEuYmRyX3RhYmxlIDogW10gfSxcbiAgICAgIHJlY29tbWVuZGVkX25leHRfYWdlbnRzLFxuICAgICAgY29tcGF0OiBDT01QQVRfQllfVFlQRVt0eXBlXSB8fCBbXVxuICAgIH07XG4gIH1cblxuICBpZiAoYWdlbnRJZCA9PT0gXCJ0aW1vZmV5LWNvbXBldGl0b3ItYW5hbHlzaXMtcnVcIikge1xuICAgIGNvbnN0IHR5cGUgPSBcImNvbnRlbnRfcGFja1wiO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlLFxuICAgICAgdmVyc2lvbjogSEFORE9GRl9WRVJTSU9OLFxuICAgICAgZW50aXRpZXM6IHtcbiAgICAgICAgY29tcGV0aXRvcnM6IGRhdGEuY29tcGV0aXRvcnMgfHwgW10sXG4gICAgICAgIGNvbXBhcmlzb25fdGFibGU6IGRhdGEuY29tcGFyaXNvbl90YWJsZSB8fCBbXSxcbiAgICAgICAgb2ZmZXJzOiBkYXRhLm9mZmVycyB8fCB7fSxcbiAgICAgICAgd2luX2FuZ2xlczogZGF0YS53aW5fYW5nbGVzIHx8IFtdLFxuICAgICAgICBhZ2VudG9zX3Bvc2l0aW9uaW5nOiBkYXRhLmFnZW50b3NfcG9zaXRpb25pbmcgfHwge31cbiAgICAgIH0sXG4gICAgICByZWNvbW1lbmRlZF9uZXh0X2FnZW50cyxcbiAgICAgIGNvbXBhdDogQ09NUEFUX0JZX1RZUEVbdHlwZV0gfHwgW11cbiAgICB9O1xuICB9XG5cbiAgaWYgKFxuICAgIGFnZW50SWQgPT09IFwiYm9hcmQtY2VvLXJ1XCIgfHxcbiAgICBhZ2VudElkID09PSBcImJvYXJkLWN0by1ydVwiIHx8XG4gICAgYWdlbnRJZCA9PT0gXCJib2FyZC1jZm8tcnVcIiB8fFxuICAgIGFnZW50SWQgPT09IFwiYm9hcmQtY2hhaXItcnVcIlxuICApIHtcbiAgICBjb25zdCB0eXBlID0gXCJib2FyZF9yZXZpZXdcIjtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZSxcbiAgICAgIHZlcnNpb246IEhBTkRPRkZfVkVSU0lPTixcbiAgICAgIGVudGl0aWVzOiBidWlsZEJvYXJkUmV2aWV3RW50aXRpZXMoZGF0YSksXG4gICAgICByZWNvbW1lbmRlZF9uZXh0X2FnZW50cyxcbiAgICAgIGNvbXBhdDogQ09NUEFUX0JZX1RZUEVbdHlwZV0gfHwgW11cbiAgICB9O1xuICB9XG5cbiAgY29uc3QgdHlwZSA9IFwiY29udGVudF9wYWNrXCI7XG4gIHJldHVybiB7XG4gICAgdHlwZSxcbiAgICB2ZXJzaW9uOiBIQU5ET0ZGX1ZFUlNJT04sXG4gICAgZW50aXRpZXM6IGJ1aWxkQ29udGVudFBhY2tFbnRpdGllcyhkYXRhKSxcbiAgICByZWNvbW1lbmRlZF9uZXh0X2FnZW50cyxcbiAgICBjb21wYXQ6IENPTVBBVF9CWV9UWVBFW3R5cGVdIHx8IFtdXG4gIH07XG59O1xuXG5jb25zdCBnZXRIYW5kb2ZmVHlwZUZvckFnZW50ID0gKGFnZW50SWQpID0+IHtcbiAgaWYgKFxuICAgIGFnZW50SWQgPT09IFwicGxhdG9uXCIgfHxcbiAgICBhZ2VudElkID09PSBcInBsYXRvbi1wcm9zcGVjdC1yZXNlYXJjaC1ydVwiIHx8XG4gICAgYWdlbnRJZCA9PT0gXCJtYXhpbS1sb2NhbC1sZWFkcy1ydVwiIHx8XG4gICAgYWdlbnRJZCA9PT0gXCJmZWRvci1iMmItbGVhZHMtcnVcIlxuICApIHtcbiAgICByZXR1cm4gXCJsZWFkc190YWJsZVwiO1xuICB9XG4gIGlmIChhZ2VudElkID09PSBcImFydGVtLWhvdC1sZWFkcy1ydVwiKSByZXR1cm4gXCJob3RfbGVhZHNcIjtcbiAgaWYgKGFnZW50SWQgPT09IFwiYW5hdG9seS1hY2NvdW50LXJlc2VhcmNoLXJ1XCIpIHJldHVybiBcImFjY291bnRfY2FyZFwiO1xuICBpZiAoYWdlbnRJZCA9PT0gXCJsZW9uaWQtb3V0cmVhY2gtZG0tcnVcIikgcmV0dXJuIFwibWVzc2FnZXNfcGFja1wiO1xuICBpZiAoYWdlbnRJZCA9PT0gXCJlbWVseWFuLWNvbGQtZW1haWwtcnVcIikgcmV0dXJuIFwibWVzc2FnZXNfcGFja1wiO1xuICBpZiAoYWdlbnRJZCA9PT0gXCJib3Jpcy1iZHItb3BlcmF0b3ItcnVcIikgcmV0dXJuIFwiYmRyX3F1ZXVlXCI7XG4gIGlmIChhZ2VudElkID09PSBcInRpbW9mZXktY29tcGV0aXRvci1hbmFseXNpcy1ydVwiKSByZXR1cm4gXCJjb250ZW50X3BhY2tcIjtcbiAgaWYgKFxuICAgIGFnZW50SWQgPT09IFwiYm9hcmQtY2VvLXJ1XCIgfHxcbiAgICBhZ2VudElkID09PSBcImJvYXJkLWN0by1ydVwiIHx8XG4gICAgYWdlbnRJZCA9PT0gXCJib2FyZC1jZm8tcnVcIiB8fFxuICAgIGFnZW50SWQgPT09IFwiYm9hcmQtY2hhaXItcnVcIlxuICApIHtcbiAgICByZXR1cm4gXCJib2FyZF9yZXZpZXdcIjtcbiAgfVxuICByZXR1cm4gXCJjb250ZW50X3BhY2tcIjtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0geyBidWlsZEhhbmRvZmYsIEhBTkRPRkZfVkVSU0lPTiwgQ09NUEFUX0JZX1RZUEUsIGdldEhhbmRvZmZUeXBlRm9yQWdlbnQgfTtcbiJdLCJuYW1lcyI6WyJIQU5ET0ZGX1ZFUlNJT04iLCJDT01QQVRfQllfVFlQRSIsImxlYWRzX3RhYmxlIiwiYWNjb3VudF9jYXJkIiwiaG90X2xlYWRzIiwibWVzc2FnZXNfcGFjayIsImJkcl9xdWV1ZSIsImJvYXJkX3JldmlldyIsImNvbnRlbnRfcGFjayIsIlJFQ09NTUVOREVEX05FWFQiLCJwbGF0b24iLCJub3JtYWxpemVMZWFkIiwibGVhZCIsImxlYWROYW1lIiwibmFtZSIsImNvbXBhbnlfbmFtZSIsInRpdGxlIiwibmFtZV9wbGFjZWhvbGRlciIsImxlYWRfbGFiZWwiLCJsaW5rIiwidXJsIiwiY29udGFjdCIsImVtYWlsIiwicHVibGljX2NvbnRhY3RzIiwidW5kZWZpbmVkIiwicGhvbmUiLCJ3ZWJzaXRlIiwiZG9tYWluIiwic291cmNlX3VybCIsInNvdXJjZSIsImNoYW5uZWwiLCJzb3VyY2VfdHlwZSIsImxlYWRfbmFtZSIsIlN0cmluZyIsImRlZHVwZV9rZXkiLCJkZWR1cGVfa2V5X3JhdyIsInByb29mX3JlZnMiLCJidWlsZExlYWRzVGFibGVFbnRpdGllcyIsImRhdGEiLCJsaXN0IiwibGVhZHMiLCJjb21wYW55X2NhbmRpZGF0ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJmaWx0ZXIiLCJCb29sZWFuIiwiYnVpbGRBY2NvdW50Q2FyZEVudGl0aWVzIiwiY2FyZCIsIm1ldGEiLCJkaXNjb3ZlcmVkX2NoYW5uZWxzIiwiaG9va3MiLCJ0b3BfcGVyc29uYWxpemF0aW9uX2hvb2tzIiwicGFpbnMiLCJwYWluX2h5cG90aGVzZXMiLCJwcm9vZl9pdGVtcyIsImJ1aWxkTWVzc2FnZXNQYWNrRW50aXRpZXMiLCJjaGFubmVsT3ZlcnJpZGUiLCJkbV9wYWNrIiwibWVzc2FnZXMiLCJ2YXJpYW50cyIsImVtYWlsX3NlcXVlbmNlcyIsImJ1aWxkQ29udGVudFBhY2tFbnRpdGllcyIsImVudGl0aWVzIiwiYnVpbGRCb2FyZFJldmlld0VudGl0aWVzIiwicmV2aWV3Iiwicm9sZSIsImRlY2lzaW9uIiwic3RhbmNlIiwicmVjb21tZW5kYXRpb24iLCJmZWFzaWJpbGl0eSIsInN1bW1hcnkiLCJmaW5hbF9zdW1tYXJ5IiwidmVyZGljdCIsInVuaXRfZWNvbm9taWNzX3ZpZXciLCJyZWZlcmVuY2VzIiwiYnVpbGRIYW5kb2ZmIiwiYWdlbnRJZCIsInJlY29tbWVuZGVkX25leHRfYWdlbnRzIiwidHlwZSIsInZlcnNpb24iLCJjb21wYXQiLCJyb3dzIiwiYmRyX3RhYmxlIiwiY29tcGV0aXRvcnMiLCJjb21wYXJpc29uX3RhYmxlIiwib2ZmZXJzIiwid2luX2FuZ2xlcyIsImFnZW50b3NfcG9zaXRpb25pbmciLCJnZXRIYW5kb2ZmVHlwZUZvckFnZW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./utils/handoff.js\n");

/***/ }),

/***/ "(rsc)/./utils/validateAgentResponse.js":
/*!****************************************!*\
  !*** ./utils/validateAgentResponse.js ***!
  \****************************************/
/***/ ((module) => {

eval("\nconst isObject = (value)=>typeof value === \"object\" && value !== null && !Array.isArray(value);\nconst isType = (value, type)=>{\n    if (type === \"array\") return Array.isArray(value);\n    if (type === \"object\") return isObject(value);\n    if (type === \"string\") return typeof value === \"string\";\n    if (type === \"number\") return typeof value === \"number\" && Number.isFinite(value);\n    if (type === \"boolean\") return typeof value === \"boolean\";\n    return value !== undefined;\n};\nconst validateAgentResponse = (data, schema)=>{\n    const errors = [];\n    if (!isObject(data)) {\n        return {\n            ok: false,\n            errors: [\n                \"data must be an object\"\n            ]\n        };\n    }\n    if (!schema || !schema.required) return {\n        ok: true,\n        errors\n    };\n    const required = schema.required || {};\n    Object.entries(required).forEach(([key, type])=>{\n        if (!(key in data)) {\n            errors.push(`missing key: ${key}`);\n            return;\n        }\n        if (type && !isType(data[key], type)) {\n            errors.push(`invalid type for ${key}: expected ${type}`);\n        }\n    });\n    return {\n        ok: errors.length === 0,\n        errors\n    };\n};\nmodule.exports = {\n    validateAgentResponse\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi91dGlscy92YWxpZGF0ZUFnZW50UmVzcG9uc2UuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLFdBQVcsQ0FBQ0MsUUFBVSxPQUFPQSxVQUFVLFlBQVlBLFVBQVUsUUFBUSxDQUFDQyxNQUFNQyxPQUFPLENBQUNGO0FBRTFGLE1BQU1HLFNBQVMsQ0FBQ0gsT0FBT0k7SUFDckIsSUFBSUEsU0FBUyxTQUFTLE9BQU9ILE1BQU1DLE9BQU8sQ0FBQ0Y7SUFDM0MsSUFBSUksU0FBUyxVQUFVLE9BQU9MLFNBQVNDO0lBQ3ZDLElBQUlJLFNBQVMsVUFBVSxPQUFPLE9BQU9KLFVBQVU7SUFDL0MsSUFBSUksU0FBUyxVQUFVLE9BQU8sT0FBT0osVUFBVSxZQUFZSyxPQUFPQyxRQUFRLENBQUNOO0lBQzNFLElBQUlJLFNBQVMsV0FBVyxPQUFPLE9BQU9KLFVBQVU7SUFDaEQsT0FBT0EsVUFBVU87QUFDbkI7QUFFQSxNQUFNQyx3QkFBd0IsQ0FBQ0MsTUFBTUM7SUFDbkMsTUFBTUMsU0FBUyxFQUFFO0lBQ2pCLElBQUksQ0FBQ1osU0FBU1UsT0FBTztRQUNuQixPQUFPO1lBQUVHLElBQUk7WUFBT0QsUUFBUTtnQkFBQzthQUF5QjtRQUFDO0lBQ3pEO0lBQ0EsSUFBSSxDQUFDRCxVQUFVLENBQUNBLE9BQU9HLFFBQVEsRUFBRSxPQUFPO1FBQUVELElBQUk7UUFBTUQ7SUFBTztJQUMzRCxNQUFNRSxXQUFXSCxPQUFPRyxRQUFRLElBQUksQ0FBQztJQUNyQ0MsT0FBT0MsT0FBTyxDQUFDRixVQUFVRyxPQUFPLENBQUMsQ0FBQyxDQUFDQyxLQUFLYixLQUFLO1FBQzNDLElBQUksQ0FBRWEsQ0FBQUEsT0FBT1IsSUFBRyxHQUFJO1lBQ2xCRSxPQUFPTyxJQUFJLENBQUMsQ0FBQyxhQUFhLEVBQUVELEtBQUs7WUFDakM7UUFDRjtRQUNBLElBQUliLFFBQVEsQ0FBQ0QsT0FBT00sSUFBSSxDQUFDUSxJQUFJLEVBQUViLE9BQU87WUFDcENPLE9BQU9PLElBQUksQ0FBQyxDQUFDLGlCQUFpQixFQUFFRCxJQUFJLFdBQVcsRUFBRWIsTUFBTTtRQUN6RDtJQUNGO0lBQ0EsT0FBTztRQUFFUSxJQUFJRCxPQUFPUSxNQUFNLEtBQUs7UUFBR1I7SUFBTztBQUMzQztBQUVBUyxPQUFPQyxPQUFPLEdBQUc7SUFBRWI7QUFBc0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hYnV6YWRhL0Rlc2t0b3AvYWdlbnRPUy91dGlscy92YWxpZGF0ZUFnZW50UmVzcG9uc2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaXNPYmplY3QgPSAodmFsdWUpID0+IHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG5cbmNvbnN0IGlzVHlwZSA9ICh2YWx1ZSwgdHlwZSkgPT4ge1xuICBpZiAodHlwZSA9PT0gXCJhcnJheVwiKSByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG4gIGlmICh0eXBlID09PSBcIm9iamVjdFwiKSByZXR1cm4gaXNPYmplY3QodmFsdWUpO1xuICBpZiAodHlwZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIjtcbiAgaWYgKHR5cGUgPT09IFwibnVtYmVyXCIpIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgTnVtYmVyLmlzRmluaXRlKHZhbHVlKTtcbiAgaWYgKHR5cGUgPT09IFwiYm9vbGVhblwiKSByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIjtcbiAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59O1xuXG5jb25zdCB2YWxpZGF0ZUFnZW50UmVzcG9uc2UgPSAoZGF0YSwgc2NoZW1hKSA9PiB7XG4gIGNvbnN0IGVycm9ycyA9IFtdO1xuICBpZiAoIWlzT2JqZWN0KGRhdGEpKSB7XG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBlcnJvcnM6IFtcImRhdGEgbXVzdCBiZSBhbiBvYmplY3RcIl0gfTtcbiAgfVxuICBpZiAoIXNjaGVtYSB8fCAhc2NoZW1hLnJlcXVpcmVkKSByZXR1cm4geyBvazogdHJ1ZSwgZXJyb3JzIH07XG4gIGNvbnN0IHJlcXVpcmVkID0gc2NoZW1hLnJlcXVpcmVkIHx8IHt9O1xuICBPYmplY3QuZW50cmllcyhyZXF1aXJlZCkuZm9yRWFjaCgoW2tleSwgdHlwZV0pID0+IHtcbiAgICBpZiAoIShrZXkgaW4gZGF0YSkpIHtcbiAgICAgIGVycm9ycy5wdXNoKGBtaXNzaW5nIGtleTogJHtrZXl9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlICYmICFpc1R5cGUoZGF0YVtrZXldLCB0eXBlKSkge1xuICAgICAgZXJyb3JzLnB1c2goYGludmFsaWQgdHlwZSBmb3IgJHtrZXl9OiBleHBlY3RlZCAke3R5cGV9YCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHsgb2s6IGVycm9ycy5sZW5ndGggPT09IDAsIGVycm9ycyB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IHZhbGlkYXRlQWdlbnRSZXNwb25zZSB9O1xuIl0sIm5hbWVzIjpbImlzT2JqZWN0IiwidmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJpc1R5cGUiLCJ0eXBlIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJ1bmRlZmluZWQiLCJ2YWxpZGF0ZUFnZW50UmVzcG9uc2UiLCJkYXRhIiwic2NoZW1hIiwiZXJyb3JzIiwib2siLCJyZXF1aXJlZCIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwicHVzaCIsImxlbmd0aCIsIm1vZHVsZSIsImV4cG9ydHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./utils/validateAgentResponse.js\n");

/***/ }),

/***/ "(rsc)/./utils/wordLimitCompress.js":
/*!************************************!*\
  !*** ./utils/wordLimitCompress.js ***!
  \************************************/
/***/ ((module) => {

eval("\nconst countWords = (text)=>{\n    if (!text) return 0;\n    const matches = String(text).match(/[A-Za-zА-Яа-я0-9_]+/g);\n    return matches ? matches.length : 0;\n};\nconst countWordsInObject = (value)=>{\n    if (typeof value === \"string\") return countWords(value);\n    if (Array.isArray(value)) return value.reduce((acc, item)=>acc + countWordsInObject(item), 0);\n    if (value && typeof value === \"object\") {\n        return Object.values(value).reduce((acc, item)=>acc + countWordsInObject(item), 0);\n    }\n    return 0;\n};\nconst countStringsInObject = (value)=>{\n    if (typeof value === \"string\") return 1;\n    if (Array.isArray(value)) return value.reduce((acc, item)=>acc + countStringsInObject(item), 0);\n    if (value && typeof value === \"object\") {\n        return Object.values(value).reduce((acc, item)=>acc + countStringsInObject(item), 0);\n    }\n    return 0;\n};\nconst trimWords = (text, maxWords)=>{\n    if (!text) return \"\";\n    const words = String(text).trim().split(/\\s+/);\n    if (words.length <= maxWords) return String(text).trim();\n    return `${words.slice(0, maxWords).join(\" \")}...`;\n};\nconst mapStrings = (value, fn)=>{\n    if (typeof value === \"string\") return fn(value);\n    if (Array.isArray(value)) return value.map((item)=>mapStrings(item, fn));\n    if (value && typeof value === \"object\") {\n        return Object.fromEntries(Object.entries(value).map(([key, val])=>[\n                key,\n                mapStrings(val, fn)\n            ]));\n    }\n    return value;\n};\nconst wordLimitCompress = (output, maxWords)=>{\n    if (typeof maxWords !== \"number\" || !Number.isFinite(maxWords) || maxWords <= 0) {\n        return {\n            output,\n            within: true\n        };\n    }\n    let current = output;\n    let total = countWordsInObject(current);\n    if (total <= maxWords) return {\n        output: current,\n        within: true\n    };\n    const passes = [\n        10,\n        8,\n        6,\n        4\n    ];\n    for (const limit of passes){\n        current = mapStrings(current, (text)=>trimWords(text, limit));\n        total = countWordsInObject(current);\n        if (total <= maxWords) return {\n            output: current,\n            within: true\n        };\n    }\n    current = mapStrings(current, (text)=>trimWords(text, 3));\n    total = countWordsInObject(current);\n    if (total <= maxWords) return {\n        output: current,\n        within: true\n    };\n    const totalStrings = countStringsInObject(current) || 1;\n    const perString = Math.max(1, Math.floor(maxWords / totalStrings));\n    current = mapStrings(current, (text)=>trimWords(text, perString));\n    total = countWordsInObject(current);\n    return {\n        output: current,\n        within: total <= maxWords\n    };\n};\nmodule.exports = {\n    wordLimitCompress\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsVUFBVVosV0FBV1ksU0FBUyxDQUFDbEMsT0FBU2UsVUFBVWYsTUFBTTtJQUN4RG1DLFFBQVE5QixtQkFBbUI2QjtJQUMzQixJQUFJQyxTQUFTbkIsVUFBVSxPQUFPO1FBQUVjLFFBQVFJO1FBQVNELFFBQVE7SUFBSztJQUU5RCxNQUFNSyxlQUFleEIscUJBQXFCb0IsWUFBWTtJQUN0RCxNQUFNSyxZQUFZQyxLQUFLQyxHQUFHLENBQUMsR0FBR0QsS0FBS0UsS0FBSyxDQUFDMUIsV0FBV3NCO0lBQ3BESixVQUFVWixXQUFXWSxTQUFTLENBQUNsQyxPQUFTZSxVQUFVZixNQUFNdUM7SUFDeERKLFFBQVE5QixtQkFBbUI2QjtJQUMzQixPQUFPO1FBQUVKLFFBQVFJO1FBQVNELFFBQVFFLFNBQVNuQjtJQUFTO0FBQ3REO0FBRUEyQixPQUFPQyxPQUFPLEdBQUc7SUFBRWY7QUFBa0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hYnV6YWRhL0Rlc2t0b3AvYWdlbnRPUy91dGlscy93b3JkTGltaXRDb21wcmVzcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb3VudFdvcmRzID0gKHRleHQpID0+IHtcbiAgaWYgKCF0ZXh0KSByZXR1cm4gMDtcbiAgY29uc3QgbWF0Y2hlcyA9IFN0cmluZyh0ZXh0KS5tYXRjaCgvW0EtWmEtetCQLdCv0LAt0Y8wLTlfXSsvZyk7XG4gIHJldHVybiBtYXRjaGVzID8gbWF0Y2hlcy5sZW5ndGggOiAwO1xufTtcblxuY29uc3QgY291bnRXb3Jkc0luT2JqZWN0ID0gKHZhbHVlKSA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHJldHVybiBjb3VudFdvcmRzKHZhbHVlKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gdmFsdWUucmVkdWNlKChhY2MsIGl0ZW0pID0+IGFjYyArIGNvdW50V29yZHNJbk9iamVjdChpdGVtKSwgMCk7XG4gIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh2YWx1ZSkucmVkdWNlKChhY2MsIGl0ZW0pID0+IGFjYyArIGNvdW50V29yZHNJbk9iamVjdChpdGVtKSwgMCk7XG4gIH1cbiAgcmV0dXJuIDA7XG59O1xuXG5jb25zdCBjb3VudFN0cmluZ3NJbk9iamVjdCA9ICh2YWx1ZSkgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSByZXR1cm4gMTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gdmFsdWUucmVkdWNlKChhY2MsIGl0ZW0pID0+IGFjYyArIGNvdW50U3RyaW5nc0luT2JqZWN0KGl0ZW0pLCAwKTtcbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHZhbHVlKS5yZWR1Y2UoKGFjYywgaXRlbSkgPT4gYWNjICsgY291bnRTdHJpbmdzSW5PYmplY3QoaXRlbSksIDApO1xuICB9XG4gIHJldHVybiAwO1xufTtcblxuY29uc3QgdHJpbVdvcmRzID0gKHRleHQsIG1heFdvcmRzKSA9PiB7XG4gIGlmICghdGV4dCkgcmV0dXJuIFwiXCI7XG4gIGNvbnN0IHdvcmRzID0gU3RyaW5nKHRleHQpLnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuICBpZiAod29yZHMubGVuZ3RoIDw9IG1heFdvcmRzKSByZXR1cm4gU3RyaW5nKHRleHQpLnRyaW0oKTtcbiAgcmV0dXJuIGAke3dvcmRzLnNsaWNlKDAsIG1heFdvcmRzKS5qb2luKFwiIFwiKX0uLi5gO1xufTtcblxuY29uc3QgbWFwU3RyaW5ncyA9ICh2YWx1ZSwgZm4pID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGZuKHZhbHVlKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gdmFsdWUubWFwKChpdGVtKSA9PiBtYXBTdHJpbmdzKGl0ZW0sIGZuKSk7XG4gIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgT2JqZWN0LmVudHJpZXModmFsdWUpLm1hcCgoW2tleSwgdmFsXSkgPT4gW2tleSwgbWFwU3RyaW5ncyh2YWwsIGZuKV0pXG4gICAgKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59O1xuXG5jb25zdCB3b3JkTGltaXRDb21wcmVzcyA9IChvdXRwdXQsIG1heFdvcmRzKSA9PiB7XG4gIGlmICh0eXBlb2YgbWF4V29yZHMgIT09IFwibnVtYmVyXCIgfHwgIU51bWJlci5pc0Zpbml0ZShtYXhXb3JkcykgfHwgbWF4V29yZHMgPD0gMCkge1xuICAgIHJldHVybiB7IG91dHB1dCwgd2l0aGluOiB0cnVlIH07XG4gIH1cblxuICBsZXQgY3VycmVudCA9IG91dHB1dDtcbiAgbGV0IHRvdGFsID0gY291bnRXb3Jkc0luT2JqZWN0KGN1cnJlbnQpO1xuICBpZiAodG90YWwgPD0gbWF4V29yZHMpIHJldHVybiB7IG91dHB1dDogY3VycmVudCwgd2l0aGluOiB0cnVlIH07XG5cbiAgY29uc3QgcGFzc2VzID0gWzEwLCA4LCA2LCA0XTtcbiAgZm9yIChjb25zdCBsaW1pdCBvZiBwYXNzZXMpIHtcbiAgICBjdXJyZW50ID0gbWFwU3RyaW5ncyhjdXJyZW50LCAodGV4dCkgPT4gdHJpbVdvcmRzKHRleHQsIGxpbWl0KSk7XG4gICAgdG90YWwgPSBjb3VudFdvcmRzSW5PYmplY3QoY3VycmVudCk7XG4gICAgaWYgKHRvdGFsIDw9IG1heFdvcmRzKSByZXR1cm4geyBvdXRwdXQ6IGN1cnJlbnQsIHdpdGhpbjogdHJ1ZSB9O1xuICB9XG5cbiAgY3VycmVudCA9IG1hcFN0cmluZ3MoY3VycmVudCwgKHRleHQpID0+IHRyaW1Xb3Jkcyh0ZXh0LCAzKSk7XG4gIHRvdGFsID0gY291bnRXb3Jkc0luT2JqZWN0KGN1cnJlbnQpO1xuICBpZiAodG90YWwgPD0gbWF4V29yZHMpIHJldHVybiB7IG91dHB1dDogY3VycmVudCwgd2l0aGluOiB0cnVlIH07XG5cbiAgY29uc3QgdG90YWxTdHJpbmdzID0gY291bnRTdHJpbmdzSW5PYmplY3QoY3VycmVudCkgfHwgMTtcbiAgY29uc3QgcGVyU3RyaW5nID0gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihtYXhXb3JkcyAvIHRvdGFsU3RyaW5ncykpO1xuICBjdXJyZW50ID0gbWFwU3RyaW5ncyhjdXJyZW50LCAodGV4dCkgPT4gdHJpbVdvcmRzKHRleHQsIHBlclN0cmluZykpO1xuICB0b3RhbCA9IGNvdW50V29yZHNJbk9iamVjdChjdXJyZW50KTtcbiAgcmV0dXJuIHsgb3V0cHV0OiBjdXJyZW50LCB3aXRoaW46IHRvdGFsIDw9IG1heFdvcmRzIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgd29yZExpbWl0Q29tcHJlc3MgfTtcbiJdLCJuYW1lcyI6WyJjb3VudFdvcmRzIiwidGV4dCIsIm1hdGNoZXMiLCJTdHJpbmciLCJtYXRjaCIsImxlbmd0aCIsImNvdW50V29yZHNJbk9iamVjdCIsInZhbHVlIiwiQXJyYXkiLCJpc0FycmF5IiwicmVkdWNlIiwiYWNjIiwiaXRlbSIsIk9iamVjdCIsInZhbHVlcyIsImNvdW50U3RyaW5nc0luT2JqZWN0IiwidHJpbVdvcmRzIiwibWF4V29yZHMiLCJ3b3JkcyIsInRyaW0iLCJzcGxpdCIsInNsaWNlIiwiam9pbiIsIm1hcFN0cmluZ3MiLCJmbiIsIm1hcCIsImZyb21FbnRyaWVzIiwiZW50cmllcyIsImtleSIsInZhbCIsIndvcmRMaW1pdENvbXByZXNzIiwib3V0cHV0IiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJ3aXRoaW4iLCJjdXJyZW50IiwidG90YWwiLCJwYXNzZXMiLCJsaW1pdCIsInRvdGFsU3RyaW5ncyIsInBlclN0cmluZyIsIk1hdGgiLCJtYXgiLCJmbG9vciIsIm1vZHVsZSIsImV4cG9ydHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./utils/wordLimitCompress.js\n");

/***/ })

};
;